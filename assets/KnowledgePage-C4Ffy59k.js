import{j as e}from"./pdf-vendor-CqWdlgKa.js";import{c as t,r as a}from"./zustand-vendor-BohoUguQ.js";import{t as n,p as s,s as r,h as i,n as l,v as o}from"./index-BALy7xcB.js";import{u as c,E as d,a as x}from"./timelineStore-CrC2_eKA.js";import"./react-vendor-DRPWudcR.js";import"./supabase-vendor-DWEVVlJw.js";const m={FOOTBALL:"Football",FUTSAL:"Futsal",HANDBALL:"Handball",VOLLEYBALL:"Volleyball",BASKETBALL:"Basketball"},u={[m.FOOTBALL]:{icon:"âš½",color:"bg-green-500/20 text-green-400 border-green-500/30"},[m.FUTSAL]:{icon:"ðŸ¥…",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},[m.HANDBALL]:{icon:"ðŸ¤¾",color:"bg-orange-500/20 text-orange-400 border-orange-500/30"},[m.VOLLEYBALL]:{icon:"ðŸ",color:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"},[m.BASKETBALL]:{icon:"ðŸ€",color:"bg-red-500/20 text-red-400 border-red-500/30"}},g={SEA:["Malaysia","Singapore","Indonesia","Thailand","Vietnam","Philippines","Myanmar","Cambodia","Laos","Brunei"],Gulf:["Saudi Arabia","UAE","Qatar","Kuwait","Bahrain","Oman"],Levant:["Jordan","Lebanon","Syria","Palestine","Iraq"],"Central Asia":["Kazakhstan","Uzbekistan","Turkmenistan","Tajikistan","Kyrgyzstan"],Afghanistan:["Afghanistan"]},p=[{sport:m.FOOTBALL,event_name:"Malaysian Super League",organization:"Football Malaysia",country:"Malaysia",region:"SEA",event_type:"league",tier:"national"},{sport:m.FOOTBALL,event_name:"AFF Championship",organization:"ASEAN Football Federation",country:"Regional",region:"SEA",event_type:"tournament",tier:"international"},{sport:m.FOOTBALL,event_name:"Thai League 1",organization:"Thai League",country:"Thailand",region:"SEA",event_type:"league",tier:"national"},{sport:m.FOOTBALL,event_name:"Liga 1 Indonesia",organization:"PSSI",country:"Indonesia",region:"SEA",event_type:"league",tier:"national"},{sport:m.FOOTBALL,event_name:"V.League 1",organization:"VFF",country:"Vietnam",region:"SEA",event_type:"league",tier:"national"},{sport:m.FOOTBALL,event_name:"Singapore Premier League",organization:"FAS",country:"Singapore",region:"SEA",event_type:"league",tier:"national"},{sport:m.FOOTBALL,event_name:"Saudi Pro League",organization:"SAFF",country:"Saudi Arabia",region:"Gulf",event_type:"league",tier:"national"},{sport:m.FOOTBALL,event_name:"UAE Pro League",organization:"UAE FA",country:"UAE",region:"Gulf",event_type:"league",tier:"national"},{sport:m.FOOTBALL,event_name:"Qatar Stars League",organization:"QFA",country:"Qatar",region:"Gulf",event_type:"league",tier:"national"},{sport:m.FOOTBALL,event_name:"Kuwait Premier League",organization:"KFA",country:"Kuwait",region:"Gulf",event_type:"league",tier:"national"},{sport:m.FOOTBALL,event_name:"Bahrain Premier League",organization:"BFA",country:"Bahrain",region:"Gulf",event_type:"league",tier:"national"},{sport:m.FOOTBALL,event_name:"Oman Professional League",organization:"OFA",country:"Oman",region:"Gulf",event_type:"league",tier:"national"},{sport:m.FOOTBALL,event_name:"Gulf Cup of Nations",organization:"Gulf Football Federation",country:"Regional",region:"Gulf",event_type:"tournament",tier:"international"},{sport:m.FOOTBALL,event_name:"Jordan Pro League",organization:"JFA",country:"Jordan",region:"Levant",event_type:"league",tier:"national"},{sport:m.FOOTBALL,event_name:"Lebanese Premier League",organization:"LFA",country:"Lebanon",region:"Levant",event_type:"league",tier:"national"},{sport:m.FOOTBALL,event_name:"Iraqi Premier League",organization:"IFA",country:"Iraq",region:"Levant",event_type:"league",tier:"national"},{sport:m.FOOTBALL,event_name:"West Bank Premier League",organization:"PFA",country:"Palestine",region:"Levant",event_type:"league",tier:"national"},{sport:m.FOOTBALL,event_name:"Kazakhstan Premier League",organization:"KFF",country:"Kazakhstan",region:"Central Asia",event_type:"league",tier:"national"},{sport:m.FOOTBALL,event_name:"Uzbekistan Super League",organization:"UFA",country:"Uzbekistan",region:"Central Asia",event_type:"league",tier:"national"},{sport:m.FOOTBALL,event_name:"Turkmenistan Higher League",organization:"FFT",country:"Turkmenistan",region:"Central Asia",event_type:"league",tier:"national"},{sport:m.FOOTBALL,event_name:"Tajikistan Higher League",organization:"TFF",country:"Tajikistan",region:"Central Asia",event_type:"league",tier:"national"},{sport:m.FOOTBALL,event_name:"Kyrgyzstan Premier League",organization:"KFU",country:"Kyrgyzstan",region:"Central Asia",event_type:"league",tier:"national"},{sport:m.FOOTBALL,event_name:"Afghan Premier League",organization:"AFF",country:"Afghanistan",region:"Afghanistan",event_type:"league",tier:"national"},{sport:m.FUTSAL,event_name:"AFF Futsal Championship",organization:"ASEAN Football Federation",country:"Regional",region:"SEA",event_type:"tournament",tier:"international"},{sport:m.FUTSAL,event_name:"Malaysia Futsal League",organization:"Football Malaysia",country:"Malaysia",region:"SEA",event_type:"league",tier:"national"},{sport:m.FUTSAL,event_name:"Thai Futsal League",organization:"Thai FA",country:"Thailand",region:"SEA",event_type:"league",tier:"national"},{sport:m.FUTSAL,event_name:"AFC Futsal Asian Cup",organization:"AFC",country:"Regional",region:"Gulf",event_type:"tournament",tier:"international"},{sport:m.HANDBALL,event_name:"Asian Handball Championship",organization:"AHF",country:"Regional",region:"SEA",event_type:"tournament",tier:"international"},{sport:m.HANDBALL,event_name:"Gulf Handball Championship",organization:"GHF",country:"Regional",region:"Gulf",event_type:"tournament",tier:"international"},{sport:m.HANDBALL,event_name:"Saudi Handball League",organization:"SAHF",country:"Saudi Arabia",region:"Gulf",event_type:"league",tier:"national"},{sport:m.HANDBALL,event_name:"Kuwait Handball League",organization:"KHF",country:"Kuwait",region:"Gulf",event_type:"league",tier:"national"},{sport:m.VOLLEYBALL,event_name:"AVC Cup",organization:"Asian Volleyball Confederation",country:"Regional",region:"SEA",event_type:"tournament",tier:"international"},{sport:m.VOLLEYBALL,event_name:"Thai Volleyball League",organization:"TVA",country:"Thailand",region:"SEA",event_type:"league",tier:"national"},{sport:m.VOLLEYBALL,event_name:"Indonesia Proliga",organization:"PBVSI",country:"Indonesia",region:"SEA",event_type:"league",tier:"national"},{sport:m.VOLLEYBALL,event_name:"Gulf Volleyball Championship",organization:"GVF",country:"Regional",region:"Gulf",event_type:"tournament",tier:"international"},{sport:m.BASKETBALL,event_name:"ASEAN Basketball League",organization:"ABL",country:"Regional",region:"SEA",event_type:"league",tier:"international"},{sport:m.BASKETBALL,event_name:"Philippines Basketball Association",organization:"PBA",country:"Philippines",region:"SEA",event_type:"league",tier:"national"},{sport:m.BASKETBALL,event_name:"Malaysia Basketball League",organization:"MABA",country:"Malaysia",region:"SEA",event_type:"league",tier:"national"},{sport:m.BASKETBALL,event_name:"Thai Basketball League",organization:"TBL",country:"Thailand",region:"SEA",event_type:"league",tier:"national"},{sport:m.BASKETBALL,event_name:"FIBA Asia Cup",organization:"FIBA Asia",country:"Regional",region:"Gulf",event_type:"tournament",tier:"international"}];function h(e){return{id:e.id,sport:e.sport,eventName:e.event_name,organization:e.organization,country:e.country,region:e.region,startDate:e.start_date,endDate:e.end_date,venue:e.venue,eventType:e.event_type,tier:e.tier,broadcastStatus:e.broadcast_status,estimatedValue:e.estimated_value,currency:e.currency||"USD",sourceUrl:e.source_url,notes:e.notes,contacts:e.contacts||[],convertedToOpportunityId:e.converted_to_opportunity_id,researchStatus:e.research_status,discoveredAt:e.discovered_at,updatedAt:e.updated_at}}function v(e){return{sport:e.sport,event_name:e.eventName,organization:e.organization,country:e.country,region:e.region,start_date:e.startDate||null,end_date:e.endDate||null,venue:e.venue,event_type:e.eventType,tier:e.tier,broadcast_status:e.broadcastStatus,estimated_value:e.estimatedValue||null,currency:e.currency||"USD",source_url:e.sourceUrl,notes:e.notes,contacts:e.contacts||[],converted_to_opportunity_id:e.convertedToOpportunityId||null,research_status:e.researchStatus||"new"}}const j=t(n((e,t)=>({events:[],loading:!1,error:null,lastResearchDate:null,initialize:async()=>{if(s()){e({loading:!0,error:null});try{const{data:a,error:n}=await r.from("sports_events").select("*").order("discovered_at",{ascending:!1});if(n)throw n;a&&a.length>0?e({events:a.map(h),loading:!1}):await t().seedKnownEvents()}catch(a){e({loading:!1,error:a.message})}}else e({loading:!1,error:"Supabase not configured"})},seedKnownEvents:async()=>{if(s())try{const t=p.map(e=>({...v({...e,eventName:e.event_name,eventType:e.event_type,researchStatus:"new"}),event_name:e.event_name,event_type:e.event_type})),{data:a,error:n}=await r.from("sports_events").insert(t).select();if(n)throw n;e({events:a?a.map(h):[],loading:!1,lastResearchDate:(new Date).toISOString()})}catch(t){e({loading:!1,error:t.message})}},addEvent:async t=>{if(!s())return null;try{const{data:a,error:n}=await r.from("sports_events").insert(v(t)).select().single();if(n)throw n;const s=h(a);return e(e=>({events:[s,...e.events]})),s}catch(a){return null}},updateEventStatus:async(t,a)=>{if(s())try{const{error:n}=await r.from("sports_events").update({research_status:a,updated_at:(new Date).toISOString()}).eq("id",t);if(n)throw n;e(e=>({events:e.events.map(e=>e.id===t?{...e,researchStatus:a}:e)}))}catch(n){}},convertToOpportunity:async(t,a)=>{if(s())try{const{error:n}=await r.from("sports_events").update({research_status:"converted",converted_to_opportunity_id:a,updated_at:(new Date).toISOString()}).eq("id",t);if(n)throw n;e(e=>({events:e.events.map(e=>e.id===t?{...e,researchStatus:"converted",convertedToOpportunityId:a}:e)}))}catch(n){}},getEventsBySport:e=>t().events.filter(t=>t.sport===e),getEventsByRegion:e=>t().events.filter(t=>t.region===e),getEventsByStatus:e=>t().events.filter(t=>t.researchStatus===e),getNewEvents:()=>t().events.filter(e=>"new"===e.researchStatus),getStats:()=>{const e=t().events,a={},n={},s={};return e.forEach(e=>{a[e.sport]=(a[e.sport]||0)+1,n[e.region]=(n[e.region]||0)+1,s[e.researchStatus]=(s[e.researchStatus]||0)+1}),{total:e.length,new:s.new||0,reviewed:s.reviewed||0,converted:s.converted||0,dismissed:s.dismissed||0,bySport:a,byRegion:n}},dismissEvent:async e=>{await t().updateEventStatus(e,"dismissed")},markReviewed:async e=>{await t().updateEventStatus(e,"reviewed")}})));function y({type:t}){const a=d[t]||d[x.RESEARCH_FINDING],n={search:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z","trending-up":"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6",users:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z",lightbulb:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z",trophy:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z","x-circle":"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z",send:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8","check-circle":"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z","book-open":"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253",brain:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z","message-circle":"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z",cpu:"M9 3v2m6-2v2M9 19v2m6-2v2M3 9h2m-2 6h2m14-6h2m-2 6h2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"};return e.jsx("div",{className:`w-8 h-8 rounded-lg ${a.bgColor} flex items-center justify-center flex-shrink-0`,children:e.jsx("svg",{className:`w-4 h-4 ${a.color}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:n[a.icon]||n.search})})})}function b({event:t,onExpand:n,onConvert:s}){const r=d[t.type]||d[x.RESEARCH_FINDING],[i,l]=a.useState(!1),[o,c]=a.useState(!1),m=[x.RESEARCH_FINDING,x.MARKET_INTEL,x.COMPETITOR_UPDATE].includes(t.type),u=m&&!t.convertedToOpportunity&&!t.relatedOpportunityId,g=new Date(t.timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),p=new Date(t.timestamp).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"relative pl-10 pb-6 group",children:[e.jsx("div",{className:"absolute left-[15px] top-8 bottom-0 w-px bg-gray-700 group-last:hidden"}),e.jsx("div",{className:"absolute left-0 top-0",children:e.jsx(y,{type:t.type})}),e.jsxs("div",{className:`card ${r.bgColor} ${r.borderColor} border hover:border-white/20 transition-all cursor-pointer`,onClick:()=>l(!i),children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[e.jsx("span",{className:`text-[10px] font-medium ${r.color} uppercase tracking-wide`,children:r.label}),t.verified&&e.jsx("span",{className:"text-[9px] bg-green-500/20 text-green-400 px-1.5 py-0.5 rounded",children:"Verified"}),t.agentName&&e.jsx("span",{className:"text-[9px] bg-gray-700/50 text-gray-400 px-1.5 py-0.5 rounded",children:t.agentName})]}),e.jsx("h4",{className:"text-sm font-medium text-gray-200 truncate",children:t.title})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsx("p",{className:"text-xs text-gray-500",children:g}),e.jsx("p",{className:"text-[10px] text-gray-600",children:p})]})]}),t.description&&e.jsx("p",{className:"text-xs text-gray-400 "+(i?"":"line-clamp-2"),children:t.description}),t.tags&&t.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[t.tags.slice(0,i?void 0:3).map((t,a)=>e.jsx("span",{className:"text-[10px] bg-gray-800/50 text-gray-400 px-1.5 py-0.5 rounded",children:t},a)),!i&&t.tags.length>3&&e.jsxs("span",{className:"text-[10px] text-gray-500",children:["+",t.tags.length-3," more"]})]}),i&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-700/50 space-y-2",children:[void 0!==t.confidence&&e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Confidence"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 h-1.5 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-amber-500 to-green-500 rounded-full",style:{width:100*(t.confidence||0)+"%"}})}),e.jsxs("span",{className:"text-gray-400",children:[(100*(t.confidence||0)).toFixed(0),"%"]})]})]}),void 0!==t.relevanceScore&&e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Relevance"}),e.jsxs("span",{className:"text-gray-400",children:[(100*(t.relevanceScore||0)).toFixed(0),"%"]})]}),t.region&&e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Region"}),e.jsx("span",{className:"text-gray-400",children:t.region})]}),t.sourceUrls&&t.sourceUrls.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Sources"}),t.sourceUrls.map((t,a)=>e.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"block text-xs text-blue-400 hover:text-blue-300 truncate",onClick:e=>e.stopPropagation(),children:t},a))]}),t.metadata?.recommendedAction&&e.jsxs("div",{className:"mt-2 p-2 bg-violet-500/10 rounded-lg",children:[e.jsx("p",{className:"text-[10px] text-violet-400 uppercase tracking-wide mb-1",children:"Recommended Action"}),e.jsx("p",{className:"text-xs text-gray-300",children:t.metadata.recommendedAction})]}),u&&e.jsx("button",{onClick:async e=>{if(e.stopPropagation(),u&&!o){c(!0);try{await s(t)}finally{c(!1)}}},disabled:o,className:"mt-3 w-full py-2 bg-green-500/20 hover:bg-green-500/30 border border-green-500/30 rounded-lg text-green-400 text-sm font-medium flex items-center justify-center gap-2 transition-colors disabled:opacity-50",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-green-400/30 border-t-green-400 rounded-full animate-spin"}),"Converting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})}),"Convert to Opportunity"]})}),(t.convertedToOpportunity||t.relatedOpportunityId)&&m&&e.jsxs("div",{className:"mt-3 py-2 bg-gray-700/50 rounded-lg text-gray-400 text-sm text-center flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Converted to Opportunity"]})]}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500 transition-transform "+(i?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})}function N({onClose:t,onSubmit:n}){const[s,r]=a.useState({title:"",description:"",organization:"",country:"",region:"",opportunityType:"streaming",urgency:5,budgetRange:"",recommendedAction:"",sourceUrls:"",tags:""});return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/75 backdrop-blur-md p-4",children:e.jsxs("div",{className:"bg-dark-card border border-dark-border rounded-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-dark-card border-b border-dark-border p-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-100",children:"Add Research Finding"}),e.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-white",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),await n({...s,type:"research_findings",sourceUrls:s.sourceUrls.split("\n").filter(Boolean),tags:s.tags.split(",").map(e=>e.trim()).filter(Boolean)}),t()},className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label label-required",children:"Title"}),e.jsx("input",{type:"text",value:s.title,onChange:e=>r({...s,title:e.target.value}),className:"input",placeholder:"e.g., Thai League Broadcast Tender",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label label-required",children:"Description"}),e.jsx("textarea",{value:s.description,onChange:e=>r({...s,description:e.target.value}),className:"input resize-none",rows:3,placeholder:"Detailed description of the finding...",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Organization"}),e.jsx("input",{type:"text",value:s.organization,onChange:e=>r({...s,organization:e.target.value}),className:"input",placeholder:"e.g., Thai Football League"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Country"}),e.jsx("input",{type:"text",value:s.country,onChange:e=>r({...s,country:e.target.value}),className:"input",placeholder:"e.g., Thailand"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Region"}),e.jsxs("select",{value:s.region,onChange:e=>r({...s,region:e.target.value}),className:"input",children:[e.jsx("option",{value:"",children:"Select region..."}),e.jsx("option",{value:"SEA",children:"SEA"}),e.jsx("option",{value:"GCC",children:"GCC"}),e.jsx("option",{value:"Central Asia",children:"Central Asia"}),e.jsx("option",{value:"Europe",children:"Europe"}),e.jsx("option",{value:"Africa",children:"Africa"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Opportunity Type"}),e.jsxs("select",{value:s.opportunityType,onChange:e=>r({...s,opportunityType:e.target.value}),className:"input",children:[e.jsx("option",{value:"streaming",children:"Streaming"}),e.jsx("option",{value:"production",children:"Production"}),e.jsx("option",{value:"consultancy",children:"Consultancy"}),e.jsx("option",{value:"broadcast",children:"Broadcast"}),e.jsx("option",{value:"graphics",children:"Graphics"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Urgency (1-10)"}),e.jsx("input",{type:"number",min:"1",max:"10",value:s.urgency,onChange:e=>r({...s,urgency:parseInt(e.target.value)}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Budget Range"}),e.jsx("input",{type:"text",value:s.budgetRange,onChange:e=>r({...s,budgetRange:e.target.value}),className:"input",placeholder:"e.g., $50k-100k"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Recommended Action"}),e.jsx("textarea",{value:s.recommendedAction,onChange:e=>r({...s,recommendedAction:e.target.value}),className:"input resize-none",rows:2,placeholder:"What should we do with this information?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Source URLs (one per line)"}),e.jsx("textarea",{value:s.sourceUrls,onChange:e=>r({...s,sourceUrls:e.target.value}),className:"input resize-none font-mono text-xs",rows:2,placeholder:"https://example.com/article"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Tags (comma-separated)"}),e.jsx("input",{type:"text",value:s.tags,onChange:e=>r({...s,tags:e.target.value}),className:"input",placeholder:"e.g., thailand, football, streaming"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-dark-border",children:[e.jsx("button",{type:"button",onClick:t,className:"btn-ghost",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Add Finding"})]})]})]})})}function f({onNavigateToOpportunity:t}){const{events:n,loading:s,error:r,filters:l,setFilters:o,clearFilters:x,getFilteredEvents:m,getStats:u,addResearchFinding:g,prepareOpportunityFromEvent:p,markEventAsConverted:h}=c(),{addOpportunity:v}=i(),[j,y]=a.useState(!1),[f,L]=a.useState([]),[w,k]=a.useState(null),A=async e=>{try{const a=p(e),n=await v(a);n&&(await h(e.id,n.id),k({eventTitle:e.title,opportunityId:n.id,opportunityTitle:n.title}),setTimeout(()=>k(null),5e3),t&&t(n.id))}catch(a){}},C=a.useMemo(()=>m(),[n,l]),S=a.useMemo(()=>u(),[n]),_=a.useMemo(()=>{const e={};return C.forEach(t=>{const a=new Date(t.timestamp).toISOString().split("T")[0];e[a]||(e[a]=[]),e[a].push(t)}),e},[C]),T=Object.keys(_).sort((e,t)=>new Date(t)-new Date(e)),F=e=>{const t=new Date(e),a=new Date,n=new Date(a);return n.setDate(n.getDate()-1),e===a.toISOString().split("T")[0]?"Today":e===n.toISOString().split("T")[0]?"Yesterday":t.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})};return s?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-400"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-100",children:"Research Timeline"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[S.total," events total, ",S.thisWeek," this week"]})]}),e.jsxs("button",{onClick:()=>y(!0),className:"btn-primary flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Finding"]})]}),e.jsxs("div",{className:"card bg-dark-card p-4 space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",value:l.searchQuery,onChange:e=>{o({searchQuery:e.target.value})},className:"input pl-10",placeholder:"Search events..."})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[Object.entries(d).slice(0,6).map(([t,a])=>e.jsx("button",{onClick:()=>(e=>{const t=f.includes(e)?f.filter(t=>t!==e):[...f,e];L(t),o({types:t})})(t),className:"text-xs px-2 py-1 rounded-lg border transition-colors "+(f.includes(t)?`${a.bgColor} ${a.borderColor} ${a.color}`:"bg-gray-800/50 border-gray-700 text-gray-400 hover:border-gray-600"),children:a.label},t)),f.length>0&&e.jsx("button",{onClick:()=>{L([]),x()},className:"text-xs px-2 py-1 text-gray-500 hover:text-gray-300",children:"Clear"})]})]}),r&&e.jsx("div",{className:"card bg-red-500/10 border-red-500/30 p-4 text-sm text-red-400",children:r}),w&&e.jsxs("div",{className:"card bg-green-500/10 border-green-500/30 p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-400 font-medium",children:"Opportunity Created"}),e.jsxs("p",{className:"text-xs text-gray-400",children:['"',w.eventTitle,'" converted to "',w.opportunityTitle,'"']})]})]}),e.jsx("button",{onClick:()=>k(null),className:"text-gray-400 hover:text-white p-1",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),0===T.length?e.jsxs("div",{className:"card bg-dark-card text-center py-12",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-600 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("h3",{className:"text-gray-400 font-medium mb-2",children:"No Research Events Yet"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Start adding research findings to build your intelligence timeline"}),e.jsx("button",{onClick:()=>y(!0),className:"btn-primary",children:"Add First Finding"})]}):e.jsx("div",{className:"space-y-6",children:T.map(t=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400",children:F(t)}),e.jsx("div",{className:"flex-1 h-px bg-gray-800"}),e.jsxs("span",{className:"text-xs text-gray-600",children:[_[t].length," events"]})]}),e.jsx("div",{className:"space-y-0",children:_[t].map(t=>e.jsx(b,{event:t,onConvert:A},t.id))})]},t))}),j&&e.jsx(N,{onClose:()=>y(!1),onSubmit:g})]})}function L({tags:t,onChange:n,placeholder:s="Add tags..."}){const[r,i]=a.useState("");return e.jsxs("div",{className:"flex flex-wrap gap-1.5 p-2 bg-dark-card border border-dark-border rounded-lg min-h-[44px]",children:[t.map(a=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-brand-teal/20 text-brand-teal text-xs rounded",children:[a,e.jsx("button",{onClick:()=>{return e=a,void n(t.filter(t=>t!==e));var e},className:"hover:text-white",children:"Ã—"})]},a)),e.jsx("input",{type:"text",value:r,onChange:e=>i(e.target.value),onKeyDown:e=>{if("Enter"===e.key||","===e.key){e.preventDefault();const a=r.trim().toLowerCase();a&&!t.includes(a)&&n([...t,a]),i("")}else"Backspace"===e.key&&!r&&t.length>0&&n(t.slice(0,-1))},placeholder:0===t.length?s:"",className:"flex-1 min-w-[100px] bg-transparent border-none outline-none text-sm text-gray-100 placeholder-gray-500"})]})}function w({onAdd:t}){const[n,s]=a.useState(""),[r,i]=a.useState(o.MARKET_INSIGHT),[l,c]=a.useState([]),[d,x]=a.useState(""),[m,u]=a.useState(!1);return e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-brand-teal",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Quick Knowledge Capture"]}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),n.trim()&&(await t({type:r,content:n.trim(),tags:l,region:d||null,source:"human_input",verified:!0}),s(""),c([]),x(""),u(!1))},className:"space-y-3",children:[e.jsx("textarea",{value:n,onChange:e=>s(e.target.value),onFocus:()=>u(!0),placeholder:"Just learned: Thai clubs prefer monthly payments over lump sum...",className:"input text-sm min-h-[80px] resize-none",rows:m?4:2}),m&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label text-xs",children:"Type"}),e.jsxs("select",{value:r,onChange:e=>i(e.target.value),className:"input-sm w-full",children:[e.jsx("option",{value:o.MARKET_INSIGHT,children:"Market Insight"}),e.jsx("option",{value:o.PRICING_STRATEGY,children:"Pricing Strategy"}),e.jsx("option",{value:o.CLIENT_PREFERENCE,children:"Client Preference"}),e.jsx("option",{value:o.COMPETITOR_INTEL,children:"Competitor Intel"}),e.jsx("option",{value:o.PROCESS_TIP,children:"Process Tip"}),e.jsx("option",{value:o.REGIONAL_PATTERN,children:"Regional Pattern"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label text-xs",children:"Region (optional)"}),e.jsxs("select",{value:d,onChange:e=>x(e.target.value),className:"input-sm w-full",children:[e.jsx("option",{value:"",children:"All Regions"}),e.jsx("option",{value:"GCC",children:"GCC"}),e.jsx("option",{value:"Central Asia",children:"Central Asia"}),e.jsx("option",{value:"SEA",children:"SEA"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label text-xs",children:"Tags"}),e.jsx(L,{tags:l,onChange:c,placeholder:"thailand, streaming, clubs..."})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{u(!1),s(""),c([])},className:"btn-ghost btn-sm",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:!n.trim(),className:"btn-primary btn-sm",children:"Add Knowledge"})]})]})]})]})}function k({item:t,type:a,onVerify:n,onReject:s}){const r="fragment"===a;return e.jsx("div",{className:"p-3 bg-amber-500/10 border border-amber-500/30 rounded-lg",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs px-2 py-0.5 rounded "+(r?"bg-blue-500/20 text-blue-400":"bg-purple-500/20 text-purple-400"),children:r?t.type.replace("_"," "):t.learningType}),t.region&&e.jsx("span",{className:"text-xs text-gray-500",children:t.region})]}),e.jsx("p",{className:"text-sm text-gray-200",children:r?t.content:t.lesson}),!r&&t.context&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Context: ",JSON.stringify(t.context).slice(0,100),"..."]}),t.tags&&t.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:t.tags.map(t=>e.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-gray-700 text-gray-400 rounded",children:t},t))})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>n(t.id),className:"p-1.5 rounded hover:bg-green-500/20 text-green-400 transition-colors",title:"Verify",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("button",{onClick:()=>s(t.id),className:"p-1.5 rounded hover:bg-red-500/20 text-red-400 transition-colors",title:"Reject",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})})}function A({fragment:t,onEdit:n,onDelete:s}){const[r,i]=a.useState(!1),[l,c]=a.useState(t.content),d={[o.MARKET_INSIGHT]:"bg-blue-500/20 text-blue-400 border-blue-500/30",[o.PRICING_STRATEGY]:"bg-green-500/20 text-green-400 border-green-500/30",[o.CLIENT_PREFERENCE]:"bg-purple-500/20 text-purple-400 border-purple-500/30",[o.COMPETITOR_INTEL]:"bg-red-500/20 text-red-400 border-red-500/30",[o.PROCESS_TIP]:"bg-amber-500/20 text-amber-400 border-amber-500/30",[o.REGIONAL_PATTERN]:"bg-cyan-500/20 text-cyan-400 border-cyan-500/30"};return e.jsxs("div",{className:"card hover:border-gray-700 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:`text-xs px-2 py-0.5 rounded border ${d[t.type]||"bg-gray-500/20 text-gray-400 border-gray-500/30"}`,children:t.type.replace("_"," ")}),t.region&&e.jsx("span",{className:"text-xs text-gray-500",children:t.region}),t.verified&&e.jsxs("span",{className:"text-xs text-green-400 flex items-center gap-0.5",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Verified"]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>i(!r),className:"p-1 text-gray-500 hover:text-gray-300",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),e.jsx("button",{onClick:()=>s(t.id),className:"p-1 text-gray-500 hover:text-red-400",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),r?e.jsxs("div",{className:"space-y-2",children:[e.jsx("textarea",{value:l,onChange:e=>c(e.target.value),className:"input text-sm min-h-[60px] resize-none"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>i(!1),className:"btn-ghost btn-sm",children:"Cancel"}),e.jsx("button",{onClick:()=>{n(t.id,{content:l}),i(!1)},className:"btn-primary btn-sm",children:"Save"})]})]}):e.jsx("p",{className:"text-sm text-gray-300",children:t.content}),t.tags&&t.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-3",children:t.tags.map(t=>e.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-gray-700/50 text-gray-400 rounded",children:t},t))}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-dark-border text-xs text-gray-500",children:[e.jsxs("span",{children:["Confidence: ",(100*t.confidence).toFixed(0),"%"]}),e.jsxs("span",{children:["Impact: ",t.impactScore?.toFixed(2)||"0.00"]}),e.jsxs("span",{children:["Used: ",t.usageCount||0,"x"]})]})]})}function C({stats:t}){return e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-brand-teal",children:t.verifiedFragments}),e.jsx("div",{className:"text-xs text-gray-500",children:"Verified Knowledge"})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-400",children:t.pendingVerification}),e.jsx("div",{className:"text-xs text-gray-500",children:"Pending Review"})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-400",children:t.verifiedLearnings}),e.jsx("div",{className:"text-xs text-gray-500",children:"Deal Learnings"})]}),e.jsxs("div",{className:"card text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[(100*t.avgConfidence).toFixed(0),"%"]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Avg Confidence"})]})]})}function S({event:t,onMarkReviewed:a,onDismiss:n,onConvert:s}){const r=u[t.sport]||{icon:"ðŸ†",color:"bg-gray-500/20 text-gray-400 border-gray-500/30"},i="converted"===t.researchStatus,l="dismissed"===t.researchStatus;return e.jsxs("div",{className:"card hover:border-gray-700 transition-colors "+(l?"opacity-50":""),children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-lg",children:r.icon}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded border ${r.color}`,children:t.sport}),t.tier&&e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-gray-700/50 text-gray-400",children:t.tier}),t.eventType&&e.jsx("span",{className:"text-xs text-gray-500",children:t.eventType})]}),e.jsx("div",{className:"flex gap-1",children:!i&&!l&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>a(t.id),className:"p-1.5 text-gray-500 hover:text-blue-400 transition-colors",title:"Mark as Reviewed",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("button",{onClick:()=>n(t.id),className:"p-1.5 text-gray-500 hover:text-red-400 transition-colors",title:"Dismiss",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]}),e.jsx("h3",{className:"text-sm font-medium text-gray-200 mb-1",children:t.eventName}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-gray-500 mb-2",children:[t.organization&&e.jsx("span",{children:t.organization}),t.country&&e.jsxs("span",{children:["â€¢ ",t.country]}),t.region&&e.jsxs("span",{children:["â€¢ ",t.region]})]}),(t.startDate||t.venue)&&e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-gray-500 mb-2",children:[t.startDate&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),t.startDate,t.endDate&&` - ${t.endDate}`]}),t.venue&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})}),t.venue]})]}),t.notes&&e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:t.notes}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-dark-border",children:[e.jsx("span",{className:"text-xs px-2 py-0.5 rounded "+(i?"bg-green-500/20 text-green-400":l?"bg-gray-500/20 text-gray-500":"reviewed"===t.researchStatus?"bg-blue-500/20 text-blue-400":"bg-amber-500/20 text-amber-400"),children:"new"===t.researchStatus?"New":"reviewed"===t.researchStatus?"Reviewed":"converted"===t.researchStatus?"Converted":"Dismissed"}),!i&&!l&&e.jsxs("button",{onClick:()=>s(t),className:"btn-primary btn-sm flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),"Convert to Opportunity"]})]})]})}function _(){const{events:t,loading:n,error:s,initialize:r,markReviewed:l,dismissEvent:o,convertToOpportunity:c,getStats:d}=j(),{addOpportunity:x}=i(),[p,h]=a.useState("all"),[v,y]=a.useState("all"),[b,N]=a.useState("all"),[f,L]=a.useState(null);a.useEffect(()=>{r()},[r]);const w=a.useMemo(()=>d(),[t]),k=a.useMemo(()=>t.filter(e=>("all"===p||e.sport===p)&&(("all"===v||e.region===v)&&("all"===b||e.researchStatus===b))),[t,p,v,b]),A=async e=>{const t={title:e.eventName,country:"Regional"===e.country?"":e.country,region:e.region,source:`Sports Research: ${e.sport}`,brief:`${e.eventType||"Event"} - ${e.organization||"Unknown organization"}`,notes:[e.notes,e.venue?`Venue: ${e.venue}`:null,e.startDate?`Dates: ${e.startDate}${e.endDate?` - ${e.endDate}`:""}`:null,e.broadcastStatus?`Broadcast: ${e.broadcastStatus}`:null].filter(Boolean).join("\n"),value:e.estimatedValue||0,currency:e.currency||"USD",stage:"lead",status:"active"},a=await x(t);a&&(await c(e.id,a.id),L({eventName:e.eventName,oppId:a.id}),setTimeout(()=>L(null),3e3))};return n?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"text-gray-400",children:"Loading sports events..."})}):s?e.jsxs("div",{className:"p-4 bg-red-500/10 border border-red-500/30 rounded-lg",children:[e.jsx("p",{className:"text-sm text-red-400",children:s}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Run ",e.jsx("code",{className:"bg-gray-800 px-1 rounded",children:"supabase-complete-setup.sql"})," in Supabase SQL editor to create required tables."]})]}):e.jsxs("div",{children:[f&&e.jsx("div",{className:"fixed bottom-4 right-4 z-50 bg-green-500/20 border border-green-500/30 rounded-lg p-4 shadow-lg animate-fade-in",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-400 font-medium",children:"Converted to Opportunity"}),e.jsx("p",{className:"text-xs text-gray-400",children:f.eventName})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3 mb-6",children:[e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-brand-teal",children:w.total}),e.jsx("div",{className:"text-xs text-gray-500",children:"Total Events"})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-400",children:w.new}),e.jsx("div",{className:"text-xs text-gray-500",children:"New"})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:w.reviewed}),e.jsx("div",{className:"text-xs text-gray-500",children:"Reviewed"})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:w.converted}),e.jsx("div",{className:"text-xs text-gray-500",children:"Converted"})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-500",children:w.dismissed}),e.jsx("div",{className:"text-xs text-gray-500",children:"Dismissed"})]})]}),e.jsx("div",{className:"grid grid-cols-5 gap-2 mb-6",children:Object.entries(m).map(([t,a])=>{const n=u[a],s=w.bySport[a]||0;return e.jsxs("button",{onClick:()=>h(p===a?"all":a),className:"card text-center py-3 transition-all cursor-pointer "+(p===a?"ring-2 ring-brand-teal":"hover:border-gray-600"),children:[e.jsx("div",{className:"text-2xl mb-1",children:n.icon}),e.jsx("div",{className:"text-xs text-gray-400",children:a}),e.jsx("div",{className:"text-sm font-bold text-gray-200",children:s})]},t)})}),e.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[e.jsxs("select",{value:v,onChange:e=>y(e.target.value),className:"input-sm",children:[e.jsx("option",{value:"all",children:"All Regions"}),Object.keys(g).map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:b,onChange:e=>N(e.target.value),className:"input-sm",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"reviewed",children:"Reviewed"}),e.jsx("option",{value:"converted",children:"Converted"}),e.jsx("option",{value:"dismissed",children:"Dismissed"})]}),("all"!==p||"all"!==v||"all"!==b)&&e.jsx("button",{onClick:()=>{h("all"),y("all"),N("all")},className:"btn-ghost btn-sm",children:"Clear Filters"})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:0===k.length?e.jsxs("div",{className:"col-span-full card text-center py-12",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-600 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-400 mb-2",children:"No events found"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Adjust filters or wait for auto-research to discover events."})]}):k.map(t=>e.jsx(S,{event:t,onMarkReviewed:l,onDismiss:o,onConvert:A},t.id))})]})}function T(){const{fragments:t,learnings:n,loading:s,error:r,initialize:i,addFragment:d,updateFragment:x,verifyFragment:m,deleteFragment:u,verifyLearning:g,getPendingReview:p,getStats:h}=l(),v=c(e=>e.initialize),[j,y]=a.useState("sports"),[b,N]=a.useState("all"),[L,S]=a.useState("all"),[T,F]=a.useState(""),[B,E]=a.useState(!1);a.useEffect(()=>{i(),v()},[i,v]);const O=a.useMemo(()=>h(),[t,n]),z=a.useMemo(()=>p(),[t,n]),M=a.useMemo(()=>t.filter(e=>{if("all"!==b&&e.type!==b)return!1;if("all"!==L&&e.region!==L)return!1;if(T){const t=T.toLowerCase(),a=e.content.toLowerCase().includes(t),n=e.tags.some(e=>e.toLowerCase().includes(t));if(!a&&!n)return!1}return!0}),[t,b,L,T]),R=async e=>{};return s?e.jsx("div",{className:"h-[calc(100vh-60px)] flex items-center justify-center",children:e.jsx("div",{className:"text-gray-400",children:"Loading knowledge base..."})}):e.jsxs("div",{className:"h-[calc(100vh-60px)] overflow-y-auto p-3 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl sm:text-2xl font-bold text-gray-100 flex items-center gap-2",children:[e.jsx("svg",{className:"w-6 h-6 text-brand-teal",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Research"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Sports events, market intelligence, and knowledge base"})]}),e.jsx("div",{className:"flex items-center gap-3",children:z.totalCount>0&&"knowledge"===j&&e.jsxs("button",{onClick:()=>E(!B),className:"btn-sm flex items-center gap-2 "+(B?"btn-primary":"bg-amber-500/20 border border-amber-500/30 text-amber-400 hover:bg-amber-500/30"),children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-amber-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-amber-400"})]}),z.totalCount," Pending Review"]})})]}),e.jsxs("div",{className:"flex gap-1 mb-6 bg-dark-card p-1 rounded-lg border border-dark-border w-fit",children:[e.jsx("button",{onClick:()=>y("knowledge"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors "+("knowledge"===j?"bg-brand-teal/20 text-brand-teal":"text-gray-400 hover:text-gray-200 hover:bg-white/5"),children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),"Knowledge"]})}),e.jsx("button",{onClick:()=>y("timeline"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors "+("timeline"===j?"bg-blue-500/20 text-blue-400":"text-gray-400 hover:text-gray-200 hover:bg-white/5"),children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Research Timeline"]})}),e.jsx("button",{onClick:()=>y("sports"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors "+("sports"===j?"bg-green-500/20 text-green-400":"text-gray-400 hover:text-gray-200 hover:bg-white/5"),children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm",children:"âš½"}),"Sports Research"]})})]}),r&&e.jsx("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/30 rounded-lg text-sm text-red-400",children:r}),"timeline"===j&&e.jsx(f,{}),"sports"===j&&e.jsx(_,{}),"knowledge"===j&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6",children:e.jsx(C,{stats:O})}),B&&z.totalCount>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-200 mb-3",children:"Pending Review"}),e.jsxs("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:[z.fragments.map(t=>e.jsx(k,{item:t,type:"fragment",onVerify:m,onReject:u},t.id)),z.learnings.map(t=>e.jsx(k,{item:t,type:"learning",onVerify:g,onReject:R},t.id))]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx(w,{onAdd:d}),e.jsxs("div",{className:"card mt-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"Knowledge by Type"}),e.jsxs("div",{className:"space-y-2",children:[Object.entries(O.byType).map(([t,a])=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400 capitalize",children:t.replace("_"," ")}),e.jsx("span",{className:"text-gray-300",children:a})]},t)),0===Object.keys(O.byType).length&&e.jsx("p",{className:"text-sm text-gray-500",children:"No knowledge yet"})]})]})]}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx("input",{type:"text",value:T,onChange:e=>F(e.target.value),placeholder:"Search knowledge...",className:"input-sm w-full pl-9"}),e.jsx("svg",{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),e.jsxs("select",{value:b,onChange:e=>N(e.target.value),className:"input-sm",children:[e.jsx("option",{value:"all",children:"All Types"}),Object.entries(o).map(([t,a])=>e.jsx("option",{value:a,children:a.replace("_"," ")},t))]}),e.jsxs("select",{value:L,onChange:e=>S(e.target.value),className:"input-sm",children:[e.jsx("option",{value:"all",children:"All Regions"}),e.jsx("option",{value:"GCC",children:"GCC"}),e.jsx("option",{value:"Central Asia",children:"Central Asia"}),e.jsx("option",{value:"SEA",children:"SEA"})]})]}),e.jsx("div",{className:"space-y-3",children:0===M.length?e.jsxs("div",{className:"card text-center py-12",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-600 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-400 mb-2",children:"No knowledge yet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Start adding market insights, pricing strategies, and learnings."})]}):M.map(t=>e.jsx(A,{fragment:t,onEdit:x,onDelete:u},t.id))})]})]})]})]})}export{T as default};
