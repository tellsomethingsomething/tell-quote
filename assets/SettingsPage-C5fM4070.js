import{j as e,p as a}from"./pdf-vendor-CqWdlgKa.js";import{r as s}from"./zustand-vendor-BohoUguQ.js";import{b as t,C as l}from"./index-C7qu-N0F.js";import"./react-vendor-DRPWudcR.js";import"./supabase-vendor-DWEVVlJw.js";const r=[{name:"Professional Navy",primary:"#143642",accent:"#0F8B8D",line:"#143642"},{name:"Modern Blue",primary:"#1E40AF",accent:"#3B82F6",line:"#1E40AF"},{name:"Corporate Gray",primary:"#374151",accent:"#6B7280",line:"#374151"},{name:"Elegant Purple",primary:"#5B21B6",accent:"#8B5CF6",line:"#5B21B6"},{name:"Classic Green",primary:"#065F46",accent:"#10B981",line:"#065F46"}];function n(){const{settings:n,setPdfOptions:i}=t(),c=n.pdfOptions||{},[d,m]=s.useState(!1),[x,p]=s.useState("colors"),h=(e,a)=>{i({[e]:a})};return e.jsxs("div",{className:"flex flex-col h-full bg-dark-bg",children:[e.jsx("div",{className:"bg-dark-card border-b border-dark-border p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-100",children:"PDF Styling"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Customize colors and fonts for your quote PDFs"})]}),e.jsx("button",{onClick:async()=>{m(!0);try{const s=(e=>({quoteNumber:"QT-2024-001",createdAt:(new Date).toISOString(),validityDays:30,currency:"USD",client:{company:"Acme Corporation",contact:"John Smith",email:"john@acme.com",phone:"+1 555 123 4567"},project:{title:"Corporate Event Production",venue:"Grand Ballroom, Hilton Hotel",startDate:(new Date).toISOString(),endDate:new Date(Date.now()+2592e5).toISOString(),type:"Event"},preparedBy:e.users?.[0]?.id,sections:{productionTeam:{id:"productionTeam",name:"Production Team",color:"#3B82F6",subsections:{Camera:[{id:"1",name:"Camera Operator",quantity:2,days:3,cost:400,charge:600},{id:"2",name:"Camera Assistant",quantity:1,days:3,cost:250,charge:400}],Audio:[{id:"3",name:"Audio Engineer",quantity:1,days:3,cost:450,charge:650}]}},productionEquipment:{id:"productionEquipment",name:"Production Equipment",color:"#10B981",subsections:{"Camera Package":[{id:"4",name:"Sony FX6 Camera Kit",quantity:2,days:3,cost:300,charge:500}],"Audio Package":[{id:"5",name:"Wireless Mic System",quantity:4,days:3,cost:50,charge:100}]}}},sectionOrder:["productionTeam","productionEquipment"],fees:{managementFee:10,commissionFee:0,discount:0,distributeFees:!1}}))(n),t=await a(e.jsx(l,{quote:s,currency:"USD"})).toBlob(),r=URL.createObjectURL(t);window.open(r,"_blank"),setTimeout(()=>URL.revokeObjectURL(r),5e3)}catch(s){alert("Failed to generate preview. Check console for details.")}finally{m(!1)}},disabled:d,className:"btn-primary flex items-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Preview PDF"]})})]})}),e.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[e.jsx("div",{className:"w-36 bg-dark-card border-r border-dark-border p-2 flex flex-col gap-1",children:[{id:"colors",label:"Colors",icon:"ðŸŽ¨"},{id:"fonts",label:"Fonts",icon:"âœï¸"},{id:"display",label:"Display",icon:"ðŸ‘ï¸"}].map(a=>e.jsxs("button",{onClick:()=>p(a.id),className:"w-full text-left px-3 py-2.5 rounded-lg text-sm flex items-center gap-2 transition-colors "+(x===a.id?"bg-accent-primary/20 text-accent-primary":"text-gray-400 hover:bg-white/5 hover:text-gray-200"),children:[e.jsx("span",{children:a.icon}),a.label]},a.id))}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"max-w-xl",children:["colors"===x&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-200 mb-4",children:"Color Presets"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:r.map((a,s)=>e.jsxs("button",{onClick:()=>(e=>{i({primaryColor:e.primary,accentColor:e.accent,lineColor:e.line})})(a),className:"p-3 rounded-lg border border-dark-border hover:border-gray-600 transition-all group text-left",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-5 h-5 rounded",style:{backgroundColor:a.primary}}),e.jsx("div",{className:"w-5 h-5 rounded",style:{backgroundColor:a.accent}})]}),e.jsx("span",{className:"text-xs text-gray-400 group-hover:text-gray-300",children:a.name})]},s))})]}),e.jsxs("div",{className:"border-t border-dark-border pt-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-200 mb-4",children:"Custom Colors"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(o,{label:"Primary Color (Headers, titles)",value:c.primaryColor||"#143642",onChange:e=>h("primaryColor",e)}),e.jsx(o,{label:"Accent Color (Labels)",value:c.accentColor||"#0F8B8D",onChange:e=>h("accentColor",e)}),e.jsx(o,{label:"Line Color (All lines & borders)",value:c.lineColor||"#143642",onChange:e=>h("lineColor",e)}),e.jsx(o,{label:"Text Color (Body text)",value:c.textColor||"#374151",onChange:e=>h("textColor",e)}),e.jsx(o,{label:"Muted Color (Secondary text)",value:c.mutedColor||"#6B7280",onChange:e=>h("mutedColor",e)})]})]})]}),"fonts"===x&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Font Family"}),e.jsxs("select",{value:c.fontFamily||"Helvetica",onChange:e=>h("fontFamily",e.target.value),className:"input w-full",children:[e.jsx("option",{value:"Helvetica",children:"Helvetica (Clean, Modern)"}),e.jsx("option",{value:"Times-Roman",children:"Times Roman (Classic)"}),e.jsx("option",{value:"Courier",children:"Courier (Monospace)"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Note: PDF fonts are limited to these built-in options for compatibility."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Base Font Size"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"range",min:"8",max:"12",value:c.baseFontSize||10,onChange:e=>h("baseFontSize",parseInt(e.target.value)),className:"flex-1 h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-accent-primary"}),e.jsxs("span",{className:"text-sm text-gray-300 font-mono w-8",children:[c.baseFontSize||10,"pt"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Controls the body text size. Headers scale proportionally."})]})]}),"display"===x&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Choose what information to show on your PDF quotes."}),[{key:"showLogo",label:"Company Logo"},{key:"showCompanyAddress",label:"Company Address"},{key:"showCompanyPhone",label:"Company Phone"},{key:"showCompanyEmail",label:"Company Email"},{key:"showTaxNumber",label:"Tax Number"},{key:"showBankDetails",label:"Bank Details"}].map(({key:a,label:s})=>e.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg bg-dark-card border border-dark-border hover:border-gray-600 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:!1!==c[a],onChange:e=>h(a,e.target.checked),className:"w-5 h-5 rounded bg-dark-bg border-dark-border text-accent-primary focus:ring-accent-primary"}),e.jsx("span",{className:"text-gray-300",children:s})]},a))]})]})}),e.jsxs("div",{className:"w-80 bg-dark-card border-l border-dark-border p-4 overflow-y-auto",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-200 mb-4",children:"Color Preview"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg overflow-hidden border border-dark-border",style:{backgroundColor:c.backgroundColor||"#FFFFFF"},children:[e.jsx("div",{className:"p-3",style:{backgroundColor:c.primaryColor||"#143642"},children:e.jsx("div",{className:"text-white text-xs font-bold",children:"QUOTE"})}),e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsx("div",{className:"text-sm font-bold",style:{color:c.primaryColor||"#143642"},children:"Project Title"}),e.jsx("div",{className:"text-xs",style:{color:c.textColor||"#374151"},children:"Body text appears in this color"}),e.jsx("div",{className:"text-xs",style:{color:c.mutedColor||"#6B7280"},children:"Secondary info in muted color"}),e.jsx("div",{className:"text-sm font-bold mt-3 pt-2 border-t",style:{color:c.accentColor||"#0F8B8D",borderColor:(c.accentColor||"#0F8B8D")+"30"},children:"Total: $1,234.00"})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:'Click "Preview PDF" to see how your quote will look with these colors.'})]})]})]})]})}function o({label:a,value:s,onChange:t}){return e.jsxs("div",{children:[e.jsx("label",{className:"label",children:a}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"color",value:s,onChange:e=>t(e.target.value),className:"w-12 h-10 rounded cursor-pointer bg-transparent border border-dark-border"}),e.jsx("input",{type:"text",value:s,onChange:e=>t(e.target.value),placeholder:"#000000",className:"input flex-1 font-mono text-sm"})]})]})}const i=[{id:"company",label:"Company"},{id:"tax",label:"Tax & Legal"},{id:"bank",label:"Bank Details"},{id:"users",label:"Users"},{id:"quote",label:"Quote Defaults"},{id:"terms",label:"Terms & Conditions"},{id:"customize",label:"Customization"},{id:"pdf",label:"PDF Options"},{id:"invoice",label:"Quote Templates"},{id:"ai",label:"AI Features"},{id:"activity",label:"Activity Log"}];function c(){const{settings:a,setCompanyInfo:l,setTaxInfo:r,setBankDetails:o,setQuoteDefaults:c,setPdfOptions:d,setAiSettings:m,addUser:x,updateUser:p,deleteUser:h,addProjectType:u,updateProjectType:g,deleteProjectType:b,moveProjectType:y,addRegion:j,updateRegion:v,deleteRegion:N,moveRegion:f,clearActivityLog:k,exportActivityLog:C}=t(),[w,D]=s.useState("company"),[L,S]=s.useState(!1),[A,F]=s.useState({name:"",email:""}),[B,T]=s.useState(""),[P,M]=s.useState({label:"",currency:"USD"}),[E,R]=s.useState(!1),I=s.useRef(null),q=()=>{R(!0),I.current&&clearTimeout(I.current),I.current=setTimeout(()=>R(!1),2e3)};s.useEffect(()=>()=>{I.current&&clearTimeout(I.current)},[]);const U=e=>{l(e),q()},W=e=>{r(e),q()},z=e=>{o(e),q()},G=e=>{c(e),q()},O=e=>{m(e),q()},K=(e,a)=>{p(e,a),q()};return e.jsxs("div",{className:"h-[calc(100vh-60px)] flex flex-col md:flex-row",children:[e.jsxs("div",{className:"md:hidden bg-dark-card border-b border-dark-border p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-100",children:"Settings"}),E&&e.jsxs("span",{className:"text-xs text-green-400 flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Saved"]})]}),e.jsx("div",{className:"flex gap-1 overflow-x-auto pb-2 -mx-3 px-3",children:i.map(a=>e.jsx("button",{onClick:()=>D(a.id),className:"flex-shrink-0 px-3 py-2 rounded-lg text-sm transition-colors min-h-[40px] "+(w===a.id?"bg-accent-primary/20 text-accent-primary":"text-gray-400 hover:bg-white/5 hover:text-gray-200"),children:a.label},a.id))})]}),e.jsxs("div",{className:"hidden md:block w-48 bg-dark-card border-r border-dark-border p-4 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-100",children:"Settings"}),E&&e.jsxs("span",{className:"text-xs text-green-400 flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Saved"]})]}),e.jsx("nav",{className:"space-y-1",children:i.map(a=>e.jsx("button",{onClick:()=>D(a.id),className:"w-full text-left px-3 py-2 rounded-lg text-sm transition-colors min-h-[44px] "+(w===a.id?"bg-accent-primary/20 text-accent-primary":"text-gray-400 hover:bg-white/5 hover:text-gray-200"),children:a.label},a.id))})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:["company"===w&&e.jsxs("div",{className:"max-w-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-100 mb-6",children:"Company Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Company Logo"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-32 h-16 bg-dark-card border border-dark-border rounded-lg flex items-center justify-center overflow-hidden",children:a.company.logo?e.jsx("img",{src:a.company.logo,alt:"Company logo",className:"max-w-full max-h-full object-contain"}):e.jsx("span",{className:"text-gray-500 text-xs",children:"No logo"})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"btn-secondary text-sm cursor-pointer",children:["Upload Logo",e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{const a=e.target.files?.[0];if(a){const e=new FileReader;e.onload=e=>{U({logo:e.target.result})},e.readAsDataURL(a)}}})]}),a.company.logo&&e.jsx("button",{onClick:()=>U({logo:null}),className:"text-xs text-red-400 hover:text-red-300",children:"Remove"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Recommended: PNG or SVG, max 200x100px"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Company Name"}),e.jsx("input",{type:"text",value:a.company.name,onChange:e=>U({name:e.target.value}),className:"input",placeholder:"Your Company Name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Address"}),e.jsx("textarea",{value:a.company.address,onChange:e=>U({address:e.target.value}),className:"input resize-none",rows:2,placeholder:"Street address"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"City"}),e.jsx("input",{type:"text",value:a.company.city,onChange:e=>U({city:e.target.value}),className:"input",placeholder:"City"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Country"}),e.jsx("input",{type:"text",value:a.company.country,onChange:e=>U({country:e.target.value}),className:"input",placeholder:"Country"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Phone"}),e.jsx("input",{type:"tel",value:a.company.phone,onChange:e=>U({phone:e.target.value}),className:"input",placeholder:"+60 3 1234 5678"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Email"}),e.jsx("input",{type:"email",value:a.company.email,onChange:e=>U({email:e.target.value}),className:"input",placeholder:"info@company.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Website"}),e.jsx("input",{type:"url",value:a.company.website,onChange:e=>U({website:e.target.value}),className:"input",placeholder:"https://www.company.com"})]})]})]}),"tax"===w&&e.jsxs("div",{className:"max-w-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-100 mb-6",children:"Tax & Legal Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Tax Registration Number"}),e.jsx("input",{type:"text",value:a.taxInfo.taxNumber,onChange:e=>W({taxNumber:e.target.value}),className:"input",placeholder:"e.g. GST-123456789"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Business Registration Number"}),e.jsx("input",{type:"text",value:a.taxInfo.registrationNumber,onChange:e=>W({registrationNumber:e.target.value}),className:"input",placeholder:"e.g. 123456-A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Licenses / Certifications"}),e.jsx("textarea",{value:a.taxInfo.licenses,onChange:e=>W({licenses:e.target.value}),className:"input resize-none",rows:3,placeholder:"List any relevant licenses or certifications"})]})]})]}),"bank"===w&&e.jsxs("div",{className:"max-w-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-100 mb-6",children:"Bank Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Bank Name"}),e.jsx("input",{type:"text",value:a.bankDetails.bankName,onChange:e=>z({bankName:e.target.value}),className:"input",placeholder:"e.g. Maybank"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Account Name"}),e.jsx("input",{type:"text",value:a.bankDetails.accountName,onChange:e=>z({accountName:e.target.value}),className:"input",placeholder:"Account holder name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Account Number"}),e.jsx("input",{type:"text",value:a.bankDetails.accountNumber,onChange:e=>z({accountNumber:e.target.value}),className:"input",placeholder:"1234567890"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"SWIFT Code"}),e.jsx("input",{type:"text",value:a.bankDetails.swiftCode,onChange:e=>z({swiftCode:e.target.value}),className:"input",placeholder:"MBBEMYKL"})]})]})]})]}),"users"===w&&e.jsxs("div",{className:"max-w-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-100",children:"Team Members"}),e.jsx("button",{onClick:()=>S(!0),className:"btn-primary text-sm",children:"+ Add User"})]}),L&&e.jsxs("div",{className:"card mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-3",children:"New Team Member"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsx("input",{type:"text",value:A.name,onChange:e=>F({...A,name:e.target.value}),className:"input",placeholder:"Name",autoFocus:!0}),e.jsx("input",{type:"email",value:A.email,onChange:e=>F({...A,email:e.target.value}),className:"input",placeholder:"Email"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{A.name.trim()&&(x(A),F({name:"",email:""}),S(!1))},className:"btn-primary text-sm",children:"Add"}),e.jsx("button",{onClick:()=>S(!1),className:"btn-ghost text-sm",children:"Cancel"})]})]}),e.jsx("div",{className:"space-y-2",children:a.users.map(s=>e.jsxs("div",{className:"card flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-accent-primary to-accent-secondary flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:s.name.substring(0,2).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:s.name,onChange:e=>K(s.id,{name:e.target.value}),className:"bg-transparent text-gray-200 font-medium focus:bg-dark-bg rounded px-1 -ml-1"}),e.jsx("input",{type:"email",value:s.email,onChange:e=>K(s.id,{email:e.target.value}),className:"bg-transparent text-xs text-gray-500 block focus:bg-dark-bg rounded px-1 -ml-1 mt-1",placeholder:"email@company.com"})]})]}),a.users.length>1&&e.jsx("button",{onClick:()=>{confirm("Delete this user?")&&h(s.id)},className:"p-2 text-gray-600 hover:text-red-400",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},s.id))})]}),"quote"===w&&e.jsxs("div",{className:"max-w-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-100 mb-6",children:"Quote Defaults"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Default Validity (Days)"}),e.jsx("input",{type:"number",value:a.quoteDefaults.validityDays,onChange:e=>G({validityDays:parseInt(e.target.value)||30}),className:"input w-32",min:"1",max:"365"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Payment Terms"}),e.jsx("input",{type:"text",value:a.quoteDefaults.paymentTerms,onChange:e=>G({paymentTerms:e.target.value}),className:"input",placeholder:"e.g. 50% deposit on confirmation"})]})]})]}),"terms"===w&&e.jsxs("div",{className:"max-w-4xl",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-100 mb-2",children:"Terms & Conditions"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"These terms will appear on a separate page in your PDF quotes. Use clear, concise language."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Full Terms & Conditions"}),e.jsx("textarea",{value:a.quoteDefaults.termsAndConditions,onChange:e=>G({termsAndConditions:e.target.value}),className:"input resize-none font-mono text-xs leading-relaxed",rows:20,placeholder:"Enter your full terms and conditions here. These will be formatted into columns on the PDF."}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Tip: Use numbered sections (1. 2. 3.) or bullet points for clarity. The PDF will display these in a multi-column layout."})]}),e.jsx("div",{className:"p-4 bg-dark-bg/50 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-400",children:"When exporting a PDF, you'll have the option to include the Terms & Conditions as a second page."})})]})]}),"customize"===w&&e.jsxs("div",{className:"max-w-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-100 mb-6",children:"Customization"}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-4",children:"Project Types"}),e.jsx("div",{className:"space-y-2 mb-4",children:(a.projectTypes||[]).map((s,t)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-dark-bg/50 rounded group",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("button",{onClick:()=>{y(s.id,"up"),q()},disabled:0===t,className:"text-gray-600 hover:text-gray-300 disabled:opacity-30",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),e.jsx("button",{onClick:()=>{y(s.id,"down"),q()},disabled:t===a.projectTypes.length-1,className:"text-gray-600 hover:text-gray-300 disabled:opacity-30",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),e.jsx("input",{type:"text",value:s.label,onChange:e=>{g(s.id,e.target.value),q()},className:"flex-1 bg-transparent text-sm text-gray-300 focus:bg-dark-bg rounded px-2 py-1 border border-transparent focus:border-dark-border"}),e.jsx("button",{onClick:()=>{confirm(`Delete "${s.label}"?`)&&(b(s.id),q())},className:"p-1 text-gray-600 hover:text-red-400 opacity-0 group-hover:opacity-100",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},s.id))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:B,onChange:e=>T(e.target.value),placeholder:"New project type...",className:"input flex-1",onKeyDown:e=>{"Enter"===e.key&&B.trim()&&(u(B.trim()),T(""),q())}}),e.jsx("button",{onClick:()=>{B.trim()&&(u(B.trim()),T(""),q())},className:"btn-primary",children:"Add"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-4",children:"Regions"}),e.jsx("div",{className:"space-y-2 mb-4",children:(a.regions||[]).map((s,t)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-dark-bg/50 rounded group",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("button",{onClick:()=>{f(s.id,"up"),q()},disabled:0===t,className:"text-gray-600 hover:text-gray-300 disabled:opacity-30",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),e.jsx("button",{onClick:()=>{f(s.id,"down"),q()},disabled:t===a.regions.length-1,className:"text-gray-600 hover:text-gray-300 disabled:opacity-30",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),e.jsx("input",{type:"text",value:s.label,onChange:e=>{v(s.id,{label:e.target.value}),q()},className:"flex-1 bg-transparent text-sm text-gray-300 focus:bg-dark-bg rounded px-2 py-1 border border-transparent focus:border-dark-border"}),e.jsxs("select",{value:s.currency,onChange:e=>{v(s.id,{currency:e.target.value}),q()},className:"input w-24 text-sm",children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"MYR",children:"MYR"}),e.jsx("option",{value:"SGD",children:"SGD"}),e.jsx("option",{value:"GBP",children:"GBP"}),e.jsx("option",{value:"AED",children:"AED"}),e.jsx("option",{value:"SAR",children:"SAR"}),e.jsx("option",{value:"QAR",children:"QAR"}),e.jsx("option",{value:"KWD",children:"KWD"}),e.jsx("option",{value:"THB",children:"THB"}),e.jsx("option",{value:"IDR",children:"IDR"})]}),e.jsx("button",{onClick:()=>{confirm(`Delete "${s.label}"?`)&&(N(s.id),q())},className:"p-1 text-gray-600 hover:text-red-400 opacity-0 group-hover:opacity-100",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},s.id))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:P.label,onChange:e=>M({...P,label:e.target.value}),placeholder:"New region name...",className:"input flex-1",onKeyDown:e=>{"Enter"===e.key&&P.label.trim()&&(j(P.label.trim(),P.currency),M({label:"",currency:"USD"}),q())}}),e.jsxs("select",{value:P.currency,onChange:e=>M({...P,currency:e.target.value}),className:"input w-24",children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"MYR",children:"MYR"}),e.jsx("option",{value:"SGD",children:"SGD"}),e.jsx("option",{value:"GBP",children:"GBP"}),e.jsx("option",{value:"AED",children:"AED"})]}),e.jsx("button",{onClick:()=>{P.label.trim()&&(j(P.label.trim(),P.currency),M({label:"",currency:"USD"}),q())},className:"btn-primary",children:"Add"})]})]})]}),"pdf"===w&&e.jsxs("div",{className:"max-w-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-100 mb-6",children:"PDF Display Options"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Choose what information to show on exported PDF quotes."}),e.jsx("div",{className:"space-y-3",children:[{key:"showLogo",label:"Show Company Logo"},{key:"showCompanyAddress",label:"Show Company Address"},{key:"showCompanyPhone",label:"Show Company Phone"},{key:"showCompanyEmail",label:"Show Company Email"},{key:"showTaxNumber",label:"Show Tax Number"},{key:"showBankDetails",label:"Show Bank Details"}].map(({key:s,label:t})=>e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.pdfOptions[s],onChange:e=>{return a={[s]:e.target.checked},d(a),void q();var a},className:"w-5 h-5 rounded bg-dark-bg border-dark-border text-accent-primary focus:ring-accent-primary"}),e.jsx("span",{className:"text-gray-300",children:t})]},s))})]}),"invoice"===w&&e.jsx("div",{className:"h-full -m-4 md:-m-6",children:e.jsx(n,{})}),"ai"===w&&e.jsxs("div",{className:"max-w-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-100 mb-2",children:"AI Features"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Enable AI-powered features like proposal generation and cover page images."}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-dark-bg rounded-lg border border-dark-border",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Anthropic API Key (Claude)"}),e.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:["For AI proposal text generation. Get your key from"," ",e.jsx("a",{href:"https://console.anthropic.com",target:"_blank",rel:"noopener noreferrer",className:"text-accent-primary hover:underline",children:"console.anthropic.com"})]}),e.jsx("input",{type:"password",value:a.aiSettings?.anthropicKey||"",onChange:e=>O({anthropicKey:e.target.value}),className:"input w-full font-mono text-sm",placeholder:"sk-ant-api..."})]}),e.jsxs("div",{className:"p-4 bg-dark-bg rounded-lg border border-dark-border",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-3",children:"OpenAI API Key (DALL-E)"}),e.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:["For AI cover page image generation. Get your key from"," ",e.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-accent-primary hover:underline",children:"platform.openai.com"})]}),e.jsx("input",{type:"password",value:a.aiSettings?.openaiKey||"",onChange:e=>O({openaiKey:e.target.value}),className:"input w-full font-mono text-sm",placeholder:"sk-..."})]}),e.jsxs("div",{className:"p-4 bg-accent-primary/10 border border-accent-primary/20 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-accent-primary mb-2",children:"AI Features"}),e.jsxs("ul",{className:"text-sm text-gray-400 space-y-1",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:a.aiSettings?.anthropicKey?"text-green-400":"text-gray-600",children:"â—"}),"Generate professional proposals (Claude)"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:a.aiSettings?.openaiKey?"text-green-400":"text-gray-600",children:"â—"}),"AI cover page backgrounds (DALL-E)"]})]})]}),e.jsx("p",{className:"text-xs text-gray-600",children:"Your API keys are stored locally in your browser and never sent to our servers."})]})]}),"activity"===w&&e.jsxs("div",{className:"max-w-4xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-100 mb-2",children:"Activity Log"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Track all changes made to quotes across your team."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:C,className:"btn-ghost text-sm flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export CSV"]}),e.jsx("button",{onClick:()=>{confirm("Are you sure you want to clear all activity logs?")&&k()},className:"btn-ghost text-sm text-red-400 hover:text-red-300",children:"Clear All"})]})]}),e.jsx("div",{className:"bg-dark-card border border-dark-border rounded-lg overflow-hidden",children:a.activityLog&&0!==a.activityLog.length?e.jsx("div",{className:"divide-y divide-dark-border max-h-[600px] overflow-y-auto",children:a.activityLog.map(a=>{const s=new Date(a.timestamp),t={lock:"text-amber-400 bg-amber-500/10",unlock:"text-green-400 bg-green-500/10",create:"text-blue-400 bg-blue-500/10",update:"text-gray-400 bg-gray-500/10",delete:"text-red-400 bg-red-500/10",status_change:"text-purple-400 bg-purple-500/10"}[a.action]||"text-gray-400 bg-gray-500/10";return e.jsx("div",{className:"p-4 hover:bg-dark-bg/30 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${t}`,children:a.action?.replace("_"," ").toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-200",children:a.description||`${a.action} on ${a.field||"quote"}`}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-500",children:[a.quoteNumber&&e.jsxs("span",{className:"font-mono text-accent-primary",children:["#",a.quoteNumber]}),e.jsx("span",{children:a.userName||a.userId||"System"}),e.jsx("span",{children:s.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]})},a.id)})}):e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-sm",children:"No activity recorded yet"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Changes to quotes will appear here"})]})}),e.jsx("p",{className:"text-xs text-gray-600 mt-4",children:"Activity log stores up to 1,000 entries. Older entries are automatically removed."})]})]})]})}export{c as default};
