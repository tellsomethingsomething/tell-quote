const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/OpportunityTimeline-UeihJxFP.js","assets/pdf-vendor-CqWdlgKa.js","assets/zustand-vendor-BohoUguQ.js","assets/react-vendor-DRPWudcR.js","assets/index-BALy7xcB.js","assets/supabase-vendor-DWEVVlJw.js","assets/index-C8vLZEaB.css","assets/timelineStore-CrC2_eKA.js"])))=>i.map(i=>d[i]);
import{h as e,u as t,b as n,a as r,i as a,e as i,f as s,R as o,j as l,_ as c}from"./index-BALy7xcB.js";import{j as d}from"./pdf-vendor-CqWdlgKa.js";import{r as u,R as p}from"./zustand-vendor-BohoUguQ.js";import{r as h}from"./charts-vendor-BbtJWQl0.js";import"./react-vendor-DRPWudcR.js";import"./supabase-vendor-DWEVVlJw.js";const m="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function g(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function v(e){return"nodeType"in e}function x(e){var t,n;return e?g(e)?e:v(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function f(e){const{Document:t}=x(e);return e instanceof t}function b(e){return!g(e)&&e instanceof x(e).HTMLElement}function y(e){return e instanceof x(e).SVGElement}function j(e){return e?g(e)?e.document:v(e)?f(e)?e:b(e)||y(e)?e.ownerDocument:document:document:document}const w=m?u.useLayoutEffect:u.useEffect;function N(e){const t=u.useRef(e);return w(()=>{t.current=e}),u.useCallback(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}function C(e,t){void 0===t&&(t=[e]);const n=u.useRef(e);return w(()=>{n.current!==e&&(n.current=e)},t),n}function D(e,t){const n=u.useRef();return u.useMemo(()=>{const t=e(n.current);return n.current=t,t},[...t])}function k(e){const t=N(e),n=u.useRef(null),r=u.useCallback(e=>{e!==n.current&&(null==t||t(e,n.current)),n.current=e},[]);return[n,r]}function E(e){const t=u.useRef();return u.useEffect(()=>{t.current=e},[e]),t.current}let S={};function R(e,t){return u.useMemo(()=>{if(t)return t;const n=null==S[e]?0:S[e]+1;return S[e]=n,e+"-"+n},[e,t])}function A(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((t,n)=>{const r=Object.entries(n);for(const[a,i]of r){const n=t[a];null!=n&&(t[a]=n+e*i)}return t},{...t})}}const M=A(1),L=A(-1);function O(e){if(!e)return!1;const{KeyboardEvent:t}=x(e.target);return t&&e instanceof t}function I(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=x(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const T=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[T.Translate.toString(e),T.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),P="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function B(e){return e.matches(P)?e:e.querySelector(P)}const z={display:"none"};function U(e){let{id:t,value:n}=e;return p.createElement("div",{id:t,style:z},n)}function W(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;return p.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":r,"aria-atomic":!0},n)}const F=u.createContext(null);const V={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},Y={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function K(e){let{announcements:t=Y,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=V}=e;const{announce:i,announcement:s}=function(){const[e,t]=u.useState("");return{announce:u.useCallback(e=>{null!=e&&t(e)},[]),announcement:e}}(),o=R("DndLiveRegion"),[l,c]=u.useState(!1);if(u.useEffect(()=>{c(!0)},[]),function(e){const t=u.useContext(F);u.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}(u.useMemo(()=>({onDragStart(e){let{active:n}=e;i(t.onDragStart({active:n}))},onDragMove(e){let{active:n,over:r}=e;t.onDragMove&&i(t.onDragMove({active:n,over:r}))},onDragOver(e){let{active:n,over:r}=e;i(t.onDragOver({active:n,over:r}))},onDragEnd(e){let{active:n,over:r}=e;i(t.onDragEnd({active:n,over:r}))},onDragCancel(e){let{active:n,over:r}=e;i(t.onDragCancel({active:n,over:r}))}}),[i,t])),!l)return null;const d=p.createElement(p.Fragment,null,p.createElement(U,{id:r,value:a.draggable}),p.createElement(W,{id:o,announcement:s}));return n?h.createPortal(d,n):d}var X,G;function H(){}(G=X||(X={})).DragStart="dragStart",G.DragMove="dragMove",G.DragEnd="dragEnd",G.DragCancel="dragCancel",G.DragOver="dragOver",G.RegisterDroppable="registerDroppable",G.SetDroppableDisabled="setDroppableDisabled",G.UnregisterDroppable="unregisterDroppable";const q=Object.freeze({x:0,y:0});function _(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function J(e,t){const n=I(e);if(!n)return"0 0";return(n.x-t.left)/t.width*100+"% "+(n.y-t.top)/t.height*100+"%"}function Q(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function $(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Z(e,t,n){return void 0===t&&(t=e.left),void 0===n&&(n=e.top),{x:t+.5*e.width,y:n+.5*e.height}}const ee=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=Z(t,t.left,t.top),i=[];for(const s of r){const{id:e}=s,t=n.get(e);if(t){const n=_(Z(t),a);i.push({id:e,data:{droppableContainer:s,value:n}})}}return i.sort(Q)};function te(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),s=a-r,o=i-n;if(r<a&&n<i){const n=t.width*t.height,r=e.width*e.height,a=s*o;return Number((a/(n+r-a)).toFixed(4))}return 0}const ne=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=[];for(const i of r){const{id:e}=i,r=n.get(e);if(r){const n=te(r,t);n>0&&a.push({id:e,data:{droppableContainer:i,value:n}})}}return a.sort($)};function re(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:q}function ae(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((t,n)=>({...t,top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x}),{...t})}}const ie=ae(1);function se(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}const oe={ignoreTransform:!1};function le(e,t){void 0===t&&(t=oe);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:r}=x(e).getComputedStyle(e);t&&(n=function(e,t,n){const r=se(t);if(!r)return e;const{scaleX:a,scaleY:i,x:s,y:o}=r,l=e.left-s-(1-a)*parseFloat(n),c=e.top-o-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),d=a?e.width/a:e.width,u=i?e.height/i:e.height;return{width:d,height:u,top:c,right:l+d,bottom:c+u,left:l}}(n,t,r))}const{top:r,left:a,width:i,height:s,bottom:o,right:l}=n;return{top:r,left:a,width:i,height:s,bottom:o,right:l}}function ce(e){return le(e,{ignoreTransform:!0})}function de(e,t){const n=[];return e?function r(a){if(null!=t&&n.length>=t)return n;if(!a)return n;if(f(a)&&null!=a.scrollingElement&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!b(a)||y(a))return n;if(n.includes(a))return n;const i=x(e).getComputedStyle(a);return a!==e&&function(e,t){void 0===t&&(t=x(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{const r=t[e];return"string"==typeof r&&n.test(r)})}(a,i)&&n.push(a),function(e,t){return void 0===t&&(t=x(e).getComputedStyle(e)),"fixed"===t.position}(a,i)?n:r(a.parentNode)}(e):n}function ue(e){const[t]=de(e,1);return null!=t?t:null}function pe(e){return m&&e?g(e)?e:v(e)?f(e)||e===j(e).scrollingElement?window:b(e)?e:null:null:null}function he(e){return g(e)?e.scrollX:e.scrollLeft}function me(e){return g(e)?e.scrollY:e.scrollTop}function ge(e){return{x:he(e),y:me(e)}}var ve,xe;function fe(e){return!(!m||!e)&&e===document.scrollingElement}function be(e){const t={x:0,y:0},n=fe(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}(xe=ve||(ve={}))[xe.Forward=1]="Forward",xe[xe.Backward=-1]="Backward";const ye={x:.2,y:.2};function je(e,t,n,r,a){let{top:i,left:s,right:o,bottom:l}=n;void 0===r&&(r=10),void 0===a&&(a=ye);const{isTop:c,isBottom:d,isLeft:u,isRight:p}=be(e),h={x:0,y:0},m={x:0,y:0},g=t.height*a.y,v=t.width*a.x;return!c&&i<=t.top+g?(h.y=ve.Backward,m.y=r*Math.abs((t.top+g-i)/g)):!d&&l>=t.bottom-g&&(h.y=ve.Forward,m.y=r*Math.abs((t.bottom-g-l)/g)),!p&&o>=t.right-v?(h.x=ve.Forward,m.x=r*Math.abs((t.right-v-o)/v)):!u&&s<=t.left+v&&(h.x=ve.Backward,m.x=r*Math.abs((t.left+v-s)/v)),{direction:h,speed:m}}function we(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function Ne(e){return e.reduce((e,t)=>M(e,ge(t)),q)}function Ce(e,t){if(void 0===t&&(t=le),!e)return;const{top:n,left:r,bottom:a,right:i}=t(e);ue(e)&&(a<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const De=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+he(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+me(t),0)}]];class ke{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=de(t),r=Ne(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[a,i,s]of De)for(const e of i)Object.defineProperty(this,e,{get:()=>{const t=s(n),i=r[a]-t;return this.rect[e]+i},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ee{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function Se(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}var Re,Ae,Me,Le;function Oe(e){e.preventDefault()}function Ie(e){e.stopPropagation()}(Ae=Re||(Re={})).Click="click",Ae.DragStart="dragstart",Ae.Keydown="keydown",Ae.ContextMenu="contextmenu",Ae.Resize="resize",Ae.SelectionChange="selectionchange",Ae.VisibilityChange="visibilitychange",(Le=Me||(Me={})).Space="Space",Le.Down="ArrowDown",Le.Right="ArrowRight",Le.Left="ArrowLeft",Le.Up="ArrowUp",Le.Esc="Escape",Le.Enter="Enter",Le.Tab="Tab";const Te={start:[Me.Space,Me.Enter],cancel:[Me.Esc],end:[Me.Space,Me.Enter,Me.Tab]},Pe=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Me.Right:return{...n,x:n.x+25};case Me.Left:return{...n,x:n.x-25};case Me.Down:return{...n,y:n.y+25};case Me.Up:return{...n,y:n.y-25}}};class Be{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Ee(j(t)),this.windowListeners=new Ee(x(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Re.Resize,this.handleCancel),this.windowListeners.add(Re.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Re.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&Ce(n),t(q)}handleKeyDown(e){if(O(e)){const{active:t,context:n,options:r}=this.props,{keyboardCodes:a=Te,coordinateGetter:i=Pe,scrollBehavior:s="smooth"}=r,{code:o}=e;if(a.end.includes(o))return void this.handleEnd(e);if(a.cancel.includes(o))return void this.handleCancel(e);const{collisionRect:l}=n.current,c=l?{x:l.left,y:l.top}:q;this.referenceCoordinates||(this.referenceCoordinates=c);const d=i(e,{active:t,context:n.current,currentCoordinates:c});if(d){const t=L(d,c),r={x:0,y:0},{scrollableAncestors:a}=n.current;for(const n of a){const a=e.code,{isTop:i,isRight:o,isLeft:l,isBottom:c,maxScroll:u,minScroll:p}=be(n),h=we(n),m={x:Math.min(a===Me.Right?h.right-h.width/2:h.right,Math.max(a===Me.Right?h.left:h.left+h.width/2,d.x)),y:Math.min(a===Me.Down?h.bottom-h.height/2:h.bottom,Math.max(a===Me.Down?h.top:h.top+h.height/2,d.y))},g=a===Me.Right&&!o||a===Me.Left&&!l,v=a===Me.Down&&!c||a===Me.Up&&!i;if(g&&m.x!==d.x){const e=n.scrollLeft+t.x,i=a===Me.Right&&e<=u.x||a===Me.Left&&e>=p.x;if(i&&!t.y)return void n.scrollTo({left:e,behavior:s});r.x=i?n.scrollLeft-e:a===Me.Right?n.scrollLeft-u.x:n.scrollLeft-p.x,r.x&&n.scrollBy({left:-r.x,behavior:s});break}if(v&&m.y!==d.y){const e=n.scrollTop+t.y,i=a===Me.Down&&e<=u.y||a===Me.Up&&e>=p.y;if(i&&!t.x)return void n.scrollTo({top:e,behavior:s});r.y=i?n.scrollTop-e:a===Me.Down?n.scrollTop-u.y:n.scrollTop-p.y,r.y&&n.scrollBy({top:-r.y,behavior:s});break}}this.handleMove(e,M(L(d,this.referenceCoordinates),r))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function ze(e){return Boolean(e&&"distance"in e)}function Ue(e){return Boolean(e&&"delay"in e)}Be.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Te,onActivation:a}=t,{active:i}=n;const{code:s}=e.nativeEvent;if(r.start.includes(s)){const t=i.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==a||a({event:e.nativeEvent}),!0)}return!1}}];class We{constructor(e,t,n){var r;void 0===n&&(n=function(e){const{EventTarget:t}=x(e);return e instanceof t?e:j(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:a}=e,{target:i}=a;this.props=e,this.events=t,this.document=j(i),this.documentListeners=new Ee(this.document),this.listeners=new Ee(n),this.windowListeners=new Ee(x(i)),this.initialCoordinates=null!=(r=I(a))?r:q,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Re.Resize,this.handleCancel),this.windowListeners.add(Re.DragStart,Oe),this.windowListeners.add(Re.VisibilityChange,this.handleCancel),this.windowListeners.add(Re.ContextMenu,Oe),this.documentListeners.add(Re.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Ue(t))return this.timeoutId=setTimeout(this.handleStart,t.delay),void this.handlePending(t);if(ze(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:n,onPending:r}=this.props;r(n,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Re.Click,Ie,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Re.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:n,initialCoordinates:r,props:a}=this,{onMove:i,options:{activationConstraint:s}}=a;if(!r)return;const o=null!=(t=I(e))?t:q,l=L(r,o);if(!n&&s){if(ze(s)){if(null!=s.tolerance&&Se(l,s.tolerance))return this.handleCancel();if(Se(l,s.distance))return this.handleStart()}return Ue(s)&&Se(l,s.tolerance)?this.handleCancel():void this.handlePending(s,l)}e.cancelable&&e.preventDefault(),i(o)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Me.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const Fe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Ve extends We{constructor(e){const{event:t}=e,n=j(t.target);super(e,Fe,n)}}Ve.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!(!n.isPrimary||0!==n.button)&&(null==r||r({event:n}),!0)}}];const Ye={move:{name:"mousemove"},end:{name:"mouseup"}};var Ke,Xe;(Xe=Ke||(Ke={}))[Xe.RightClick=2]="RightClick";(class extends We{constructor(e){super(e,Ye,j(e.event.target))}}).activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button!==Ke.RightClick&&(null==r||r({event:n}),!0)}}];const Ge={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};var He,qe,_e,Je;function Qe(e){let{acceleration:t,activator:n=He.Pointer,canScroll:r,draggingRect:a,enabled:i,interval:s=5,order:o=_e.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:d,delta:p,threshold:h}=e;const m=function(e){let{delta:t,disabled:n}=e;const r=E(t);return D(e=>{if(n||!r||!e)return $e;const a={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[ve.Backward]:e.x[ve.Backward]||-1===a.x,[ve.Forward]:e.x[ve.Forward]||1===a.x},y:{[ve.Backward]:e.y[ve.Backward]||-1===a.y,[ve.Forward]:e.y[ve.Forward]||1===a.y}}},[n,t,r])}({delta:p,disabled:!i}),[g,v]=function(){const e=u.useRef(null);return[u.useCallback((t,n)=>{e.current=setInterval(t,n)},[]),u.useCallback(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}(),x=u.useRef({x:0,y:0}),f=u.useRef({x:0,y:0}),b=u.useMemo(()=>{switch(n){case He.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case He.DraggableRect:return a}},[n,a,l]),y=u.useRef(null),j=u.useCallback(()=>{const e=y.current;if(!e)return;const t=x.current.x*f.current.x,n=x.current.y*f.current.y;e.scrollBy(t,n)},[]),w=u.useMemo(()=>o===_e.TreeOrder?[...c].reverse():c,[o,c]);u.useEffect(()=>{if(i&&c.length&&b){for(const e of w){if(!1===(null==r?void 0:r(e)))continue;const n=c.indexOf(e),a=d[n];if(!a)continue;const{direction:i,speed:o}=je(e,a,b,t,h);for(const e of["x","y"])m[e][i[e]]||(o[e]=0,i[e]=0);if(o.x>0||o.y>0)return v(),y.current=e,g(j,s),x.current=o,void(f.current=i)}x.current={x:0,y:0},f.current={x:0,y:0},v()}else v()},[t,j,r,v,i,s,JSON.stringify(b),JSON.stringify(m),g,c,w,d,JSON.stringify(h)])}(class extends We{constructor(e){super(e,Ge)}static setup(){return window.addEventListener(Ge.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Ge.move.name,e)};function e(){}}}).activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:a}=n;return!(a.length>1)&&(null==r||r({event:n}),!0)}}],(qe=He||(He={}))[qe.Pointer=0]="Pointer",qe[qe.DraggableRect=1]="DraggableRect",(Je=_e||(_e={}))[Je.TreeOrder=0]="TreeOrder",Je[Je.ReversedTreeOrder=1]="ReversedTreeOrder";const $e={x:{[ve.Backward]:!1,[ve.Forward]:!1},y:{[ve.Backward]:!1,[ve.Forward]:!1}};var Ze,et,tt;(et=Ze||(Ze={}))[et.Always=0]="Always",et[et.BeforeDragging=1]="BeforeDragging",et[et.WhileDragging=2]="WhileDragging",(tt||(tt={})).Optimized="optimized";const nt=new Map;function rt(e,t){return D(n=>e?n||("function"==typeof t?t(e):e):null,[t,e])}function at(e){let{callback:t,disabled:n}=e;const r=N(t),a=u.useMemo(()=>{if(n||"undefined"==typeof window||void 0===window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(r)},[n]);return u.useEffect(()=>()=>null==a?void 0:a.disconnect(),[a]),a}function it(e){return new ke(le(e),e)}function st(e,t,n){void 0===t&&(t=it);const[r,a]=u.useState(null);function i(){a(r=>{if(!e)return null;var a;if(!1===e.isConnected)return null!=(a=null!=r?r:n)?a:null;const i=t(e);return JSON.stringify(r)===JSON.stringify(i)?r:i})}const s=function(e){let{callback:t,disabled:n}=e;const r=N(t),a=u.useMemo(()=>{if(n||"undefined"==typeof window||void 0===window.MutationObserver)return;const{MutationObserver:e}=window;return new e(r)},[r,n]);return u.useEffect(()=>()=>null==a?void 0:a.disconnect(),[a]),a}({callback(t){if(e)for(const n of t){const{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){i();break}}}}),o=at({callback:i});return w(()=>{i(),e?(null==o||o.observe(e),null==s||s.observe(document.body,{childList:!0,subtree:!0})):(null==o||o.disconnect(),null==s||s.disconnect())},[e]),r}const ot=[];function lt(e,t){void 0===t&&(t=[]);const n=u.useRef(null);return u.useEffect(()=>{n.current=null},t),u.useEffect(()=>{const t=e!==q;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)},[e]),n.current?L(e,n.current):q}function ct(e){return u.useMemo(()=>e?function(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null,[e])}const dt=[];function ut(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return b(t)?t:e}const pt=[{sensor:Ve,options:{}},{sensor:Be,options:{}}],ht={current:{}},mt={draggable:{measure:ce},droppable:{measure:ce,strategy:Ze.WhileDragging,frequency:tt.Optimized},dragOverlay:{measure:le}};class gt extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}const vt={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new gt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:H},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:mt,measureDroppableContainers:H,windowRect:null,measuringScheduled:!1},xt={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:H,draggableNodes:new Map,over:null,measureDroppableContainers:H},ft=u.createContext(xt),bt=u.createContext(vt);function yt(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new gt}}}function jt(e,t){switch(t.type){case X.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case X.DragMove:return null==e.draggable.active?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case X.DragEnd:case X.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case X.RegisterDroppable:{const{element:n}=t,{id:r}=n,a=new gt(e.droppable.containers);return a.set(r,n),{...e,droppable:{...e.droppable,containers:a}}}case X.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const s=new gt(e.droppable.containers);return s.set(n,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:s}}}case X.UnregisterDroppable:{const{id:n,key:r}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new gt(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function wt(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:a}=u.useContext(ft),i=E(r),s=E(null==n?void 0:n.id);return u.useEffect(()=>{if(!t&&!r&&i&&null!=s){if(!O(i))return;if(document.activeElement===i.target)return;const e=a.get(s);if(!e)return;const{activatorNode:t,node:n}=e;if(!t.current&&!n.current)return;requestAnimationFrame(()=>{for(const e of[t.current,n.current]){if(!e)continue;const t=B(e);if(t){t.focus();break}}})}},[r,t,a,s,i]),null}function Nt(e,t){let{transform:n,...r}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...r}),n):n}const Ct=u.createContext({...q,scaleX:1,scaleY:1});var Dt,kt;(kt=Dt||(Dt={}))[kt.Uninitialized=0]="Uninitialized",kt[kt.Initializing=1]="Initializing",kt[kt.Initialized=2]="Initialized";const Et=u.memo(function(e){var t,n,r,a;let{id:i,accessibility:s,autoScroll:o=!0,children:l,sensors:c=pt,collisionDetection:d=ne,measuring:g,modifiers:v,...f}=e;const y=u.useReducer(jt,void 0,yt),[j,N]=y,[E,S]=function(){const[e]=u.useState(()=>new Set),t=u.useCallback(t=>(e.add(t),()=>e.delete(t)),[e]);return[u.useCallback(t=>{let{type:n,event:r}=t;e.forEach(e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)})},[e]),t]}(),[A,L]=u.useState(Dt.Uninitialized),O=A===Dt.Initialized,{draggable:{active:T,nodes:P,translate:B},droppable:{containers:z}}=j,U=null!=T?P.get(T):null,W=u.useRef({initial:null,translated:null}),V=u.useMemo(()=>{var e;return null!=T?{id:T,data:null!=(e=null==U?void 0:U.data)?e:ht,rect:W}:null},[T,U]),Y=u.useRef(null),[G,H]=u.useState(null),[_,J]=u.useState(null),Q=C(f,Object.values(f)),$=R("DndDescribedBy",i),Z=u.useMemo(()=>z.getEnabled(),[z]),ee=(te=g,u.useMemo(()=>({draggable:{...mt.draggable,...null==te?void 0:te.draggable},droppable:{...mt.droppable,...null==te?void 0:te.droppable},dragOverlay:{...mt.dragOverlay,...null==te?void 0:te.dragOverlay}}),[null==te?void 0:te.draggable,null==te?void 0:te.droppable,null==te?void 0:te.dragOverlay]));var te;const{droppableRects:ae,measureDroppableContainers:se,measuringScheduled:oe}=function(e,t){let{dragging:n,dependencies:r,config:a}=t;const[i,s]=u.useState(null),{frequency:o,measure:l,strategy:c}=a,d=u.useRef(e),p=function(){switch(c){case Ze.Always:return!1;case Ze.BeforeDragging:return n;default:return!n}}(),h=C(p),m=u.useCallback(function(e){void 0===e&&(e=[]),h.current||s(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[h]),g=u.useRef(null),v=D(t=>{if(p&&!n)return nt;if(!t||t===nt||d.current!==e||null!=i){const t=new Map;for(let n of e){if(!n)continue;if(i&&i.length>0&&!i.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}const e=n.node.current,r=e?new ke(l(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t},[e,i,n,p,l]);return u.useEffect(()=>{d.current=e},[e]),u.useEffect(()=>{p||m()},[n,p]),u.useEffect(()=>{i&&i.length>0&&s(null)},[JSON.stringify(i)]),u.useEffect(()=>{p||"number"!=typeof o||null!==g.current||(g.current=setTimeout(()=>{m(),g.current=null},o))},[o,p,m,...r]),{droppableRects:v,measureDroppableContainers:m,measuringScheduled:null!=i}}(Z,{dragging:O,dependencies:[B.x,B.y],config:ee.droppable}),ce=function(e,t){const n=null!=t?e.get(t):void 0,r=n?n.node.current:null;return D(e=>{var n;return null==t?null:null!=(n=null!=r?r:e)?n:null},[r,t])}(P,T),he=u.useMemo(()=>_?I(_):null,[_]),me=function(){const e=!1===(null==G?void 0:G.autoScrollEnabled),t="object"==typeof o?!1===o.enabled:!1===o,n=O&&!e&&!t;if("object"==typeof o)return{...o,enabled:n};return{enabled:n}}(),ve=function(e,t){return rt(e,t)}(ce,ee.draggable.measure);!function(e){let{activeNode:t,measure:n,initialRect:r,config:a=!0}=e;const i=u.useRef(!1),{x:s,y:o}="boolean"==typeof a?{x:a,y:a}:a;w(()=>{if(!s&&!o||!t)return void(i.current=!1);if(i.current||!r)return;const e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;const a=re(n(e),r);if(s||(a.x=0),o||(a.y=0),i.current=!0,Math.abs(a.x)>0||Math.abs(a.y)>0){const t=ue(e);t&&t.scrollBy({top:a.y,left:a.x})}},[t,s,o,r,n])}({activeNode:null!=T?P.get(T):null,config:me.layoutShiftCompensation,initialRect:ve,measure:ee.draggable.measure});const xe=st(ce,ee.draggable.measure,ve),be=st(ce?ce.parentElement:null),ye=u.useRef({activatorEvent:null,active:null,activeNode:ce,collisionRect:null,collisions:null,droppableRects:ae,draggableNodes:P,draggingNode:null,draggingNodeRect:null,droppableContainers:z,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),je=z.getNodeFor(null==(t=ye.current.over)?void 0:t.id),we=function(e){let{measure:t}=e;const[n,r]=u.useState(null),a=at({callback:u.useCallback(e=>{for(const{target:n}of e)if(b(n)){r(e=>{const r=t(n);return e?{...e,width:r.width,height:r.height}:r});break}},[t])}),i=u.useCallback(e=>{const n=ut(e);null==a||a.disconnect(),n&&(null==a||a.observe(n)),r(n?t(n):null)},[t,a]),[s,o]=k(i);return u.useMemo(()=>({nodeRef:s,rect:n,setRef:o}),[n,s,o])}({measure:ee.dragOverlay.measure}),Ce=null!=(n=we.nodeRef.current)?n:ce,De=O?null!=(r=we.rect)?r:xe:null,Ee=Boolean(we.nodeRef.current&&we.rect),Se=re(Re=Ee?null:xe,rt(Re));var Re;const Ae=ct(Ce?x(Ce):null),Me=function(e){const t=u.useRef(e),n=D(n=>e?n&&n!==ot&&e&&t.current&&e.parentNode===t.current.parentNode?n:de(e):ot,[e]);return u.useEffect(()=>{t.current=e},[e]),n}(O?null!=je?je:ce:null),Le=function(e,t){void 0===t&&(t=le);const[n]=e,r=ct(n?x(n):null),[a,i]=u.useState(dt);function s(){i(()=>e.length?e.map(e=>fe(e)?r:new ke(t(e),e)):dt)}const o=at({callback:s});return w(()=>{null==o||o.disconnect(),s(),e.forEach(e=>null==o?void 0:o.observe(e))},[e]),a}(Me),Oe=Nt(v,{transform:{x:B.x-Se.x,y:B.y-Se.y,scaleX:1,scaleY:1},activatorEvent:_,active:V,activeNodeRect:xe,containerNodeRect:be,draggingNodeRect:De,over:ye.current.over,overlayNodeRect:we.rect,scrollableAncestors:Me,scrollableAncestorRects:Le,windowRect:Ae}),Ie=he?M(he,B):null,Te=function(e){const[t,n]=u.useState(null),r=u.useRef(e),a=u.useCallback(e=>{const t=pe(e.target);t&&n(e=>e?(e.set(t,ge(t)),new Map(e)):null)},[]);return u.useEffect(()=>{const t=r.current;if(e!==t){i(t);const s=e.map(e=>{const t=pe(e);return t?(t.addEventListener("scroll",a,{passive:!0}),[t,ge(t)]):null}).filter(e=>null!=e);n(s.length?new Map(s):null),r.current=e}return()=>{i(e),i(t)};function i(e){e.forEach(e=>{const t=pe(e);null==t||t.removeEventListener("scroll",a)})}},[a,e]),u.useMemo(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>M(e,t),q):Ne(e):q,[e,t])}(Me),Pe=lt(Te),Be=lt(Te,[xe]),ze=M(Oe,Pe),Ue=De?ie(De,Oe):null,We=V&&Ue?d({active:V,collisionRect:Ue,droppableRects:ae,droppableContainers:Z,pointerCoordinates:Ie}):null,Fe=function(e,t){if(!e||0===e.length)return null;const[n]=e;return n[t]}(We,"id"),[Ve,Ye]=u.useState(null),Ke=function(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}(Ee?Oe:M(Oe,Be),null!=(a=null==Ve?void 0:Ve.rect)?a:null,xe),Xe=u.useRef(null),Ge=u.useCallback((e,t)=>{let{sensor:n,options:r}=t;if(null==Y.current)return;const a=P.get(Y.current);if(!a)return;const i=e.nativeEvent,s=new n({active:Y.current,activeNode:a,event:i,options:r,context:ye,onAbort(e){if(!P.get(e))return;const{onDragAbort:t}=Q.current,n={id:e};null==t||t(n),E({type:"onDragAbort",event:n})},onPending(e,t,n,r){if(!P.get(e))return;const{onDragPending:a}=Q.current,i={id:e,constraint:t,initialCoordinates:n,offset:r};null==a||a(i),E({type:"onDragPending",event:i})},onStart(e){const t=Y.current;if(null==t)return;const n=P.get(t);if(!n)return;const{onDragStart:r}=Q.current,a={activatorEvent:i,active:{id:t,data:n.data,rect:W}};h.unstable_batchedUpdates(()=>{null==r||r(a),L(Dt.Initializing),N({type:X.DragStart,initialCoordinates:e,active:t}),E({type:"onDragStart",event:a}),H(Xe.current),J(i)})},onMove(e){N({type:X.DragMove,coordinates:e})},onEnd:o(X.DragEnd),onCancel:o(X.DragCancel)});function o(e){return async function(){const{active:t,collisions:n,over:r,scrollAdjustedTranslate:a}=ye.current;let s=null;if(t&&a){const{cancelDrop:o}=Q.current;if(s={activatorEvent:i,active:t,collisions:n,delta:a,over:r},e===X.DragEnd&&"function"==typeof o){await Promise.resolve(o(s))&&(e=X.DragCancel)}}Y.current=null,h.unstable_batchedUpdates(()=>{N({type:e}),L(Dt.Uninitialized),Ye(null),H(null),J(null),Xe.current=null;const t=e===X.DragEnd?"onDragEnd":"onDragCancel";if(s){const e=Q.current[t];null==e||e(s),E({type:t,event:s})}})}}Xe.current=s},[P]),He=function(e,t){return u.useMemo(()=>e.reduce((e,n)=>{const{sensor:r}=n;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:t(e.handler,n)}))]},[]),[e,t])}(c,u.useCallback((e,t)=>(n,r)=>{const a=n.nativeEvent,i=P.get(r);if(null!==Y.current||!i||a.dndKit||a.defaultPrevented)return;const s={active:i};!0===e(n,t.options,s)&&(a.dndKit={capturedBy:t.sensor},Y.current=r,Ge(n,t))},[P,Ge]));!function(e){u.useEffect(()=>{if(!m)return;const t=e.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(const e of t)null==e||e()}},e.map(e=>{let{sensor:t}=e;return t}))}(c),w(()=>{xe&&A===Dt.Initializing&&L(Dt.Initialized)},[xe,A]),u.useEffect(()=>{const{onDragMove:e}=Q.current,{active:t,activatorEvent:n,collisions:r,over:a}=ye.current;if(!t||!n)return;const i={active:t,activatorEvent:n,collisions:r,delta:{x:ze.x,y:ze.y},over:a};h.unstable_batchedUpdates(()=>{null==e||e(i),E({type:"onDragMove",event:i})})},[ze.x,ze.y]),u.useEffect(()=>{const{active:e,activatorEvent:t,collisions:n,droppableContainers:r,scrollAdjustedTranslate:a}=ye.current;if(!e||null==Y.current||!t||!a)return;const{onDragOver:i}=Q.current,s=r.get(Fe),o=s&&s.rect.current?{id:s.id,rect:s.rect.current,data:s.data,disabled:s.disabled}:null,l={active:e,activatorEvent:t,collisions:n,delta:{x:a.x,y:a.y},over:o};h.unstable_batchedUpdates(()=>{Ye(o),null==i||i(l),E({type:"onDragOver",event:l})})},[Fe]),w(()=>{ye.current={activatorEvent:_,active:V,activeNode:ce,collisionRect:Ue,collisions:We,droppableRects:ae,draggableNodes:P,draggingNode:Ce,draggingNodeRect:De,droppableContainers:z,over:Ve,scrollableAncestors:Me,scrollAdjustedTranslate:ze},W.current={initial:De,translated:Ue}},[V,ce,We,Ue,P,Ce,De,ae,z,Ve,Me,ze]),Qe({...me,delta:B,draggingRect:Ue,pointerCoordinates:Ie,scrollableAncestors:Me,scrollableAncestorRects:Le});const qe=u.useMemo(()=>({active:V,activeNode:ce,activeNodeRect:xe,activatorEvent:_,collisions:We,containerNodeRect:be,dragOverlay:we,draggableNodes:P,droppableContainers:z,droppableRects:ae,over:Ve,measureDroppableContainers:se,scrollableAncestors:Me,scrollableAncestorRects:Le,measuringConfiguration:ee,measuringScheduled:oe,windowRect:Ae}),[V,ce,xe,_,We,be,we,P,z,ae,Ve,se,Me,Le,ee,oe,Ae]),_e=u.useMemo(()=>({activatorEvent:_,activators:He,active:V,activeNodeRect:xe,ariaDescribedById:{draggable:$},dispatch:N,draggableNodes:P,over:Ve,measureDroppableContainers:se}),[_,He,V,xe,N,$,P,Ve,se]);return p.createElement(F.Provider,{value:S},p.createElement(ft.Provider,{value:_e},p.createElement(bt.Provider,{value:qe},p.createElement(Ct.Provider,{value:Ke},l)),p.createElement(wt,{disabled:!1===(null==s?void 0:s.restoreFocus)})),p.createElement(K,{...s,hiddenTextDescribedById:$}))}),St=u.createContext(null),Rt="button";function At(e){let{id:t,data:n,disabled:r=!1,attributes:a}=e;const i=R("Draggable"),{activators:s,activatorEvent:o,active:l,activeNodeRect:c,ariaDescribedById:d,draggableNodes:p,over:h}=u.useContext(ft),{role:m=Rt,roleDescription:g="draggable",tabIndex:v=0}=null!=a?a:{},x=(null==l?void 0:l.id)===t,f=u.useContext(x?Ct:St),[b,y]=k(),[j,N]=k(),D=function(e,t){return u.useMemo(()=>e.reduce((e,n)=>{let{eventName:r,handler:a}=n;return e[r]=e=>{a(e,t)},e},{}),[e,t])}(s,t),E=C(n);w(()=>(p.set(t,{id:t,key:i,node:b,activatorNode:j,data:E}),()=>{const e=p.get(t);e&&e.key===i&&p.delete(t)}),[p,t]);return{active:l,activatorEvent:o,activeNodeRect:c,attributes:u.useMemo(()=>({role:m,tabIndex:v,"aria-disabled":r,"aria-pressed":!(!x||m!==Rt)||void 0,"aria-roledescription":g,"aria-describedby":d.draggable}),[r,m,v,x,g,d.draggable]),isDragging:x,listeners:r?void 0:D,node:b,over:h,setNodeRef:y,setActivatorNodeRef:N,transform:f}}function Mt(){return u.useContext(bt)}const Lt={timeout:25};function Ot(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:a}=e;const i=R("Droppable"),{active:s,dispatch:o,over:l,measureDroppableContainers:c}=u.useContext(ft),d=u.useRef({disabled:n}),p=u.useRef(!1),h=u.useRef(null),m=u.useRef(null),{disabled:g,updateMeasurementsFor:v,timeout:x}={...Lt,...a},f=C(null!=v?v:r),b=at({callback:u.useCallback(()=>{p.current?(null!=m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{c(Array.isArray(f.current)?f.current:[f.current]),m.current=null},x)):p.current=!0},[x]),disabled:g||!s}),y=u.useCallback((e,t)=>{b&&(t&&(b.unobserve(t),p.current=!1),e&&b.observe(e))},[b]),[j,w]=k(y),N=C(t);return u.useEffect(()=>{b&&j.current&&(b.disconnect(),p.current=!1,b.observe(j.current))},[j,b]),u.useEffect(()=>(o({type:X.RegisterDroppable,element:{id:r,key:i,disabled:n,node:j,rect:h,data:N}}),()=>o({type:X.UnregisterDroppable,key:i,id:r})),[r]),u.useEffect(()=>{n!==d.current.disabled&&(o({type:X.SetDroppableDisabled,id:r,key:i,disabled:n}),d.current.disabled=n)},[r,i,n,o]),{active:s,rect:h,isOver:(null==l?void 0:l.id)===r,node:j,over:l,setNodeRef:w}}function It(e){let{animation:t,children:n}=e;const[r,a]=u.useState(null),[i,s]=u.useState(null),o=E(n);return n||r||!o||a(o),w(()=>{if(!i)return;const e=null==r?void 0:r.key,n=null==r?void 0:r.props.id;null!=e&&null!=n?Promise.resolve(t(n,i)).then(()=>{a(null)}):a(null)},[t,r,i]),p.createElement(p.Fragment,null,n,r?u.cloneElement(r,{ref:s}):null)}const Tt={x:0,y:0,scaleX:1,scaleY:1};function Pt(e){let{children:t}=e;return p.createElement(ft.Provider,{value:xt},p.createElement(Ct.Provider,{value:Tt},t))}const Bt={position:"fixed",touchAction:"none"},zt=e=>O(e)?"transform 250ms ease":void 0,Ut=u.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:a,children:i,className:s,rect:o,style:l,transform:c,transition:d=zt}=e;if(!o)return null;const u=a?c:{...c,scaleX:1,scaleY:1},h={...Bt,width:o.width,height:o.height,top:o.top,left:o.left,transform:T.Transform.toString(u),transformOrigin:a&&r?J(r,o):void 0,transition:"function"==typeof d?d(r):d,...l};return p.createElement(n,{className:s,style:h,ref:t},i)}),Wt={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:n}}=e;return[{transform:T.Transform.toString(t)},{transform:T.Transform.toString(n)}]},sideEffects:(e=>t=>{let{active:n,dragOverlay:r}=t;const a={},{styles:i,className:s}=e;if(null!=i&&i.active)for(const[e,o]of Object.entries(i.active))void 0!==o&&(a[e]=n.node.style.getPropertyValue(e),n.node.style.setProperty(e,o));if(null!=i&&i.dragOverlay)for(const[e,o]of Object.entries(i.dragOverlay))void 0!==o&&r.node.style.setProperty(e,o);return null!=s&&s.active&&n.node.classList.add(s.active),null!=s&&s.dragOverlay&&r.node.classList.add(s.dragOverlay),function(){for(const[e,t]of Object.entries(a))n.node.style.setProperty(e,t);null!=s&&s.active&&n.node.classList.remove(s.active)}})({styles:{active:{opacity:"0"}}})};function Ft(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:a}=e;return N((e,i)=>{if(null===t)return;const s=n.get(e);if(!s)return;const o=s.node.current;if(!o)return;const l=ut(i);if(!l)return;const{transform:c}=x(i).getComputedStyle(i),d=se(c);if(!d)return;const u="function"==typeof t?t:function(e){const{duration:t,easing:n,sideEffects:r,keyframes:a}={...Wt,...e};return e=>{let{active:i,dragOverlay:s,transform:o,...l}=e;if(!t)return;const c={x:s.rect.left-i.rect.left,y:s.rect.top-i.rect.top},d={scaleX:1!==o.scaleX?i.rect.width*o.scaleX/s.rect.width:1,scaleY:1!==o.scaleY?i.rect.height*o.scaleY/s.rect.height:1},u={x:o.x-c.x,y:o.y-c.y,...d},p=a({...l,active:i,dragOverlay:s,transform:{initial:o,final:u}}),[h]=p,m=p[p.length-1];if(JSON.stringify(h)===JSON.stringify(m))return;const g=null==r?void 0:r({active:i,dragOverlay:s,...l}),v=s.node.animate(p,{duration:t,easing:n,fill:"forwards"});return new Promise(e=>{v.onfinish=()=>{null==g||g(),e()}})}}(t);return Ce(o,a.draggable.measure),u({active:{id:e,data:s.data,node:o,rect:a.draggable.measure(o)},draggableNodes:n,dragOverlay:{node:i,rect:a.dragOverlay.measure(l)},droppableContainers:r,measuringConfiguration:a,transform:d})})}let Vt=0;const Yt=p.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:a,transition:i,modifiers:s,wrapperElement:o="div",className:l,zIndex:c=999}=e;const{activatorEvent:d,active:h,activeNodeRect:m,containerNodeRect:g,draggableNodes:v,droppableContainers:x,dragOverlay:f,over:b,measuringConfiguration:y,scrollableAncestors:j,scrollableAncestorRects:w,windowRect:N}=Mt(),C=u.useContext(Ct),D=(k=null==h?void 0:h.id,u.useMemo(()=>{if(null!=k)return Vt++,Vt},[k]));var k;const E=Nt(s,{activatorEvent:d,active:h,activeNodeRect:m,containerNodeRect:g,draggingNodeRect:f.rect,over:b,overlayNodeRect:f.rect,scrollableAncestors:j,scrollableAncestorRects:w,transform:C,windowRect:N}),S=rt(m),R=Ft({config:r,draggableNodes:v,droppableContainers:x,measuringConfiguration:y}),A=S?f.setRef:void 0;return p.createElement(Pt,null,p.createElement(It,{animation:R},h&&D?p.createElement(Ut,{key:D,id:h.id,ref:A,as:o,activatorEvent:d,adjustScale:t,className:l,transition:i,rect:S,style:{zIndex:c,...a},transform:E},n):null))});function Kt(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Xt(e,t){return e.reduce((e,n,r)=>{const a=t.get(n);return a&&(e[r]=a),e},Array(e.length))}function Gt(e){return null!==e&&e>=0}const Ht=e=>{let{rects:t,activeIndex:n,overIndex:r,index:a}=e;const i=Kt(t,r,n),s=t[a],o=i[a];return o&&s?{x:o.left-s.left,y:o.top-s.top,scaleX:o.width/s.width,scaleY:o.height/s.height}:null},qt={scaleX:1,scaleY:1},_t=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:a,rects:i,overIndex:s}=e;const o=null!=(t=i[n])?t:r;if(!o)return null;if(a===n){const e=i[s];return e?{x:0,y:n<s?e.top+e.height-(o.top+o.height):e.top-o.top,...qt}:null}const l=function(e,t,n){const r=e[t],a=e[t-1],i=e[t+1];if(!r)return 0;if(n<t)return a?r.top-(a.top+a.height):i?i.top-(r.top+r.height):0;return i?i.top-(r.top+r.height):a?r.top-(a.top+a.height):0}(i,a,n);return a>n&&a<=s?{x:0,y:-o.height-l,...qt}:a<n&&a>=s?{x:0,y:o.height+l,...qt}:{x:0,y:0,...qt}};const Jt="Sortable",Qt=p.createContext({activeIndex:-1,containerId:Jt,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Ht,disabled:{draggable:!1,droppable:!1}});function $t(e){let{children:t,id:n,items:r,strategy:a=Ht,disabled:i=!1}=e;const{active:s,dragOverlay:o,droppableRects:l,over:c,measureDroppableContainers:d}=Mt(),h=R(Jt,n),m=Boolean(null!==o.rect),g=u.useMemo(()=>r.map(e=>"object"==typeof e&&"id"in e?e.id:e),[r]),v=null!=s,x=s?g.indexOf(s.id):-1,f=c?g.indexOf(c.id):-1,b=u.useRef(g),y=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(g,b.current),j=-1!==f&&-1===x||y,N=function(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}(i);w(()=>{y&&v&&d(g)},[y,g,v,d]),u.useEffect(()=>{b.current=g},[g]);const C=u.useMemo(()=>({activeIndex:x,containerId:h,disabled:N,disableTransforms:j,items:g,overIndex:f,useDragOverlay:m,sortedRects:Xt(g,l),strategy:a}),[x,h,N.draggable,N.droppable,j,g,f,l,m,a]);return p.createElement(Qt.Provider,{value:C},t)}const Zt=e=>{let{id:t,items:n,activeIndex:r,overIndex:a}=e;return Kt(n,r,a).indexOf(t)},en=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:a,items:i,newIndex:s,previousItems:o,previousContainerId:l,transition:c}=e;return!(!c||!r)&&((o===i||a!==s)&&(!!n||s!==a&&t===l))},tn={duration:200,easing:"ease"},nn="transform",rn=T.Transition.toString({property:nn,duration:0,easing:"linear"}),an={roleDescription:"sortable"};function sn(e){let{animateLayoutChanges:t=en,attributes:n,disabled:r,data:a,getNewIndex:i=Zt,id:s,strategy:o,resizeObserverConfig:l,transition:c=tn}=e;const{items:d,containerId:p,activeIndex:h,disabled:m,disableTransforms:g,sortedRects:v,overIndex:x,useDragOverlay:f,strategy:b}=u.useContext(Qt),y=function(e,t){var n,r;if("boolean"==typeof e)return{draggable:e,droppable:!1};return{draggable:null!=(n=null==e?void 0:e.draggable)?n:t.draggable,droppable:null!=(r=null==e?void 0:e.droppable)?r:t.droppable}}(r,m),j=d.indexOf(s),N=u.useMemo(()=>({sortable:{containerId:p,index:j,items:d},...a}),[p,a,j,d]),C=u.useMemo(()=>d.slice(d.indexOf(s)),[d,s]),{rect:D,node:k,isOver:E,setNodeRef:S}=Ot({id:s,data:N,disabled:y.droppable,resizeObserverConfig:{updateMeasurementsFor:C,...l}}),{active:R,activatorEvent:A,activeNodeRect:M,attributes:L,setNodeRef:I,listeners:P,isDragging:B,over:z,setActivatorNodeRef:U,transform:W}=At({id:s,data:N,attributes:{...an,...n},disabled:y.draggable}),F=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.useMemo(()=>e=>{t.forEach(t=>t(e))},t)}(S,I),V=Boolean(R),Y=V&&!g&&Gt(h)&&Gt(x),K=!f&&B,X=K&&Y?W:null,G=Y?null!=X?X:(null!=o?o:b)({rects:v,activeNodeRect:M,activeIndex:h,overIndex:x,index:j}):null,H=Gt(h)&&Gt(x)?i({id:s,items:d,activeIndex:h,overIndex:x}):j,q=null==R?void 0:R.id,_=u.useRef({activeId:q,items:d,newIndex:H,containerId:p}),J=d!==_.current.items,Q=t({active:R,containerId:p,isDragging:B,isSorting:V,id:s,index:j,items:d,newIndex:_.current.newIndex,previousItems:_.current.items,previousContainerId:_.current.containerId,transition:c,wasDragging:null!=_.current.activeId}),$=function(e){let{disabled:t,index:n,node:r,rect:a}=e;const[i,s]=u.useState(null),o=u.useRef(n);return w(()=>{if(!t&&n!==o.current&&r.current){const e=a.current;if(e){const t=le(r.current,{ignoreTransform:!0}),n={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(n.x||n.y)&&s(n)}}n!==o.current&&(o.current=n)},[t,n,r,a]),u.useEffect(()=>{i&&s(null)},[i]),i}({disabled:!Q,index:j,node:k,rect:D});return u.useEffect(()=>{V&&_.current.newIndex!==H&&(_.current.newIndex=H),p!==_.current.containerId&&(_.current.containerId=p),d!==_.current.items&&(_.current.items=d)},[V,H,p,d]),u.useEffect(()=>{if(q===_.current.activeId)return;if(null!=q&&null==_.current.activeId)return void(_.current.activeId=q);const e=setTimeout(()=>{_.current.activeId=q},50);return()=>clearTimeout(e)},[q]),{active:R,activeIndex:h,attributes:L,data:N,rect:D,index:j,newIndex:H,items:d,isOver:E,isSorting:V,isDragging:B,listeners:P,node:k,overIndex:x,over:z,setNodeRef:F,setActivatorNodeRef:U,setDroppableNodeRef:S,setDraggableNodeRef:I,transform:null!=$?$:G,transition:function(){if($||J&&_.current.newIndex===j)return rn;if(K&&!O(A)||!c)return;if(V||Q)return T.Transition.toString({...c,property:nn});return}()}}Me.Down,Me.Right,Me.Up,Me.Left;const on=u.lazy(()=>c(()=>import("./OpportunityTimeline-UeihJxFP.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),ln=e=>{if(!e)return null;return new Date(e).toLocaleDateString("en-GB",{day:"numeric",month:"short"})};function cn({country:e,children:t,isOver:n}){const{setNodeRef:r}=Ot({id:e});return d.jsx("div",{ref:r,className:"transition-all duration-200 "+(n?"ring-2 ring-accent-primary ring-opacity-50 bg-accent-primary/5 rounded-lg":""),children:t})}function dn({opportunity:e,onSelect:t,onDelete:n,onUpdateNotes:r,isExpanded:a,onToggleExpand:i,users:s}){const{attributes:o,listeners:l,setNodeRef:c,transform:u,transition:p,isDragging:h}=sn({id:e.id}),m={transform:T.Transform.toString(u),transition:p,opacity:h?.5:1};return d.jsx("div",{ref:c,style:m,className:"bg-dark-bg/50 rounded-lg border border-dark-border hover:border-accent-primary/30 transition-all "+(h?"shadow-lg ring-2 ring-accent-primary/50":""),children:d.jsx(un,{opportunity:e,onSelect:t,onDelete:n,onUpdateNotes:r,isExpanded:a,onToggleExpand:i,dragHandleProps:{...o,...l},users:s})})}function un({opportunity:e,onSelect:t,onDelete:n,onUpdateNotes:r,isExpanded:a,onToggleExpand:i,dragHandleProps:o,users:l}){const[c,p]=u.useState(!1),[h,m]=u.useState(e.notes||""),g=l?.find(t=>t.id===e.accountOwnerId),v=e.contacts?.find(e=>e.isPrimary)||e.contacts?.[0];return d.jsxs("div",{className:"p-3",children:[d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsx("button",{...o,className:"p-1 text-gray-500 hover:text-gray-300 cursor-grab active:cursor-grabbing mt-0.5",title:"Drag to move",children:d.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M8 6a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm0 6a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm0 6a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm8-12a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm0 6a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm0 6a2 2 0 1 1-4 0 2 2 0 0 1 4 0z"})})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center justify-between gap-2",children:[d.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[d.jsx("button",{onClick:()=>i(e.id),className:"text-gray-500 hover:text-gray-300",children:d.jsx("svg",{className:"w-4 h-4 transition-transform "+(a?"rotate-90":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),d.jsx("h4",{onClick:()=>t(e.id),className:"font-medium text-gray-200 truncate hover:text-accent-primary cursor-pointer",children:e.title||"Untitled"}),d.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border shrink-0 ${(e=>{switch(e){case"won":return"text-green-400 bg-green-500/10 border-green-500/20";case"lost":return"text-red-400 bg-red-500/10 border-red-500/20";default:return"text-blue-400 bg-blue-500/10 border-blue-500/20"}})(e.status)}`,children:e.status})]}),d.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[d.jsx("span",{className:"font-semibold text-gray-200",children:s(e.value||0,e.currency||"USD",0)}),d.jsx("button",{onClick:n=>{n.stopPropagation(),t(e.id)},className:"p-1 text-gray-500 hover:text-accent-primary",title:"Edit opportunity",children:d.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),d.jsx("button",{onClick:t=>{t.stopPropagation(),window.confirm("Delete this opportunity?")&&n(e.id)},className:"p-1 text-gray-500 hover:text-red-400",title:"Delete opportunity",children:d.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-xs text-gray-500 mt-1 ml-6",children:[e.client?.company&&d.jsx("span",{children:e.client.company}),e.probability>0&&d.jsxs("span",{className:"text-amber-400",children:[e.probability,"%"]}),e.expectedCloseDate&&d.jsxs("span",{className:"text-purple-400",title:"Expected close",children:["Close: ",ln(e.expectedCloseDate)]}),g&&d.jsx("span",{className:"text-blue-400",title:"Account owner",children:g.name}),v&&d.jsx("span",{className:"text-emerald-400",title:"Key contact",children:v.name}),e.nextAction&&d.jsxs("span",{className:"text-cyan-400 truncate max-w-[150px]",title:"Next action",children:[" ",e.nextAction,e.nextActionDate&&` (${ln(e.nextActionDate)})`]})]}),e.notes&&d.jsx("div",{className:"mt-2 ml-6 text-xs text-gray-400 italic line-clamp-2 bg-dark-bg/30 rounded px-2 py-1",children:e.notes}),e.contacts?.length>0&&d.jsxs("div",{className:"mt-2 ml-6 flex flex-wrap gap-1",children:[e.contacts.slice(0,3).map((e,t)=>d.jsxs("span",{className:"text-[10px] bg-dark-bg/50 px-1.5 py-0.5 rounded text-gray-400",children:[e.name,e.isPrimary&&d.jsx("span",{className:"text-amber-400 ml-0.5",children:""})]},t)),e.contacts.length>3&&d.jsxs("span",{className:"text-[10px] text-gray-500",children:["+",e.contacts.length-3," more"]})]})]})]}),a&&d.jsxs("div",{className:"mt-3 ml-6 pl-2 border-l-2 border-dark-border space-y-3",children:[e.brief&&d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider mb-1",children:"Brief"}),d.jsx("p",{className:"text-sm text-gray-300",children:e.brief})]}),d.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.source&&d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider mb-1",children:"Source"}),d.jsx("p",{className:"text-sm text-gray-300",children:e.source})]}),e.competitors?.length>0&&d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider mb-1",children:"Competitors"}),d.jsx("p",{className:"text-sm text-gray-300",children:e.competitors.join(", ")})]})]}),e.contacts?.length>0&&d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider mb-1",children:"Contacts"}),d.jsx("div",{className:"flex flex-wrap gap-2",children:e.contacts.map((e,t)=>d.jsxs("span",{className:"text-xs bg-dark-card px-2 py-1 rounded text-gray-300",children:[e.name,e.role?` (${e.role})`:"",e.isPrimary&&d.jsx("span",{className:"text-amber-400 ml-1",children:""})]},t))})]}),(e.nextAction||e.nextActionDate)&&d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider mb-1",children:"Next Action"}),d.jsxs("p",{className:"text-sm text-cyan-400",children:[e.nextAction,e.nextActionDate&&d.jsxs("span",{className:"text-gray-500 ml-2",children:["(",new Date(e.nextActionDate).toLocaleDateString(),")"]})]})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-1",children:[d.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Notes"}),!c&&d.jsx("button",{onClick:()=>{m(e.notes||""),p(!0)},className:"text-xs text-accent-primary hover:underline",children:e.notes?"Edit":"Add note"})]}),c?d.jsxs("div",{className:"space-y-2",children:[d.jsx("textarea",{value:h,onChange:e=>m(e.target.value),className:"w-full bg-dark-bg border border-dark-border rounded p-2 text-sm text-gray-200 resize-none",rows:3,autoFocus:!0,placeholder:"Add notes..."}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>{r(e.id,h),p(!1)},className:"btn-primary text-xs px-3 py-1",children:"Save"}),d.jsx("button",{onClick:()=>p(!1),className:"btn-ghost text-xs px-3 py-1",children:"Cancel"})]})]}):d.jsx("p",{className:"text-sm text-gray-400 whitespace-pre-wrap",children:e.notes||d.jsx("span",{className:"italic text-gray-600",children:"No notes"})})]}),d.jsxs("button",{onClick:()=>t(e.id),className:"text-xs text-accent-primary hover:underline flex items-center gap-1",children:["Open full details",d.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})]})}function pn({onSelectOpportunity:c}){const{opportunities:p,addOpportunity:h,deleteOpportunity:m,updateOpportunity:g}=e(),{clients:v}=t(),{settings:x,setOpsPreferences:f}=n(),{rates:b}=r(),y=x.users||[],j=x.opsPreferences||{},w=u.useMemo(()=>{const e=j.expandedCountries||{};if(0===Object.keys(e).length){const e={};return a.forEach(t=>{e[t]=!0}),e}return e},[j.expandedCountries]),N=j.hiddenCountries||{},C=j.dashboardCurrency||"USD",[D,k]=u.useState(""),[E,S]=u.useState("all"),[R,A]=u.useState("active"),[M,L]=u.useState("map"),[O,I]=u.useState({}),[T,P]=u.useState(null),[B,z]=u.useState(""),[U,W]=u.useState(""),[F,V]=u.useState("USD"),[Y,K]=u.useState(null),[X,G]=u.useState(null),[H,q]=u.useState(!1),[_,J]=u.useState({clientId:"",newClientName:"",clientWebsite:"",clientLocation:"",clientAddress:"",contactName:"",contactRole:"",contactEmail:"",contactPhone:"",title:"",country:"",brief:"",projectType:"broadcast",venue:"",startDate:"",endDate:"",expectedCloseDate:"",value:"",currency:"USD",probability:50,accountOwnerId:"",source:"",competitors:"",nextAction:"",nextActionDate:"",notes:""}),Q=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.useMemo(()=>[...t].filter(e=>null!=e),[...t])}(($=Ve,Z={activationConstraint:{distance:8}},u.useMemo(()=>({sensor:$,options:null!=Z?Z:{}}),[$,Z])));var $,Z;const te=e=>{const t="function"==typeof e?e(N):e;f({hiddenCountries:t})},ne=u.useMemo(()=>p.filter(e=>{if("all"!==R&&e.status!==R)return!1;if("all"!==E&&e.region!==E)return!1;if(D){const t=D.toLowerCase(),n=e.title?.toLowerCase().includes(t),r=e.client?.company?.toLowerCase().includes(t),a=e.country?.toLowerCase().includes(t),i=e.notes?.toLowerCase().includes(t);if(!(n||r||a||i))return!1}return!0}),[p,R,E,D]),re=u.useMemo(()=>{const e={};return a.forEach(t=>{e[t]=[]}),e.Other=[],ne.forEach(t=>{const n=t.country||"Other";e[n]?e[n].push(t):e.Other.push(t)}),e},[ne]),ae=u.useMemo(()=>{const e=p.filter(e=>"active"===e.status),t=e.reduce((e,t)=>e+i(t.value||0,t.currency||"USD",C,b),0),n=e.reduce((e,t)=>{const n=(t.probability||0)/100;return e+i(t.value||0,t.currency||"USD",C,b)*n},0);return{totalCount:e.length,totalValue:t,weightedValue:n,wonCount:p.filter(e=>"won"===e.status).length,lostCount:p.filter(e=>"lost"===e.status).length}},[p,C,b]),ie=e=>{(e=>{const t="function"==typeof e?e(w):e;f({expandedCountries:t})})(t=>({...t,[e]:!t[e]}))},se=e=>{I(t=>({...t,[e]:!t[e]}))},oe=async e=>{e.preventDefault(),T&&B.trim()&&(await h({title:B.trim(),country:T,region:l(T),value:parseFloat(U)||0,currency:F,probability:50}),P(null),z(""),V("USD"),W(""))},le=(e,t)=>{g(e,{notes:t})},ce=Y?p.find(e=>e.id===Y):null,de=e=>{const t=re[e]||[],n=w[e],r=t.reduce((e,t)=>e+i(t.value||0,t.currency||"USD",C,b),0),a=T===e,o=t.map(e=>e.id),l=X===e;return d.jsx(cn,{country:e,isOver:l,children:d.jsxs("div",{className:"card bg-dark-card border-dark-border "+(l?"border-accent-primary":""),children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("button",{onClick:()=>ie(e),className:"flex items-center gap-3 flex-1 py-1 text-left",children:[d.jsx("svg",{className:"w-4 h-4 text-gray-500 transition-transform "+(n?"rotate-90":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),d.jsx("span",{className:"font-semibold text-gray-200",children:e}),d.jsx("span",{className:"text-xs text-gray-500 bg-dark-bg px-2 py-0.5 rounded",children:t.length})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[r>0&&d.jsx("span",{className:"text-sm font-medium text-emerald-400",children:s(r,C,0)}),d.jsx("button",{onClick:()=>P(a?null:e),className:"p-1.5 rounded-lg transition-colors "+(a?"bg-accent-primary text-white":"text-gray-500 hover:text-accent-primary hover:bg-white/5"),title:"Add opportunity",children:d.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),d.jsx("button",{onClick:()=>(e=>{te(t=>({...t,[e]:!0}))})(e),className:"p-1.5 rounded-lg text-gray-500 hover:text-red-400 hover:bg-white/5 transition-colors",title:"Hide country",children:d.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),a&&d.jsx("form",{onSubmit:oe,className:"mt-3 p-3 bg-dark-bg/50 rounded-lg border border-dark-border",children:d.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.jsx("input",{type:"text",value:B,onChange:e=>z(e.target.value),placeholder:"Opportunity title...",className:"input flex-1 min-w-[150px] text-sm",autoFocus:!0}),d.jsxs("div",{className:"flex gap-1",children:[d.jsx("input",{type:"number",value:U,onChange:e=>W(e.target.value),placeholder:"Value",className:"input w-20 text-sm"}),d.jsxs("select",{value:F,onChange:e=>V(e.target.value),className:"input w-20 text-sm",children:[d.jsx("option",{value:"USD",children:"USD"}),d.jsx("option",{value:"GBP",children:"GBP"}),d.jsx("option",{value:"EUR",children:"EUR"}),d.jsx("option",{value:"MYR",children:"MYR"}),d.jsx("option",{value:"SGD",children:"SGD"}),d.jsx("option",{value:"AED",children:"AED"}),d.jsx("option",{value:"SAR",children:"SAR"}),d.jsx("option",{value:"QAR",children:"QAR"}),d.jsx("option",{value:"KWD",children:"KWD"})]})]}),d.jsx("button",{type:"submit",className:"btn-primary text-sm px-3",children:"Add"}),d.jsx("button",{type:"button",onClick:()=>P(null),className:"btn-ghost text-sm px-2",children:d.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),n&&t.length>0&&d.jsx("div",{className:"mt-3 space-y-2",children:d.jsx($t,{items:o,strategy:_t,children:t.map(e=>d.jsx(dn,{opportunity:e,onSelect:c,onDelete:m,onUpdateNotes:le,isExpanded:O[e.id],onToggleExpand:se,users:y},e.id))})}),n&&0===t.length&&!a&&d.jsx("div",{className:"mt-3 p-4 text-sm text-gray-500 italic border-2 border-dashed border-dark-border rounded-lg text-center",children:"No opportunities yet - drag one here or click + to add"})]})},e)};return d.jsxs(Et,{sensors:Q,collisionDetection:ee,onDragStart:e=>{K(e.active.id)},onDragOver:e=>{const{over:t}=e;t&&(a.includes(t.id)||"Other"===t.id)?G(t.id):G(null)},onDragEnd:e=>{const{active:t,over:n}=e;if(K(null),G(null),!n)return;const r=n.id;if(a.includes(r)||"Other"===r){const e=r,n=p.find(e=>e.id===t.id);n&&n.country!==e&&g(t.id,{country:e,region:l(e)})}},children:[d.jsxs("div",{className:"h-[calc(100vh-60px)] overflow-y-auto p-3 sm:p-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-100",children:"Opportunities"}),d.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Track deals across GCC, Central Asia & SEA"})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[d.jsxs("div",{className:"flex items-center bg-dark-card rounded-lg p-1 gap-1",children:[d.jsxs("button",{onClick:()=>L("map"),className:"px-3 py-1.5 text-xs rounded-md flex items-center gap-1.5 transition-colors "+("map"===M?"bg-accent-primary/20 text-accent-primary":"text-gray-400 hover:text-gray-200"),title:"Map View",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),"Map"]}),d.jsxs("button",{onClick:()=>L("timeline"),className:"px-3 py-1.5 text-xs rounded-md flex items-center gap-1.5 transition-colors "+("timeline"===M?"bg-accent-primary/20 text-accent-primary":"text-gray-400 hover:text-gray-200"),title:"Timeline / Gantt View",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Timeline"]})]}),d.jsxs("button",{onClick:()=>q(!0),className:"btn-primary text-sm flex items-center gap-2",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Opportunity"]}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"text",value:D,onChange:e=>k(e.target.value),placeholder:"Search...",className:"input-sm bg-dark-card border-none pl-9 w-full sm:w-48"}),d.jsx("svg",{className:"w-4 h-4 text-gray-500 absolute left-3 top-1/2 -translate-y-1/2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("select",{value:E,onChange:e=>S(e.target.value),className:"input-sm text-sm bg-dark-card border-none",children:[d.jsx("option",{value:"all",children:"All Regions"}),d.jsx("option",{value:"GCC",children:"GCC"}),d.jsx("option",{value:"Central Asia",children:"Central Asia"}),d.jsx("option",{value:"SEA",children:"SEA"})]}),d.jsxs("select",{value:R,onChange:e=>A(e.target.value),className:"input-sm text-sm bg-dark-card border-none",children:[d.jsx("option",{value:"all",children:"All Status"}),d.jsx("option",{value:"active",children:"Active"}),d.jsx("option",{value:"won",children:"Won"}),d.jsx("option",{value:"lost",children:"Lost"})]}),d.jsx("div",{className:"h-4 w-px bg-dark-border mx-1"}),d.jsx("span",{className:"text-xs text-gray-500",children:"View:"}),d.jsxs("select",{value:C,onChange:e=>{return t=e.target.value,void f({dashboardCurrency:t});var t},className:"input-sm text-sm bg-dark-card border-none w-20",children:[d.jsx("option",{value:"USD",children:"USD"}),d.jsx("option",{value:"GBP",children:"GBP"}),d.jsx("option",{value:"EUR",children:"EUR"}),d.jsx("option",{value:"MYR",children:"MYR"}),d.jsx("option",{value:"SGD",children:"SGD"}),d.jsx("option",{value:"AED",children:"AED"}),d.jsx("option",{value:"SAR",children:"SAR"}),d.jsx("option",{value:"QAR",children:"QAR"}),d.jsx("option",{value:"KWD",children:"KWD"})]})]})]})]}),"timeline"===M&&d.jsx(u.Suspense,{fallback:d.jsx("div",{className:"card p-8 text-center text-gray-400",children:"Loading timeline..."}),children:d.jsx(on,{opportunities:ne,onSelectOpportunity:c})}),"map"===M&&d.jsx(d.Fragment,{children:d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-8",children:[d.jsxs("div",{className:"card bg-gradient-to-br from-blue-900/20 to-blue-950/20 border-blue-900/30",children:[d.jsx("p",{className:"text-xs text-blue-400 mb-1 uppercase tracking-wider",children:"Active"}),d.jsx("p",{className:"text-2xl font-bold text-white",children:ae.totalCount})]}),d.jsxs("div",{className:"card bg-gradient-to-br from-emerald-900/20 to-emerald-950/20 border-emerald-900/30",children:[d.jsx("p",{className:"text-xs text-emerald-400 mb-1 uppercase tracking-wider",children:"Pipeline"}),d.jsx("p",{className:"text-2xl font-bold text-white",children:s(ae.totalValue,C,0)})]}),d.jsxs("div",{className:"card bg-gradient-to-br from-amber-900/20 to-amber-950/20 border-amber-900/30",children:[d.jsx("p",{className:"text-xs text-amber-400 mb-1 uppercase tracking-wider",children:"Weighted"}),d.jsx("p",{className:"text-2xl font-bold text-white",children:s(ae.weightedValue,C,0)})]}),d.jsxs("div",{className:"card bg-gradient-to-br from-green-900/20 to-green-950/20 border-green-900/30",children:[d.jsx("p",{className:"text-xs text-green-400 mb-1 uppercase tracking-wider",children:"Won"}),d.jsx("p",{className:"text-2xl font-bold text-green-400",children:ae.wonCount})]}),d.jsxs("div",{className:"card bg-gradient-to-br from-red-900/20 to-red-950/20 border-red-900/30",children:[d.jsx("p",{className:"text-xs text-red-400 mb-1 uppercase tracking-wider",children:"Lost"}),d.jsx("p",{className:"text-2xl font-bold text-red-400",children:ae.lostCount})]})]})}),"map"===M&&Object.entries(o).map(([e,t])=>{if(!("all"===E||E===e))return null;const n=t.filter(e=>!N[e]),r=t.filter(e=>N[e]);return d.jsxs("div",{className:"mb-8",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h2",{className:"text-lg font-bold text-gray-200 flex items-center gap-2",children:[d.jsx("svg",{className:"w-5 h-5 text-accent-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e]}),r.length>0&&d.jsx("div",{className:"flex flex-wrap gap-1",children:r.map(e=>d.jsxs("button",{onClick:()=>(e=>{te(t=>({...t,[e]:!1}))})(e),className:"text-xs px-2 py-1 bg-gray-700/50 text-gray-400 rounded hover:bg-accent-primary/20 hover:text-accent-primary transition-colors flex items-center gap-1",title:`Show ${e}`,children:[d.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e]},e))})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(e=>de(e))})]},e)})]}),d.jsx(Yt,{children:ce?d.jsx("div",{className:"bg-dark-card rounded-lg border border-accent-primary shadow-xl p-3 opacity-90",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"font-medium text-gray-200",children:ce.title||"Untitled"}),d.jsx("span",{className:"text-sm text-emerald-400",children:s(ce.value||0,ce.currency||"USD",0)})]})}):null}),H&&d.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/75 backdrop-blur-md modal-backdrop p-4",children:d.jsxs("div",{className:"bg-dark-card border border-dark-border rounded-xl p-6 w-full max-w-2xl shadow-2xl max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-xl font-bold text-gray-100",children:"New Opportunity"}),d.jsx("button",{onClick:()=>q(!1),className:"p-1 text-gray-500 hover:text-white",children:d.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!_.title.trim()||!_.country)return;if(!_.clientId&&!_.newClientName.trim())return;let n=_.clientId,r={};if(_.clientId){const e=v.find(e=>e.id===_.clientId);r={company:e?.company||"",contact:_.contactName||e?.contact||"",email:_.contactEmail||e?.email||"",phone:_.contactPhone||e?.phone||""}}else if(_.newClientName.trim()){n=(await t.getState().addClient({company:_.newClientName.trim(),contact:_.contactName,email:_.contactEmail,phone:_.contactPhone,website:_.clientWebsite,location:_.clientLocation,address:_.clientAddress})).id,r={company:_.newClientName.trim(),contact:_.contactName,email:_.contactEmail,phone:_.contactPhone}}const a=[];_.contactName&&a.push({id:`${Date.now()}-${Math.random().toString(36).substring(2,11)}`,name:_.contactName,role:_.contactRole,email:_.contactEmail,phone:_.contactPhone,isPrimary:!0}),await h({title:_.title.trim(),country:_.country,region:l(_.country),clientId:n,client:r,brief:_.brief,contacts:a,value:parseFloat(_.value)||0,currency:_.currency,probability:_.probability,accountOwnerId:_.accountOwnerId||null,source:_.source,competitors:_.competitors?_.competitors.split(",").map(e=>e.trim()).filter(Boolean):[],expectedCloseDate:_.expectedCloseDate||null,nextAction:_.nextAction,nextActionDate:_.nextActionDate||null,notes:_.notes}),q(!1),J({clientId:"",newClientName:"",clientWebsite:"",clientLocation:"",clientAddress:"",contactName:"",contactRole:"",contactEmail:"",contactPhone:"",title:"",country:"",brief:"",projectType:"broadcast",venue:"",startDate:"",endDate:"",expectedCloseDate:"",value:"",currency:"USD",probability:50,accountOwnerId:"",source:"",competitors:"",nextAction:"",nextActionDate:"",notes:""})},className:"space-y-6",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider border-b border-dark-border pb-2",children:"Client & Contact"}),d.jsxs("div",{children:[d.jsx("label",{className:"label label-required",children:"Client"}),d.jsxs("select",{value:_.clientId,onChange:e=>{const t=e.target.value,n=v.find(e=>e.id===t),r=n?.contacts?.find(e=>e.isPrimary)||n?.contacts?.[0];J({..._,clientId:t,newClientName:"",contactName:r?.name||n?.contact||"",contactRole:r?.role||"",contactEmail:r?.email||n?.email||"",contactPhone:r?.phone||n?.phone||""})},className:"input",children:[d.jsx("option",{value:"",children:"-- Select existing client or add new --"}),v.map(e=>d.jsx("option",{value:e.id,children:e.company},e.id))]})]}),!_.clientId&&d.jsxs("div",{className:"space-y-4 p-4 bg-dark-bg/30 rounded-lg border border-dark-border",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label label-required",children:"New Client Company Name"}),d.jsx("input",{type:"text",value:_.newClientName,onChange:e=>J({..._,newClientName:e.target.value}),className:"input",placeholder:"Company name..."})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Website"}),d.jsx("input",{type:"url",value:_.clientWebsite||"",onChange:e=>J({..._,clientWebsite:e.target.value}),className:"input",placeholder:"https://..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Location / City"}),d.jsx("input",{type:"text",value:_.clientLocation||"",onChange:e=>J({..._,clientLocation:e.target.value}),className:"input",placeholder:"e.g. Kuala Lumpur"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Address"}),d.jsx("textarea",{value:_.clientAddress||"",onChange:e=>J({..._,clientAddress:e.target.value}),className:"input resize-none",rows:2,placeholder:"Full address..."})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Contact Name"}),d.jsx("input",{type:"text",value:_.contactName,onChange:e=>J({..._,contactName:e.target.value}),className:"input",placeholder:"Primary contact..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Role"}),d.jsx("input",{type:"text",value:_.contactRole,onChange:e=>J({..._,contactRole:e.target.value}),className:"input",placeholder:"e.g. Producer, Director..."})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Email"}),d.jsx("input",{type:"email",value:_.contactEmail,onChange:e=>J({..._,contactEmail:e.target.value}),className:"input",placeholder:"contact@company.com"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Phone"}),d.jsx("input",{type:"tel",value:_.contactPhone,onChange:e=>J({..._,contactPhone:e.target.value}),className:"input",placeholder:"+60 12 345 6789"})]})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider border-b border-dark-border pb-2",children:"Opportunity Details"}),d.jsxs("div",{children:[d.jsx("label",{className:"label label-required",children:"Title"}),d.jsx("input",{type:"text",value:_.title,onChange:e=>J({..._,title:e.target.value}),className:"input",placeholder:"e.g. French Super Cup 2025",required:!0})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label label-required",children:"Country"}),d.jsxs("select",{value:_.country,onChange:e=>J({..._,country:e.target.value}),className:"input",required:!0,children:[d.jsx("option",{value:"",children:"Select country..."}),Object.entries(o).map(([e,t])=>d.jsx("optgroup",{label:e,children:t.map(e=>d.jsx("option",{value:e,children:e},e))},e))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Project Type"}),d.jsxs("select",{value:_.projectType,onChange:e=>J({..._,projectType:e.target.value}),className:"input",children:[d.jsx("option",{value:"broadcast",children:"Broadcast"}),d.jsx("option",{value:"live-event",children:"Live Event"}),d.jsx("option",{value:"corporate",children:"Corporate"}),d.jsx("option",{value:"concert",children:"Concert"}),d.jsx("option",{value:"sports",children:"Sports"}),d.jsx("option",{value:"conference",children:"Conference"}),d.jsx("option",{value:"exhibition",children:"Exhibition"}),d.jsx("option",{value:"other",children:"Other"})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Venue / Location"}),d.jsx("input",{type:"text",value:_.venue,onChange:e=>J({..._,venue:e.target.value}),className:"input",placeholder:"e.g. Axiata Arena, Bukit Jalil"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Brief / Description"}),d.jsx("textarea",{value:_.brief,onChange:e=>J({..._,brief:e.target.value}),className:"input resize-none",rows:3,placeholder:"Describe the project requirements..."})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider border-b border-dark-border pb-2",children:"Dates"}),d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Project Start"}),d.jsx("input",{type:"date",value:_.startDate,onChange:e=>J({..._,startDate:e.target.value}),className:"input"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Project End"}),d.jsx("input",{type:"date",value:_.endDate,onChange:e=>J({..._,endDate:e.target.value}),className:"input"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Expected Close"}),d.jsx("input",{type:"date",value:_.expectedCloseDate,onChange:e=>J({..._,expectedCloseDate:e.target.value}),className:"input"})]})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider border-b border-dark-border pb-2",children:"Financials"}),d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Estimated Value"}),d.jsx("input",{type:"number",value:_.value,onChange:e=>J({..._,value:e.target.value}),className:"input",placeholder:"0"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Currency"}),d.jsxs("select",{value:_.currency,onChange:e=>J({..._,currency:e.target.value}),className:"input",children:[d.jsx("option",{value:"USD",children:"USD"}),d.jsx("option",{value:"GBP",children:"GBP"}),d.jsx("option",{value:"EUR",children:"EUR"}),d.jsx("option",{value:"MYR",children:"MYR"}),d.jsx("option",{value:"SGD",children:"SGD"}),d.jsx("option",{value:"AED",children:"AED"}),d.jsx("option",{value:"SAR",children:"SAR"}),d.jsx("option",{value:"QAR",children:"QAR"}),d.jsx("option",{value:"KWD",children:"KWD"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Probability (%)"}),d.jsx("input",{type:"number",value:_.probability,onChange:e=>J({..._,probability:parseInt(e.target.value)||0}),className:"input",min:"0",max:"100"})]})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider border-b border-dark-border pb-2",children:"Sales Info"}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Account Owner"}),d.jsxs("select",{value:_.accountOwnerId,onChange:e=>J({..._,accountOwnerId:e.target.value}),className:"input",children:[d.jsx("option",{value:"",children:"-- Unassigned --"}),y.map(e=>d.jsx("option",{value:e.id,children:e.name},e.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Source"}),d.jsxs("select",{value:_.source,onChange:e=>J({..._,source:e.target.value}),className:"input",children:[d.jsx("option",{value:"",children:"-- Select source --"}),d.jsx("option",{value:"referral",children:"Referral"}),d.jsx("option",{value:"repeat-client",children:"Repeat Client"}),d.jsx("option",{value:"website",children:"Website"}),d.jsx("option",{value:"cold-call",children:"Cold Call"}),d.jsx("option",{value:"event",children:"Event / Trade Show"}),d.jsx("option",{value:"social-media",children:"Social Media"}),d.jsx("option",{value:"partner",children:"Partner"}),d.jsx("option",{value:"tender",children:"Tender / RFP"}),d.jsx("option",{value:"other",children:"Other"})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Competitors"}),d.jsx("input",{type:"text",value:_.competitors,onChange:e=>J({..._,competitors:e.target.value}),className:"input",placeholder:"Comma-separated, e.g. Company A, Company B"})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider border-b border-dark-border pb-2",children:"Actions & Notes"}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Next Action"}),d.jsx("input",{type:"text",value:_.nextAction,onChange:e=>J({..._,nextAction:e.target.value}),className:"input",placeholder:"e.g. Send proposal, Follow up call"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Action Date"}),d.jsx("input",{type:"date",value:_.nextActionDate,onChange:e=>J({..._,nextActionDate:e.target.value}),className:"input"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Notes"}),d.jsx("textarea",{value:_.notes,onChange:e=>J({..._,notes:e.target.value}),className:"input resize-none",rows:3,placeholder:"Any additional notes..."})]})]}),d.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-dark-border",children:[d.jsx("button",{type:"button",onClick:()=>q(!1),className:"btn-ghost",children:"Cancel"}),d.jsx("button",{type:"submit",className:"btn-primary",disabled:!_.title.trim()||!_.country||!_.clientId&&!_.newClientName.trim(),children:"Create Opportunity"})]})]})]})})]})}export{pn as default};
