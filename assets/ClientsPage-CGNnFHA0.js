import{j as e}from"./pdf-vendor-CqWdlgKa.js";import{r as t}from"./zustand-vendor-BohoUguQ.js";import{u as s,a,b as r,c as n,d as l,e as i,f as o}from"./index-BCtL5qZE.js";import{v as c,s as d}from"./validation-DQPS0e0-.js";import"./react-vendor-DRPWudcR.js";import"./supabase-vendor-DWEVVlJw.js";function m({onSelectClient:m}){const{clients:x,savedQuotes:h,getClientQuotes:p,getClientHealth:u,addClient:g,deleteClient:j}=s(),{rates:v}=a(),{settings:b,setClientsPreferences:y}=r(),f=n(e=>e.activities),N=b.projectTypes||[],w=(b.clientsPreferences||{}).currency||"USD",[C,k]=t.useState(""),[A,M]=t.useState("all"),[S,D]=t.useState("all"),[L,R]=t.useState("all"),[P,T]=t.useState((new Date).getFullYear()),[E,F]=t.useState("all"),[U,B]=t.useState(!1),W=t.useMemo(()=>{const e=new Set;return h.forEach(t=>{const s=new Date(t.savedAt||t.createdAt);isNaN(s.getTime())||e.add(s.getFullYear())}),Array.from(e).sort((e,t)=>t-e)},[h]),Y=t.useMemo(()=>{const e=new Set,t=new Set,s=new Set;return x.forEach(a=>{a.industry&&e.add(a.industry),a.region&&t.add(a.region),a.paymentTerms&&s.add(a.paymentTerms)}),{industries:Array.from(e).sort(),regions:Array.from(t).sort(),paymentTerms:Array.from(s).sort()}},[x]),[I,z]=t.useState({company:"",website:"",location:"",address:"",region:"MALAYSIA",contact:"",email:"",phone:"",tags:[],paymentTerms:"net30",preferredCurrency:"USD",industry:""}),[G,$]=t.useState({});t.useEffect(()=>{const e=e=>{"Escape"===e.key&&U&&B(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[U]);const q=t.useMemo(()=>x.map(e=>{const t=p(e.id).filter(e=>{const t=new Date(e.savedAt||e.createdAt);return!isNaN(t.getTime())&&(t.getFullYear()===P&&("all"===E||t.getMonth()===parseInt(E)))});let s=0,a=0,r=0,n=0;t.forEach(e=>{const t=l(e.sections||{},e.fees||{}),o=i(t.totalCharge,e.currency||"USD",w,v),c=o-i(t.totalCost,e.currency||"USD",w,v);"won"===e.status?(s+=o,a+=c,r++):"dead"!==e.status&&"rejected"!==e.status||n++});const o=r+n,c=o>0?Math.round(r/o*100):0,d=s>0?a/s*100:0,m=u(e.id,f,h);return{...e,totalRevenue:s,totalProfit:a,avgMargin:d,winRate:c,quoteCount:t.length,wonCount:r,lostCount:n,contactCount:e.contacts?.length||(e.contact?1:0),health:m,daysSinceActivity:m.factors.daysSinceActivity}}),[x,p,u,f,h,w,v,P,E]),H=t.useMemo(()=>{const e=h.filter(e=>{const t=new Date(e.savedAt||e.createdAt);return!isNaN(t.getTime())&&(t.getFullYear()===P&&("all"===E||t.getMonth()===parseInt(E)))}),t=x.length,s=x.reduce((e,t)=>e+(t.contacts?.length||(t.contact?1:0)),0),a=q.filter(e=>e.totalRevenue>0),r=[...a].sort((e,t)=>t.totalRevenue-e.totalRevenue),n=[...a].sort((e,t)=>t.avgMargin-e.avgMargin),o=r[0]||null,c=n[0]||null,d=q.reduce((e,t)=>e+(t.wonCount||0),0),m=d+q.reduce((e,t)=>e+(t.lostCount||0),0),p=m>0?Math.round(d/m*100):0,u=q.reduce((e,t)=>e+(t.totalRevenue||0),0),g=q.reduce((e,t)=>e+(t.totalProfit||0),0),j=u>0?g/u*100:0,b={};e.forEach(e=>{if("won"===e.status){const t=e.project?.type||"Unknown",s=l(e.sections||{},e.fees||{}),a=i(s.profit||0,e.currency||"USD",w,v);b[t]||(b[t]={profit:0,count:0}),b[t].profit+=a,b[t].count+=1}});const y=Object.entries(b).sort(([,e],[,t])=>t.profit-e.profit)[0],f={},N=new Date;for(let l=0;l<12;l++){const e=new Date(N.getFullYear(),N.getMonth()-l,1),t=`${e.getFullYear()}-${e.getMonth()}`;f[t]={label:e.toLocaleDateString("default",{month:"short",year:"2-digit"}),revenue:0,sortKey:e.getTime()}}e.forEach(e=>{if("won"===e.status){const t=new Date(e.updatedAt||e.savedAt),s=`${t.getFullYear()}-${t.getMonth()}`;if(f[s]){const t=l(e.sections||{},e.fees||{}),a=i(t.totalCharge,e.currency||"USD",w,v);f[s].revenue+=a}}});const C=Object.values(f),k=[...C].sort((e,t)=>t.revenue-e.revenue)[0],A=[...C].sort((e,t)=>e.revenue-t.revenue).find(e=>e.revenue>=0)||C[C.length-1];return{totalClients:t,totalContacts:s,topPayingClient:o,topMarginClient:c,avgWinRate:p,avgMargin:j,bestProjectType:y?{typeId:y[0],profit:y[1].profit,count:y[1].count}:null,bestMonth:k,worstMonth:A}},[q,x,h,w,v,P,E]),J=t.useMemo(()=>{const e=[];return x.forEach(t=>{if(t.contacts)t.contacts.forEach(s=>{if(s.isPrimary){const a=q.find(e=>e.id===t.id);a&&a.wonCount>0&&e.push({id:s.id,name:s.name,company:t.company,wonCount:a.wonCount,totalRevenue:a.totalRevenue})}});else if(t.contact){const s=q.find(e=>e.id===t.id);s&&s.wonCount>0&&e.push({id:t.id+"_contact",name:t.contact,company:t.company,wonCount:s.wonCount,totalRevenue:s.totalRevenue})}}),e.sort((e,t)=>t.wonCount-e.wonCount).slice(0,5)},[x,q]);return e.jsxs("div",{className:"h-[calc(100vh-60px)] overflow-y-auto p-3 sm:p-6 relative",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6 sm:mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between sm:block",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-100",children:"Clients & Accounts"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Manage client relationships"})]}),e.jsx("button",{onClick:()=>B(!0),className:"sm:hidden btn-primary text-sm flex items-center gap-2",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[e.jsxs("div",{className:"relative w-full sm:w-auto",children:[e.jsx("input",{type:"text",value:C,onChange:e=>k(e.target.value),placeholder:"Search clients...",className:"input-sm bg-dark-card border-none pl-9 w-full sm:w-64 min-h-[44px] focus:ring-1 focus:ring-accent-primary"}),e.jsx("svg",{className:"w-4 h-4 text-gray-500 absolute left-3 top-1/2 -translate-y-1/2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-1 sm:pb-0",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-dark-bg/50 rounded-lg px-1.5 py-0.5 flex-shrink-0",children:[e.jsxs("select",{value:P,onChange:e=>T(parseInt(e.target.value)),className:"input-sm text-sm w-[72px] min-h-[40px] bg-transparent border-none focus:ring-0",children:[0===W.length&&e.jsx("option",{value:(new Date).getFullYear(),children:(new Date).getFullYear()}),W.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsx("span",{className:"text-gray-600 text-sm",children:"/"}),e.jsxs("select",{value:E,onChange:e=>F(e.target.value),className:"input-sm text-sm w-28 sm:w-32 min-h-[40px] bg-transparent border-none focus:ring-0",children:[e.jsx("option",{value:"all",children:"All Months"}),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((t,s)=>e.jsx("option",{value:s,children:t},t))]})]}),e.jsxs("select",{value:w,onChange:e=>{return t=e.target.value,void y({currency:t});var t},className:"input-sm text-sm w-20 sm:w-24 min-h-[40px] bg-dark-card border-none flex-shrink-0",children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"GBP",children:"GBP"}),e.jsx("option",{value:"MYR",children:"MYR"})]}),Y.industries.length>0&&e.jsxs("select",{value:A,onChange:e=>M(e.target.value),className:"input-sm text-sm w-28 sm:w-32 min-h-[40px] bg-dark-card border-none flex-shrink-0",title:"Filter by Industry",children:[e.jsx("option",{value:"all",children:"All Industries"}),Y.industries.map(t=>e.jsx("option",{value:t,children:t},t))]}),Y.regions.length>0&&e.jsxs("select",{value:S,onChange:e=>D(e.target.value),className:"input-sm text-sm w-28 sm:w-32 min-h-[40px] bg-dark-card border-none flex-shrink-0",title:"Filter by Region",children:[e.jsx("option",{value:"all",children:"All Regions"}),Y.regions.map(t=>e.jsx("option",{value:t,children:t},t))]}),Y.paymentTerms.length>1&&e.jsxs("select",{value:L,onChange:e=>R(e.target.value),className:"input-sm text-sm w-24 sm:w-28 min-h-[40px] bg-dark-card border-none flex-shrink-0",title:"Filter by Payment Terms",children:[e.jsx("option",{value:"all",children:"All Terms"}),Y.paymentTerms.map(t=>e.jsx("option",{value:t,children:"net30"===t?"Net 30":"net45"===t?"Net 45":"net60"===t?"Net 60":"immediate"===t?"Immediate":t},t))]}),e.jsxs("button",{onClick:()=>B(!0),className:"hidden sm:flex btn-primary text-sm items-center gap-2 flex-shrink-0",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Client"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"card bg-gradient-to-br from-blue-900/20 to-blue-950/20 border-blue-900/30",children:[e.jsx("p",{className:"text-xs text-blue-400 mb-1 uppercase tracking-wider",children:"Total Clients"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:H.totalClients}),e.jsx("span",{className:"text-xs text-blue-400/60",children:"Active Companies"})]})]}),e.jsxs("div",{className:"card bg-gradient-to-br from-indigo-900/20 to-indigo-950/20 border-indigo-900/30",children:[e.jsx("p",{className:"text-xs text-indigo-400 mb-1 uppercase tracking-wider",children:"Total Contacts"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:H.totalContacts}),e.jsx("span",{className:"text-xs text-indigo-400/60",children:"Key People"})]})]}),e.jsxs("div",{className:"card bg-gradient-to-br from-purple-900/20 to-purple-950/20 border-purple-900/30",children:[e.jsx("p",{className:"text-xs text-purple-400 mb-1 uppercase tracking-wider",children:"Best Project Type"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-white truncate",children:H.bestProjectType?N.find(e=>e.id===H.bestProjectType.typeId)?.label||H.bestProjectType.typeId:"-"}),e.jsx("p",{className:"text-xs text-purple-400/60",children:H.bestProjectType?o(H.bestProjectType.profit,w,0)+" Profit":"No Data"})]})]}),e.jsxs("div",{className:"card bg-gradient-to-br from-emerald-900/20 to-emerald-950/20 border-emerald-900/30",children:[e.jsx("p",{className:"text-xs text-emerald-400 mb-1 uppercase tracking-wider",children:"Top Margin Client"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-white truncate",children:H.topMarginClient?.company||"-"}),e.jsx("p",{className:"text-xs text-emerald-400/60",children:H.topMarginClient?H.topMarginClient.avgMargin.toFixed(1)+"% Avg Margin":"No Data"})]})]}),e.jsxs("div",{className:"card bg-gradient-to-br from-amber-900/20 to-amber-950/20 border-amber-900/30",children:[e.jsx("p",{className:"text-xs text-amber-500 mb-1 uppercase tracking-wider",children:"Top Paying Client"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-white truncate",children:H.topPayingClient?.company||"-"}),e.jsx("p",{className:"text-xs text-amber-500/60",children:H.topPayingClient?o(H.topPayingClient.totalRevenue,w,0)+" Rev":"No Data"})]})]}),e.jsxs("div",{className:"card bg-gradient-to-br from-green-900/20 to-green-950/20 border-green-900/30",children:[e.jsx("p",{className:"text-xs text-green-400 mb-1 uppercase tracking-wider",children:"Avg Win Rate"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("p",{className:"text-2xl font-bold "+(H.avgWinRate>=50?"text-green-400":"text-amber-400"),children:[H.avgWinRate.toFixed(0),"%"]}),e.jsx("span",{className:"text-xs text-green-400/60",children:"Across Clients"})]})]}),e.jsxs("div",{className:"card bg-gradient-to-br from-cyan-900/20 to-cyan-950/20 border-cyan-900/30",children:[e.jsx("p",{className:"text-xs text-cyan-400 mb-1 uppercase tracking-wider",children:"Avg Margin"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("p",{className:"text-2xl font-bold "+(H.avgMargin>=30?"text-cyan-400":"text-amber-400"),children:[H.avgMargin.toFixed(1),"%"]}),e.jsx("span",{className:"text-xs text-cyan-400/60",children:"Gross Margin"})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1 uppercase tracking-wider",children:"Best Month"}),e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx("p",{className:"text-xl font-bold text-white",children:H.bestMonth?.label||"-"}),e.jsx("span",{className:"text-xs text-green-400",children:H.bestMonth&&H.bestMonth.revenue>0?o(H.bestMonth.revenue,w,0):""})]})]})]}),J.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-200 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),"VIP Contacts"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:J.map((t,s)=>e.jsxs("div",{className:"card bg-gradient-to-br from-amber-900/10 to-transparent border-amber-500/20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxs("div",{className:"w-10 h-10 rounded-full bg-amber-500/20 text-amber-500 flex items-center justify-center font-bold relative",children:[t.name.charAt(0),e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-amber-500 rounded-full text-[10px] text-black flex items-center justify-center font-bold",children:s+1})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-200",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t.company})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Wins"}),e.jsxs("span",{className:"font-bold text-white",children:[t.wonCount," Deals"]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm mt-1",children:[e.jsx("span",{className:"text-gray-400",children:"Value"}),e.jsx("span",{className:"font-bold text-emerald-400",children:o(t.totalRevenue,w,0)})]})]},t.id))})]}),e.jsx("div",{className:"mb-6",children:e.jsx("h2",{className:"text-lg font-bold text-gray-200",children:"Clients"})}),(()=>{const t=q.filter(e=>{const t=C.toLowerCase(),s=e.company?.toLowerCase().includes(t),a=e.tags?.some(e=>e.toLowerCase().includes(t)),r=e.contacts?.some(e=>e.name.toLowerCase().includes(t)),n=s||a||r,l="all"===A||e.industry===A,i="all"===S||e.region===S,o="all"===L||e.paymentTerms===L;return n&&l&&i&&o});return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(t=>e.jsxs("button",{onClick:()=>m(t.id),className:"card text-left hover:border-accent-primary/50 transition-colors group relative overflow-hidden flex flex-col h-full",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-10 h-10 rounded bg-[#2D3748] flex items-center justify-center text-sm font-bold text-gray-300 shrink-0",children:t.company?.substring(0,2).toUpperCase()}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 rounded-full border-2 border-dark-card "+("good"===t.health?.status?"bg-emerald-500":"warning"===t.health?.status?"bg-amber-500":"bg-red-500"),title:`Health: ${t.health?.status||"unknown"} (${t.health?.score||0}/100)`})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-100 group-hover:text-accent-primary transition-colors truncate max-w-[180px]",children:t.company}),t.tags&&t.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[t.tags.slice(0,3).map((t,s)=>e.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] bg-accent-primary/10 text-accent-primary border border-accent-primary/20",children:t},s)),t.tags.length>3&&e.jsxs("span",{className:"text-[10px] text-gray-500",children:["+",t.tags.length-3]})]})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-2",children:"Primary Contact"}),t.contacts&&t.contacts.find(e=>e.isPrimary)?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#2D3748] flex items-center justify-center text-xs text-gray-400",children:t.contacts.find(e=>e.isPrimary).name.charAt(0)}),e.jsx("span",{className:"text-sm text-gray-300",children:t.contacts.find(e=>e.isPrimary).name})]}):t.contact?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#2D3748] flex items-center justify-center text-xs text-gray-400",children:t.contact.charAt(0)}),e.jsx("span",{className:"text-sm text-gray-300",children:t.contact})]}):e.jsx("span",{className:"text-xs text-gray-600 italic",children:"No contacts"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t border-gray-800",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase mb-1",children:"Revenue"}),e.jsx("p",{className:"text-sm font-medium text-gray-200",children:o(t.totalRevenue,w,0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase mb-1",children:"Win Rate"}),e.jsxs("p",{className:"text-sm font-medium "+(t.winRate>=50?"text-green-400":"text-gray-200"),children:[t.winRate,"%"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase mb-1",children:"Quotes"}),e.jsx("p",{className:"text-sm font-medium text-gray-200",children:t.quoteCount})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-gray-500 uppercase",children:"Last Activity"}),e.jsx("span",{className:"text-xs font-medium "+(null===t.daysSinceActivity?"text-gray-500":t.daysSinceActivity<=7?"text-emerald-400":t.daysSinceActivity<=30?"text-amber-400":"text-red-400"),children:null===t.daysSinceActivity?"No activity":0===t.daysSinceActivity?"Today":1===t.daysSinceActivity?"Yesterday":`${t.daysSinceActivity} days ago`})]})}),e.jsx("div",{className:"absolute top-2 right-2 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity z-10",children:e.jsx("button",{onClick:e=>{e.stopPropagation(),window.confirm(`Are you sure you want to delete ${t.company}? This will also delete all associated quotes.`)&&j(t.id)},className:"p-2 min-w-[40px] min-h-[40px] text-gray-500 hover:text-red-400 bg-dark-card/80 backdrop-blur rounded-lg border border-dark-border shadow-sm hover:shadow-md transition-all flex items-center justify-center",title:"Delete Client",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},t.id))})})(),U&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/75 backdrop-blur-md modal-backdrop p-4",children:e.jsxs("div",{className:"bg-dark-card border border-dark-border rounded-xl p-4 sm:p-6 w-full max-w-lg shadow-2xl modal-content relative max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:()=>{B(!1),$({})},className:"absolute top-4 right-4 p-1 text-gray-500 hover:text-white rounded-lg hover:bg-white/10 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-xl font-bold text-gray-100 mb-2",children:"Add New Client"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Create a new client account to start generating quotes."}),e.jsxs("form",{onSubmit:e=>{e.preventDefault();const{isValid:t,errors:s}=c(I,{company:{required:!0,label:"Company name",minLength:2},email:{email:!0,label:"Email"},phone:{phone:!0,label:"Phone"},website:{url:!0,label:"Website"}});t?(g({...I,company:d(I.company),contact:d(I.contact),location:d(I.location),address:d(I.address)}),B(!1),$({}),z({company:"",website:"",location:"",address:"",region:"MALAYSIA",contact:"",email:"",phone:"",tags:[]})):$(s)},className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"company-name",className:"label label-required",children:"Company Legal Name"}),e.jsx("input",{id:"company-name",type:"text",required:!0,value:I.company,onChange:e=>{z({...I,company:e.target.value}),G.company&&$({...G,company:null})},className:"input w-full "+(G.company?"border-red-500 focus:ring-red-500":""),placeholder:"e.g. Acme Corporation Ltd","aria-invalid":G.company?"true":"false","aria-describedby":G.company?"company-error":"company-hint"}),e.jsx("p",{id:"company-hint",className:"text-xs text-gray-500 mt-1",children:"Enter the official registered company name"}),G.company&&e.jsxs("p",{id:"company-error",className:"text-xs text-red-400 mt-1 flex items-center gap-1",role:"alert",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),G.company]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Charge Basis (Region)"}),e.jsxs("select",{value:I.region||"MALAYSIA",onChange:e=>z({...I,region:e.target.value}),className:"input w-full",children:[e.jsx("option",{value:"MALAYSIA",children:"Malaysia (RM)"}),e.jsx("option",{value:"SEA",children:"SEA (USD)"}),e.jsx("option",{value:"GULF",children:"Gulf (USD)"}),e.jsx("option",{value:"CENTRAL_ASIA",children:"Central Asia (USD)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Location"}),e.jsx("input",{type:"text",value:I.location,onChange:e=>z({...I,location:e.target.value}),className:"input w-full",placeholder:"e.g. Singapore"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Company Registered Address"}),e.jsx("textarea",{value:I.address,onChange:e=>z({...I,address:e.target.value}),className:"input w-full min-h-[72px] resize-none",placeholder:"Full registered business address"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"website",className:"label",children:"Website"}),e.jsx("input",{id:"website",type:"text",value:I.website,onChange:e=>{z({...I,website:e.target.value}),G.website&&$({...G,website:null})},className:"input w-full "+(G.website?"border-red-500 focus:ring-red-500":""),placeholder:"www.acme.com or acme.com","aria-invalid":G.website?"true":"false","aria-describedby":G.website?"website-error":void 0}),G.website&&e.jsxs("p",{id:"website-error",className:"text-xs text-red-400 mt-1 flex items-center gap-1",role:"alert",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),G.website]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Industry / Sector"}),e.jsx("input",{type:"text",value:I.industry,onChange:e=>z({...I,industry:e.target.value}),className:"input w-full",placeholder:"e.g. Technology, Healthcare, Finance"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Payment Terms"}),e.jsxs("select",{value:I.paymentTerms||"net30",onChange:e=>z({...I,paymentTerms:e.target.value}),className:"input w-full",children:[e.jsx("option",{value:"immediate",children:"Immediate"}),e.jsx("option",{value:"net7",children:"Net 7"}),e.jsx("option",{value:"net14",children:"Net 14"}),e.jsx("option",{value:"net30",children:"Net 30"}),e.jsx("option",{value:"net45",children:"Net 45"}),e.jsx("option",{value:"net60",children:"Net 60"}),e.jsx("option",{value:"net90",children:"Net 90"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Preferred Currency"}),e.jsxs("select",{value:I.preferredCurrency||"USD",onChange:e=>z({...I,preferredCurrency:e.target.value}),className:"input w-full",children:[e.jsx("option",{value:"USD",children:"USD - US Dollar"}),e.jsx("option",{value:"MYR",children:"MYR - Malaysian Ringgit"}),e.jsx("option",{value:"SGD",children:"SGD - Singapore Dollar"}),e.jsx("option",{value:"GBP",children:"GBP - British Pound"}),e.jsx("option",{value:"EUR",children:"EUR - Euro"}),e.jsx("option",{value:"AED",children:"AED - UAE Dirham"}),e.jsx("option",{value:"SAR",children:"SAR - Saudi Riyal"})]})]})]})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-800/50",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-1 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-accent-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Primary Contact"]}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Optional - You can add contacts later"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Contact Name"}),e.jsx("input",{type:"text",value:I.contact,onChange:e=>z({...I,contact:e.target.value}),className:"input w-full",placeholder:"e.g. John Doe"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"contact-email",className:"label",children:"Email Address"}),e.jsx("input",{id:"contact-email",type:"email",value:I.email,onChange:e=>{z({...I,email:e.target.value}),G.email&&$({...G,email:null})},className:"input w-full "+(G.email?"border-red-500 focus:ring-red-500":""),placeholder:"john@acme.com","aria-invalid":G.email?"true":"false","aria-describedby":G.email?"email-error":void 0,autoComplete:"email"}),G.email&&e.jsxs("p",{id:"email-error",className:"text-xs text-red-400 mt-1 flex items-center gap-1",role:"alert",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),G.email]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"contact-phone",className:"label",children:"Phone Number"}),e.jsx("input",{id:"contact-phone",type:"tel",value:I.phone,onChange:e=>{z({...I,phone:e.target.value}),G.phone&&$({...G,phone:null})},className:"input w-full "+(G.phone?"border-red-500 focus:ring-red-500":""),placeholder:"+65 1234 5678","aria-invalid":G.phone?"true":"false","aria-describedby":G.phone?"phone-error":"phone-hint",autoComplete:"tel"}),e.jsx("p",{id:"phone-hint",className:"text-xs text-gray-500 mt-1",children:"Include country code"}),G.phone&&e.jsxs("p",{id:"phone-error",className:"text-xs text-red-400 mt-1 flex items-center gap-1",role:"alert",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),G.phone]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-800/50",children:[e.jsx("button",{type:"button",onClick:()=>{B(!1),$({})},className:"btn-ghost",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Create Client"})]})]})]})})]})}export{m as default};
