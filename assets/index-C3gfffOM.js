const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ClientsPage-lEBv8T9Q.js","assets/pdf-vendor-CqWdlgKa.js","assets/zustand-vendor-BohoUguQ.js","assets/react-vendor-DRPWudcR.js","assets/validation-DQPS0e0-.js","assets/supabase-vendor-DWEVVlJw.js","assets/ClientDetailPage-COGhKdbe.js","assets/OpportunitiesPage-B3dYG43-.js","assets/charts-vendor-BbtJWQl0.js","assets/OpportunityDetailPage-BCXpmJYI.js","assets/RateCardPage-Di0wjhV_.js","assets/DashboardPage-CnucA6LG.js","assets/QuotesPage-BhdkY8J8.js","assets/SettingsPage-DYqCPmdk.js","assets/FSPage-D9_2ktjQ.js","assets/CommercialTasksPage--7eEPw8X.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,n,r)=>((t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r)(t,"symbol"!=typeof n?n+"":n,r);import{j as n,P as r,S as a,V as s,T as o,D as i,I as l,p as c}from"./pdf-vendor-CqWdlgKa.js";import{c as u,r as d,R as p}from"./zustand-vendor-BohoUguQ.js";import{r as f,b as m}from"./react-vendor-DRPWudcR.js";import{c as h}from"./supabase-vendor-DWEVVlJw.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var g,y,b,x,v={exports:{}},w={},k={exports:{}},S={};function j(){return y||(y=1,k.exports=(g||(g=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<a(s,t)))break e;e[r]=t,e[n]=s,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,o=s>>>1;r<o;){var i=2*(r+1)-1,l=e[i],c=i+1,u=e[c];if(0>a(l,n))c<s&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[i]=n,r=i);else{if(!(c<s&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,i=o.now();e.unstable_now=function(){return o.now()-i}}var l=[],c=[],u=1,d=null,p=3,f=!1,m=!1,h=!1,g=!1,y="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,x="undefined"!=typeof setImmediate?setImmediate:null;function v(e){for(var a=n(c);null!==a;){if(null===a.callback)r(c);else{if(!(a.startTime<=e))break;r(c),a.sortIndex=a.expirationTime,t(l,a)}a=n(c)}}function w(e){if(h=!1,v(e),!m)if(null!==n(l))m=!0,S||(S=!0,k());else{var t=n(c);null!==t&&_(w,t.startTime-e)}}var k,S=!1,j=-1,C=5,N=-1;function E(){return!(!g&&e.unstable_now()-N<C)}function L(){if(g=!1,S){var t=e.unstable_now();N=t;var a=!0;try{e:{m=!1,h&&(h=!1,b(j),j=-1),f=!0;var s=p;try{t:{for(v(t),d=n(l);null!==d&&!(d.expirationTime>t&&E());){var o=d.callback;if("function"==typeof o){d.callback=null,p=d.priorityLevel;var i=o(d.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof i){d.callback=i,v(t),a=!0;break t}d===n(l)&&r(l),v(t)}else r(l);d=n(l)}if(null!==d)a=!0;else{var u=n(c);null!==u&&_(w,u.startTime-t),a=!1}}break e}finally{d=null,p=s,f=!1}a=void 0}}finally{a?k():S=!1}}}if("function"==typeof x)k=function(){x(L)};else if("undefined"!=typeof MessageChannel){var T=new MessageChannel,D=T.port2;T.port1.onmessage=L,k=function(){D.postMessage(null)}}else k=function(){y(L,0)};function _(t,n){j=y(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e||(C=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},e.unstable_scheduleCallback=function(r,a,s){var o=e.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?o+s:o,r){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return r={id:u++,callback:a,priorityLevel:r,startTime:s,expirationTime:i=s+i,sortIndex:-1},s>o?(r.sortIndex=s,t(c,r),null===n(l)&&r===n(c)&&(h?(b(j),j=-1):h=!0,_(w,s-o))):(r.sortIndex=i,t(l,r),m||f||(m=!0,S||(S=!0,k()))),r},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}}(S)),S)),k.exports}function C(){if(b)return w;b=1;var e=j(),t=f(),n=m();function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function s(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function o(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function i(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function l(e){if(s(e)!==e)throw Error(r(188))}function c(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=c(e)))return t;e=e.sibling}return null}var u=Object.assign,d=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),v=Symbol.for("react.consumer"),k=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),_=Symbol.iterator;function A(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=_&&e[_]||e["@@iterator"])?e:null}var P=Symbol.for("react.client.reference");function I(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===P?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case g:return"Fragment";case x:return"Profiler";case y:return"StrictMode";case C:return"Suspense";case N:return"SuspenseList";case T:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case h:return"Portal";case k:return e.displayName||"Context";case v:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case E:return null!==(t=e.displayName||null)?t:I(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return I(e(t))}catch(n){}}return null}var z=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},M=[],R=-1;function B(e){return{current:e}}function U(e){0>R||(e.current=M[R],M[R]=null,R--)}function $(e,t){R++,M[R]=e.current,e.current=t}var Q,V,W=B(null),H=B(null),G=B(null),K=B(null);function Y(e,t){switch($(G,t),$(H,e),$(W,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?xd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=vd(t=xd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(W),$(W,e)}function J(){U(W),U(H),U(G)}function X(e){null!==e.memoizedState&&$(K,e);var t=W.current,n=vd(t,e.type);t!==n&&($(H,e),$(W,n))}function Z(e){H.current===e&&(U(W),U(H)),K.current===e&&(U(K),pp._currentValue=F)}function ee(e){if(void 0===Q)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Q=t&&t[1]||"",V=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Q+e+V}var te=!1;function ne(e,t){if(!e||te)return"";te=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(a){var r=a}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(o){r=o}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(i){if(i&&r&&"string"==typeof i.stack)return[i.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),o=s[0],i=s[1];if(o&&i){var l=o.split("\n"),c=i.split("\n");for(a=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;if(r===l.length||a===c.length)for(r=l.length-1,a=c.length-1;1<=r&&0<=a&&l[r]!==c[a];)a--;for(;1<=r&&0<=a;r--,a--)if(l[r]!==c[a]){if(1!==r||1!==a)do{if(r--,0>--a||l[r]!==c[a]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=a);break}}}finally{te=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?ee(n):""}function re(e,t){switch(e.tag){case 26:case 27:case 5:return ee(e.type);case 16:return ee("Lazy");case 13:return e.child!==t&&null!==t?ee("Suspense Fallback"):ee("Suspense");case 19:return ee("SuspenseList");case 0:case 15:return ne(e.type,!1);case 11:return ne(e.type.render,!1);case 1:return ne(e.type,!0);case 31:return ee("Activity");default:return""}}function ae(e){try{var t="",n=null;do{t+=re(e,n),n=e,e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}var se=Object.prototype.hasOwnProperty,oe=e.unstable_scheduleCallback,ie=e.unstable_cancelCallback,le=e.unstable_shouldYield,ce=e.unstable_requestPaint,ue=e.unstable_now,de=e.unstable_getCurrentPriorityLevel,pe=e.unstable_ImmediatePriority,fe=e.unstable_UserBlockingPriority,me=e.unstable_NormalPriority,he=e.unstable_LowPriority,ge=e.unstable_IdlePriority,ye=e.log,be=e.unstable_setDisableYieldValue,xe=null,ve=null;function we(e){if("function"==typeof ye&&be(e),ve&&"function"==typeof ve.setStrictMode)try{ve.setStrictMode(xe,e)}catch(t){}}var ke=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(Se(e)/je|0)|0},Se=Math.log,je=Math.LN2;var Ce=256,Ne=262144,Ee=4194304;function Le(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Te(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var a=0,s=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var i=134217727&r;return 0!==i?0!==(r=i&~s)?a=Le(r):0!==(o&=i)?a=Le(o):n||0!==(n=i&~e)&&(a=Le(n)):0!==(i=r&~s)?a=Le(i):0!==o?a=Le(o):n||0!==(n=r&~e)&&(a=Le(n)),0===a?0:0!==t&&t!==a&&0===(t&s)&&((s=a&-a)>=(n=t&-t)||32===s&&4194048&n)?t:a}function De(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function _e(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ae(){var e=Ee;return!(62914560&(Ee<<=1))&&(Ee=4194304),e}function Pe(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ie(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ze(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-ke(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function Oe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ke(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}function qe(e,t){var n=t&-t;return 0!==((n=42&n?1:Fe(n))&(e.suspendedLanes|t))?0:n}function Fe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Me(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Re(){var e=q.p;return 0!==e?e:void 0===(e=window.event)?32:Lp(e.type)}function Be(e,t){var n=q.p;try{return q.p=e,t()}finally{q.p=n}}var Ue=Math.random().toString(36).slice(2),$e="__reactFiber$"+Ue,Qe="__reactProps$"+Ue,Ve="__reactContainer$"+Ue,We="__reactEvents$"+Ue,He="__reactListeners$"+Ue,Ge="__reactHandles$"+Ue,Ke="__reactResources$"+Ue,Ye="__reactMarker$"+Ue;function Je(e){delete e[$e],delete e[Qe],delete e[We],delete e[He],delete e[Ge]}function Xe(e){var t=e[$e];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ve]||n[$e]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Fd(e);null!==e;){if(n=e[$e])return n;e=Fd(e)}return t}n=(e=n).parentNode}return null}function Ze(e){if(e=e[$e]||e[Ve]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function et(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(r(33))}function tt(e){var t=e[Ke];return t||(t=e[Ke]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function nt(e){e[Ye]=!0}var rt=new Set,at={};function st(e,t){ot(e,t),ot(e+"Capture",t)}function ot(e,t){for(at[e]=t,e=0;e<t.length;e++)rt.add(t[e])}var it=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lt={},ct={};function ut(e,t,n){if(a=t,se.call(ct,a)||!se.call(lt,a)&&(it.test(a)?ct[a]=!0:(lt[a]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var a}function dt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function pt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function ft(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function mt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ht(e){if(!e._valueTracker){var t=mt(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var a=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function gt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=mt(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function yt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var bt=/[\n"\\]/g;function xt(e){return e.replace(bt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function vt(e,t,n,r,a,s,o,i){e.name="",null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ft(t)):e.value!==""+ft(t)&&(e.value=""+ft(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?kt(e,o,ft(t)):null!=n?kt(e,o,ft(n)):null!=r&&e.removeAttribute("value"),null==a&&null!=s&&(e.defaultChecked=!!s),null!=a&&(e.checked=a&&"function"!=typeof a&&"symbol"!=typeof a),null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i?e.name=""+ft(i):e.removeAttribute("name")}function wt(e,t,n,r,a,s,o,i){if(null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s&&(e.type=s),null!=t||null!=n){if(("submit"===s||"reset"===s)&&null==t)return void ht(e);n=null!=n?""+ft(n):"",t=null!=t?""+ft(t):n,i||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=null!=r?r:a)&&"symbol"!=typeof r&&!!r,e.checked=i?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o&&(e.name=o),ht(e)}function kt(e,t,n){"number"===t&&yt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function St(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ft(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function jt(e,t,n){null==t||((t=""+ft(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ft(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function Ct(e,t,n,a){if(null==t){if(null!=a){if(null!=n)throw Error(r(92));if(z(a)){if(1<a.length)throw Error(r(93));a=a[0]}n=a}null==n&&(n=""),t=n}n=ft(t),e.defaultValue=n,(a=e.textContent)===n&&""!==a&&null!==a&&(e.value=a),ht(e)}function Nt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Et=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||Et.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Tt(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(r(62));if(e=e.style,null!=n){for(var a in n)!n.hasOwnProperty(a)||null!=t&&t.hasOwnProperty(a)||(0===a.indexOf("--")?e.setProperty(a,""):"float"===a?e.cssFloat="":e[a]="");for(var s in t)a=t[s],t.hasOwnProperty(s)&&n[s]!==a&&Lt(e,s,a)}else for(var o in t)t.hasOwnProperty(o)&&Lt(e,o,t[o])}function Dt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _t=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),At=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pt(e){return At.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function It(){}var zt=null;function Ot(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var qt=null,Ft=null;function Mt(e){var t=Ze(e);if(t&&(e=t.stateNode)){var n=e[Qe]||null;e:switch(e=t.stateNode,t.type){case"input":if(vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+xt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var s=a[Qe]||null;if(!s)throw Error(r(90));vt(a,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)(a=n[t]).form===e.form&&gt(a)}break e;case"textarea":jt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&St(e,!!n.multiple,t,!1)}}}var Rt=!1;function Bt(e,t,n){if(Rt)return e(t,n);Rt=!0;try{return e(t)}finally{if(Rt=!1,(null!==qt||null!==Ft)&&(tu(),qt&&(t=qt,e=Ft,Ft=qt=null,Mt(t),e)))for(t=0;t<e.length;t++)Mt(e[t])}}function Ut(e,t){var n=e.stateNode;if(null===n)return null;var a=n[Qe]||null;if(null===a)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(r(231,t,typeof n));return n}var $t=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Qt=!1;if($t)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Qt=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch(Zp){Qt=!1}var Wt=null,Ht=null,Gt=null;function Kt(){if(Gt)return Gt;var e,t,n=Ht,r=n.length,a="value"in Wt?Wt.value:Wt.textContent,s=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[s-t];t++);return Gt=a.slice(e,1<t?1-t:void 0)}function Yt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Jt(){return!0}function Xt(){return!1}function Zt(e){function t(t,n,r,a,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?Jt:Xt,this.isPropagationStopped=Xt,this}return u(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Jt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Jt)},persist:function(){},isPersistent:Jt}),t}var en,tn,nn,rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},an=Zt(rn),sn=u({},rn,{view:0,detail:0}),on=Zt(sn),ln=u({},sn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nn&&(nn&&"mousemove"===e.type?(en=e.screenX-nn.screenX,tn=e.screenY-nn.screenY):tn=en=0,nn=e),en)},movementY:function(e){return"movementY"in e?e.movementY:tn}}),cn=Zt(ln),un=Zt(u({},ln,{dataTransfer:0})),dn=Zt(u({},sn,{relatedTarget:0})),pn=Zt(u({},rn,{animationName:0,elapsedTime:0,pseudoElement:0})),fn=Zt(u({},rn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),mn=Zt(u({},rn,{data:0})),hn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=yn[e])&&!!t[e]}function xn(){return bn}var vn=Zt(u({},sn,{key:function(e){if(e.key){var t=hn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Yt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?gn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?Yt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Yt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),wn=Zt(u({},ln,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),kn=Zt(u({},sn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),Sn=Zt(u({},rn,{propertyName:0,elapsedTime:0,pseudoElement:0})),jn=Zt(u({},ln,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Cn=Zt(u({},rn,{newState:0,oldState:0})),Nn=[9,13,27,32],En=$t&&"CompositionEvent"in window,Ln=null;$t&&"documentMode"in document&&(Ln=document.documentMode);var Tn=$t&&"TextEvent"in window&&!Ln,Dn=$t&&(!En||Ln&&8<Ln&&11>=Ln),_n=String.fromCharCode(32),An=!1;function Pn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function In(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var On={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!On[e.type]:"textarea"===t}function Fn(e,t,n,r){qt?Ft?Ft.push(r):Ft=[r]:qt=r,0<(t=sd(t,"onChange")).length&&(n=new an("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Mn=null,Rn=null;function Bn(e){Ju(e,0)}function Un(e){if(gt(et(e)))return e}function $n(e,t){if("change"===e)return t}var Qn=!1;if($t){var Vn;if($t){var Wn="oninput"in document;if(!Wn){var Hn=document.createElement("div");Hn.setAttribute("oninput","return;"),Wn="function"==typeof Hn.oninput}Vn=Wn}else Vn=!1;Qn=Vn&&(!document.documentMode||9<document.documentMode)}function Gn(){Mn&&(Mn.detachEvent("onpropertychange",Kn),Rn=Mn=null)}function Kn(e){if("value"===e.propertyName&&Un(Rn)){var t=[];Fn(t,Rn,e,Ot(e)),Bt(Bn,t)}}function Yn(e,t,n){"focusin"===e?(Gn(),Rn=n,(Mn=t).attachEvent("onpropertychange",Kn)):"focusout"===e&&Gn()}function Jn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Un(Rn)}function Xn(e,t){if("click"===e)return Un(t)}function Zn(e,t){if("input"===e||"change"===e)return Un(t)}var er="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function tr(e,t){if(er(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!se.call(t,a)||!er(e[a],t[a]))return!1}return!0}function nr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rr(e,t){var n,r=nr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=nr(r)}}function ar(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ar(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function sr(e){for(var t=yt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=yt((e=t.contentWindow).document)}return t}function or(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ir=$t&&"documentMode"in document&&11>=document.documentMode,lr=null,cr=null,ur=null,dr=!1;function pr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;dr||null==lr||lr!==yt(r)||("selectionStart"in(r=lr)&&or(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ur&&tr(ur,r)||(ur=r,0<(r=sd(cr,"onSelect")).length&&(t=new an("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=lr)))}function fr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var mr={animationend:fr("Animation","AnimationEnd"),animationiteration:fr("Animation","AnimationIteration"),animationstart:fr("Animation","AnimationStart"),transitionrun:fr("Transition","TransitionRun"),transitionstart:fr("Transition","TransitionStart"),transitioncancel:fr("Transition","TransitionCancel"),transitionend:fr("Transition","TransitionEnd")},hr={},gr={};function yr(e){if(hr[e])return hr[e];if(!mr[e])return e;var t,n=mr[e];for(t in n)if(n.hasOwnProperty(t)&&t in gr)return hr[e]=n[t];return e}$t&&(gr=document.createElement("div").style,"AnimationEvent"in window||(delete mr.animationend.animation,delete mr.animationiteration.animation,delete mr.animationstart.animation),"TransitionEvent"in window||delete mr.transitionend.transition);var br=yr("animationend"),xr=yr("animationiteration"),vr=yr("animationstart"),wr=yr("transitionrun"),kr=yr("transitionstart"),Sr=yr("transitioncancel"),jr=yr("transitionend"),Cr=new Map,Nr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){Cr.set(e,t),st(t,[e])}Nr.push("scrollEnd");var Lr="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)},Tr=[],Dr=0,_r=0;function Ar(){for(var e=Dr,t=_r=Dr=0;t<e;){var n=Tr[t];Tr[t++]=null;var r=Tr[t];Tr[t++]=null;var a=Tr[t];Tr[t++]=null;var s=Tr[t];if(Tr[t++]=null,null!==r&&null!==a){var o=r.pending;null===o?a.next=a:(a.next=o.next,o.next=a),r.pending=a}0!==s&&Or(n,a,s)}}function Pr(e,t,n,r){Tr[Dr++]=e,Tr[Dr++]=t,Tr[Dr++]=n,Tr[Dr++]=r,_r|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Ir(e,t,n,r){return Pr(e,t,n,r),qr(e)}function zr(e,t){return Pr(e,null,null,t),qr(e)}function Or(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var a=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(a=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,a&&null!==t&&(a=31-ke(n),null===(r=(e=s.hiddenUpdates)[a])?e[a]=[t]:r.push(t),t.lane=536870912|n),s):null}function qr(e){if(50<Wc)throw Wc=0,Hc=null,Error(r(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Fr={};function Mr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(e,t,n,r){return new Mr(e,t,n,r)}function Br(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ur(e,t){var n=e.alternate;return null===n?((n=Rr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function $r(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Qr(e,t,n,a,s,o){var i=0;if(a=e,"function"==typeof e)Br(e)&&(i=1);else if("string"==typeof e)i=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,W.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case T:return(e=Rr(31,n,t,s)).elementType=T,e.lanes=o,e;case g:return Vr(n.children,s,o,t);case y:i=8,s|=24;break;case x:return(e=Rr(12,n,t,2|s)).elementType=x,e.lanes=o,e;case C:return(e=Rr(13,n,t,s)).elementType=C,e.lanes=o,e;case N:return(e=Rr(19,n,t,s)).elementType=N,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case k:i=10;break e;case v:i=9;break e;case S:i=11;break e;case E:i=14;break e;case L:i=16,a=null;break e}i=29,n=Error(r(130,null===e?"null":typeof e,"")),a=null}return(t=Rr(i,n,t,s)).elementType=e,t.type=a,t.lanes=o,t}function Vr(e,t,n,r){return(e=Rr(7,e,r,t)).lanes=n,e}function Wr(e,t,n){return(e=Rr(6,e,null,t)).lanes=n,e}function Hr(e){var t=Rr(18,null,null,0);return t.stateNode=e,t}function Gr(e,t,n){return(t=Rr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Kr=new WeakMap;function Yr(e,t){if("object"==typeof e&&null!==e){var n=Kr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ae(t)},Kr.set(e,t),t)}return{value:e,source:t,stack:ae(t)}}var Jr=[],Xr=0,Zr=null,ea=0,ta=[],na=0,ra=null,aa=1,sa="";function oa(e,t){Jr[Xr++]=ea,Jr[Xr++]=Zr,Zr=e,ea=t}function ia(e,t,n){ta[na++]=aa,ta[na++]=sa,ta[na++]=ra,ra=e;var r=aa;e=sa;var a=32-ke(r)-1;r&=~(1<<a),n+=1;var s=32-ke(t)+a;if(30<s){var o=a-a%5;s=(r&(1<<o)-1).toString(32),r>>=o,a-=o,aa=1<<32-ke(t)+a|n<<a|r,sa=s+e}else aa=1<<s|n<<a|r,sa=e}function la(e){null!==e.return&&(oa(e,1),ia(e,1,0))}function ca(e){for(;e===Zr;)Zr=Jr[--Xr],Jr[Xr]=null,ea=Jr[--Xr],Jr[Xr]=null;for(;e===ra;)ra=ta[--na],ta[na]=null,sa=ta[--na],ta[na]=null,aa=ta[--na],ta[na]=null}function ua(e,t){ta[na++]=aa,ta[na++]=sa,ta[na++]=ra,aa=t.id,sa=t.overflow,ra=e}var da=null,pa=null,fa=!1,ma=null,ha=!1,ga=Error(r(519));function ya(e){throw Sa(Yr(Error(r(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),ga}function ba(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[$e]=e,t[Qe]=r,n){case"dialog":Xu("cancel",t),Xu("close",t);break;case"iframe":case"object":case"embed":Xu("load",t);break;case"video":case"audio":for(n=0;n<Ku.length;n++)Xu(Ku[n],t);break;case"source":Xu("error",t);break;case"img":case"image":case"link":Xu("error",t),Xu("load",t);break;case"details":Xu("toggle",t);break;case"input":Xu("invalid",t),wt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Xu("invalid",t);break;case"textarea":Xu("invalid",t),Ct(t,r.value,r.defaultValue,r.children)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||dd(t.textContent,n)?(null!=r.popover&&(Xu("beforetoggle",t),Xu("toggle",t)),null!=r.onScroll&&Xu("scroll",t),null!=r.onScrollEnd&&Xu("scrollend",t),null!=r.onClick&&(t.onclick=It),t=!0):t=!1,t||ya(e,!0)}function xa(e){for(da=e.return;da;)switch(da.tag){case 5:case 31:case 13:return void(ha=!1);case 27:case 3:return void(ha=!0);default:da=da.return}}function va(e){if(e!==da)return!1;if(!fa)return xa(e),fa=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||wd(e.type,e.memoizedProps)),t=!t),t&&pa&&ya(e),xa(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));pa=qd(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));pa=qd(e)}else 27===n?(n=pa,Ld(e.type)?(e=Od,Od=null,pa=e):pa=n):pa=da?zd(e.stateNode.nextSibling):null;return!0}function wa(){pa=da=null,fa=!1}function ka(){var e=ma;return null!==e&&(null===Ac?Ac=e:Ac.push.apply(Ac,e),ma=null),e}function Sa(e){null===ma?ma=[e]:ma.push(e)}var ja=B(null),Ca=null,Na=null;function Ea(e,t,n){$(ja,t._currentValue),t._currentValue=n}function La(e){e._currentValue=ja.current,U(ja)}function Ta(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Da(e,t,n,a){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var o=s.dependencies;if(null!==o){var i=s.child;o=o.firstContext;e:for(;null!==o;){var l=o;o=s;for(var c=0;c<t.length;c++)if(l.context===t[c]){o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ta(o.return,n,e),a||(i=null);break e}o=l.next}}else if(18===s.tag){if(null===(i=s.return))throw Error(r(341));i.lanes|=n,null!==(o=i.alternate)&&(o.lanes|=n),Ta(i,n,e),i=null}else i=s.child;if(null!==i)i.return=s;else for(i=s;null!==i;){if(i===e){i=null;break}if(null!==(s=i.sibling)){s.return=i.return,i=s;break}i=i.return}s=i}}function _a(e,t,n,a){e=null;for(var s=t,o=!1;null!==s;){if(!o)if(524288&s.flags)o=!0;else if(262144&s.flags)break;if(10===s.tag){var i=s.alternate;if(null===i)throw Error(r(387));if(null!==(i=i.memoizedProps)){var l=s.type;er(s.pendingProps.value,i.value)||(null!==e?e.push(l):e=[l])}}else if(s===K.current){if(null===(i=s.alternate))throw Error(r(387));i.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(pp):e=[pp])}s=s.return}null!==e&&Da(t,e,n,a),t.flags|=262144}function Aa(e){for(e=e.firstContext;null!==e;){if(!er(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Pa(e){Ca=e,Na=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ia(e){return Oa(Ca,e)}function za(e,t){return null===Ca&&Pa(e),Oa(e,t)}function Oa(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Na){if(null===e)throw Error(r(308));Na=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Na=Na.next=t;return n}var qa="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Fa=e.unstable_scheduleCallback,Ma=e.unstable_NormalPriority,Ra={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ba(){return{controller:new qa,data:new Map,refCount:0}}function Ua(e){e.refCount--,0===e.refCount&&Fa(Ma,function(){e.controller.abort()})}var $a=null,Qa=0,Va=0,Wa=null;function Ha(){if(0===--Qa&&null!==$a){null!==Wa&&(Wa.status="fulfilled");var e=$a;$a=null,Va=0,Wa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ga=O.S;O.S=function(e,t){zc=ue(),"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===$a){var n=$a=[];Qa=0,Va=Qu(),Wa={status:"pending",value:void 0,then:function(e){n.push(e)}}}Qa++,t.then(Ha,Ha)}(0,t),null!==Ga&&Ga(e,t)};var Ka=B(null);function Ya(){var e=Ka.current;return null!==e?e:gc.pooledCache}function Ja(e,t){$(Ka,null===t?Ka.current:t.pool)}function Xa(){var e=Ya();return null===e?null:{parent:Ra._currentValue,pool:e}}var Za=Error(r(460)),es=Error(r(474)),ts=Error(r(542)),ns={then:function(){}};function rs(e){return"fulfilled"===(e=e.status)||"rejected"===e}function as(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(It,It),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ls(e=t.reason),e;default:if("string"==typeof t.status)t.then(It,It);else{if(null!==(e=gc)&&100<e.shellSuspendCounter)throw Error(r(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ls(e=t.reason),e}throw os=t,Za}}function ss(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"==typeof t&&"function"==typeof t.then)throw os=t,Za;throw t}}var os=null;function is(){if(null===os)throw Error(r(459));var e=os;return os=null,e}function ls(e){if(e===Za||e===ts)throw Error(r(483))}var cs=null,us=0;function ds(e){var t=us;return us+=1,null===cs&&(cs=[]),as(cs,e,t)}function ps(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function fs(e,t){if(t.$$typeof===d)throw Error(r(525));throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ms(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function a(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=Ur(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function i(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Wr(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===g?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===L&&ss(a)===t.type)?(ps(t=s(t,n.props),n),t.return=e,t):(ps(t=Qr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Gr(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Vr(n,e.mode,r,a)).return=e,t):((t=s(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Wr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case p:return ps(n=Qr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case h:return(t=Gr(t,e.mode,n)).return=e,t;case L:return f(e,t=ss(t),n)}if(z(t)||A(t))return(t=Vr(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return f(e,ds(t),n);if(t.$$typeof===k)return f(e,za(e,t),n);fs(e,t)}return null}function m(e,t,n,r){var a=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==a?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===a?c(e,t,n,r):null;case h:return n.key===a?u(e,t,n,r):null;case L:return m(e,t,n=ss(n),r)}if(z(n)||A(n))return null!==a?null:d(e,t,n,r,null);if("function"==typeof n.then)return m(e,t,ds(n),r);if(n.$$typeof===k)return m(e,t,za(e,n),r);fs(e,n)}return null}function y(e,t,n,r,a){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"==typeof r&&null!==r){switch(r.$$typeof){case p:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case h:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case L:return y(e,t,n,r=ss(r),a)}if(z(r)||A(r))return d(t,e=e.get(n)||null,r,a,null);if("function"==typeof r.then)return y(e,t,n,ds(r),a);if(r.$$typeof===k)return y(e,t,n,za(t,r),a);fs(t,r)}return null}function b(l,c,u,d){if("object"==typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var x=u.key;null!==c;){if(c.key===x){if((x=u.type)===g){if(7===c.tag){n(l,c.sibling),(d=s(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===x||"object"==typeof x&&null!==x&&x.$$typeof===L&&ss(x)===c.type){n(l,c.sibling),ps(d=s(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((d=Vr(u.props.children,l.mode,d,u.key)).return=l,l=d):(ps(d=Qr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return i(l);case h:e:{for(x=u.key;null!==c;){if(c.key===x){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=s(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Gr(u,l.mode,d)).return=l,l=d}return i(l);case L:return b(l,c,u=ss(u),d)}if(z(u))return function(r,s,i,l){for(var c=null,u=null,d=s,p=s=0,h=null;null!==d&&p<i.length;p++){d.index>p?(h=d,d=null):h=d.sibling;var g=m(r,d,i[p],l);if(null===g){null===d&&(d=h);break}e&&d&&null===g.alternate&&t(r,d),s=o(g,s,p),null===u?c=g:u.sibling=g,u=g,d=h}if(p===i.length)return n(r,d),fa&&oa(r,p),c;if(null===d){for(;p<i.length;p++)null!==(d=f(r,i[p],l))&&(s=o(d,s,p),null===u?c=d:u.sibling=d,u=d);return fa&&oa(r,p),c}for(d=a(d);p<i.length;p++)null!==(h=y(d,r,p,i[p],l))&&(e&&null!==h.alternate&&d.delete(null===h.key?p:h.key),s=o(h,s,p),null===u?c=h:u.sibling=h,u=h);return e&&d.forEach(function(e){return t(r,e)}),fa&&oa(r,p),c}(l,c,u,d);if(A(u)){if("function"!=typeof(x=A(u)))throw Error(r(150));return function(s,i,l,c){if(null==l)throw Error(r(151));for(var u=null,d=null,p=i,h=i=0,g=null,b=l.next();null!==p&&!b.done;h++,b=l.next()){p.index>h?(g=p,p=null):g=p.sibling;var x=m(s,p,b.value,c);if(null===x){null===p&&(p=g);break}e&&p&&null===x.alternate&&t(s,p),i=o(x,i,h),null===d?u=x:d.sibling=x,d=x,p=g}if(b.done)return n(s,p),fa&&oa(s,h),u;if(null===p){for(;!b.done;h++,b=l.next())null!==(b=f(s,b.value,c))&&(i=o(b,i,h),null===d?u=b:d.sibling=b,d=b);return fa&&oa(s,h),u}for(p=a(p);!b.done;h++,b=l.next())null!==(b=y(p,s,h,b.value,c))&&(e&&null!==b.alternate&&p.delete(null===b.key?h:b.key),i=o(b,i,h),null===d?u=b:d.sibling=b,d=b);return e&&p.forEach(function(e){return t(s,e)}),fa&&oa(s,h),u}(l,c,u=x.call(u),d)}if("function"==typeof u.then)return b(l,c,ds(u),d);if(u.$$typeof===k)return b(l,c,za(l,u),d);fs(l,u)}return"string"==typeof u&&""!==u||"number"==typeof u||"bigint"==typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=s(c,u)).return=l,l=d):(n(l,c),(d=Wr(u,l.mode,d)).return=l,l=d),i(l)):n(l,c)}return function(e,t,n,r){try{us=0;var a=b(e,t,n,r);return cs=null,a}catch(o){if(o===Za||o===ts)throw o;var s=Rr(29,o,null,e.mode);return s.lanes=r,s.return=e,s}}}var hs=ms(!0),gs=ms(!1),ys=!1;function bs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function vs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ws(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&hc){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,t=qr(e),Or(e,null,n),t}return Pr(e,r,t,n),qr(e)}function ks(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}function Ss(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?a=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?a=s=t:s=s.next=t}else a=s=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var js=!1;function Cs(){if(js){if(null!==Wa)throw Wa}}function Ns(e,t,n,r){js=!1;var a=e.updateQueue;ys=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,i=a.shared.pending;if(null!==i){a.shared.pending=null;var l=i,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var d=e.alternate;null!==d&&((i=(d=d.updateQueue).lastBaseUpdate)!==o&&(null===i?d.firstBaseUpdate=c:i.next=c,d.lastBaseUpdate=l))}if(null!==s){var p=a.baseState;for(o=0,d=c=l=null,i=s;;){var f=-536870913&i.lane,m=f!==i.lane;if(m?(bc&f)===f:(r&f)===f){0!==f&&f===Va&&(js=!0),null!==d&&(d=d.next={lane:0,tag:i.tag,payload:i.payload,callback:null,next:null});e:{var h=e,g=i;f=t;var y=n;switch(g.tag){case 1:if("function"==typeof(h=g.payload)){p=h.call(y,p,f);break e}p=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null==(f="function"==typeof(h=g.payload)?h.call(y,p,f):h))break e;p=u({},p,f);break e;case 2:ys=!0}}null!==(f=i.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=a.callbacks)?a.callbacks=[f]:m.push(f))}else m={lane:f,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===d?(c=d=m,l=p):d=d.next=m,o|=f;if(null===(i=i.next)){if(null===(i=a.shared.pending))break;i=(m=i).next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}null===d&&(l=p),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null===s&&(a.shared.lanes=0),Nc|=o,e.lanes=o,e.memoizedState=p}}function Es(e,t){if("function"!=typeof e)throw Error(r(191,e));e.call(t)}function Ls(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Es(n[e],t)}var Ts=B(null),Ds=B(0);function _s(e,t){$(Ds,e=jc),$(Ts,t),jc=e|t.baseLanes}function As(){$(Ds,jc),$(Ts,Ts.current)}function Ps(){jc=Ds.current,U(Ts),U(Ds)}var Is=B(null),zs=null;function Os(e){var t=e.alternate;$(Bs,1&Bs.current),$(Is,e),null===zs&&(null===t||null!==Ts.current||null!==t.memoizedState)&&(zs=e)}function qs(e){$(Bs,Bs.current),$(Is,e),null===zs&&(zs=e)}function Fs(e){22===e.tag?($(Bs,Bs.current),$(Is,e),null===zs&&(zs=e)):Ms()}function Ms(){$(Bs,Bs.current),$(Is,Is.current)}function Rs(e){U(Is),zs===e&&(zs=null),U(Bs)}var Bs=B(0);function Us(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Pd(n)||Id(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(128&t.flags)return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var $s=0,Qs=null,Vs=null,Ws=null,Hs=!1,Gs=!1,Ks=!1,Ys=0,Js=0,Xs=null,Zs=0;function eo(){throw Error(r(321))}function to(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!er(e[n],t[n]))return!1;return!0}function no(e,t,n,r,a,s){return $s=s,Qs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?bi:xi,Ks=!1,s=n(r,a),Ks=!1,Gs&&(s=ao(t,n,r,a)),ro(e),s}function ro(e){O.H=yi;var t=null!==Vs&&null!==Vs.next;if($s=0,Ws=Vs=Qs=null,Hs=!1,Js=0,Xs=null,t)throw Error(r(300));null===e||zi||null!==(e=e.dependencies)&&Aa(e)&&(zi=!0)}function ao(e,t,n,a){Qs=e;var s=0;do{if(Gs&&(Xs=null),Js=0,Gs=!1,25<=s)throw Error(r(301));if(s+=1,Ws=Vs=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}O.H=vi,o=t(n,a)}while(Gs);return o}function so(){var e=O.H,t=e.useState()[0];return t="function"==typeof t.then?po(t):t,e=e.useState()[0],(null!==Vs?Vs.memoizedState:null)!==e&&(Qs.flags|=1024),t}function oo(){var e=0!==Ys;return Ys=0,e}function io(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function lo(e){if(Hs){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Hs=!1}$s=0,Ws=Vs=Qs=null,Gs=!1,Js=Ys=0,Xs=null}function co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ws?Qs.memoizedState=Ws=e:Ws=Ws.next=e,Ws}function uo(){if(null===Vs){var e=Qs.alternate;e=null!==e?e.memoizedState:null}else e=Vs.next;var t=null===Ws?Qs.memoizedState:Ws.next;if(null!==t)Ws=t,Vs=e;else{if(null===e){if(null===Qs.alternate)throw Error(r(467));throw Error(r(310))}e={memoizedState:(Vs=e).memoizedState,baseState:Vs.baseState,baseQueue:Vs.baseQueue,queue:Vs.queue,next:null},null===Ws?Qs.memoizedState=Ws=e:Ws=Ws.next=e}return Ws}function po(e){var t=Js;return Js+=1,null===Xs&&(Xs=[]),e=as(Xs,e,t),t=Qs,null===(null===Ws?t.memoizedState:Ws.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?bi:xi),e}function fo(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return po(e);if(e.$$typeof===k)return Ia(e)}throw Error(r(438,String(e)))}function mo(e){var t=null,n=Qs.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Qs.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Qs.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=D;return t.index++,n}function ho(e,t){return"function"==typeof t?t(e):t}function go(e){return yo(uo(),Vs,e)}function yo(e,t,n){var a=e.queue;if(null===a)throw Error(r(311));a.lastRenderedReducer=n;var s=e.baseQueue,o=a.pending;if(null!==o){if(null!==s){var i=s.next;s.next=o.next,o.next=i}t.baseQueue=s=o,a.pending=null}if(o=e.baseState,null===s)e.memoizedState=o;else{var l=i=null,c=null,u=t=s.next,d=!1;do{var p=-536870913&u.lane;if(p!==u.lane?(bc&p)===p:($s&p)===p){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),p===Va&&(d=!0);else{if(($s&f)===f){u=u.next,f===Va&&(d=!0);continue}p={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=p,i=o):c=c.next=p,Qs.lanes|=f,Nc|=f}p=u.action,Ks&&n(o,p),o=u.hasEagerState?u.eagerState:n(o,p)}else f={lane:p,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,i=o):c=c.next=f,Qs.lanes|=p,Nc|=p;u=u.next}while(null!==u&&u!==t);if(null===c?i=o:c.next=l,!er(o,e.memoizedState)&&(zi=!0,d&&null!==(n=Wa)))throw n;e.memoizedState=o,e.baseState=i,e.baseQueue=c,a.lastRenderedState=o}return null===s&&(a.lanes=0),[e.memoizedState,a.dispatch]}function bo(e){var t=uo(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var a=n.dispatch,s=n.pending,o=t.memoizedState;if(null!==s){n.pending=null;var i=s=s.next;do{o=e(o,i.action),i=i.next}while(i!==s);er(o,t.memoizedState)||(zi=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,a]}function xo(e,t,n){var a=Qs,s=uo(),o=fa;if(o){if(void 0===n)throw Error(r(407));n=n()}else n=t();var i=!er((Vs||s).memoizedState,n);if(i&&(s.memoizedState=n,zi=!0),s=s.queue,Qo(ko.bind(null,a,s,e),[e]),s.getSnapshot!==t||i||null!==Ws&&1&Ws.memoizedState.tag){if(a.flags|=2048,Mo(9,{destroy:void 0},wo.bind(null,a,s,n,t),null),null===gc)throw Error(r(349));o||127&$s||vo(a,t,n)}return n}function vo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Qs.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Qs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function wo(e,t,n,r){t.value=n,t.getSnapshot=r,So(t)&&jo(e)}function ko(e,t,n){return n(function(){So(t)&&jo(e)})}function So(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!er(e,n)}catch(r){return!0}}function jo(e){var t=zr(e,2);null!==t&&Yc(t,e,2)}function Co(e){var t=co();if("function"==typeof e){var n=e;if(e=n(),Ks){we(!0);try{n()}finally{we(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:e},t}function No(e,t,n,r){return e.baseState=n,yo(e,Vs,"function"==typeof r?r:ho)}function Eo(e,t,n,a,s){if(mi(e))throw Error(r(485));if(null!==(e=t.action)){var o={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==O.T?n(!0):o.isTransition=!1,a(o),null===(n=t.pending)?(o.next=t.pending=o,Lo(t,o)):(o.next=n.next,t.pending=n.next=o)}}function Lo(e,t){var n=t.action,r=t.payload,a=e.state;if(t.isTransition){var s=O.T,o={};O.T=o;try{var i=n(a,r),l=O.S;null!==l&&l(o,i),To(e,t,i)}catch(c){_o(e,t,c)}finally{null!==s&&null!==o.types&&(s.types=o.types),O.T=s}}else try{To(e,t,s=n(a,r))}catch(u){_o(e,t,u)}}function To(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){Do(e,t,n)},function(n){return _o(e,t,n)}):Do(e,t,n)}function Do(e,t,n){t.status="fulfilled",t.value=n,Ao(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Lo(e,n)))}function _o(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Ao(t),t=t.next}while(t!==r)}e.action=null}function Ao(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Po(e,t){return t}function Io(e,t){if(fa){var n=gc.formState;if(null!==n){e:{var r=Qs;if(fa){if(pa){t:{for(var a=pa,s=ha;8!==a.nodeType;){if(!s){a=null;break t}if(null===(a=zd(a.nextSibling))){a=null;break t}}a="F!"===(s=a.data)||"F"===s?a:null}if(a){pa=zd(a.nextSibling),r="F!"===a.data;break e}}ya(r)}r=!1}r&&(t=n[0])}}return(n=co()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Po,lastRenderedState:t},n.queue=r,n=di.bind(null,Qs,r),r.dispatch=n,r=Co(!1),s=fi.bind(null,Qs,!1,r.queue),a={state:t,dispatch:null,action:e,pending:null},(r=co()).queue=a,n=Eo.bind(null,Qs,a,s,n),a.dispatch=n,r.memoizedState=e,[t,n,!1]}function zo(e){return Oo(uo(),Vs,e)}function Oo(e,t,n){if(t=yo(e,t,Po)[0],e=go(ho)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var r=po(t)}catch(o){if(o===Za)throw ts;throw o}else r=t;var a=(t=uo()).queue,s=a.dispatch;return n!==t.memoizedState&&(Qs.flags|=2048,Mo(9,{destroy:void 0},qo.bind(null,a,n),null)),[r,s,e]}function qo(e,t){e.action=t}function Fo(e){var t=uo(),n=Vs;if(null!==n)return Oo(t,n,e);uo(),t=t.memoizedState;var r=(n=uo()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Mo(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Qs.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Qs.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ro(){return uo().memoizedState}function Bo(e,t,n,r){var a=co();Qs.flags|=e,a.memoizedState=Mo(1|t,{destroy:void 0},n,void 0===r?null:r)}function Uo(e,t,n,r){var a=uo();r=void 0===r?null:r;var s=a.memoizedState.inst;null!==Vs&&null!==r&&to(r,Vs.memoizedState.deps)?a.memoizedState=Mo(t,s,n,r):(Qs.flags|=e,a.memoizedState=Mo(1|t,s,n,r))}function $o(e,t){Bo(8390656,8,e,t)}function Qo(e,t){Uo(2048,8,e,t)}function Vo(e){var t=uo().memoizedState;return function(e){Qs.flags|=4;var t=Qs.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Qs.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(2&hc)throw Error(r(440));return t.impl.apply(void 0,arguments)}}function Wo(e,t){return Uo(4,2,e,t)}function Ho(e,t){return Uo(4,4,e,t)}function Go(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Ko(e,t,n){n=null!=n?n.concat([e]):null,Uo(4,4,Go.bind(null,t,e),n)}function Yo(){}function Jo(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&to(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&to(t,r[1]))return r[0];if(r=e(),Ks){we(!0);try{e()}finally{we(!1)}}return n.memoizedState=[r,t],r}function Zo(e,t,n){return void 0===n||1073741824&$s&&!(261930&bc)?e.memoizedState=t:(e.memoizedState=n,e=Kc(),Qs.lanes|=e,Nc|=e,n)}function ei(e,t,n,r){return er(n,t)?n:null!==Ts.current?(e=Zo(e,n,r),er(e,t)||(zi=!0),e):42&$s&&(!(1073741824&$s)||261930&bc)?(e=Kc(),Qs.lanes|=e,Nc|=e,t):(zi=!0,e.memoizedState=n)}function ti(e,t,n,r,a){var s=q.p;q.p=0!==s&&8>s?s:8;var o,i,l,c=O.T,u={};O.T=u,fi(e,!1,t,n);try{var d=a(),p=O.S;if(null!==p&&p(u,d),null!==d&&"object"==typeof d&&"function"==typeof d.then)pi(e,t,(o=r,i=[],l={status:"pending",value:null,reason:null,then:function(e){i.push(e)}},d.then(function(){l.status="fulfilled",l.value=o;for(var e=0;e<i.length;e++)(0,i[e])(o)},function(e){for(l.status="rejected",l.reason=e,e=0;e<i.length;e++)(0,i[e])(void 0)}),l),Gc());else pi(e,t,r,Gc())}catch(f){pi(e,t,{then:function(){},status:"rejected",reason:f},Gc())}finally{q.p=s,null!==c&&null!==u.types&&(c.types=u.types),O.T=c}}function ni(){}function ri(e,t,n,a){if(5!==e.tag)throw Error(r(476));var s=ai(e).queue;ti(e,s,t,F,null===n?ni:function(){return si(e),n(a)})}function ai(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:F},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function si(e){var t=ai(e);null===t.next&&(t=e.alternate.memoizedState),pi(e,t.next.queue,{},Gc())}function oi(){return Ia(pp)}function ii(){return uo().memoizedState}function li(){return uo().memoizedState}function ci(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Gc(),r=ws(t,e=vs(n),n);return null!==r&&(Yc(r,t,n),ks(r,t,n)),t={cache:Ba()},void(e.payload=t)}t=t.return}}function ui(e,t,n){var r=Gc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},mi(e)?hi(t,n):null!==(n=Ir(e,t,n,r))&&(Yc(n,e,r),gi(n,t,r))}function di(e,t,n){pi(e,t,n,Gc())}function pi(e,t,n,r){var a={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(mi(e))hi(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,i=s(o,n);if(a.hasEagerState=!0,a.eagerState=i,er(i,o))return Pr(e,t,a,0),null===gc&&Ar(),!1}catch(l){}if(null!==(n=Ir(e,t,a,r)))return Yc(n,e,r),gi(n,t,r),!0}return!1}function fi(e,t,n,a){if(a={lane:2,revertLane:Qu(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},mi(e)){if(t)throw Error(r(479))}else null!==(t=Ir(e,n,a,2))&&Yc(t,e,2)}function mi(e){var t=e.alternate;return e===Qs||null!==t&&t===Qs}function hi(e,t){Gs=Hs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function gi(e,t,n){if(4194048&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}var yi={readContext:Ia,use:fo,useCallback:eo,useContext:eo,useEffect:eo,useImperativeHandle:eo,useLayoutEffect:eo,useInsertionEffect:eo,useMemo:eo,useReducer:eo,useRef:eo,useState:eo,useDebugValue:eo,useDeferredValue:eo,useTransition:eo,useSyncExternalStore:eo,useId:eo,useHostTransitionStatus:eo,useFormState:eo,useActionState:eo,useOptimistic:eo,useMemoCache:eo,useCacheRefresh:eo};yi.useEffectEvent=eo;var bi={readContext:Ia,use:fo,useCallback:function(e,t){return co().memoizedState=[e,void 0===t?null:t],e},useContext:Ia,useEffect:$o,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,Bo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){Bo(4,2,e,t)},useMemo:function(e,t){var n=co();t=void 0===t?null:t;var r=e();if(Ks){we(!0);try{e()}finally{we(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=co();if(void 0!==n){var a=n(t);if(Ks){we(!0);try{n(t)}finally{we(!1)}}}else a=t;return r.memoizedState=r.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},r.queue=e,e=e.dispatch=ui.bind(null,Qs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},co().memoizedState=e},useState:function(e){var t=(e=Co(e)).queue,n=di.bind(null,Qs,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Yo,useDeferredValue:function(e,t){return Zo(co(),e,t)},useTransition:function(){var e=Co(!1);return e=ti.bind(null,Qs,e.queue,!0,!1),co().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=Qs,s=co();if(fa){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===gc)throw Error(r(349));127&bc||vo(a,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,$o(ko.bind(null,a,o,e),[e]),a.flags|=2048,Mo(9,{destroy:void 0},wo.bind(null,a,o,n,t),null),n},useId:function(){var e=co(),t=gc.identifierPrefix;if(fa){var n=sa;t="_"+t+"R_"+(n=(aa&~(1<<32-ke(aa)-1)).toString(32)+n),0<(n=Ys++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Zs++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:oi,useFormState:Io,useActionState:Io,useOptimistic:function(e){var t=co();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=fi.bind(null,Qs,!0,n),n.dispatch=t,[e,t]},useMemoCache:mo,useCacheRefresh:function(){return co().memoizedState=ci.bind(null,Qs)},useEffectEvent:function(e){var t=co(),n={impl:e};return t.memoizedState=n,function(){if(2&hc)throw Error(r(440));return n.impl.apply(void 0,arguments)}}},xi={readContext:Ia,use:fo,useCallback:Jo,useContext:Ia,useEffect:Qo,useImperativeHandle:Ko,useInsertionEffect:Wo,useLayoutEffect:Ho,useMemo:Xo,useReducer:go,useRef:Ro,useState:function(){return go(ho)},useDebugValue:Yo,useDeferredValue:function(e,t){return ei(uo(),Vs.memoizedState,e,t)},useTransition:function(){var e=go(ho)[0],t=uo().memoizedState;return["boolean"==typeof e?e:po(e),t]},useSyncExternalStore:xo,useId:ii,useHostTransitionStatus:oi,useFormState:zo,useActionState:zo,useOptimistic:function(e,t){return No(uo(),0,e,t)},useMemoCache:mo,useCacheRefresh:li};xi.useEffectEvent=Vo;var vi={readContext:Ia,use:fo,useCallback:Jo,useContext:Ia,useEffect:Qo,useImperativeHandle:Ko,useInsertionEffect:Wo,useLayoutEffect:Ho,useMemo:Xo,useReducer:bo,useRef:Ro,useState:function(){return bo(ho)},useDebugValue:Yo,useDeferredValue:function(e,t){var n=uo();return null===Vs?Zo(n,e,t):ei(n,Vs.memoizedState,e,t)},useTransition:function(){var e=bo(ho)[0],t=uo().memoizedState;return["boolean"==typeof e?e:po(e),t]},useSyncExternalStore:xo,useId:ii,useHostTransitionStatus:oi,useFormState:Fo,useActionState:Fo,useOptimistic:function(e,t){var n=uo();return null!==Vs?No(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:mo,useCacheRefresh:li};function wi(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:u({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}vi.useEffectEvent=Vo;var ki={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Gc(),a=vs(r);a.payload=t,null!=n&&(a.callback=n),null!==(t=ws(e,a,r))&&(Yc(t,e,r),ks(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Gc(),a=vs(r);a.tag=1,a.payload=t,null!=n&&(a.callback=n),null!==(t=ws(e,a,r))&&(Yc(t,e,r),ks(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Gc(),r=vs(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=ws(e,r,n))&&(Yc(t,e,n),ks(t,e,n))}};function Si(e,t,n,r,a,s,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!tr(n,r)||!tr(a,s))}function ji(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ki.enqueueReplaceState(t,t.state,null)}function Ci(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var a in n===t&&(n=u({},n)),e)void 0===n[a]&&(n[a]=e[a]);return n}function Ni(e){Lr(e)}function Ei(e){}function Li(e){Lr(e)}function Ti(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Di(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function _i(e,t,n){return(n=vs(n)).tag=3,n.payload={element:null},n.callback=function(){Ti(e,t)},n}function Ai(e){return(e=vs(e)).tag=3,e}function Pi(e,t,n,r){var a=n.type.getDerivedStateFromError;if("function"==typeof a){var s=r.value;e.payload=function(){return a(s)},e.callback=function(){Di(t,n,r)}}var o=n.stateNode;null!==o&&"function"==typeof o.componentDidCatch&&(e.callback=function(){Di(t,n,r),"function"!=typeof a&&(null===Fc?Fc=new Set([this]):Fc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ii=Error(r(461)),zi=!1;function Oi(e,t,n,r){t.child=null===e?gs(t,null,n,r):hs(t,e.child,n,r)}function qi(e,t,n,r,a){n=n.render;var s=t.ref;if("ref"in r){var o={};for(var i in r)"ref"!==i&&(o[i]=r[i])}else o=r;return Pa(t),r=no(e,t,n,o,s,a),i=oo(),null===e||zi?(fa&&i&&la(t),t.flags|=1,Oi(e,t,r,a),t.child):(io(e,t,a),ol(e,t,a))}function Fi(e,t,n,r,a){if(null===e){var s=n.type;return"function"!=typeof s||Br(s)||void 0!==s.defaultProps||null!==n.compare?((e=Qr(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Mi(e,t,s,r,a))}if(s=e.child,!il(e,a)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:tr)(o,r)&&e.ref===t.ref)return ol(e,t,a)}return t.flags|=1,(e=Ur(s,r)).ref=t.ref,e.return=t,t.child=e}function Mi(e,t,n,r,a){if(null!==e){var s=e.memoizedProps;if(tr(s,r)&&e.ref===t.ref){if(zi=!1,t.pendingProps=r=s,!il(e,a))return t.lanes=e.lanes,ol(e,t,a);131072&e.flags&&(zi=!0)}}return Wi(e,t,n,r,a)}function Ri(e,t,n,r){var a=r.children,s=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(128&t.flags){if(s=null!==s?s.baseLanes|n:n,null!==e){for(r=t.child=e.child,a=0;null!==r;)a=a|r.lanes|r.childLanes,r=r.sibling;r=a&~s}else r=0,t.child=null;return Ui(e,t,s,n,r)}if(!(536870912&n))return r=t.lanes=536870912,Ui(e,t,null!==s?s.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Ja(0,null!==s?s.cachePool:null),null!==s?_s(t,s):As(),Fs(t)}else null!==s?(Ja(0,s.cachePool),_s(t,s),Ms(),t.memoizedState=null):(null!==e&&Ja(0,null),As(),Ms());return Oi(e,t,a,n),t.child}function Bi(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Ui(e,t,n,r,a){var s=Ya();return s=null===s?null:{parent:Ra._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&Ja(0,null),As(),Fs(t),null!==e&&_a(e,t,r,!0),t.childLanes=a,null}function $i(e,t){return(t=tl({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Qi(e,t,n){return hs(t,e.child,null,n),(e=$i(t,t.pendingProps)).flags|=2,Rs(t),t.memoizedState=null,e}function Vi(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(r(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Wi(e,t,n,r,a){return Pa(t),n=no(e,t,n,r,void 0,a),r=oo(),null===e||zi?(fa&&r&&la(t),t.flags|=1,Oi(e,t,n,a),t.child):(io(e,t,a),ol(e,t,a))}function Hi(e,t,n,r,a,s){return Pa(t),t.updateQueue=null,n=ao(t,r,n,a),ro(e),r=oo(),null===e||zi?(fa&&r&&la(t),t.flags|=1,Oi(e,t,n,s),t.child):(io(e,t,s),ol(e,t,s))}function Gi(e,t,n,r,a){if(Pa(t),null===t.stateNode){var s=Fr,o=n.contextType;"object"==typeof o&&null!==o&&(s=Ia(o)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=ki,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},bs(t),o=n.contextType,s.context="object"==typeof o&&null!==o?Ia(o):Fr,s.state=t.memoizedState,"function"==typeof(o=n.getDerivedStateFromProps)&&(wi(t,n,o,r),s.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof s.getSnapshotBeforeUpdate||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||(o=s.state,"function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),o!==s.state&&ki.enqueueReplaceState(s,s.state,null),Ns(t,r,s,a),Cs(),s.state=t.memoizedState),"function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var i=t.memoizedProps,l=Ci(n,i);s.props=l;var c=s.context,u=n.contextType;o=Fr,"object"==typeof u&&null!==u&&(o=Ia(u));var d=n.getDerivedStateFromProps;u="function"==typeof d||"function"==typeof s.getSnapshotBeforeUpdate,i=t.pendingProps!==i,u||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(i||c!==o)&&ji(t,s,r,o),ys=!1;var p=t.memoizedState;s.state=p,Ns(t,r,s,a),Cs(),c=t.memoizedState,i||p!==c||ys?("function"==typeof d&&(wi(t,n,d,r),c=t.memoizedState),(l=ys||Si(t,n,l,r,p,c,o))?(u||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=o,r=l):("function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,xs(e,t),u=Ci(n,o=t.memoizedProps),s.props=u,d=t.pendingProps,p=s.context,c=n.contextType,l=Fr,"object"==typeof c&&null!==c&&(l=Ia(c)),(c="function"==typeof(i=n.getDerivedStateFromProps)||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==d||p!==l)&&ji(t,s,r,l),ys=!1,p=t.memoizedState,s.state=p,Ns(t,r,s,a),Cs();var f=t.memoizedState;o!==d||p!==f||ys||null!==e&&null!==e.dependencies&&Aa(e.dependencies)?("function"==typeof i&&(wi(t,n,i,r),f=t.memoizedState),(u=ys||Si(t,n,u,r,p,f,l)||null!==e&&null!==e.dependencies&&Aa(e.dependencies))?(c||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=u):("function"!=typeof s.componentDidUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Vi(e,t),r=!!(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=hs(t,e.child,null,a),t.child=hs(t,null,n,a)):Oi(e,t,n,a),t.memoizedState=s.state,e=t.child):e=ol(e,t,a),e}function Ki(e,t,n,r){return wa(),t.flags|=256,Oi(e,t,n,r),t.child}var Yi={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ji(e){return{baseLanes:e,cachePool:Xa()}}function Xi(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Tc),e}function Zi(e,t,n){var a,s=t.pendingProps,o=!1,i=!!(128&t.flags);if((a=i)||(a=(null===e||null!==e.memoizedState)&&!!(2&Bs.current)),a&&(o=!0,t.flags&=-129),a=!!(32&t.flags),t.flags&=-33,null===e){if(fa){if(o?Os(t):Ms(),(e=pa)?null!==(e=null!==(e=Ad(e,ha))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ra?{id:aa,overflow:sa}:null,retryLane:536870912,hydrationErrors:null},(n=Hr(e)).return=t,t.child=n,da=t,pa=null):e=null,null===e)throw ya(t);return Id(e)?t.lanes=32:t.lanes=536870912,null}var l=s.children;return s=s.fallback,o?(Ms(),l=tl({mode:"hidden",children:l},o=t.mode),s=Vr(s,o,n,null),l.return=t,s.return=t,l.sibling=s,t.child=l,(s=t.child).memoizedState=Ji(n),s.childLanes=Xi(e,a,n),t.memoizedState=Yi,Bi(null,s)):(Os(t),el(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(i)256&t.flags?(Os(t),t.flags&=-257,t=nl(e,t,n)):null!==t.memoizedState?(Ms(),t.child=e.child,t.flags|=128,t=null):(Ms(),l=s.fallback,o=t.mode,s=tl({mode:"visible",children:s.children},o),(l=Vr(l,o,n,null)).flags|=2,s.return=t,l.return=t,s.sibling=l,t.child=s,hs(t,e.child,null,n),(s=t.child).memoizedState=Ji(n),s.childLanes=Xi(e,a,n),t.memoizedState=Yi,t=Bi(null,s));else if(Os(t),Id(l)){if(a=l.nextSibling&&l.nextSibling.dataset)var u=a.dgst;a=u,(s=Error(r(419))).stack="",s.digest=a,Sa({value:s,source:null,stack:null}),t=nl(e,t,n)}else if(zi||_a(e,t,n,!1),a=0!==(n&e.childLanes),zi||a){if(null!==(a=gc)&&(0!==(s=qe(a,n))&&s!==c.retryLane))throw c.retryLane=s,zr(e,s),Yc(a,e,s),Ii;Pd(l)||lu(),t=nl(e,t,n)}else Pd(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,pa=zd(l.nextSibling),da=t,fa=!0,ma=null,ha=!1,null!==e&&ua(t,e),(t=el(t,s.children)).flags|=4096);return t}return o?(Ms(),l=s.fallback,o=t.mode,u=(c=e.child).sibling,(s=Ur(c,{mode:"hidden",children:s.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=Ur(u,l):(l=Vr(l,o,n,null)).flags|=2,l.return=t,s.return=t,s.sibling=l,t.child=s,Bi(null,s),s=t.child,null===(l=e.child.memoizedState)?l=Ji(n):(null!==(o=l.cachePool)?(c=Ra._currentValue,o=o.parent!==c?{parent:c,pool:c}:o):o=Xa(),l={baseLanes:l.baseLanes|n,cachePool:o}),s.memoizedState=l,s.childLanes=Xi(e,a,n),t.memoizedState=Yi,Bi(e.child,s)):(Os(t),e=(n=e.child).sibling,(n=Ur(n,{mode:"visible",children:s.children})).return=t,n.sibling=null,null!==e&&(null===(a=t.deletions)?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function el(e,t){return(t=tl({mode:"visible",children:t},e.mode)).return=e,e.child=t}function tl(e,t){return(e=Rr(22,e,null,t)).lanes=0,e}function nl(e,t,n){return hs(t,e.child,null,n),(e=el(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function rl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ta(e.return,t,n)}function al(e,t,n,r,a,s){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,treeForkCount:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a,o.treeForkCount=s)}function sl(e,t,n){var r=t.pendingProps,a=r.revealOrder,s=r.tail;r=r.children;var o=Bs.current,i=!!(2&o);if(i?(o=1&o|2,t.flags|=128):o&=1,$(Bs,o),Oi(e,t,r,n),r=fa?ea:0,!i&&null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&rl(e,n,t);else if(19===e.tag)rl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===Us(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),al(t,!1,a,n,s,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Us(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}al(t,!0,n,null,s,r);break;case"together":al(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function ol(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Nc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(_a(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=Ur(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ur(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function il(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Aa(e))}function ll(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)zi=!0;else{if(!(il(e,n)||128&t.flags))return zi=!1,function(e,t,n){switch(t.tag){case 3:Y(t,t.stateNode.containerInfo),Ea(0,Ra,e.memoizedState.cache),wa();break;case 27:case 5:X(t);break;case 4:Y(t,t.stateNode.containerInfo);break;case 10:Ea(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,qs(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Os(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Zi(e,t,n):(Os(t),null!==(e=ol(e,t,n))?e.sibling:null);Os(t);break;case 19:var a=!!(128&e.flags);if((r=0!==(n&t.childLanes))||(_a(e,t,n,!1),r=0!==(n&t.childLanes)),a){if(r)return sl(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),$(Bs,Bs.current),r)break;return null;case 22:return t.lanes=0,Ri(e,t,n,t.pendingProps);case 24:Ea(0,Ra,e.memoizedState.cache)}return ol(e,t,n)}(e,t,n);zi=!!(131072&e.flags)}else zi=!1,fa&&1048576&t.flags&&ia(t,ea,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=ss(t.elementType),t.type=e,"function"!=typeof e){if(null!=e){var s=e.$$typeof;if(s===S){t.tag=11,t=qi(null,t,e,a,n);break e}if(s===E){t.tag=14,t=Fi(null,t,e,a,n);break e}}throw t=I(e)||e,Error(r(306,t,""))}Br(e)?(a=Ci(e,a),t.tag=1,t=Gi(null,t,e,a,n)):(t.tag=0,t=Wi(null,t,e,a,n))}return t;case 0:return Wi(e,t,t.type,t.pendingProps,n);case 1:return Gi(e,t,a=t.type,s=Ci(a,t.pendingProps),n);case 3:e:{if(Y(t,t.stateNode.containerInfo),null===e)throw Error(r(387));a=t.pendingProps;var o=t.memoizedState;s=o.element,xs(e,t),Ns(t,a,null,n);var i=t.memoizedState;if(a=i.cache,Ea(0,Ra,a),a!==o.cache&&Da(t,[Ra],n,!0),Cs(),a=i.element,o.isDehydrated){if(o={element:a,isDehydrated:!1,cache:i.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ki(e,t,a,n);break e}if(a!==s){Sa(s=Yr(Error(r(424)),t)),t=Ki(e,t,a,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(pa=zd(e.firstChild),da=t,fa=!0,ma=null,ha=!0,n=gs(t,null,a,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(wa(),a===s){t=ol(e,t,n);break e}Oi(e,t,a,n)}t=t.child}return t;case 26:return Vi(e,t),null===e?(n=Hd(t.type,null,t.pendingProps,null))?t.memoizedState=n:fa||(n=t.type,e=t.pendingProps,(a=bd(G.current).createElement(n))[$e]=t,a[Qe]=e,md(a,n,e),nt(a),t.stateNode=a):t.memoizedState=Hd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return X(t),null===e&&fa&&(a=t.stateNode=Md(t.type,t.pendingProps,G.current),da=t,ha=!0,s=pa,Ld(t.type)?(Od=s,pa=zd(a.firstChild)):pa=s),Oi(e,t,t.pendingProps.children,n),Vi(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&fa&&((s=a=pa)&&(null!==(a=function(e,t,n,r){for(;1===e.nodeType;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ye])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==a.rel||e.getAttribute("href")!==(null==a.href||""===a.href?null:a.href)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin)||e.getAttribute("title")!==(null==a.title?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==a.src?null:a.src)||e.getAttribute("type")!==(null==a.type?null:a.type)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==a.name?null:""+a.name;if("hidden"===a.type&&e.getAttribute("name")===s)return e}if(null===(e=zd(e.nextSibling)))break}return null}(a,t.type,t.pendingProps,ha))?(t.stateNode=a,da=t,pa=zd(a.firstChild),ha=!1,s=!0):s=!1),s||ya(t)),X(t),s=t.type,o=t.pendingProps,i=null!==e?e.memoizedProps:null,a=o.children,wd(s,o)?a=null:null!==i&&wd(s,i)&&(t.flags|=32),null!==t.memoizedState&&(s=no(e,t,so,null,null,n),pp._currentValue=s),Vi(e,t),Oi(e,t,a,n),t.child;case 6:return null===e&&fa&&((e=n=pa)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=zd(e.nextSibling)))return null}return e}(n,t.pendingProps,ha))?(t.stateNode=n,da=t,pa=null,e=!0):e=!1),e||ya(t)),null;case 13:return Zi(e,t,n);case 4:return Y(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=hs(t,null,a,n):Oi(e,t,a,n),t.child;case 11:return qi(e,t,t.type,t.pendingProps,n);case 7:return Oi(e,t,t.pendingProps,n),t.child;case 8:case 12:return Oi(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,Ea(0,t.type,a.value),Oi(e,t,a.children,n),t.child;case 9:return s=t.type._context,a=t.pendingProps.children,Pa(t),a=a(s=Ia(s)),t.flags|=1,Oi(e,t,a,n),t.child;case 14:return Fi(e,t,t.type,t.pendingProps,n);case 15:return Mi(e,t,t.type,t.pendingProps,n);case 19:return sl(e,t,n);case 31:return function(e,t,n){var a=t.pendingProps,s=!!(128&t.flags);if(t.flags&=-129,null===e){if(fa){if("hidden"===a.mode)return e=$i(t,a),t.lanes=536870912,Bi(null,e);if(qs(t),(e=pa)?null!==(e=null!==(e=Ad(e,ha))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ra?{id:aa,overflow:sa}:null,retryLane:536870912,hydrationErrors:null},(n=Hr(e)).return=t,t.child=n,da=t,pa=null):e=null,null===e)throw ya(t);return t.lanes=536870912,null}return $i(t,a)}var o=e.memoizedState;if(null!==o){var i=o.dehydrated;if(qs(t),s)if(256&t.flags)t.flags&=-257,t=Qi(e,t,n);else{if(null===t.memoizedState)throw Error(r(558));t.child=e.child,t.flags|=128,t=null}else if(zi||_a(e,t,n,!1),s=0!==(n&e.childLanes),zi||s){if(null!==(a=gc)&&0!==(i=qe(a,n))&&i!==o.retryLane)throw o.retryLane=i,zr(e,i),Yc(a,e,i),Ii;lu(),t=Qi(e,t,n)}else e=o.treeContext,pa=zd(i.nextSibling),da=t,fa=!0,ma=null,ha=!1,null!==e&&ua(t,e),(t=$i(t,a)).flags|=4096;return t}return(e=Ur(e.child,{mode:a.mode,children:a.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Ri(e,t,n,t.pendingProps);case 24:return Pa(t),a=Ia(Ra),null===e?(null===(s=Ya())&&(s=gc,o=Ba(),s.pooledCache=o,o.refCount++,null!==o&&(s.pooledCacheLanes|=n),s=o),t.memoizedState={parent:a,cache:s},bs(t),Ea(0,Ra,s)):(0!==(e.lanes&n)&&(xs(e,t),Ns(t,null,null,n),Cs()),s=e.memoizedState,o=t.memoizedState,s.parent!==a?(s={parent:a,cache:a},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),Ea(0,Ra,a)):(a=o.cache,Ea(0,Ra,a),a!==s.cache&&Da(t,[Ra],n,!0))),Oi(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function cl(e){e.flags|=4}function ul(e,t,n,r,a){if((t=!!(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&a)===a)if(e.stateNode.complete)e.flags|=8192;else{if(!su())throw os=ns,es;e.flags|=8192}}else e.flags&=-16777217}function dl(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!op(t)){if(!su())throw os=ns,es;e.flags|=8192}}function pl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ae():536870912,e.lanes|=t,Dc|=t)}function fl(e,t){if(!fa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ml(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=65011712&a.subtreeFlags,r|=65011712&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function hl(e,t,n){var a=t.pendingProps;switch(ca(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return ml(t),null;case 3:return n=t.stateNode,a=null,null!==e&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),La(Ra),J(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(va(t)?cl(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,ka())),ml(t),null;case 26:var s=t.type,o=t.memoizedState;return null===e?(cl(t),null!==o?(ml(t),dl(t,o)):(ml(t),ul(t,s,0,0,n))):o?o!==e.memoizedState?(cl(t),ml(t),dl(t,o)):(ml(t),t.flags&=-16777217):((e=e.memoizedProps)!==a&&cl(t),ml(t),ul(t,s,0,0,n)),null;case 27:if(Z(t),n=G.current,s=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==a&&cl(t);else{if(!a){if(null===t.stateNode)throw Error(r(166));return ml(t),null}e=W.current,va(t)?ba(t):(e=Md(s,a,n),t.stateNode=e,cl(t))}return ml(t),null;case 5:if(Z(t),s=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==a&&cl(t);else{if(!a){if(null===t.stateNode)throw Error(r(166));return ml(t),null}if(o=W.current,va(t))ba(t);else{var i=bd(G.current);switch(o){case 1:o=i.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:o=i.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":o=i.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":o=i.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":(o=i.createElement("div")).innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o="string"==typeof a.is?i.createElement("select",{is:a.is}):i.createElement("select"),a.multiple?o.multiple=!0:a.size&&(o.size=a.size);break;default:o="string"==typeof a.is?i.createElement(s,{is:a.is}):i.createElement(s)}}o[$e]=t,o[Qe]=a;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)o.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=o;e:switch(md(o,s,a),s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&cl(t)}}return ml(t),ul(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==a&&cl(t);else{if("string"!=typeof a&&null===t.stateNode)throw Error(r(166));if(e=G.current,va(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,null!==(s=da))switch(s.tag){case 27:case 5:a=s.memoizedProps}e[$e]=t,(e=!!(e.nodeValue===n||null!==a&&!0===a.suppressHydrationWarning||dd(e.nodeValue,n)))||ya(t,!0)}else(e=bd(e).createTextNode(a))[$e]=t,t.stateNode=e}return ml(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(a=va(t),null!==n){if(null===e){if(!a)throw Error(r(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(r(557));e[$e]=t}else wa(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;ml(t),e=!1}else n=ka(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Rs(t),t):(Rs(t),null);if(128&t.flags)throw Error(r(558))}return ml(t),null;case 13:if(a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=va(t),null!==a&&null!==a.dehydrated){if(null===e){if(!s)throw Error(r(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(r(317));s[$e]=t}else wa(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;ml(t),s=!1}else s=ka(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return 256&t.flags?(Rs(t),t):(Rs(t),null)}return Rs(t),128&t.flags?(t.lanes=n,t):(n=null!==a,e=null!==e&&null!==e.memoizedState,n&&(s=null,null!==(a=t.child).alternate&&null!==a.alternate.memoizedState&&null!==a.alternate.memoizedState.cachePool&&(s=a.alternate.memoizedState.cachePool.pool),o=null,null!==a.memoizedState&&null!==a.memoizedState.cachePool&&(o=a.memoizedState.cachePool.pool),o!==s&&(a.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),pl(t,t.updateQueue),ml(t),null);case 4:return J(),null===e&&td(t.stateNode.containerInfo),ml(t),null;case 10:return La(t.type),ml(t),null;case 19:if(U(Bs),null===(a=t.memoizedState))return ml(t),null;if(s=!!(128&t.flags),null===(o=a.rendering))if(s)fl(a,!1);else{if(0!==Cc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(o=Us(e))){for(t.flags|=128,fl(a,!1),e=o.updateQueue,t.updateQueue=e,pl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)$r(n,e),n=n.sibling;return $(Bs,1&Bs.current|2),fa&&oa(t,a.treeForkCount),t.child}e=e.sibling}null!==a.tail&&ue()>Oc&&(t.flags|=128,s=!0,fl(a,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=Us(o))){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,pl(t,e),fl(a,!0),null===a.tail&&"hidden"===a.tailMode&&!o.alternate&&!fa)return ml(t),null}else 2*ue()-a.renderingStartTime>Oc&&536870912!==n&&(t.flags|=128,s=!0,fl(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=a.last)?e.sibling=o:t.child=o,a.last=o)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=ue(),e.sibling=null,n=Bs.current,$(Bs,s?1&n|2:1&n),fa&&oa(t,a.treeForkCount),e):(ml(t),null);case 22:case 23:return Rs(t),Ps(),a=null!==t.memoizedState,null!==e?null!==e.memoizedState!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?!!(536870912&n)&&!(128&t.flags)&&(ml(t),6&t.subtreeFlags&&(t.flags|=8192)):ml(t),null!==(n=t.updateQueue)&&pl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),a=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),null!==e&&U(Ka),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),La(Ra),ml(t),null;case 25:case 30:return null}throw Error(r(156,t.tag))}function gl(e,t){switch(ca(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return La(Ra),J(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Z(t),null;case 31:if(null!==t.memoizedState){if(Rs(t),null===t.alternate)throw Error(r(340));wa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Rs(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));wa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return U(Bs),null;case 4:return J(),null;case 10:return La(t.type),null;case 22:case 23:return Rs(t),Ps(),null!==e&&U(Ka),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return La(Ra),null;default:return null}}function yl(e,t){switch(ca(t),t.tag){case 3:La(Ra),J();break;case 26:case 27:case 5:Z(t);break;case 4:J();break;case 31:null!==t.memoizedState&&Rs(t);break;case 13:Rs(t);break;case 19:U(Bs);break;case 10:La(t.type);break;case 22:case 23:Rs(t),Ps(),null!==e&&U(Ka);break;case 24:La(Ra)}}function bl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var a=r.next;n=a;do{if((n.tag&e)===e){r=void 0;var s=n.create,o=n.inst;r=s(),o.destroy=r}n=n.next}while(n!==a)}}catch(i){Cu(t,t.return,i)}}function xl(e,t,n){try{var r=t.updateQueue,a=null!==r?r.lastEffect:null;if(null!==a){var s=a.next;r=s;do{if((r.tag&e)===e){var o=r.inst,i=o.destroy;if(void 0!==i){o.destroy=void 0,a=t;var l=n,c=i;try{c()}catch(u){Cu(a,l,u)}}}r=r.next}while(r!==s)}}catch(u){Cu(t,t.return,u)}}function vl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Ls(t,n)}catch(r){Cu(e,e.return,r)}}}function wl(e,t,n){n.props=Ci(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){Cu(e,t,r)}}function kl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"==typeof n?e.refCleanup=n(r):n.current=r}}catch(a){Cu(e,t,a)}}function Sl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"==typeof r)try{r()}catch(a){Cu(e,t,a)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(s){Cu(e,t,s)}else n.current=null}function jl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(a){Cu(e,e.return,a)}}function Cl(e,t,n){try{var a=e.stateNode;!function(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,o=null,i=null,l=null,c=null,u=null,d=null;for(m in n){var p=n[m];if(n.hasOwnProperty(m)&&null!=p)switch(m){case"checked":case"value":break;case"defaultValue":c=p;default:a.hasOwnProperty(m)||pd(e,t,m,null,a,p)}}for(var f in a){var m=a[f];if(p=n[f],a.hasOwnProperty(f)&&(null!=m||null!=p))switch(f){case"type":o=m;break;case"name":s=m;break;case"checked":u=m;break;case"defaultChecked":d=m;break;case"value":i=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(r(137,t));break;default:m!==p&&pd(e,t,f,m,a,p)}}return void vt(e,i,l,c,u,d,o,s);case"select":for(o in m=i=l=f=null,n)if(c=n[o],n.hasOwnProperty(o)&&null!=c)switch(o){case"value":break;case"multiple":m=c;default:a.hasOwnProperty(o)||pd(e,t,o,null,a,c)}for(s in a)if(o=a[s],c=n[s],a.hasOwnProperty(s)&&(null!=o||null!=c))switch(s){case"value":f=o;break;case"defaultValue":l=o;break;case"multiple":i=o;default:o!==c&&pd(e,t,s,o,a,c)}return t=l,n=i,a=m,void(null!=f?St(e,!!n,f,!1):!!a!=!!n&&(null!=t?St(e,!!n,t,!0):St(e,!!n,n?[]:"",!1)));case"textarea":for(l in m=f=null,n)if(s=n[l],n.hasOwnProperty(l)&&null!=s&&!a.hasOwnProperty(l))switch(l){case"value":case"children":break;default:pd(e,t,l,null,a,s)}for(i in a)if(s=a[i],o=n[i],a.hasOwnProperty(i)&&(null!=s||null!=o))switch(i){case"value":f=s;break;case"defaultValue":m=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(r(91));break;default:s!==o&&pd(e,t,i,s,a,o)}return void jt(e,f,m);case"option":for(var h in n)if(f=n[h],n.hasOwnProperty(h)&&null!=f&&!a.hasOwnProperty(h))if("selected"===h)e.selected=!1;else pd(e,t,h,null,a,f);for(c in a)if(f=a[c],m=n[c],a.hasOwnProperty(c)&&f!==m&&(null!=f||null!=m))if("selected"===c)e.selected=f&&"function"!=typeof f&&"symbol"!=typeof f;else pd(e,t,c,f,a,m);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!a.hasOwnProperty(g)&&pd(e,t,g,null,a,f);for(u in a)if(f=a[u],m=n[u],a.hasOwnProperty(u)&&f!==m&&(null!=f||null!=m))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(r(137,t));break;default:pd(e,t,u,f,a,m)}return;default:if(Dt(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!a.hasOwnProperty(y)&&fd(e,t,y,void 0,a,f);for(d in a)f=a[d],m=n[d],!a.hasOwnProperty(d)||f===m||void 0===f&&void 0===m||fd(e,t,d,f,a,m);return}}for(var b in n)f=n[b],n.hasOwnProperty(b)&&null!=f&&!a.hasOwnProperty(b)&&pd(e,t,b,null,a,f);for(p in a)f=a[p],m=n[p],!a.hasOwnProperty(p)||f===m||null==f&&null==m||pd(e,t,p,f,a,m)}(a,e.type,n,t),a[Qe]=t}catch(s){Cu(e,e.return,s)}}function Nl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Ld(e.type)||4===e.tag}function El(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Nl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Ld(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=It));else if(4!==r&&(27===r&&Ld(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Ll(e,t,n),e=e.sibling;null!==e;)Ll(e,t,n),e=e.sibling}function Tl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Ld(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Tl(e,t,n),e=e.sibling;null!==e;)Tl(e,t,n),e=e.sibling}function Dl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);md(t,r,n),t[$e]=e,t[Qe]=n}catch(s){Cu(e,e.return,s)}}var _l=!1,Al=!1,Pl=!1,Il="function"==typeof WeakSet?WeakSet:Set,zl=null;function Ol(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Yl(e,n),4&r&&bl(5,n);break;case 1:if(Yl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){Cu(n,n.return,o)}else{var a=Ci(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(i){Cu(n,n.return,i)}}64&r&&vl(n),512&r&&kl(n,n.return);break;case 3:if(Yl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Ls(e,t)}catch(o){Cu(n,n.return,o)}}break;case 27:null===t&&4&r&&Dl(n);case 26:case 5:Yl(e,n),null===t&&4&r&&jl(n),512&r&&kl(n,n.return);break;case 12:Yl(e,n);break;case 31:Yl(e,n),4&r&&Ul(e,n);break;case 13:Yl(e,n),4&r&&$l(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Tu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||_l)){t=null!==t&&null!==t.memoizedState||Al,a=_l;var s=Al;_l=r,(Al=t)&&!s?Xl(e,n,!!(8772&n.subtreeFlags)):Yl(e,n),_l=a,Al=s}break;case 30:break;default:Yl(e,n)}}function ql(e){var t=e.alternate;null!==t&&(e.alternate=null,ql(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Je(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Fl=null,Ml=!1;function Rl(e,t,n){for(n=n.child;null!==n;)Bl(e,t,n),n=n.sibling}function Bl(e,t,n){if(ve&&"function"==typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(xe,n)}catch(s){}switch(n.tag){case 26:Al||Sl(n,t),Rl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Al||Sl(n,t);var r=Fl,a=Ml;Ld(n.type)&&(Fl=n.stateNode,Ml=!1),Rl(e,t,n),Rd(n.stateNode),Fl=r,Ml=a;break;case 5:Al||Sl(n,t);case 6:if(r=Fl,a=Ml,Fl=null,Rl(e,t,n),Ml=a,null!==(Fl=r))if(Ml)try{(9===Fl.nodeType?Fl.body:"HTML"===Fl.nodeName?Fl.ownerDocument.body:Fl).removeChild(n.stateNode)}catch(o){Cu(n,t,o)}else try{Fl.removeChild(n.stateNode)}catch(o){Cu(n,t,o)}break;case 18:null!==Fl&&(Ml?(Td(9===(e=Fl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Wp(e)):Td(Fl,n.stateNode));break;case 4:r=Fl,a=Ml,Fl=n.stateNode.containerInfo,Ml=!0,Rl(e,t,n),Fl=r,Ml=a;break;case 0:case 11:case 14:case 15:xl(2,n,t),Al||xl(4,n,t),Rl(e,t,n);break;case 1:Al||(Sl(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&wl(n,t,r)),Rl(e,t,n);break;case 21:Rl(e,t,n);break;case 22:Al=(r=Al)||null!==n.memoizedState,Rl(e,t,n),Al=r;break;default:Rl(e,t,n)}}function Ul(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Wp(e)}catch(n){Cu(t,t.return,n)}}}function $l(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Wp(e)}catch(n){Cu(t,t.return,n)}}function Ql(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Il),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Il),t;default:throw Error(r(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Du.bind(null,e,t);t.then(r,r)}})}function Vl(e,t){var n=t.deletions;if(null!==n)for(var a=0;a<n.length;a++){var s=n[a],o=e,i=t,l=i;e:for(;null!==l;){switch(l.tag){case 27:if(Ld(l.type)){Fl=l.stateNode,Ml=!1;break e}break;case 5:Fl=l.stateNode,Ml=!1;break e;case 3:case 4:Fl=l.stateNode.containerInfo,Ml=!0;break e}l=l.return}if(null===Fl)throw Error(r(160));Bl(o,i,s),Fl=null,Ml=!1,null!==(o=s.alternate)&&(o.return=null),s.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Hl(t,e),t=t.sibling}var Wl=null;function Hl(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Vl(t,e),Gl(e),4&a&&(xl(3,e,e.return),bl(3,e),xl(5,e,e.return));break;case 1:Vl(t,e),Gl(e),512&a&&(Al||null===n||Sl(n,n.return)),64&a&&_l&&(null!==(e=e.updateQueue)&&(null!==(a=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?a:n.concat(a))));break;case 26:var s=Wl;if(Vl(t,e),Gl(e),512&a&&(Al||null===n||Sl(n,n.return)),4&a){var o=null!==n?n.memoizedState:null;if(a=e.memoizedState,null===n)if(null===a)if(null===e.stateNode){e:{a=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(a){case"title":(!(o=s.getElementsByTagName("title")[0])||o[Ye]||o[$e]||"http://www.w3.org/2000/svg"===o.namespaceURI||o.hasAttribute("itemprop"))&&(o=s.createElement(a),s.head.insertBefore(o,s.querySelector("head > title"))),md(o,a,n),o[$e]=e,nt(o),a=o;break e;case"link":var i=ap("link","href",s).get(a+(n.href||""));if(i)for(var l=0;l<i.length;l++)if((o=i[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&o.getAttribute("rel")===(null==n.rel?null:n.rel)&&o.getAttribute("title")===(null==n.title?null:n.title)&&o.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){i.splice(l,1);break t}md(o=s.createElement(a),a,n),s.head.appendChild(o);break;case"meta":if(i=ap("meta","content",s).get(a+(n.content||"")))for(l=0;l<i.length;l++)if((o=i[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&o.getAttribute("name")===(null==n.name?null:n.name)&&o.getAttribute("property")===(null==n.property?null:n.property)&&o.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&o.getAttribute("charset")===(null==n.charSet?null:n.charSet)){i.splice(l,1);break t}md(o=s.createElement(a),a,n),s.head.appendChild(o);break;default:throw Error(r(468,a))}o[$e]=e,nt(o),a=o}e.stateNode=a}else sp(s,e.type,e.stateNode);else e.stateNode=Zd(s,a,e.memoizedProps);else o!==a?(null===o?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):o.count--,null===a?sp(s,e.type,e.stateNode):Zd(s,a,e.memoizedProps)):null===a&&null!==e.stateNode&&Cl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Vl(t,e),Gl(e),512&a&&(Al||null===n||Sl(n,n.return)),null!==n&&4&a&&Cl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Vl(t,e),Gl(e),512&a&&(Al||null===n||Sl(n,n.return)),32&e.flags){s=e.stateNode;try{Nt(s,"")}catch(h){Cu(e,e.return,h)}}4&a&&null!=e.stateNode&&Cl(e,s=e.memoizedProps,null!==n?n.memoizedProps:s),1024&a&&(Pl=!0);break;case 6:if(Vl(t,e),Gl(e),4&a){if(null===e.stateNode)throw Error(r(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(h){Cu(e,e.return,h)}}break;case 3:if(rp=null,s=Wl,Wl=$d(t.containerInfo),Vl(t,e),Wl=s,Gl(e),4&a&&null!==n&&n.memoizedState.isDehydrated)try{Wp(t.containerInfo)}catch(h){Cu(e,e.return,h)}Pl&&(Pl=!1,Kl(e));break;case 4:a=Wl,Wl=$d(e.stateNode.containerInfo),Vl(t,e),Gl(e),Wl=a;break;case 12:default:Vl(t,e),Gl(e);break;case 31:case 19:Vl(t,e),Gl(e),4&a&&(null!==(a=e.updateQueue)&&(e.updateQueue=null,Ql(e,a)));break;case 13:Vl(t,e),Gl(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(Ic=ue()),4&a&&(null!==(a=e.updateQueue)&&(e.updateQueue=null,Ql(e,a)));break;case 22:s=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=_l,d=Al;if(_l=u||s,Al=d||c,Vl(t,e),Al=d,_l=u,Gl(e),8192&a)e:for(t=e.stateNode,t._visibility=s?-2&t._visibility:1|t._visibility,s&&(null===n||c||_l||Al||Jl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(o=c.stateNode,s)"function"==typeof(i=o.style).setProperty?i.setProperty("display","none","important"):i.display="none";else{l=c.stateNode;var p=c.memoizedProps.style,f=null!=p&&p.hasOwnProperty("display")?p.display:null;l.style.display=null==f||"boolean"==typeof f?"":(""+f).trim()}}catch(h){Cu(c,c.return,h)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(h){Cu(c,c.return,h)}}}else if(18===t.tag){if(null===n){c=t;try{var m=c.stateNode;s?Dd(m,!0):Dd(c.stateNode,!1)}catch(h){Cu(c,c.return,h)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&a&&(null!==(a=e.updateQueue)&&(null!==(n=a.retryQueue)&&(a.retryQueue=null,Ql(e,n))));case 30:case 21:}}function Gl(e){var t=e.flags;if(2&t){try{for(var n,a=e.return;null!==a;){if(Nl(a)){n=a;break}a=a.return}if(null==n)throw Error(r(160));switch(n.tag){case 27:var s=n.stateNode;Tl(e,El(e),s);break;case 5:var o=n.stateNode;32&n.flags&&(Nt(o,""),n.flags&=-33),Tl(e,El(e),o);break;case 3:case 4:var i=n.stateNode.containerInfo;Ll(e,El(e),i);break;default:throw Error(r(161))}}catch(l){Cu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Kl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Kl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Yl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ol(e,t.alternate,t),t=t.sibling}function Jl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:xl(4,t,t.return),Jl(t);break;case 1:Sl(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&wl(t,t.return,n),Jl(t);break;case 27:Rd(t.stateNode);case 26:case 5:Sl(t,t.return),Jl(t);break;case 22:null===t.memoizedState&&Jl(t);break;default:Jl(t)}e=e.sibling}}function Xl(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,a=e,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:Xl(a,s,n),bl(4,s);break;case 1:if(Xl(a,s,n),"function"==typeof(a=(r=s).stateNode).componentDidMount)try{a.componentDidMount()}catch(c){Cu(r,r.return,c)}if(null!==(a=(r=s).updateQueue)){var i=r.stateNode;try{var l=a.shared.hiddenCallbacks;if(null!==l)for(a.shared.hiddenCallbacks=null,a=0;a<l.length;a++)Es(l[a],i)}catch(c){Cu(r,r.return,c)}}n&&64&o&&vl(s),kl(s,s.return);break;case 27:Dl(s);case 26:case 5:Xl(a,s,n),n&&null===r&&4&o&&jl(s),kl(s,s.return);break;case 12:Xl(a,s,n);break;case 31:Xl(a,s,n),n&&4&o&&Ul(a,s);break;case 13:Xl(a,s,n),n&&4&o&&$l(a,s);break;case 22:null===s.memoizedState&&Xl(a,s,n),kl(s,s.return);break;case 30:break;default:Xl(a,s,n)}t=t.sibling}}function Zl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ua(n))}function ec(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ua(e))}function tc(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)nc(e,t,n,r),t=t.sibling}function nc(e,t,n,r){var a=t.flags;switch(t.tag){case 0:case 11:case 15:tc(e,t,n,r),2048&a&&bl(9,t);break;case 1:case 31:case 13:default:tc(e,t,n,r);break;case 3:tc(e,t,n,r),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ua(e)));break;case 12:if(2048&a){tc(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,o=s.id,i=s.onPostCommit;"function"==typeof i&&i(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Cu(t,t.return,l)}}else tc(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,o=t.alternate,null!==t.memoizedState?2&s._visibility?tc(e,t,n,r):ac(e,t):2&s._visibility?tc(e,t,n,r):(s._visibility|=2,rc(e,t,n,r,!!(10256&t.subtreeFlags)||!1)),2048&a&&Zl(o,t);break;case 24:tc(e,t,n,r),2048&a&&ec(t.alternate,t)}}function rc(e,t,n,r,a){for(a=a&&(!!(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var s=e,o=t,i=n,l=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:rc(s,o,i,l,a),bl(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?2&u._visibility?rc(s,o,i,l,a):ac(s,o):(u._visibility|=2,rc(s,o,i,l,a)),a&&2048&c&&Zl(o.alternate,o);break;case 24:rc(s,o,i,l,a),a&&2048&c&&ec(o.alternate,o);break;default:rc(s,o,i,l,a)}t=t.sibling}}function ac(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,a=r.flags;switch(r.tag){case 22:ac(n,r),2048&a&&Zl(r.alternate,r);break;case 24:ac(n,r),2048&a&&ec(r.alternate,r);break;default:ac(n,r)}t=t.sibling}}var sc=8192;function oc(e,t,n){if(e.subtreeFlags&sc)for(e=e.child;null!==e;)ic(e,t,n),e=e.sibling}function ic(e,t,n){switch(e.tag){case 26:oc(e,t,n),e.flags&sc&&null!==e.memoizedState&&function(e,t,n,r){if(!("stylesheet"!==n.type||"string"==typeof r.media&&!1===matchMedia(r.media).matches||4&n.state.loading)){if(null===n.instance){var a=Gd(r.href),s=t.querySelector(Kd(a));if(s)return null!==(t=s._p)&&"object"==typeof t&&"function"==typeof t.then&&(e.count++,e=lp.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,void nt(s);s=t.ownerDocument||t,r=Yd(r),(a=Bd.get(a))&&tp(r,a),nt(s=s.createElement("link"));var o=s;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),md(s,"link",r),n.instance=s}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(3&n.state.loading)&&(e.count++,n=lp.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Wl,e.memoizedState,e.memoizedProps);break;case 5:default:oc(e,t,n);break;case 3:case 4:var r=Wl;Wl=$d(e.stateNode.containerInfo),oc(e,t,n),Wl=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=sc,sc=16777216,oc(e,t,n),sc=r):oc(e,t,n))}}function lc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function cc(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];zl=r,pc(r,e)}lc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)uc(e),e=e.sibling}function uc(e){switch(e.tag){case 0:case 11:case 15:cc(e),2048&e.flags&&xl(9,e,e.return);break;case 3:case 12:default:cc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,dc(e)):cc(e)}}function dc(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];zl=r,pc(r,e)}lc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:xl(8,t,t.return),dc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,dc(t));break;default:dc(t)}e=e.sibling}}function pc(e,t){for(;null!==zl;){var n=zl;switch(n.tag){case 0:case 11:case 15:xl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ua(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,zl=r;else e:for(n=e;null!==zl;){var a=(r=zl).sibling,s=r.return;if(ql(r),r===n){zl=null;break e}if(null!==a){a.return=s,zl=a;break e}zl=s}}}var fc={getCacheForType:function(e){var t=Ia(Ra),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Ia(Ra).controller.signal}},mc="function"==typeof WeakMap?WeakMap:Map,hc=0,gc=null,yc=null,bc=0,xc=0,vc=null,wc=!1,kc=!1,Sc=!1,jc=0,Cc=0,Nc=0,Ec=0,Lc=0,Tc=0,Dc=0,_c=null,Ac=null,Pc=!1,Ic=0,zc=0,Oc=1/0,qc=null,Fc=null,Mc=0,Rc=null,Bc=null,Uc=0,$c=0,Qc=null,Vc=null,Wc=0,Hc=null;function Gc(){return 2&hc&&0!==bc?bc&-bc:null!==O.T?Qu():Re()}function Kc(){if(0===Tc)if(536870912&bc&&!fa)Tc=536870912;else{var e=Ne;!(3932160&(Ne<<=1))&&(Ne=262144),Tc=e}return null!==(e=Is.current)&&(e.flags|=32),Tc}function Yc(e,t,n){(e!==gc||2!==xc&&9!==xc)&&null===e.cancelPendingCommit||(ru(e,0),eu(e,bc,Tc,!1)),Ie(e,n),2&hc&&e===gc||(e===gc&&(!(2&hc)&&(Ec|=n),4===Cc&&eu(e,bc,Tc,!1)),qu(e))}function Jc(e,t,n){if(6&hc)throw Error(r(327));for(var a=!n&&!(127&t)&&0===(t&e.expiredLanes)||De(e,t),s=a?function(e,t){var n=hc;hc|=2;var a=ou(),s=iu();gc!==e||bc!==t?(qc=null,Oc=ue()+500,ru(e,t)):kc=De(e,t);e:for(;;)try{if(0!==xc&&null!==yc){t=yc;var o=vc;t:switch(xc){case 1:xc=0,vc=null,mu(e,t,o,1);break;case 2:case 9:if(rs(o)){xc=0,vc=null,fu(t);break}t=function(){2!==xc&&9!==xc||gc!==e||(xc=7),qu(e)},o.then(t,t);break e;case 3:xc=7;break e;case 4:xc=5;break e;case 7:rs(o)?(xc=0,vc=null,fu(t)):(xc=0,vc=null,mu(e,t,o,7));break;case 5:var i=null;switch(yc.tag){case 26:i=yc.memoizedState;case 5:case 27:var l=yc;if(i?op(i):l.stateNode.complete){xc=0,vc=null;var c=l.sibling;if(null!==c)yc=c;else{var u=l.return;null!==u?(yc=u,hu(u)):yc=null}break t}}xc=0,vc=null,mu(e,t,o,5);break;case 6:xc=0,vc=null,mu(e,t,o,6);break;case 8:nu(),Cc=6;break e;default:throw Error(r(462))}}du();break}catch(d){au(e,d)}return Na=Ca=null,O.H=a,O.A=s,hc=n,null!==yc?0:(gc=null,bc=0,Ar(),Cc)}(e,t):cu(e,t,!0),o=a;;){if(0===s){kc&&!a&&eu(e,t,0,!1);break}if(n=e.current.alternate,!o||Zc(n)){if(2===s){if(o=t,e.errorRecoveryDisabledLanes&o)var i=0;else i=0!==(i=-536870913&e.pendingLanes)?i:536870912&i?536870912:0;if(0!==i){t=i;e:{var l=e;s=_c;var c=l.current.memoizedState.isDehydrated;if(c&&(ru(l,i).flags|=256),2!==(i=cu(l,i,!1))){if(Sc&&!c){l.errorRecoveryDisabledLanes|=o,Ec|=o,s=4;break e}o=Ac,Ac=s,null!==o&&(null===Ac?Ac=o:Ac.push.apply(Ac,o))}s=i}if(o=!1,2!==s)continue}}if(1===s){ru(e,0),eu(e,t,0,!0);break}e:{switch(a=e,o=s){case 0:case 1:throw Error(r(345));case 4:if((4194048&t)!==t)break;case 6:eu(a,t,Tc,!wc);break e;case 2:Ac=null;break;case 3:case 5:break;default:throw Error(r(329))}if((62914560&t)===t&&10<(s=Ic+300-ue())){if(eu(a,t,Tc,!wc),0!==Te(a,0,!0))break e;Uc=t,a.timeoutHandle=Sd(Xc.bind(null,a,n,Ac,qc,Pc,t,Tc,Ec,Dc,wc,o,"Throttled",-0,0),s)}else Xc(a,n,Ac,qc,Pc,t,Tc,Ec,Dc,wc,o,null,-0,0)}break}s=cu(e,t,!1),o=!1}qu(e)}function Xc(e,t,n,r,a,s,o,i,l,c,u,d,p,f){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||!(16785408&~d)){ic(t,s,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:It});var m=(62914560&s)===s?Ic-ue():(4194048&s)===s?zc-ue():0;if(null!==(m=function(e,t){return e.stylesheets&&0===e.count&&up(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&up(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===ip&&(ip=62500*function(){if("function"==typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var a=n[r],s=a.transferSize,o=a.initiatorType,i=a.duration;if(s&&i&&hd(o)){for(o=0,i=a.responseEnd,r+=1;r<n.length;r++){var l=n[r],c=l.startTime;if(c>i)break;var u=l.transferSize,d=l.initiatorType;u&&hd(d)&&(o+=u*((l=l.responseEnd)<i?1:(i-c)/(l-c)))}if(--r,t+=8*(s+o)/(a.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"==typeof(e=navigator.connection.downlink)?e:5}());var a=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&up(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>ip?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(a)}}:null}(d,m)))return Uc=s,e.cancelPendingCommit=m(yu.bind(null,e,t,s,n,r,a,o,i,l,u,d,null,p,f)),void eu(e,s,o,!c)}yu(e,t,s,n,r,a,o,i,l)}function Zc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var a=n[r],s=a.getSnapshot;a=a.value;try{if(!er(s(),a))return!1}catch(o){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function eu(e,t,n,r){t&=~Lc,t&=~Ec,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var a=t;0<a;){var s=31-ke(a),o=1<<s;r[s]=-1,a&=~o}0!==n&&ze(e,n,t)}function tu(){return!!(6&hc)||(Fu(0),!1)}function nu(){if(null!==yc){if(0===xc)var e=yc.return;else Na=Ca=null,lo(e=yc),cs=null,us=0,e=yc;for(;null!==e;)yl(e.alternate,e),e=e.return;yc=null}}function ru(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,jd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Uc=0,nu(),gc=e,yc=n=Ur(e.current,null),bc=t,xc=0,vc=null,wc=!1,kc=De(e,t),Sc=!1,Dc=Tc=Lc=Ec=Nc=Cc=0,Ac=_c=null,Pc=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var a=31-ke(r),s=1<<a;t|=e[a],r&=~s}return jc=t,Ar(),n}function au(e,t){Qs=null,O.H=yi,t===Za||t===ts?(t=is(),xc=3):t===es?(t=is(),xc=4):xc=t===Ii?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,vc=t,null===yc&&(Cc=1,Ti(e,Yr(t,e.current)))}function su(){var e=Is.current;return null===e||((4194048&bc)===bc?null===zs:!!((62914560&bc)===bc||536870912&bc)&&e===zs)}function ou(){var e=O.H;return O.H=yi,null===e?yi:e}function iu(){var e=O.A;return O.A=fc,e}function lu(){Cc=4,wc||(4194048&bc)!==bc&&null!==Is.current||(kc=!0),!(134217727&Nc)&&!(134217727&Ec)||null===gc||eu(gc,bc,Tc,!1)}function cu(e,t,n){var r=hc;hc|=2;var a=ou(),s=iu();gc===e&&bc===t||(qc=null,ru(e,t)),t=!1;var o=Cc;e:for(;;)try{if(0!==xc&&null!==yc){var i=yc,l=vc;switch(xc){case 8:nu(),o=6;break e;case 3:case 2:case 9:case 6:null===Is.current&&(t=!0);var c=xc;if(xc=0,vc=null,mu(e,i,l,c),n&&kc){o=0;break e}break;default:c=xc,xc=0,vc=null,mu(e,i,l,c)}}uu(),o=Cc;break}catch(u){au(e,u)}return t&&e.shellSuspendCounter++,Na=Ca=null,hc=r,O.H=a,O.A=s,null===yc&&(gc=null,bc=0,Ar()),o}function uu(){for(;null!==yc;)pu(yc)}function du(){for(;null!==yc&&!le();)pu(yc)}function pu(e){var t=ll(e.alternate,e,jc);e.memoizedProps=e.pendingProps,null===t?hu(e):yc=t}function fu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Hi(n,t,t.pendingProps,t.type,void 0,bc);break;case 11:t=Hi(n,t,t.pendingProps,t.type.render,t.ref,bc);break;case 5:lo(t);default:yl(n,t),t=ll(n,t=yc=$r(t,jc),jc)}e.memoizedProps=e.pendingProps,null===t?hu(e):yc=t}function mu(e,t,n,a){Na=Ca=null,lo(t),cs=null,us=0;var s=t.return;try{if(function(e,t,n,a,s){if(n.flags|=32768,null!==a&&"object"==typeof a&&"function"==typeof a.then){if(null!==(t=n.alternate)&&_a(t,n,s,!0),null!==(n=Is.current)){switch(n.tag){case 31:case 13:return null===zs?lu():null===n.alternate&&0===Cc&&(Cc=3),n.flags&=-257,n.flags|=65536,n.lanes=s,a===ns?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([a]):t.add(a),Nu(e,a,s)),!1;case 22:return n.flags|=65536,a===ns?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([a]):n.add(a),Nu(e,a,s)),!1}throw Error(r(435,n.tag))}return Nu(e,a,s),lu(),!1}if(fa)return null!==(t=Is.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,a!==ga&&Sa(Yr(e=Error(r(422),{cause:a}),n))):(a!==ga&&Sa(Yr(t=Error(r(423),{cause:a}),n)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,a=Yr(a,n),Ss(e,s=_i(e.stateNode,a,s)),4!==Cc&&(Cc=2)),!1;var o=Error(r(520),{cause:a});if(o=Yr(o,n),null===_c?_c=[o]:_c.push(o),4!==Cc&&(Cc=2),null===t)return!0;a=Yr(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,Ss(n,e=_i(n.stateNode,a,e)),!1;case 1:if(t=n.type,o=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===o||"function"!=typeof o.componentDidCatch||null!==Fc&&Fc.has(o))))return n.flags|=65536,s&=-s,n.lanes|=s,Pi(s=Ai(s),e,n,a),Ss(n,s),!1}n=n.return}while(null!==n);return!1}(e,s,t,n,bc))return Cc=1,Ti(e,Yr(n,e.current)),void(yc=null)}catch(o){if(null!==s)throw yc=s,o;return Cc=1,Ti(e,Yr(n,e.current)),void(yc=null)}32768&t.flags?(fa||1===a?e=!0:kc||536870912&bc?e=!1:(wc=e=!0,(2===a||9===a||3===a||6===a)&&(null!==(a=Is.current)&&13===a.tag&&(a.flags|=16384))),gu(t,e)):hu(t)}function hu(e){var t=e;do{if(32768&t.flags)return void gu(t,wc);e=t.return;var n=hl(t.alternate,t,jc);if(null!==n)return void(yc=n);if(null!==(t=t.sibling))return void(yc=t);yc=t=e}while(null!==t);0===Cc&&(Cc=5)}function gu(e,t){do{var n=gl(e.alternate,e);if(null!==n)return n.flags&=32767,void(yc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(yc=e);yc=e=n}while(null!==e);Cc=6,yc=null}function yu(e,t,n,a,s,o,i,l,c){e.cancelPendingCommit=null;do{ku()}while(0!==Mc);if(6&hc)throw Error(r(327));if(null!==t){if(t===e.current)throw Error(r(177));if(o=t.lanes|t.childLanes,function(e,t,n,r,a,s){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var i=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-ke(n),d=1<<u;i[u]=0,l[u]=-1;var p=c[u];if(null!==p)for(c[u]=null,u=0;u<p.length;u++){var f=p[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&ze(e,r,0),0!==s&&0===a&&0!==e.tag&&(e.suspendedLanes|=s&~(o&~t))}(e,n,o|=_r,i,l,c),e===gc&&(yc=gc=null,bc=0),Bc=t,Rc=e,Uc=n,$c=o,Qc=s,Vc=a,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,oe(me,function(){return Su(),null})):(e.callbackNode=null,e.callbackPriority=0),a=!!(13878&t.flags),13878&t.subtreeFlags||a){a=O.T,O.T=null,s=q.p,q.p=2,i=hc,hc|=4;try{!function(e,t){if(e=e.containerInfo,gd=wp,or(e=sr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(a&&0!==a.rangeCount){n=a.anchorNode;var s=a.anchorOffset,o=a.focusNode;a=a.focusOffset;try{n.nodeType,o.nodeType}catch(g){n=null;break e}var i=0,l=-1,c=-1,u=0,d=0,p=e,f=null;t:for(;;){for(var m;p!==n||0!==s&&3!==p.nodeType||(l=i+s),p!==o||0!==a&&3!==p.nodeType||(c=i+a),3===p.nodeType&&(i+=p.nodeValue.length),null!==(m=p.firstChild);)f=p,p=m;for(;;){if(p===e)break t;if(f===n&&++u===s&&(l=i),f===o&&++d===a&&(c=i),null!==(m=p.nextSibling))break;f=(p=f).parentNode}p=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(yd={focusedElem:e,selectionRange:n},wp=!1,zl=t;null!==zl;)if(e=(t=zl).child,1028&t.subtreeFlags&&null!==e)e.return=t,zl=e;else for(;null!==zl;){switch(o=(t=zl).alternate,e=t.flags,t.tag){case 0:if(4&e&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(s=e[n]).ref.impl=s.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==o){e=void 0,n=t,s=o.memoizedProps,o=o.memoizedState,a=n.stateNode;try{var h=Ci(n.type,s);e=a.getSnapshotBeforeUpdate(h,o),a.__reactInternalSnapshotBeforeUpdate=e}catch(y){Cu(n,n.return,y)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))_d(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":_d(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(r(163))}if(null!==(e=t.sibling)){e.return=t.return,zl=e;break}zl=t.return}}(e,t)}finally{hc=i,q.p=s,O.T=a}}Mc=1,bu(),xu(),vu()}}function bu(){if(1===Mc){Mc=0;var e=Rc,t=Bc,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=O.T,O.T=null;var r=q.p;q.p=2;var a=hc;hc|=4;try{Hl(t,e);var s=yd,o=sr(e.containerInfo),i=s.focusedElem,l=s.selectionRange;if(o!==i&&i&&i.ownerDocument&&ar(i.ownerDocument.documentElement,i)){if(null!==l&&or(i)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in i)i.selectionStart=c,i.selectionEnd=Math.min(u,i.value.length);else{var d=i.ownerDocument||document,p=d&&d.defaultView||window;if(p.getSelection){var f=p.getSelection(),m=i.textContent.length,h=Math.min(l.start,m),g=void 0===l.end?h:Math.min(l.end,m);!f.extend&&h>g&&(o=g,g=h,h=o);var y=rr(i,h),b=rr(i,g);if(y&&b&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==b.node||f.focusOffset!==b.offset)){var x=d.createRange();x.setStart(y.node,y.offset),f.removeAllRanges(),h>g?(f.addRange(x),f.extend(b.node,b.offset)):(x.setEnd(b.node,b.offset),f.addRange(x))}}}}for(d=[],f=i;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"==typeof i.focus&&i.focus(),i=0;i<d.length;i++){var v=d[i];v.element.scrollLeft=v.left,v.element.scrollTop=v.top}}wp=!!gd,yd=gd=null}finally{hc=a,q.p=r,O.T=n}}e.current=t,Mc=2}}function xu(){if(2===Mc){Mc=0;var e=Rc,t=Bc,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=O.T,O.T=null;var r=q.p;q.p=2;var a=hc;hc|=4;try{Ol(e,t.alternate,t)}finally{hc=a,q.p=r,O.T=n}}Mc=3}}function vu(){if(4===Mc||3===Mc){Mc=0,ce();var e=Rc,t=Bc,n=Uc,r=Vc;10256&t.subtreeFlags||10256&t.flags?Mc=5:(Mc=0,Bc=Rc=null,wu(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(Fc=null),Me(n),t=t.stateNode,ve&&"function"==typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(xe,t,void 0,!(128&~t.current.flags))}catch(l){}if(null!==r){t=O.T,a=q.p,q.p=2,O.T=null;try{for(var s=e.onRecoverableError,o=0;o<r.length;o++){var i=r[o];s(i.value,{componentStack:i.stack})}}finally{O.T=t,q.p=a}}3&Uc&&ku(),qu(e),a=e.pendingLanes,261930&n&&42&a?e===Hc?Wc++:(Wc=0,Hc=e):Wc=0,Fu(0)}}function wu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ua(t)))}function ku(){return bu(),xu(),vu(),Su()}function Su(){if(5!==Mc)return!1;var e=Rc,t=$c;$c=0;var n=Me(Uc),a=O.T,s=q.p;try{q.p=32>n?32:n,O.T=null,n=Qc,Qc=null;var o=Rc,i=Uc;if(Mc=0,Bc=Rc=null,Uc=0,6&hc)throw Error(r(331));var l=hc;if(hc|=4,uc(o.current),nc(o,o.current,i,n),hc=l,Fu(0,!1),ve&&"function"==typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(xe,o)}catch(c){}return!0}finally{q.p=s,O.T=a,wu(e,t)}}function ju(e,t,n){t=Yr(n,t),null!==(e=ws(e,t=_i(e.stateNode,t,2),2))&&(Ie(e,2),qu(e))}function Cu(e,t,n){if(3===e.tag)ju(e,e,n);else for(;null!==t;){if(3===t.tag){ju(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Fc||!Fc.has(r))){e=Yr(n,e),null!==(r=ws(t,n=Ai(2),2))&&(Pi(n,r,t,e),Ie(r,2),qu(r));break}}t=t.return}}function Nu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new mc;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(Sc=!0,a.add(n),e=Eu.bind(null,e,t,n),t.then(e,e))}function Eu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,gc===e&&(bc&n)===n&&(4===Cc||3===Cc&&(62914560&bc)===bc&&300>ue()-Ic?!(2&hc)&&ru(e,0):Lc|=n,Dc===bc&&(Dc=0)),qu(e)}function Lu(e,t){0===t&&(t=Ae()),null!==(e=zr(e,t))&&(Ie(e,t),qu(e))}function Tu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Lu(e,n)}function Du(e,t){var n=0;switch(e.tag){case 31:case 13:var a=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(r(314))}null!==a&&a.delete(t),Lu(e,n)}var _u=null,Au=null,Pu=!1,Iu=!1,zu=!1,Ou=0;function qu(e){e!==Au&&null===e.next&&(null===Au?_u=Au=e:Au=Au.next=e),Iu=!0,Pu||(Pu=!0,Nd(function(){6&hc?oe(pe,Mu):Ru()}))}function Fu(e,t){if(!zu&&Iu){zu=!0;do{for(var n=!1,r=_u;null!==r;){if(0!==e){var a=r.pendingLanes;if(0===a)var s=0;else{var o=r.suspendedLanes,i=r.pingedLanes;s=(1<<31-ke(42|e)+1)-1,s=201326741&(s&=a&~(o&~i))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,$u(r,s))}else s=bc,!(3&(s=Te(r,r===gc?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||De(r,s)||(n=!0,$u(r,s));r=r.next}}while(n);zu=!1}}function Mu(){Ru()}function Ru(){Iu=Pu=!1;var e=0;0!==Ou&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==kd&&(kd=e,!0);return kd=null,!1}()&&(e=Ou);for(var t=ue(),n=null,r=_u;null!==r;){var a=r.next,s=Bu(r,t);0===s?(r.next=null,null===n?_u=a:n.next=a,null===a&&(Au=n)):(n=r,(0!==e||3&s)&&(Iu=!0)),r=a}0!==Mc&&5!==Mc||Fu(e),0!==Ou&&(Ou=0)}function Bu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var o=31-ke(s),i=1<<o,l=a[o];-1===l?0!==(i&n)&&0===(i&r)||(a[o]=_e(i,t)):l<=t&&(e.expiredLanes|=i),s&=~i}if(n=bc,n=Te(e,e===(t=gc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===xc||9===xc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ie(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||De(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ie(r),Me(n)){case 2:case 8:n=fe;break;case 32:default:n=me;break;case 268435456:n=ge}return r=Uu.bind(null,e),n=oe(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ie(r),e.callbackPriority=2,e.callbackNode=null,2}function Uu(e,t){if(0!==Mc&&5!==Mc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ku()&&e.callbackNode!==n)return null;var r=bc;return 0===(r=Te(e,e===gc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Jc(e,r,t),Bu(e,ue()),null!=e.callbackNode&&e.callbackNode===n?Uu.bind(null,e):null)}function $u(e,t){if(ku())return null;Jc(e,t,!0)}function Qu(){if(0===Ou){var e=Va;0===e&&(e=Ce,!(261888&(Ce<<=1))&&(Ce=256)),Ou=e}return Ou}function Vu(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:Pt(""+e)}function Wu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Hu=0;Hu<Nr.length;Hu++){var Gu=Nr[Hu];Er(Gu.toLowerCase(),"on"+(Gu[0].toUpperCase()+Gu.slice(1)))}Er(br,"onAnimationEnd"),Er(xr,"onAnimationIteration"),Er(vr,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(wr,"onTransitionRun"),Er(kr,"onTransitionStart"),Er(Sr,"onTransitionCancel"),Er(jr,"onTransitionEnd"),ot("onMouseEnter",["mouseout","mouseover"]),ot("onMouseLeave",["mouseout","mouseover"]),ot("onPointerEnter",["pointerout","pointerover"]),ot("onPointerLeave",["pointerout","pointerover"]),st("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),st("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),st("onBeforeInput",["compositionend","keypress","textInput","paste"]),st("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),st("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),st("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ku));function Ju(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var i=r[o],l=i.instance,c=i.currentTarget;if(i=i.listener,l!==s&&a.isPropagationStopped())break e;s=i,a.currentTarget=c;try{s(a)}catch(u){Lr(u)}a.currentTarget=null,s=l}else for(o=0;o<r.length;o++){if(l=(i=r[o]).instance,c=i.currentTarget,i=i.listener,l!==s&&a.isPropagationStopped())break e;s=i,a.currentTarget=c;try{s(a)}catch(u){Lr(u)}a.currentTarget=null,s=l}}}}function Xu(e,t){var n=t[We];void 0===n&&(n=t[We]=new Set);var r=e+"__bubble";n.has(r)||(nd(t,e,2,!1),n.add(r))}function Zu(e,t,n){var r=0;t&&(r|=4),nd(n,e,r,t)}var ed="_reactListening"+Math.random().toString(36).slice(2);function td(e){if(!e[ed]){e[ed]=!0,rt.forEach(function(t){"selectionchange"!==t&&(Yu.has(t)||Zu(t,!1,e),Zu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[ed]||(t[ed]=!0,Zu("selectionchange",!1,t))}}function nd(e,t,n,r){switch(Lp(t)){case 2:var a=kp;break;case 8:a=Sp;break;default:a=jp}n=a.bind(null,t,n,e),a=void 0,!Qt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function rd(e,t,n,r,a){var o=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var l=r.stateNode.containerInfo;if(l===a)break;if(4===i)for(i=r.return;null!==i;){var c=i.tag;if((3===c||4===c)&&i.stateNode.containerInfo===a)return;i=i.return}for(;null!==l;){if(null===(i=Xe(l)))return;if(5===(c=i.tag)||6===c||26===c||27===c){r=o=i;continue e}l=l.parentNode}}r=r.return}Bt(function(){var r=o,a=Ot(n),i=[];e:{var l=Cr.get(e);if(void 0!==l){var c=an,u=e;switch(e){case"keypress":if(0===Yt(n))break e;case"keydown":case"keyup":c=vn;break;case"focusin":u="focus",c=dn;break;case"focusout":u="blur",c=dn;break;case"beforeblur":case"afterblur":c=dn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=cn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=un;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=kn;break;case br:case xr:case vr:c=pn;break;case jr:c=Sn;break;case"scroll":case"scrollend":c=on;break;case"wheel":c=jn;break;case"copy":case"cut":case"paste":c=fn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=wn;break;case"toggle":case"beforetoggle":c=Cn}var d=!!(4&t),p=!d&&("scroll"===e||"scrollend"===e),f=d?null!==l?l+"Capture":null:l;d=[];for(var m,h=r;null!==h;){var g=h;if(m=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===m||null===f||null!=(g=Ut(h,f))&&d.push(ad(h,g,m)),p)break;h=h.return}0<d.length&&(l=new c(l,u,null,n,a),i.push({event:l,listeners:d}))}}if(!(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===zt||!(u=n.relatedTarget||n.fromElement)||!Xe(u)&&!u[Ve])&&(c||l)&&(l=a.window===a?a:(l=a.ownerDocument)?l.defaultView||l.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Xe(u):null)&&(p=s(u),d=u.tag,u!==p||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=cn,g="onMouseLeave",f="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(d=wn,g="onPointerLeave",f="onPointerEnter",h="pointer"),p=null==c?l:et(c),m=null==u?l:et(u),(l=new d(g,h+"leave",c,n,a)).target=p,l.relatedTarget=m,g=null,Xe(a)===r&&((d=new d(f,h+"enter",u,n,a)).target=m,d.relatedTarget=p,g=d),p=g,c&&u)e:{for(d=od,h=u,m=0,g=f=c;g;g=d(g))m++;g=0;for(var y=h;y;y=d(y))g++;for(;0<m-g;)f=d(f),m--;for(;0<g-m;)h=d(h),g--;for(;m--;){if(f===h||null!==h&&f===h.alternate){d=f;break e}f=d(f),h=d(h)}d=null}else d=null;null!==c&&id(i,l,c,d,!1),null!==u&&null!==p&&id(i,p,u,d,!0)}if("select"===(c=(l=r?et(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===c&&"file"===l.type)var b=$n;else if(qn(l))if(Qn)b=Zn;else{b=Jn;var x=Yn}else!(c=l.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?r&&Dt(r.elementType)&&(b=$n):b=Xn;switch(b&&(b=b(e,r))?Fn(i,b,n,a):(x&&x(e,l,r),"focusout"===e&&r&&"number"===l.type&&null!=r.memoizedProps.value&&kt(l,"number",l.value)),x=r?et(r):window,e){case"focusin":(qn(x)||"true"===x.contentEditable)&&(lr=x,cr=r,ur=null);break;case"focusout":ur=cr=lr=null;break;case"mousedown":dr=!0;break;case"contextmenu":case"mouseup":case"dragend":dr=!1,pr(i,n,a);break;case"selectionchange":if(ir)break;case"keydown":case"keyup":pr(i,n,a)}var v;if(En)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else zn?Pn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Dn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==w?"onCompositionEnd"===w&&zn&&(v=Kt()):(Ht="value"in(Wt=a)?Wt.value:Wt.textContent,zn=!0)),0<(x=sd(r,w)).length&&(w=new mn(w,e,null,n,a),i.push({event:w,listeners:x}),v?w.data=v:null!==(v=In(n))&&(w.data=v))),(v=Tn?function(e,t){switch(e){case"compositionend":return In(t);case"keypress":return 32!==t.which?null:(An=!0,_n);case"textInput":return(e=t.data)===_n&&An?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!En&&Pn(e,t)?(e=Kt(),Gt=Ht=Wt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=sd(r,"onBeforeInput")).length&&(x=new mn("onBeforeInput","beforeinput",null,n,a),i.push({event:x,listeners:w}),x.data=v)),function(e,t,n,r,a){if("submit"===t&&n&&n.stateNode===a){var s=Vu((a[Qe]||null).action),o=r.submitter;o&&null!==(t=(t=o[Qe]||null)?Vu(t.formAction):o.getAttribute("formAction"))&&(s=t,o=null);var i=new an("action","action",null,r,a);e.push({event:i,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Ou){var e=o?Wu(a,o):new FormData(a);ri(n,{pending:!0,data:e,method:a.method,action:s},null,e)}}else"function"==typeof s&&(i.preventDefault(),e=o?Wu(a,o):new FormData(a),ri(n,{pending:!0,data:e,method:a.method,action:s},s,e))},currentTarget:a}]})}}(i,e,r,n,a)}Ju(i,t)})}function ad(e,t,n){return{instance:e,listener:t,currentTarget:n}}function sd(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,s=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===s||(null!=(a=Ut(e,n))&&r.unshift(ad(e,a,s)),null!=(a=Ut(e,t))&&r.push(ad(e,a,s))),3===e.tag)return r;e=e.return}return[]}function od(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function id(e,t,n,r,a){for(var s=t._reactName,o=[];null!==n&&n!==r;){var i=n,l=i.alternate,c=i.stateNode;if(i=i.tag,null!==l&&l===r)break;5!==i&&26!==i&&27!==i||null===c||(l=c,a?null!=(c=Ut(n,s))&&o.unshift(ad(n,c,l)):a||null!=(c=Ut(n,s))&&o.push(ad(n,c,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var ld=/\r\n?/g,cd=/\u0000|\uFFFD/g;function ud(e){return("string"==typeof e?e:""+e).replace(ld,"\n").replace(cd,"")}function dd(e,t){return t=ud(t),ud(e)===t}function pd(e,t,n,a,s,o){switch(n){case"children":"string"==typeof a?"body"===t||"textarea"===t&&""===a||Nt(e,a):("number"==typeof a||"bigint"==typeof a)&&"body"!==t&&Nt(e,""+a);break;case"className":dt(e,"class",a);break;case"tabIndex":dt(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":dt(e,n,a);break;case"style":Tt(e,a,o);break;case"data":if("object"!==t){dt(e,"data",a);break}case"src":case"href":if(""===a&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==a||"function"==typeof a||"symbol"==typeof a||"boolean"==typeof a){e.removeAttribute(n);break}a=Pt(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if("function"==typeof a){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof o&&("formAction"===n?("input"!==t&&pd(e,t,"name",s.name,s,null),pd(e,t,"formEncType",s.formEncType,s,null),pd(e,t,"formMethod",s.formMethod,s,null),pd(e,t,"formTarget",s.formTarget,s,null)):(pd(e,t,"encType",s.encType,s,null),pd(e,t,"method",s.method,s,null),pd(e,t,"target",s.target,s,null))),null==a||"symbol"==typeof a||"boolean"==typeof a){e.removeAttribute(n);break}a=Pt(""+a),e.setAttribute(n,a);break;case"onClick":null!=a&&(e.onclick=It);break;case"onScroll":null!=a&&Xu("scroll",e);break;case"onScrollEnd":null!=a&&Xu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=a){if("object"!=typeof a||!("__html"in a))throw Error(r(61));if(null!=(n=a.__html)){if(null!=s.children)throw Error(r(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&"function"!=typeof a&&"symbol"!=typeof a;break;case"muted":e.muted=a&&"function"!=typeof a&&"symbol"!=typeof a;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==a||"function"==typeof a||"boolean"==typeof a||"symbol"==typeof a){e.removeAttribute("xlink:href");break}n=Pt(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=a&&"function"!=typeof a&&"symbol"!=typeof a?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&"function"!=typeof a&&"symbol"!=typeof a?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===a?e.setAttribute(n,""):!1!==a&&null!=a&&"function"!=typeof a&&"symbol"!=typeof a?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":null==a||"function"==typeof a||"symbol"==typeof a||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":Xu("beforetoggle",e),Xu("toggle",e),ut(e,"popover",a);break;case"xlinkActuate":pt(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":pt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":pt(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":pt(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":pt(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":pt(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":pt(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":pt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":pt(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":ut(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&ut(e,n=_t.get(n)||n,a)}}function fd(e,t,n,a,s,o){switch(n){case"style":Tt(e,a,o);break;case"dangerouslySetInnerHTML":if(null!=a){if("object"!=typeof a||!("__html"in a))throw Error(r(61));if(null!=(n=a.__html)){if(null!=s.children)throw Error(r(60));e.innerHTML=n}}break;case"children":"string"==typeof a?Nt(e,a):("number"==typeof a||"bigint"==typeof a)&&Nt(e,""+a);break;case"onScroll":null!=a&&Xu("scroll",e);break;case"onScrollEnd":null!=a&&Xu("scrollend",e);break;case"onClick":null!=a&&(e.onclick=It);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:at.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),"function"==typeof(o=null!=(o=e[Qe]||null)?o[n]:null)&&e.removeEventListener(t,o,s),"function"!=typeof a)?n in e?e[n]=a:!0===a?e.setAttribute(n,""):ut(e,n,a):("function"!=typeof o&&null!==o&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,s)))}}function md(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xu("error",e),Xu("load",e);var a,s=!1,o=!1;for(a in n)if(n.hasOwnProperty(a)){var i=n[a];if(null!=i)switch(a){case"src":s=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:pd(e,t,a,i,n,null)}}return o&&pd(e,t,"srcSet",n.srcSet,n,null),void(s&&pd(e,t,"src",n.src,n,null));case"input":Xu("invalid",e);var l=a=i=o=null,c=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var d=n[s];if(null!=d)switch(s){case"name":o=d;break;case"type":i=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":a=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(r(137,t));break;default:pd(e,t,s,d,n,null)}}return void wt(e,a,l,c,u,i,o,!1);case"select":for(o in Xu("invalid",e),s=i=a=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":a=l;break;case"defaultValue":i=l;break;case"multiple":s=l;default:pd(e,t,o,l,n,null)}return t=a,n=i,e.multiple=!!s,void(null!=t?St(e,!!s,t,!1):null!=n&&St(e,!!s,n,!0));case"textarea":for(i in Xu("invalid",e),a=o=s=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":s=l;break;case"defaultValue":o=l;break;case"children":a=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(r(91));break;default:pd(e,t,i,l,n,null)}return void Ct(e,s,o,a);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(s=n[c]))if("selected"===c)e.selected=s&&"function"!=typeof s&&"symbol"!=typeof s;else pd(e,t,c,s,n,null);return;case"dialog":Xu("beforetoggle",e),Xu("toggle",e),Xu("cancel",e),Xu("close",e);break;case"iframe":case"object":Xu("load",e);break;case"video":case"audio":for(s=0;s<Ku.length;s++)Xu(Ku[s],e);break;case"image":Xu("error",e),Xu("load",e);break;case"details":Xu("toggle",e);break;case"embed":case"source":case"link":Xu("error",e),Xu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(s=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:pd(e,t,u,s,n,null)}return;default:if(Dt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(s=n[d])&&fd(e,t,d,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(s=n[l])&&pd(e,t,l,s,n,null))}function hd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var gd=null,yd=null;function bd(e){return 9===e.nodeType?e:e.ownerDocument}function xd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function wd(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var kd=null;var Sd="function"==typeof setTimeout?setTimeout:void 0,jd="function"==typeof clearTimeout?clearTimeout:void 0,Cd="function"==typeof Promise?Promise:void 0,Nd="function"==typeof queueMicrotask?queueMicrotask:void 0!==Cd?function(e){return Cd.resolve(null).then(e).catch(Ed)}:Sd;function Ed(e){setTimeout(function(){throw e})}function Ld(e){return"head"===e}function Td(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)||"/&"===n){if(0===r)return e.removeChild(a),void Wp(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)Rd(e.ownerDocument.documentElement);else if("head"===n){Rd(n=e.ownerDocument.head);for(var s=n.firstChild;s;){var o=s.nextSibling,i=s.nodeName;s[Ye]||"SCRIPT"===i||"STYLE"===i||"LINK"===i&&"stylesheet"===s.rel.toLowerCase()||n.removeChild(s),s=o}}else"body"===n&&Rd(e.ownerDocument.body);n=a}while(n);Wp(t)}function Dd(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function _d(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":_d(n),Je(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Ad(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=zd(e.nextSibling)))return null}return e}function Pd(e){return"$?"===e.data||"$~"===e.data}function Id(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function zd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Od=null;function qd(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return zd(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Fd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Md(e,t,n){switch(t=bd(n),e){case"html":if(!(e=t.documentElement))throw Error(r(452));return e;case"head":if(!(e=t.head))throw Error(r(453));return e;case"body":if(!(e=t.body))throw Error(r(454));return e;default:throw Error(r(451))}}function Rd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Je(e)}var Bd=new Map,Ud=new Set;function $d(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Qd=q.d;q.d={f:function(){var e=Qd.f(),t=tu();return e||t},r:function(e){var t=Ze(e);null!==t&&5===t.tag&&"form"===t.type?si(t):Qd.r(e)},D:function(e){Qd.D(e),Wd("dns-prefetch",e,null)},C:function(e,t){Qd.C(e,t),Wd("preconnect",e,t)},L:function(e,t,n){Qd.L(e,t,n);var r=Vd;if(r&&e&&t){var a='link[rel="preload"][as="'+xt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(a+='[imagesrcset="'+xt(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(a+='[imagesizes="'+xt(n.imageSizes)+'"]')):a+='[href="'+xt(e)+'"]';var s=a;switch(t){case"style":s=Gd(e);break;case"script":s=Jd(e)}Bd.has(s)||(e=u({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Bd.set(s,e),null!==r.querySelector(a)||"style"===t&&r.querySelector(Kd(s))||"script"===t&&r.querySelector(Xd(s))||(md(t=r.createElement("link"),"link",e),nt(t),r.head.appendChild(t)))}},m:function(e,t){Qd.m(e,t);var n=Vd;if(n&&e){var r=t&&"string"==typeof t.as?t.as:"script",a='link[rel="modulepreload"][as="'+xt(r)+'"][href="'+xt(e)+'"]',s=a;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Jd(e)}if(!Bd.has(s)&&(e=u({rel:"modulepreload",href:e},t),Bd.set(s,e),null===n.querySelector(a))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Xd(s)))return}md(r=n.createElement("link"),"link",e),nt(r),n.head.appendChild(r)}}},X:function(e,t){Qd.X(e,t);var n=Vd;if(n&&e){var r=tt(n).hoistableScripts,a=Jd(e),s=r.get(a);s||((s=n.querySelector(Xd(a)))||(e=u({src:e,async:!0},t),(t=Bd.get(a))&&np(e,t),nt(s=n.createElement("script")),md(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(a,s))}},S:function(e,t,n){Qd.S(e,t,n);var r=Vd;if(r&&e){var a=tt(r).hoistableStyles,s=Gd(e);t=t||"default";var o=a.get(s);if(!o){var i={loading:0,preload:null};if(o=r.querySelector(Kd(s)))i.loading=5;else{e=u({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Bd.get(s))&&tp(e,n);var l=o=r.createElement("link");nt(l),md(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){i.loading|=1}),l.addEventListener("error",function(){i.loading|=2}),i.loading|=4,ep(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:i},a.set(s,o)}}},M:function(e,t){Qd.M(e,t);var n=Vd;if(n&&e){var r=tt(n).hoistableScripts,a=Jd(e),s=r.get(a);s||((s=n.querySelector(Xd(a)))||(e=u({src:e,async:!0,type:"module"},t),(t=Bd.get(a))&&np(e,t),nt(s=n.createElement("script")),md(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(a,s))}}};var Vd="undefined"==typeof document?null:document;function Wd(e,t,n){var r=Vd;if(r&&"string"==typeof t&&t){var a=xt(t);a='link[rel="'+e+'"][href="'+a+'"]',"string"==typeof n&&(a+='[crossorigin="'+n+'"]'),Ud.has(a)||(Ud.add(a),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(a)&&(md(t=r.createElement("link"),"link",e),nt(t),r.head.appendChild(t)))}}function Hd(e,t,n,a){var s,o,i,l,c=(c=G.current)?$d(c):null;if(!c)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=Gd(n.href),(a=(n=tt(c).hoistableStyles).get(t))||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=Gd(n.href);var u=tt(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Kd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Bd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Bd.set(e,n),u||(s=c,o=e,i=n,l=d.state,s.querySelector('link[rel="preload"][as="style"]['+o+"]")?l.loading=1:(o=s.createElement("link"),l.preload=o,o.addEventListener("load",function(){return l.loading|=1}),o.addEventListener("error",function(){return l.loading|=2}),md(o,"link",i),nt(o),s.head.appendChild(o))))),t&&null===a)throw Error(r(528,""));return d}if(t&&null!==a)throw Error(r(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Jd(n),(a=(n=tt(c).hoistableScripts).get(t))||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Gd(e){return'href="'+xt(e)+'"'}function Kd(e){return'link[rel="stylesheet"]['+e+"]"}function Yd(e){return u({},e,{"data-precedence":e.precedence,precedence:null})}function Jd(e){return'[src="'+xt(e)+'"]'}function Xd(e){return"script[async]"+e}function Zd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+xt(n.href)+'"]');if(a)return t.instance=a,nt(a),a;var s=u({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return nt(a=(e.ownerDocument||e).createElement("style")),md(a,"style",s),ep(a,n.precedence,e),t.instance=a;case"stylesheet":s=Gd(n.href);var o=e.querySelector(Kd(s));if(o)return t.state.loading|=4,t.instance=o,nt(o),o;a=Yd(n),(s=Bd.get(s))&&tp(a,s),nt(o=(e.ownerDocument||e).createElement("link"));var i=o;return i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),md(o,"link",a),t.state.loading|=4,ep(o,n.precedence,e),t.instance=o;case"script":return o=Jd(n.src),(s=e.querySelector(Xd(o)))?(t.instance=s,nt(s),s):(a=n,(s=Bd.get(o))&&np(a=u({},n),s),nt(s=(e=e.ownerDocument||e).createElement("script")),md(s,"link",a),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(r(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(a=t.instance,t.state.loading|=4,ep(a,n.precedence,e));return t.instance}function ep(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=r.length?r[r.length-1]:null,s=a,o=0;o<r.length;o++){var i=r[o];if(i.dataset.precedence===t)s=i;else if(s!==a)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function tp(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function np(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var rp=null;function ap(e,t,n){if(null===rp){var r=new Map,a=rp=new Map;a.set(n,r)}else(r=(a=rp).get(n))||(r=new Map,a.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var s=n[a];if(!(s[Ye]||s[$e]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var o=s.getAttribute(t)||"";o=e+o;var i=r.get(o);i?i.push(s):r.set(o,[s])}}return r}function sp(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function op(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var ip=0;function lp(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)up(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var cp=null;function up(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,cp=new Map,t.forEach(dp,e),cp=null,lp.call(e))}function dp(e,t){if(!(4&t.state.loading)){var n=cp.get(e);if(n)var r=n.get(null);else{n=new Map,cp.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<a.length;s++){var o=a[s];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(a=t.instance).getAttribute("data-precedence"),(s=n.get(o)||r)===r&&n.set(null,a),n.set(o,a),this.count++,r=lp.bind(this),a.addEventListener("load",r),a.addEventListener("error",r),s?s.parentNode.insertBefore(a,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var pp={$$typeof:k,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function fp(e,t,n,r,a,s,o,i,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pe(0),this.hiddenUpdates=Pe(null),this.identifierPrefix=r,this.onUncaughtError=a,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function mp(e,t,n,r,a,s,o,i,l,c,u,d){return e=new fp(e,t,n,o,l,c,u,d,i),t=1,!0===s&&(t|=24),s=Rr(3,null,null,t),e.current=s,s.stateNode=e,(t=Ba()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},bs(s),e}function hp(e){return e?e=Fr:Fr}function gp(e,t,n,r,a,s){a=hp(a),null===r.context?r.context=a:r.pendingContext=a,(r=vs(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=ws(e,r,t))&&(Yc(n,0,t),ks(n,e,t))}function yp(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function bp(e,t){yp(e,t),(e=e.alternate)&&yp(e,t)}function xp(e){if(13===e.tag||31===e.tag){var t=zr(e,67108864);null!==t&&Yc(t,0,67108864),bp(e,67108864)}}function vp(e){if(13===e.tag||31===e.tag){var t=Gc(),n=zr(e,t=Fe(t));null!==n&&Yc(n,0,t),bp(e,t)}}var wp=!0;function kp(e,t,n,r){var a=O.T;O.T=null;var s=q.p;try{q.p=2,jp(e,t,n,r)}finally{q.p=s,O.T=a}}function Sp(e,t,n,r){var a=O.T;O.T=null;var s=q.p;try{q.p=8,jp(e,t,n,r)}finally{q.p=s,O.T=a}}function jp(e,t,n,r){if(wp){var a=Cp(r);if(null===a)rd(e,t,r,Np,n),qp(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Dp=Fp(Dp,e,t,n,r,a),!0;case"dragenter":return _p=Fp(_p,e,t,n,r,a),!0;case"mouseover":return Ap=Fp(Ap,e,t,n,r,a),!0;case"pointerover":var s=a.pointerId;return Pp.set(s,Fp(Pp.get(s)||null,e,t,n,r,a)),!0;case"gotpointercapture":return s=a.pointerId,Ip.set(s,Fp(Ip.get(s)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(qp(e,r),4&t&&-1<Op.indexOf(e)){for(;null!==a;){var s=Ze(a);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var o=Le(s.pendingLanes);if(0!==o){var i=s;for(i.pendingLanes|=2,i.entangledLanes|=2;o;){var l=1<<31-ke(o);i.entanglements[1]|=l,o&=~l}qu(s),!(6&hc)&&(Oc=ue()+500,Fu(0))}}break;case 31:case 13:null!==(i=zr(s,2))&&Yc(i,0,2),tu(),bp(s,2)}if(null===(s=Cp(r))&&rd(e,t,r,Np,n),s===a)break;a=s}null!==a&&r.stopPropagation()}else rd(e,t,r,null,n)}}function Cp(e){return Ep(e=Ot(e))}var Np=null;function Ep(e){if(Np=null,null!==(e=Xe(e))){var t=s(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=o(t)))return e;e=null}else if(31===n){if(null!==(e=i(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Np=e,null}function Lp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(de()){case pe:return 2;case fe:return 8;case me:case he:return 32;case ge:return 268435456;default:return 32}default:return 32}}var Tp=!1,Dp=null,_p=null,Ap=null,Pp=new Map,Ip=new Map,zp=[],Op="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qp(e,t){switch(e){case"focusin":case"focusout":Dp=null;break;case"dragenter":case"dragleave":_p=null;break;case"mouseover":case"mouseout":Ap=null;break;case"pointerover":case"pointerout":Pp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ip.delete(t.pointerId)}}function Fp(e,t,n,r,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=Ze(t))&&xp(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Mp(e){var t=Xe(e.target);if(null!==t){var n=s(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=o(n)))return e.blockedOn=t,void Be(e.priority,function(){vp(n)})}else if(31===t){if(null!==(t=i(n)))return e.blockedOn=t,void Be(e.priority,function(){vp(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Rp(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Cp(e.nativeEvent);if(null!==n)return null!==(t=Ze(n))&&xp(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);zt=r,n.target.dispatchEvent(r),zt=null,t.shift()}return!0}function Bp(e,t,n){Rp(e)&&n.delete(t)}function Up(){Tp=!1,null!==Dp&&Rp(Dp)&&(Dp=null),null!==_p&&Rp(_p)&&(_p=null),null!==Ap&&Rp(Ap)&&(Ap=null),Pp.forEach(Bp),Ip.forEach(Bp)}function $p(t,n){t.blockedOn===n&&(t.blockedOn=null,Tp||(Tp=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Up)))}var Qp=null;function Vp(t){Qp!==t&&(Qp=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Qp===t&&(Qp=null);for(var e=0;e<t.length;e+=3){var n=t[e],r=t[e+1],a=t[e+2];if("function"!=typeof r){if(null===Ep(r||n))continue;break}var s=Ze(n);null!==s&&(t.splice(e,3),e-=3,ri(s,{pending:!0,data:a,method:n.method,action:r},r,a))}}))}function Wp(e){function t(t){return $p(t,e)}null!==Dp&&$p(Dp,e),null!==_p&&$p(_p,e),null!==Ap&&$p(Ap,e),Pp.forEach(t),Ip.forEach(t);for(var n=0;n<zp.length;n++){var r=zp[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<zp.length&&null===(n=zp[0]).blockedOn;)Mp(n),null===n.blockedOn&&zp.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var a=n[r],s=n[r+1],o=a[Qe]||null;if("function"==typeof s)o||Vp(n);else if(o){var i=null;if(s&&s.hasAttribute("formAction")){if(a=s,o=s[Qe]||null)i=o.formAction;else if(null!==Ep(a))continue}else i=o.action;"function"==typeof i?n[r+1]=i:(n.splice(r,3),r-=3),Vp(n)}}}function Hp(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return a=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==a&&(a(),a=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"==typeof navigation){var r=!1,a=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==a&&(a(),a=null)}}}function Gp(e){this._internalRoot=e}function Kp(e){this._internalRoot=e}Kp.prototype.render=Gp.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));gp(t.current,Gc(),e,t,null,null)},Kp.prototype.unmount=Gp.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;gp(e.current,2,null,e,null,null),tu(),t[Ve]=null}},Kp.prototype.unstable_scheduleHydration=function(e){if(e){var t=Re();e={blockedOn:null,target:e,priority:t};for(var n=0;n<zp.length&&0!==t&&t<zp[n].priority;n++);zp.splice(n,0,e),0===n&&Mp(e)}};var Yp=t.version;if("19.2.3"!==Yp)throw Error(r(527,Yp,"19.2.3"));q.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=s(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,a=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(a=o.return)){n=a;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return l(o),e;if(i===a)return l(o),t;i=i.sibling}throw Error(r(188))}if(n.return!==a.return)n=o,a=i;else{for(var c=!1,u=o.child;u;){if(u===n){c=!0,n=o,a=i;break}if(u===a){c=!0,a=o,n=i;break}u=u.sibling}if(!c){for(u=i.child;u;){if(u===n){c=!0,n=i,a=o;break}if(u===a){c=!0,a=i,n=o;break}u=u.sibling}if(!c)throw Error(r(189))}}if(n.alternate!==a)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?c(e):null)?null:e.stateNode};var Jp={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.3"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Xp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xp.isDisabled&&Xp.supportsFiber)try{xe=Xp.inject(Jp),ve=Xp}catch(ef){}}return w.createRoot=function(e,t){if(!a(e))throw Error(r(299));var n=!1,s="",o=Ni,i=Ei,l=Li;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onUncaughtError&&(o=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=mp(e,1,!1,null,0,n,s,null,o,i,l,Hp),e[Ve]=t.current,td(e),new Gp(t)},w.hydrateRoot=function(e,t,n){if(!a(e))throw Error(r(299));var s=!1,o="",i=Ni,l=Ei,c=Li,u=null;return null!=n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=mp(e,1,!0,t,0,s,o,u,i,l,c,Hp)).context=hp(null),n=t.current,(o=vs(s=Fe(s=Gc()))).callback=null,ws(n,o,s),n=s,t.current.lanes=n,Ie(t,n),qu(t),e[Ve]=t.current,td(e),new Kp(t)},w.version="19.2.3",w}var N=(x||(x=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),v.exports=C()),v.exports);const E={},L=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),a=n?.nonce||n?.getAttribute("nonce");r=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in E)return;E[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,a&&r.setAttribute("nonce",a),document.head.appendChild(r),t?new Promise((t,n)=>{r.addEventListener("load",t),r.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})},T=e=>(t,n,r)=>{const a=r.subscribe;r.subscribe=(e,t,n)=>{let s=e;if(t){const a=(null==n?void 0:n.equalityFn)||Object.is;let o=e(r.getState());s=n=>{const r=e(n);if(!a(o,r)){const e=o;t(o=r,e)}},(null==n?void 0:n.fireImmediately)&&t(o,o)}return a(s)};return e(t,n,r)},D={productionTeam:{id:"productionTeam",name:"Production Team",color:"#3B82F6",subsections:["Production","Technical Crew","Production Management"]},productionEquipment:{id:"productionEquipment",name:"Production Equipment",color:"#06B6D4",subsections:["Video","Audio","Cameras","Graphics","VT","Cabling","Other"]},creative:{id:"creative",name:"Creative",color:"#EC4899",subsections:["Services"]},logistics:{id:"logistics",name:"Logistics",color:"#F59E0B",subsections:["Services"]},expenses:{id:"expenses",name:"Expenses",color:"#10B981",subsections:["Services"]}},_=["productionTeam","productionEquipment","creative","logistics","expenses"],A={USD:{code:"USD",symbol:"$",name:"US Dollar"},GBP:{code:"GBP",symbol:"",name:"British Pound"},MYR:{code:"MYR",symbol:"RM",name:"Malaysian Ringgit"},IDR:{code:"IDR",symbol:"Rp",name:"Indonesian Rupiah"},KWD:{code:"KWD",symbol:"KD",name:"Kuwaiti Dinar"},AED:{code:"AED",symbol:".",name:"UAE Dirham"},SGD:{code:"SGD",symbol:"S$",name:"Singapore Dollar"},THB:{code:"THB",symbol:"",name:"Thai Baht"},QAR:{code:"QAR",symbol:"QR",name:"Qatari Riyal"},SAR:{code:"SAR",symbol:"SR",name:"Saudi Riyal"}},P={USD:1,GBP:.79,MYR:4.47,IDR:15850,KWD:.31,AED:3.67,SGD:1.34,THB:34.5,QAR:3.64,SAR:3.75},I={MALAYSIA:{id:"MALAYSIA",name:"Malaysia",defaultCurrency:"MYR",countries:["Malaysia"]},SEA:{id:"SEA",name:"Southeast Asia",defaultCurrency:"USD",countries:["Singapore","Indonesia","Thailand","Vietnam","Philippines"]},GULF:{id:"GULF",name:"Gulf States",defaultCurrency:"KWD",countries:["UAE","Kuwait","Saudi Arabia","Qatar","Bahrain","Oman"]},CENTRAL_ASIA:{id:"CENTRAL_ASIA",name:"Central Asia",defaultCurrency:"USD",countries:["Kazakhstan","Uzbekistan","Tajikistan"]}},z="tell_quote_current";function O(e){try{return localStorage.setItem(z,JSON.stringify(e)),!0}catch(t){return!1}}const q="exchange_rates_cache";async function F(){const e=function(){try{const e=localStorage.getItem(q);if(e){const{rates:t,timestamp:n}=JSON.parse(e);if(Date.now()-n<36e5)return{rates:t,timestamp:n}}}catch(e){}return null}();if(e)return e;try{const e=await fetch("https://api.exchangerate-api.com/v4/latest/USD");if(!e.ok)throw new Error("Failed to fetch rates");const t=await e.json(),n={};return Object.keys(A).forEach(e=>{n[e]=t.rates[e]||P[e]}),function(e){try{localStorage.setItem(q,JSON.stringify({rates:e,timestamp:Date.now()}))}catch(t){}}(n),{rates:n,timestamp:Date.now()}}catch(t){return{rates:P,timestamp:null}}}function M(e,t,n,r){if(t===n)return e;return e/(r[t]||P[t])*(r[n]||P[n])}function R(e,t,n={}){const{showSymbol:r=!0,decimals:a=2}=n,s=A[t];if(!s)return`${e.toFixed(a)}`;const o="IDR"===t?0:a,i=new Intl.NumberFormat("en-US",{minimumFractionDigits:o,maximumFractionDigits:o}).format(e);return r?`${s.symbol}${i}`:i}function B(e){return{MALAYSIA:"MYR",SEA:"USD",GULF:"USD",CENTRAL_ASIA:"USD"}[e]||"USD"}function U(e){return A[e]?.symbol||e}const $=h("https://deitlnfumugxcbxqqivk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlaXRsbmZ1bXVneGNieHFxaXZrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU1NDgxMzMsImV4cCI6MjA4MTEyNDEzM30.unFRnnjTCuxoaAyjfWK1UNjgubq9MYjElXbTN77mjEc",{auth:{storage:window.localStorage,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"},global:{headers:{"x-application-name":"tell-quote-tool"}},db:{schema:"public"},realtime:{params:{eventsPerSecond:10}}}),Q=()=>!!$,V=(e,t=1.5)=>({MALAYSIA:{cost:.85*e,charge:.85*e*t},SEA:{cost:e,charge:e*t},GULF:{cost:1.2*e,charge:1.2*e*t},CENTRAL_ASIA:{cost:1.1*e,charge:1.1*e*t}}),W=[{name:"Project Manager",description:"Remote project management",section:"prod_mgmt_remote",unit:"day",pricing:V(300)},{name:"Technical Project Manager",description:"Remote technical project management",section:"prod_mgmt_remote",unit:"day",pricing:V(300)},{name:"Consultant - TE",description:"Technical engineering consultant",section:"prod_mgmt_remote",unit:"day",pricing:V(500)},{name:"Graphics System - VMix",description:"VMix graphics system package",section:"event_graphics",unit:"day",pricing:V(33.8)},{name:"Graphics Design",description:"Graphics design services",section:"event_graphics",unit:"day",pricing:V(150)},{name:"Graphics Integration",description:"Graphics integration and setup",section:"event_graphics",unit:"day",pricing:V(50)},{name:"Photo Editing",description:"Photo editing services",section:"event_graphics",unit:"item",pricing:V(10)},{name:"Graphics Operator",description:"On-site graphics operator",section:"event_graphics",unit:"day",pricing:V(100)},{name:"Graphics Producer - On Site",description:"On-site graphics producer",section:"event_graphics",unit:"day",pricing:V(400)},{name:"Graphics Engineer",description:"Graphics engineering and technical support",section:"event_graphics",unit:"day",pricing:V(150)},{name:"Technical Producer - Int",description:"International technical producer",section:"prod_staffing",unit:"day",pricing:V(500)},{name:"Technical Director - Int",description:"International technical director",section:"prod_staffing",unit:"day",pricing:V(450)},{name:"Producer - Int On Site",description:"International producer on-site",section:"prod_staffing",unit:"day",pricing:V(500)},{name:"Producer - Remote Int",description:"International remote producer",section:"prod_staffing",unit:"day",pricing:V(300)},{name:"Sound Engineer - Int",description:"International sound engineer",section:"prod_staffing",unit:"day",pricing:V(500)},{name:"Sound Engineer - SEA",description:"South East Asia sound engineer",section:"prod_staffing",unit:"day",pricing:V(350)},{name:"Talent - Int",description:"International talent/presenter",section:"prod_staffing",unit:"day",pricing:V(500)},{name:"Field Producer/Floor Manager - Int",description:"International field producer/floor manager",section:"prod_staffing",unit:"day",pricing:V(450)},{name:"Field Producer/Floor Manager - SEA",description:"South East Asia field producer/floor manager",section:"prod_staffing",unit:"day",pricing:V(250)},{name:"Camera Operator - Int",description:"International camera operator",section:"prod_staffing",unit:"day",pricing:V(450)},{name:"Camera Operator - SEA",description:"South East Asia camera operator",section:"prod_staffing",unit:"day",pricing:V(250)},{name:"SPR Equipment - Silver Package",description:"SPR equipment silver package",section:"spr_equipment",unit:"day",pricing:V(700)},{name:"DJ Cam",description:"DJ camera setup",section:"extras",unit:"day",pricing:V(75)},{name:"Wireless Camera System",description:"Wireless camera system",section:"extras",unit:"day",pricing:V(250)},{name:"Comms",description:"Communications equipment",section:"extras",unit:"day",pricing:V(250)}],H="tell_rate_card",G="tell_rate_card_sections",K="tell_rate_card_sync_queue";function Y(){try{const e=localStorage.getItem(K);return e?JSON.parse(e):[]}catch(e){return[]}}function J(e){try{localStorage.setItem(K,JSON.stringify(e))}catch(t){}}const X=()=>({MALAYSIA:{cost:0,charge:0},SEA:{cost:0,charge:0},GULF:{cost:0,charge:0},CENTRAL_ASIA:{cost:0,charge:0}}),Z=[{id:"prod_production",name:"Production",group:"Production Team"},{id:"prod_technical",name:"Technical Crew",group:"Production Team"},{id:"prod_management",name:"Production Management",group:"Production Team"},{id:"equip_video",name:"Video",group:"Production Equipment"},{id:"equip_audio",name:"Audio",group:"Production Equipment"},{id:"equip_cameras",name:"Cameras",group:"Production Equipment"},{id:"equip_graphics",name:"Graphics",group:"Production Equipment"},{id:"equip_vt",name:"VT",group:"Production Equipment"},{id:"equip_cabling",name:"Cabling",group:"Production Equipment"},{id:"equip_other",name:"Other Equipment",group:"Production Equipment"},{id:"creative",name:"Creative",group:"Creative"},{id:"logistics",name:"Logistics",group:"Logistics"},{id:"expenses",name:"Expenses",group:"Expenses"}];function ee(){try{const e=localStorage.getItem(H);return e?JSON.parse(e):[]}catch(e){return[]}}function te(){try{const e=localStorage.getItem(G);return e?JSON.parse(e):Z}catch(e){return Z}}function ne(e){try{localStorage.setItem(H,JSON.stringify(e))}catch(t){}}function re(e){try{localStorage.setItem(G,JSON.stringify(e))}catch(t){}}function ae(){return`${Date.now()}-${Math.random().toString(36).substring(2,11)}`}const se=u(T((e,t)=>({items:ee(),sections:te(),loading:!1,syncStatus:"idle",syncError:null,pendingSyncCount:Y().length,addToSyncQueue:(t,n,r)=>{const a=Y();a.push({action:t,id:n,data:r,timestamp:Date.now()}),J(a),e(e=>({pendingSyncCount:e.pendingSyncCount+1}))},processSyncQueue:async()=>{if(!Q())return;const t=Y();if(0===t.length)return;const n=[];for(const e of t)try{"insert"===e.action?await $.from("rate_cards").insert(e.data):"update"===e.action?await $.from("rate_cards").update(e.data).eq("id",e.id):"delete"===e.action&&await $.from("rate_cards").delete().eq("id",e.id)}catch(r){n.push({...e,retries:(e.retries||0)+1,lastError:r.message})}J(n),e({pendingSyncCount:n.length})},getUnsyncedCount:()=>t().items.filter(e=>!e._synced).length,clearSyncError:()=>{e({syncError:null,syncStatus:"idle"})},initialize:async()=>{if(Q()){e({loading:!0,syncStatus:"syncing"});try{const{data:n,error:r}=await $.from("rate_cards").select("*").order("created_at",{ascending:!0});if(r)throw r;const{data:a,error:s}=await $.from("rate_card_sections").select("*").order("sort_order",{ascending:!0});if(s)throw s;const o=(n||[]).map(e=>({id:e.id,name:e.name,description:e.description||"",section:e.section,unit:e.unit||"day",pricing:e.pricing||{MALAYSIA:{cost:0,charge:0},SEA:{cost:0,charge:0},GULF:{cost:0,charge:0},CENTRAL_ASIA:{cost:0,charge:0}},currencyPricing:e.currency_pricing||{},createdAt:e.created_at,updatedAt:e.updated_at,_synced:!0})),i=a&&a.length>0?a.map(e=>({id:e.id,name:e.name,group:e.group_name||"Other"})):Z;if(!a||0===a.length)for(let e=0;e<Z.length;e++){const t=Z[e];await $.from("rate_card_sections").upsert({id:t.id,name:t.name,sort_order:e,group_name:t.group})}ne(o),re(i),e({items:o,sections:i,loading:!1,syncStatus:"success",syncError:null}),await t().processSyncQueue()}catch(n){e({loading:!1,syncStatus:"error",syncError:n.message})}}else e({loading:!1,syncStatus:"idle"})},addSection:async n=>{const r={id:n.toLowerCase().replace(/\s+/g,"_")+"_"+Math.random().toString(36).substring(2,7),name:n};if(e(e=>{const t=[...e.sections,r];return re(t),{sections:t}}),Q())try{await $.from("rate_card_sections").insert({id:r.id,name:r.name,sort_order:t().sections.length})}catch(a){}return r},deleteSection:async n=>{if(t().items.some(e=>e.section===n)&&e(e=>{const t=e.items.map(e=>e.section===n?{...e,section:"extras",updatedAt:(new Date).toISOString()}:e);return ne(t),Q()&&t.filter(e=>"extras"===e.section).forEach(e=>{$.from("rate_cards").update({section:"extras"}).eq("id",e.id)}),{items:t}}),e(e=>{const t=e.sections.filter(e=>e.id!==n);return re(t),{sections:t}}),Q())try{await $.from("rate_card_sections").delete().eq("id",n)}catch(r){}},renameSection:async(t,n)=>{if(e(e=>{const r=e.sections.map(e=>e.id===t?{...e,name:n}:e);return re(r),{sections:r}}),Q())try{await $.from("rate_card_sections").update({name:n}).eq("id",t)}catch(r){}},moveSection:async(t,n)=>{e(e=>{const r=[...e.sections],a=r.findIndex(e=>e.id===t);if(-1===a)return e;const s="up"===n?a-1:a+1;return s<0||s>=r.length?e:([r[a],r[s]]=[r[s],r[a]],re(r),Q()&&r.forEach((e,t)=>{$.from("rate_card_sections").update({sort_order:t}).eq("id",e.id)}),{sections:r})})},addItem:async t=>{const n={id:ae(),name:t.name||"",description:t.description||"",section:t.section||"extras",unit:t.unit||"day",pricing:t.pricing||{MALAYSIA:{cost:0,charge:0},SEA:{cost:0,charge:0},GULF:{cost:0,charge:0},CENTRAL_ASIA:{cost:0,charge:0}},createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};if(Q())try{const{data:e,error:t}=await $.from("rate_cards").insert({name:n.name,description:n.description,section:n.section,unit:n.unit,pricing:n.pricing}).select().single();if(t)throw t;n.id=e.id}catch(r){}return e(e=>{const t=[...e.items,n];return ne(t),{items:t}}),n},updateItem:async(t,n)=>{if(e(e=>{const r=e.items.map(e=>e.id===t?{...e,...n,updatedAt:(new Date).toISOString()}:e);return ne(r),{items:r}}),Q())try{const e={};void 0!==n.name&&(e.name=n.name),void 0!==n.description&&(e.description=n.description),void 0!==n.section&&(e.section=n.section),void 0!==n.unit&&(e.unit=n.unit),void 0!==n.pricing&&(e.pricing=n.pricing),Object.keys(e).length>0&&await $.from("rate_cards").update(e).eq("id",t)}catch(r){}},updateItemPricing:async(t,n,r)=>{let a=null;if(e(e=>{const s=e.items.map(e=>e.id!==t?e:(a={...e,pricing:{...e.pricing,[n]:{...e.pricing[n],...r}},updatedAt:(new Date).toISOString()},a));return ne(s),{items:s}}),Q()&&a)try{await $.from("rate_cards").update({pricing:a.pricing}).eq("id",t)}catch(s){}},updateItemCurrencyPricing:async(t,n,r,a,s)=>{let o=null;if(e(e=>{const i=e.items.map(e=>{if(e.id!==t)return e;const i=e.currencyPricing?.[n]||{};return o={...e,currencyPricing:{...e.currencyPricing||{},[n]:{...i,[r]:{amount:parseFloat(a)||0,baseCurrency:s}}},updatedAt:(new Date).toISOString()},o});return ne(i),{items:i}}),Q()&&o)try{await $.from("rate_cards").update({currency_pricing:o.currencyPricing}).eq("id",t)}catch(i){}},deleteItem:async t=>{if(e(e=>{const n=e.items.filter(e=>e.id!==t);return ne(n),{items:n}}),Q())try{await $.from("rate_cards").delete().eq("id",t)}catch(n){}},getItemsBySection:e=>t().items.filter(t=>t.section===e),searchItems:e=>{const n=e.toLowerCase();return t().items.filter(e=>e.name.toLowerCase().includes(n)||e.description.toLowerCase().includes(n))},duplicateItem:e=>{const n=t().items.find(t=>t.id===e);return n?t().addItem({...n,name:`${n.name} (Copy)`}):null},seedRateCard:async()=>{const n=new Set(t().items.map(e=>e.name.toLowerCase())),r=W.filter(e=>!n.has(e.name.toLowerCase())).map(e=>({...e,id:ae(),createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}));if(0===r.length)return{success:!0,added:0,message:"All items already exist"};if(Q())try{const e=r.map(e=>({name:e.name,description:e.description,section:e.section,unit:e.unit,pricing:e.pricing})),{data:t,error:n}=await $.from("rate_cards").insert(e).select();if(n)throw n;t&&t.forEach((e,t)=>{r[t]&&(r[t].id=e.id)})}catch(a){}return e(e=>{const t=[...e.items,...r];return ne(t),{items:t}}),e({sections:Z}),re(Z),{success:!0,added:r.length}},resetSectionsToDefaults:async()=>{if(Q())try{await $.from("rate_card_sections").delete().neq("id","");for(let e=0;e<Z.length;e++){const t=Z[e];await $.from("rate_card_sections").upsert({id:t.id,name:t.name,sort_order:e,group_name:t.group})}}catch(t){}return e({sections:Z}),re(Z),{success:!0}},importFromCSV:async n=>{try{const r=(await n.text()).split("\n");if(r.length<2)throw new Error("Invalid CSV format");const a=r[0].split(",").map(e=>e.trim()),s=["MALAYSIA","SEA","GULF","CENTRAL_ASIA"],o=e=>a.indexOf(e),i=[],l=[];for(let e=1;e<r.length;e++){const n=r[e].trim();if(!n||n.startsWith("#"))continue;const a=[];let c=!1,u="";for(let e=0;e<n.length;e++){const t=n[e];'"'===t?c&&'"'===n[e+1]?(u+='"',e++):c=!c:","!==t||c?u+=t:(a.push(u),u="")}a.push(u);const d={id:a[o("id")]||ae(),section:a[o("section")]||"extras",name:a[o("name")]||"",description:a[o("description")]||"",unit:a[o("unit")]||"day",pricing:X(),createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};s.forEach(e=>{const t=o(`${e}_cost`),n=o(`${e}_charge`);-1!==t&&-1!==n&&(d.pricing[e]={cost:parseFloat(a[t])||0,charge:parseFloat(a[n])||0})});t().items.some(e=>e.id===d.id)?l.push(d):i.push(d)}if(Q()){if(i.length>0){const e=i.map(e=>({name:e.name,description:e.description,section:e.section,unit:e.unit,pricing:e.pricing})),{data:t}=await $.from("rate_cards").insert(e).select();t&&t.forEach((e,t)=>{i[t]&&(i[t].id=e.id)})}for(const e of l)await $.from("rate_cards").update({name:e.name,description:e.description,section:e.section,unit:e.unit,pricing:e.pricing}).eq("id",e.id)}return e(e=>{let t=[...e.items];return l.forEach(e=>{t=t.map(t=>t.id===e.id?e:t)}),t=[...t,...i],ne(t),{items:t}}),{success:!0,count:i.length+l.length}}catch(r){return{success:!1,error:r.message}}},exportToCSV:()=>{const{items:e}=t(),n=["MALAYSIA","SEA","GULF","CENTRAL_ASIA"],r=["id","section","name","description","unit"];n.forEach(e=>{r.push(`${e}_cost`),r.push(`${e}_charge`)});let a=r.join(",")+"\n";e.forEach(e=>{const t=[e.id,e.section||"",`"${(e.name||"").replace(/"/g,'""')}"`,`"${(e.description||"").replace(/"/g,'""')}"`,e.unit||"day"];n.forEach(n=>{const r=e.pricing?.[n]||{cost:0,charge:0};t.push(r.cost||0),t.push(r.charge||0)}),a+=t.join(",")+"\n"});const s=new Blob([a],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(s),i=document.createElement("a");i.href=o,i.download=`rate-card-${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o)},exportTemplate:()=>{const{sections:e}=t(),n=["id","section","name","description","unit"];["MALAYSIA","SEA","GULF","CENTRAL_ASIA"].forEach(e=>{n.push(`${e}_cost`),n.push(`${e}_charge`)});let r=n.join(",")+"\n";r+="# INSTRUCTIONS: Fill in your services below. Delete example rows before importing.\n",r+='# Leave "id" empty for new items. Unit options: day, item, project\n',r+=`# Available sections: ${e.map(e=>e.id+" ("+e.name+")").join(", ")}\n`,r+="#\n",e.slice(0,3).forEach((e,t)=>{const n=100+50*t,a=1.5*n;r+=`,${e.id},"Example ${e.name} Item","Description here",day,${n},${a},${1.2*n},${1.2*a},${1.5*n},${1.5*a},${1.3*n},${1.3*a}\n`});const a=new Blob([r],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(a),o=document.createElement("a");o.href=s,o.download="rate-card-template.csv",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s)}}))),oe="tell_clients",ie="tell_saved_quotes",le="tell_clients_sync_queue";function ce(){try{const e=localStorage.getItem(oe);return e?JSON.parse(e):[]}catch(e){return[]}}function ue(){try{const e=localStorage.getItem(ie);return e?JSON.parse(e):[]}catch(e){return[]}}function de(e){try{localStorage.setItem(oe,JSON.stringify(e))}catch(t){}}function pe(e){try{localStorage.setItem(ie,JSON.stringify(e))}catch(t){}}function fe(){try{const e=localStorage.getItem(le);return e?JSON.parse(e):[]}catch(e){return[]}}function me(e){try{localStorage.setItem(le,JSON.stringify(e))}catch(t){}}function he(){return`${Date.now()}-${Math.random().toString(36).substring(2,11)}`}const ge=u(T((e,t)=>({clients:ce(),savedQuotes:ue(),loading:!1,syncStatus:"idle",syncError:null,pendingSyncCount:fe().length,initialize:async()=>{if(Q()){e({loading:!0,syncStatus:"syncing"});try{const{data:r,error:a}=await $.from("clients").select("*").order("created_at",{ascending:!1});if(a)throw a;const{data:s,error:o}=await $.from("quotes").select("*").order("created_at",{ascending:!1});if(o)throw o;const i=(r||[]).map(e=>({id:e.id,company:e.company,contact:e.contact,email:e.email,phone:e.phone,website:e.website,location:e.location,address:e.address,region:e.region,notes:e.notes,tags:e.tags||[],contacts:e.contacts||[],paymentTerms:e.payment_terms,preferredCurrency:e.preferred_currency,industry:e.industry,createdAt:e.created_at,updatedAt:e.updated_at,_synced:!0})),l=(s||[]).map(e=>{const t=e.client?.company?.toLowerCase(),n=t?i.find(e=>e.company?.toLowerCase()===t):null;return{id:e.id,quoteNumber:e.quote_number,quoteDate:e.quote_date,validityDays:e.validity_days,status:e.status,currency:e.currency,region:e.region,preparedBy:e.prepared_by,client:e.client||{},clientId:n?.id||null,project:e.project||{},sections:e.sections||{},fees:e.fees||{},proposal:e.proposal||{},createdAt:e.created_at,updatedAt:e.updated_at,_synced:!0}}),c=ce(),u=ue(),d=c.filter(e=>!e._synced&&!i.find(t=>t.id===e.id)),p=u.filter(e=>!e._synced&&!l.find(t=>t.id===e.id||t.quoteNumber===e.quoteNumber));for(const e of d)try{const{data:t,error:n}=await $.from("clients").insert({company:e.company,contact:e.contact,email:e.email,phone:e.phone,website:e.website,location:e.location,address:e.address,region:e.region,notes:e.notes,tags:e.tags,contacts:e.contacts,payment_terms:e.paymentTerms,preferred_currency:e.preferredCurrency,industry:e.industry}).select().single();!n&&t&&i.push({...e,id:t.id,_synced:!0})}catch(n){}for(const e of p)try{const{data:t,error:n}=await $.from("quotes").insert({quote_number:e.quoteNumber,quote_date:e.quoteDate,validity_days:e.validityDays,status:e.status,currency:e.currency,region:e.region,prepared_by:e.preparedBy,client:e.client,project:e.project,sections:e.sections,fees:e.fees,proposal:e.proposal}).select().single();!n&&t&&l.push({...e,id:t.id,_synced:!0})}catch(n){}de(i),pe(l),e({clients:i,savedQuotes:l,loading:!1,syncStatus:"success",syncError:null}),await t().processSyncQueue()}catch(n){e({loading:!1,syncStatus:"error",syncError:n.message})}}else e({loading:!1,syncStatus:"idle"})},processSyncQueue:async()=>{if(!Q())return;const t=fe();if(0===t.length)return;const n=[];for(const e of t)try{"clients"===e.table?"insert"===e.action?await $.from("clients").insert(e.data):"update"===e.action?await $.from("clients").update(e.data).eq("id",e.id):"delete"===e.action&&await $.from("clients").delete().eq("id",e.id):"quotes"===e.table&&("insert"===e.action?await $.from("quotes").insert(e.data):"update"===e.action?await $.from("quotes").update(e.data).eq("id",e.id):"delete"===e.action&&await $.from("quotes").delete().eq("id",e.id))}catch(r){n.push({...e,retries:(e.retries||0)+1,lastError:r.message})}me(n),e({pendingSyncCount:n.length})},addToSyncQueue:(t,n,r,a)=>{const s=fe();s.push({table:t,action:n,id:r,data:a,timestamp:Date.now()}),me(s),e(e=>({pendingSyncCount:e.pendingSyncCount+1}))},getUnsyncedCount:()=>t().clients.filter(e=>!e._synced).length+t().savedQuotes.filter(e=>!e._synced).length,syncAllToSupabase:async()=>{if(!Q())return{success:!1,error:"Supabase not configured"};e({syncStatus:"syncing"});let n=0,r=0;for(const s of t().clients)if(!s._synced)try{const t={company:s.company,contact:s.contact,email:s.email,phone:s.phone,website:s.website,location:s.location,address:s.address,region:s.region,notes:s.notes,tags:s.tags,contacts:s.contacts,payment_terms:s.paymentTerms,preferred_currency:s.preferredCurrency,industry:s.industry},{data:r}=await $.from("clients").select("id").eq("id",s.id).single();if(r)await $.from("clients").update(t).eq("id",s.id);else{const{data:n}=await $.from("clients").insert(t).select().single();n&&e(e=>({clients:e.clients.map(e=>e.id===s.id?{...e,id:n.id,_synced:!0}:e)}))}n++}catch(a){r++}for(const s of t().savedQuotes)if(!s._synced)try{const t={quote_number:s.quoteNumber,quote_date:s.quoteDate,validity_days:s.validityDays,status:s.status,currency:s.currency,region:s.region,prepared_by:s.preparedBy,client:s.client,project:s.project,sections:s.sections,fees:s.fees,proposal:s.proposal},{data:r}=await $.from("quotes").select("id").eq("quote_number",s.quoteNumber).single();if(r)await $.from("quotes").update(t).eq("id",r.id);else{const{data:n}=await $.from("quotes").insert(t).select().single();n&&e(e=>({savedQuotes:e.savedQuotes.map(e=>e.id===s.id?{...e,id:n.id,_synced:!0}:e)}))}n++}catch(a){r++}return e(e=>({clients:e.clients.map(e=>({...e,_synced:!0})),savedQuotes:e.savedQuotes.map(e=>({...e,_synced:!0})),syncStatus:r>0?"error":"success",syncError:r>0?`${r} items failed to sync`:null})),de(t().clients),pe(t().savedQuotes),{success:0===r,synced:n,errors:r}},clearSyncError:()=>{e({syncError:null,syncStatus:"idle"})},addClient:async n=>{const r={id:he(),company:n.company||"",contact:n.contact||"",email:n.email||"",phone:n.phone||"",website:n.website||"",location:n.location||"",address:n.address||"",region:n.region||"MALAYSIA",notes:n.notes||"",contacts:n.contacts||[],tags:n.tags||[],paymentTerms:n.paymentTerms||"net30",preferredCurrency:n.preferredCurrency||"USD",industry:n.industry||"",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),_synced:!1};if(r.contacts.length||!r.contact&&!r.email||r.contacts.push({id:he(),name:r.contact,email:r.email,phone:r.phone,role:"Primary",isPrimary:!0}),e(e=>{const t=[...e.clients,r];return de(t),{clients:t}}),Q())try{const{data:t,error:n}=await $.from("clients").insert({company:r.company,contact:r.contact,email:r.email,phone:r.phone,website:r.website,location:r.location,address:r.address,region:r.region,notes:r.notes,tags:r.tags,contacts:r.contacts,payment_terms:r.paymentTerms,preferred_currency:r.preferredCurrency,industry:r.industry}).select().single();if(n)throw n;e(e=>{const n=e.clients.map(e=>e.id===r.id?{...e,id:t.id,_synced:!0}:e);return de(n),{clients:n,syncStatus:"success",syncError:null}}),r.id=t.id}catch(a){t().addToSyncQueue("clients","insert",r.id,{company:r.company,contact:r.contact,email:r.email,phone:r.phone,website:r.website,location:r.location,address:r.address,region:r.region,notes:r.notes,tags:r.tags,contacts:r.contacts}),e({syncStatus:"error",syncError:`Failed to sync client: ${a.message}`})}return r},updateClient:async(n,r)=>{if(e(e=>{const t=e.clients.map(e=>e.id===n?{...e,...r,updatedAt:(new Date).toISOString(),_synced:!1}:e);return de(t),{clients:t}}),Q())try{const t={};void 0!==r.company&&(t.company=r.company),void 0!==r.contact&&(t.contact=r.contact),void 0!==r.email&&(t.email=r.email),void 0!==r.phone&&(t.phone=r.phone),void 0!==r.website&&(t.website=r.website),void 0!==r.location&&(t.location=r.location),void 0!==r.address&&(t.address=r.address),void 0!==r.region&&(t.region=r.region),void 0!==r.notes&&(t.notes=r.notes),void 0!==r.tags&&(t.tags=r.tags),void 0!==r.contacts&&(t.contacts=r.contacts),void 0!==r.paymentTerms&&(t.payment_terms=r.paymentTerms),void 0!==r.preferredCurrency&&(t.preferred_currency=r.preferredCurrency),void 0!==r.industry&&(t.industry=r.industry);const{error:a}=await $.from("clients").update(t).eq("id",n);if(a)throw a;e(e=>{const t=e.clients.map(e=>e.id===n?{...e,_synced:!0}:e);return de(t),{clients:t,syncStatus:"success",syncError:null}})}catch(a){t().addToSyncQueue("clients","update",n,r),e({syncStatus:"error",syncError:`Failed to sync update: ${a.message}`})}},deleteClient:async n=>{if(e(e=>{const t=e.clients.filter(e=>e.id!==n),r=e.savedQuotes.filter(e=>e.clientId!==n);return de(t),pe(r),{clients:t,savedQuotes:r}}),Q())try{const{error:t}=await $.from("clients").delete().eq("id",n);if(t)throw t;e({syncStatus:"success",syncError:null})}catch(r){t().addToSyncQueue("clients","delete",n,null),e({syncStatus:"error",syncError:`Failed to sync delete: ${r.message}`})}},getClient:e=>t().clients.find(t=>t.id===e),getClientHealth:(e,n=[],r=[])=>{if(!t().clients.find(t=>t.id===e))return{status:"at-risk",score:0,factors:{}};const a=n.filter(t=>t.clientId===e),s=r.filter(t=>t.clientId===e);let o=0,i=null;if(a.length>0){const e=a.reduce((e,t)=>{const n=new Date(t.activityDate||t.createdAt);return n>e?n:e},new Date(0));i=Math.floor((Date.now()-e)/864e5),o=i<=7?40:i<=14?35:i<=30?25:i<=60?15:i<=90?5:0}let l=0,c=0;const u=s.filter(e=>"won"===e.status).length,d=s.filter(e=>["won","dead","rejected","expired"].includes(e.status)).length;d>0?(c=Math.round(u/d*100),l=c>=60?30:c>=40?20:c>=20?10:5):s.length>0&&(l=15);let p=0;const f=Date.now()-7776e6,m=s.filter(e=>new Date(e.savedAt||e.createdAt).getTime()>f).length;p=m>=3?30:2===m?25:1===m?15:0;const h=o+l+p;let g;return g=h>=60?"good":h>=30?"warning":"at-risk",{status:g,score:h,factors:{daysSinceActivity:i,activityScore:o,winRate:c,winRateScore:l,recentQuotes:m,engagementScore:p}}},getOrCreateClient:async e=>{const{clients:n}=t(),r=n.find(t=>t.company.toLowerCase()===e.company?.toLowerCase());return r||await t().addClient(e)},addContact:async(e,n)=>{const r=t().clients.find(t=>t.id===e);if(!r)return;const a=r.contacts||[],s=0===a.length||n.isPrimary,o={id:he(),...n,isPrimary:s},i=s?a.map(e=>({...e,isPrimary:!1})):a;await t().updateClient(e,{contacts:[...i,o]})},updateContact:async(e,n,r)=>{const a=t().clients.find(t=>t.id===e);if(!a)return;let s=[...a.contacts||[]];r.isPrimary&&(s=s.map(e=>({...e,isPrimary:!1}))),s=s.map(e=>e.id===n?{...e,...r}:e),await t().updateClient(e,{contacts:s})},deleteContact:async(e,n)=>{const r=t().clients.find(t=>t.id===e);if(!r)return;const a=(r.contacts||[]).find(e=>e.id===n);let s=(r.contacts||[]).filter(e=>e.id!==n);a?.isPrimary&&s.length>0&&(s=s.map((e,t)=>({...e,isPrimary:0===t}))),await t().updateClient(e,{contacts:s})},saveQuote:async(n,r=null)=>{const{getOrCreateClient:a}=t();let s=r;if(!s&&n.client?.company){s=(await a(n.client)).id}const o={...n,id:n.id||he(),clientId:s,status:n.status||"draft",savedAt:(new Date).toISOString(),_synced:!1};if(e(e=>{const t=e.savedQuotes.findIndex(e=>e.quoteNumber===n.quoteNumber);let r;return t>=0?(r=[...e.savedQuotes],r[t]=o):r=[...e.savedQuotes,o],pe(r),{savedQuotes:r}}),Q())try{const t={quote_number:o.quoteNumber,quote_date:o.quoteDate,validity_days:o.validityDays,status:o.status,currency:o.currency,region:o.region,prepared_by:o.preparedBy,client:o.client,project:o.project,sections:o.sections,fees:o.fees,proposal:o.proposal},{data:n}=await $.from("quotes").select("id").eq("quote_number",o.quoteNumber).single();let r=o.id;if(n)await $.from("quotes").update(t).eq("id",n.id),r=n.id;else{const{data:e,error:n}=await $.from("quotes").insert(t).select().single();if(n)throw n;e&&(r=e.id)}e(e=>{const t=e.savedQuotes.map(e=>e.quoteNumber===o.quoteNumber?{...e,id:r,_synced:!0}:e);return pe(t),{savedQuotes:t,syncStatus:"success",syncError:null}}),o.id=r}catch(i){t().addToSyncQueue("quotes","insert",o.id,{quote_number:o.quoteNumber,quote_date:o.quoteDate,validity_days:o.validityDays,status:o.status,currency:o.currency,region:o.region,prepared_by:o.preparedBy,client:o.client,project:o.project,sections:o.sections,fees:o.fees,proposal:o.proposal}),e({syncStatus:"error",syncError:`Failed to sync quote: ${i.message}`})}return o},getClientQuotes:e=>t().savedQuotes.filter(t=>t.clientId===e),getQuote:e=>t().savedQuotes.find(t=>t.id===e),getQuoteByNumber:e=>t().savedQuotes.find(t=>t.quoteNumber===e),deleteQuote:async n=>{if(e(e=>{const t=e.savedQuotes.filter(e=>e.id!==n);return pe(t),{savedQuotes:t}}),Q())try{const{error:t}=await $.from("quotes").delete().eq("id",n);if(t)throw t;e({syncStatus:"success",syncError:null})}catch(r){t().addToSyncQueue("quotes","delete",n,null),e({syncStatus:"error",syncError:`Failed to sync delete: ${r.message}`})}},updateQuoteStatus:async(n,r,a="",s=null,o="")=>{if(e(e=>{const t=e.savedQuotes.map(e=>{if(e.id!==n)return e;const t=[...e.statusHistory||[],{status:r,timestamp:(new Date).toISOString(),userId:"default",note:a}];return{...e,status:r,statusHistory:t,lostReason:s||e.lostReason,lostReasonNotes:o||e.lostReasonNotes,updatedAt:(new Date).toISOString(),_synced:!1}});return pe(t),{savedQuotes:t}}),Q())try{const a=t().savedQuotes.find(e=>e.id===n),{error:s}=await $.from("quotes").update({status:r,project:{...a?.project||{},_statusHistory:a?.statusHistory,_lostReason:a?.lostReason,_lostReasonNotes:a?.lostReasonNotes}}).eq("id",n);if(s)throw s;e(e=>{const t=e.savedQuotes.map(e=>e.id===n?{...e,_synced:!0}:e);return pe(t),{savedQuotes:t,syncStatus:"success",syncError:null}})}catch(i){e({syncStatus:"error",syncError:`Failed to sync status: ${i.message}`})}},updateQuote:async(t,n)=>{if(e(e=>{const r=e.savedQuotes.map(e=>e.id===t?{...e,...n,updatedAt:(new Date).toISOString(),_synced:!1}:e);return pe(r),{savedQuotes:r}}),Q())try{const r={};if(n.status&&(r.status=n.status),n.client&&(r.client=n.client),n.project&&(r.project=n.project),n.sections&&(r.sections=n.sections),n.fees&&(r.fees=n.fees),Object.keys(r).length>0){const{error:n}=await $.from("quotes").update(r).eq("id",t);if(n)throw n;e(e=>{const n=e.savedQuotes.map(e=>e.id===t?{...e,_synced:!0}:e);return pe(n),{savedQuotes:n,syncStatus:"success",syncError:null}})}}catch(r){e({syncStatus:"error",syncError:`Failed to sync update: ${r.message}`})}},exportData:()=>{const{clients:e,savedQuotes:n}=t(),r={version:1,exportedAt:(new Date).toISOString(),clients:e,savedQuotes:n},a=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),s=URL.createObjectURL(a),o=document.createElement("a");o.href=s,o.download=`tell-productions-backup-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s)},importData:async n=>{try{const r=await n.text(),a=JSON.parse(r);if(!a.clients||!a.savedQuotes)throw new Error("Invalid backup file format");const s=a.clients.map(e=>({...e,_synced:!1})),o=a.savedQuotes.map(e=>({...e,_synced:!1}));return e({clients:s,savedQuotes:o}),de(s),pe(o),await t().syncAllToSupabase(),{success:!0,clientCount:s.length,quoteCount:o.length}}catch(r){return{success:!1,error:r.message}}},getClientStats:e=>{const n=t().savedQuotes.filter(t=>t.clientId===e);if(!n.length)return null;const r=n.filter(e=>"won"===e.status),a=n.filter(e=>"dead"===e.status||"rejected"===e.status),s=r.length+a.length;return{totalQuotes:n.length,wonCount:r.length,lostCount:a.length,winRate:s>0?Math.round(r.length/s*100):0}},getStats:()=>{const{clients:e,savedQuotes:n}=t();return{totalClients:e.length,totalQuotes:n.length,draftQuotes:n.filter(e=>"draft"===e.status).length,sentQuotes:n.filter(e=>"sent"===e.status).length,approvedQuotes:n.filter(e=>"approved"===e.status||"won"===e.status).length}},getFinancialStats:()=>{const{savedQuotes:e}=t();let n=0,r=0,a=0;return e.forEach(e=>{"won"===e.status?(n++,a++):"dead"!==e.status&&"rejected"!==e.status||(r++,a++)}),{winRate:a>0?Math.round(n/a*100):0,wonCount:n,lostCount:r}}})));function ye(){return[navigator.userAgent,navigator.language,screen.colorDepth,screen.width,screen.height,(new Date).getTimezoneOffset()].join("|")}async function be(e){const t=(new TextEncoder).encode(e);if(window.crypto&&window.crypto.subtle)try{const e=await window.crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(e))}catch(n){}return function(e){const t=[];for(let n=0;n<32;n++){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)+n,r&=r;t.push(Math.abs(r)%256)}return t}(e)}async function xe(e){if(!e)return"";try{const t=ye(),n=await be(t),r=(new TextEncoder).encode(e),a=new Uint8Array(r.length);for(let e=0;e<r.length;e++)a[e]=r[e]^n[e%n.length];return btoa(String.fromCharCode(...a))}catch(t){return e}}async function ve(e){if(!e)return"";try{const t=ye(),n=await be(t),r=new Uint8Array(atob(e).split("").map(e=>e.charCodeAt(0))),a=new Uint8Array(r.length);for(let e=0;e<r.length;e++)a[e]=r[e]^n[e%n.length];return(new TextDecoder).decode(a)}catch(t){return e}}async function we(e,t){const n={...e};for(const r of t)n[r]&&(n[r]=await xe(String(n[r])));return n}async function ke(e,t){const n={...e};for(const r of t)n[r]&&(n[r]=await ve(n[r]));return n}function Se(e,t=""){if(!e)return!1;const n=/^[a-zA-Z0-9_-]+$/.test(e);return!(t&&!e.startsWith(t))&&(n&&e.length>=20&&e.length<=200)}function je(e,t={}){(new Date).toISOString()}const Ce="tell_settings",Ne=["anthropicKey","openaiKey"],Ee=["accountNumber","swiftCode"],Le={company:{name:"Tell Productions Sdn Bhd",address:"",city:"",country:"Malaysia",phone:"",email:"",website:"",logo:null},taxInfo:{taxNumber:"",registrationNumber:"",licenses:""},bankDetails:{bankName:"",accountName:"",accountNumber:"",swiftCode:"",currency:"MYR"},quoteDefaults:{validityDays:30,paymentTerms:"50% deposit on confirmation, balance on completion",termsAndConditions:" This quote is valid for 30 days from the date of issue.\n 50% deposit required upon confirmation.\n Final payment due within 14 days of project completion.\n Any additional requirements may incur extra charges.\n Cancellation within 7 days of project start may incur fees."},users:[{id:"default",name:"Tom",email:"",role:"admin"}],pdfOptions:{showCompanyAddress:!0,showCompanyPhone:!0,showCompanyEmail:!0,showTaxNumber:!1,showBankDetails:!1,showLogo:!0,primaryColor:"#143642",accentColor:"#0F8B8D",lineColor:"#143642",textColor:"#374151",mutedColor:"#6B7280",backgroundColor:"#FFFFFF"},aiSettings:{anthropicKey:"",openaiKey:""},projectTypes:[{id:"broadcast",label:"Broadcast"},{id:"streaming",label:"Streaming"},{id:"graphics",label:"Graphics"},{id:"sports_presentation",label:"Sports Presentation"},{id:"technical_consultancy",label:"Technical Management & Consultancy"},{id:"other",label:"Other"}],regions:[{id:"MALAYSIA",label:"Malaysia",currency:"MYR"},{id:"SEA",label:"South East Asia",currency:"USD"},{id:"GULF",label:"Gulf States",currency:"USD"},{id:"CENTRAL_ASIA",label:"Central Asia",currency:"USD"}],opsPreferences:{expandedCountries:{},hiddenCountries:{},dashboardCurrency:"USD"},dashboardPreferences:{currency:"USD",collapsedColumns:{},pipelineMinimized:!1},quotesPreferences:{displayCurrency:"USD",sortBy:"updatedAt",sortDir:"desc"},clientsPreferences:{currency:"USD"},activityLog:[]};async function Te(){try{const e=localStorage.getItem(Ce);if(e){const t=De(JSON.parse(e));return t.aiSettings&&(t.aiSettings=await ke(t.aiSettings,Ne)),t.bankDetails&&(t.bankDetails=await ke(t.bankDetails,Ee)),t}return Le}catch(e){return Le}}function De(e){return{...Le,...e,company:{...Le.company,...e.company},taxInfo:{...Le.taxInfo,...e.taxInfo},bankDetails:{...Le.bankDetails,...e.bankDetails},quoteDefaults:{...Le.quoteDefaults,...e.quoteDefaults},pdfOptions:{...Le.pdfOptions,...e.pdfOptions},aiSettings:{...Le.aiSettings,...e.aiSettings},opsPreferences:{...Le.opsPreferences,...e.opsPreferences},dashboardPreferences:{...Le.dashboardPreferences,...e.dashboardPreferences},quotesPreferences:{...Le.quotesPreferences,...e.quotesPreferences},clientsPreferences:{...Le.clientsPreferences,...e.clientsPreferences},users:e.users||Le.users,projectTypes:e.projectTypes||Le.projectTypes,regions:e.regions||Le.regions,activityLog:e.activityLog||Le.activityLog}}async function _e(e){try{const t=JSON.parse(JSON.stringify(e));t.aiSettings&&(t.aiSettings=await we(t.aiSettings,Ne)),t.bankDetails&&(t.bankDetails=await we(t.bankDetails,Ee)),localStorage.setItem(Ce,JSON.stringify(t)),je(0,{encrypted:!0})}catch(t){}}let Ae=null;async function Pe(e,t){if(!Q())return{success:!0};try{const t=await we(e.aiSettings||{},Ne);if(Ae){const{error:n}=await $.from("settings").update({company:e.company,quote_defaults:e.quoteDefaults,terms_and_conditions:e.quoteDefaults?.termsAndConditions||"",users:e.users,ai_settings:t,ops_preferences:e.opsPreferences,dashboard_preferences:e.dashboardPreferences,quotes_preferences:e.quotesPreferences,clients_preferences:e.clientsPreferences}).eq("id",Ae);if(n)throw n;return je(0,{encrypted:!0}),{success:!0}}return{success:!0}}catch(n){return{success:!1,error:n.message}}}let Ie=Le;Te().then(e=>{Ie=e,ze.setState({settings:e,loading:!1})});const ze=u(T((e,t)=>({settings:Ie,loading:!0,syncStatus:"idle",syncError:null,clearSyncError:()=>{e({syncError:null,syncStatus:"idle"})},initialize:async()=>{if(!Q()){const t=await Te();return void e({settings:t,loading:!1,syncStatus:"idle"})}e({loading:!0,syncStatus:"syncing"});try{const{data:t,error:n}=await $.from("settings").select("*").limit(1).single();if(n)throw n;if(t){Ae=t.id;const n=t.ai_settings?await ke(t.ai_settings,Ne):Le.aiSettings,r=De({...await Te(),company:t.company||Le.company,quoteDefaults:{...Le.quoteDefaults,...t.quote_defaults,termsAndConditions:t.terms_and_conditions||Le.quoteDefaults.termsAndConditions},users:t.users||Le.users,aiSettings:n,opsPreferences:t.ops_preferences||Le.opsPreferences,dashboardPreferences:t.dashboard_preferences||Le.dashboardPreferences,quotesPreferences:t.quotes_preferences||Le.quotesPreferences,clientsPreferences:t.clients_preferences||Le.clientsPreferences});await _e(r),e({settings:r,loading:!1,syncStatus:"success",syncError:null})}else{const t=await Te();e({settings:t,loading:!1,syncStatus:"success",syncError:null})}}catch(t){const n=await Te();e({settings:n,loading:!1,syncStatus:"error",syncError:t.message})}},setCompanyInfo:async n=>{const r=t(),a={...r.settings,company:{...r.settings.company,...n}};await _e(a),Pe(a),e({settings:a})},setTaxInfo:async n=>{const r=t(),a={...r.settings,taxInfo:{...r.settings.taxInfo,...n}};await _e(a),e({settings:a})},setBankDetails:async n=>{const r=t(),a={...r.settings,bankDetails:{...r.settings.bankDetails,...n}};await _e(a),e({settings:a}),je(0,{encrypted:!0})},setQuoteDefaults:async n=>{const r=t(),a={...r.settings,quoteDefaults:{...r.settings.quoteDefaults,...n}};await _e(a),Pe(a),e({settings:a})},setPdfOptions:async n=>{const r=t(),a={...r.settings,pdfOptions:{...r.settings.pdfOptions,...n}};await _e(a),e({settings:a})},setOpsPreferences:async n=>{const r=t(),a={...r.settings,opsPreferences:{...r.settings.opsPreferences,...n}};await _e(a),Pe(a),e({settings:a})},setDashboardPreferences:async n=>{const r=t(),a={...r.settings,dashboardPreferences:{...r.settings.dashboardPreferences,...n}};await _e(a),Pe(a),e({settings:a})},setQuotesPreferences:async n=>{const r=t(),a={...r.settings,quotesPreferences:{...r.settings.quotesPreferences,...n}};await _e(a),Pe(a),e({settings:a})},setClientsPreferences:async n=>{const r=t(),a={...r.settings,clientsPreferences:{...r.settings.clientsPreferences,...n}};await _e(a),Pe(a),e({settings:a})},setAiSettings:async n=>{const r=t();n.anthropicKey&&Se(n.anthropicKey,"sk-ant-"),n.openaiKey&&Se(n.openaiKey,"sk-"),n.anthropicKey||n.openaiKey;const a={...r.settings,aiSettings:{...r.settings.aiSettings,...n}};await _e(a),Pe(a),e({settings:a}),je(0,{hasAnthropicKey:!!n.anthropicKey,hasOpenaiKey:!!n.openaiKey,encrypted:!0})},addUser:async n=>{const r=t(),a={id:`${Date.now()}-${Math.random().toString(36).substring(2,11)}`,name:n.name||"",email:n.email||"",role:n.role||"user"},s={...r.settings,users:[...r.settings.users,a]};await _e(s),Pe(s),e({settings:s})},updateUser:async(n,r)=>{const a=t(),s={...a.settings,users:a.settings.users.map(e=>e.id===n?{...e,...r}:e)};await _e(s),Pe(s),e({settings:s})},deleteUser:async n=>{const r=t(),a={...r.settings,users:r.settings.users.filter(e=>e.id!==n)};await _e(a),Pe(a),e({settings:a})},getUser:e=>t().settings.users.find(t=>t.id===e),addProjectType:async n=>{const r=t(),a=n.toLowerCase().replace(/\s+/g,"_")+"_"+Math.random().toString(36).substring(2,7),s={...r.settings,projectTypes:[...r.settings.projectTypes,{id:a,label:n}]};await _e(s),e({settings:s})},updateProjectType:async(n,r)=>{const a=t(),s={...a.settings,projectTypes:a.settings.projectTypes.map(e=>e.id===n?{...e,label:r}:e)};await _e(s),e({settings:s})},deleteProjectType:async n=>{const r=t(),a={...r.settings,projectTypes:r.settings.projectTypes.filter(e=>e.id!==n)};await _e(a),e({settings:a})},moveProjectType:async(n,r)=>{const a=t(),s=[...a.settings.projectTypes],o=s.findIndex(e=>e.id===n);if(-1===o)return;const i="up"===r?o-1:o+1;if(i<0||i>=s.length)return;[s[o],s[i]]=[s[i],s[o]];const l={...a.settings,projectTypes:s};await _e(l),e({settings:l})},addRegion:async(n,r="USD")=>{const a=t(),s=n.toUpperCase().replace(/\s+/g,"_"),o={...a.settings,regions:[...a.settings.regions,{id:s,label:n,currency:r}]};await _e(o),e({settings:o})},updateRegion:async(n,r)=>{const a=t(),s={...a.settings,regions:a.settings.regions.map(e=>e.id===n?{...e,...r}:e)};await _e(s),e({settings:s})},deleteRegion:async n=>{const r=t(),a={...r.settings,regions:r.settings.regions.filter(e=>e.id!==n)};await _e(a),e({settings:a})},moveRegion:async(n,r)=>{const a=t(),s=[...a.settings.regions],o=s.findIndex(e=>e.id===n);if(-1===o)return;const i="up"===r?o-1:o+1;if(i<0||i>=s.length)return;[s[o],s[i]]=[s[i],s[o]];const l={...a.settings,regions:s};await _e(l),e({settings:l})},exportSettings:async()=>{const{settings:e}=t(),n={...e,aiSettings:{anthropicKey:e.aiSettings.anthropicKey?"***REDACTED***":"",openaiKey:e.aiSettings.openaiKey?"***REDACTED***":""},bankDetails:{...e.bankDetails,accountNumber:e.bankDetails.accountNumber?"***REDACTED***":"",swiftCode:e.bankDetails.swiftCode?"***REDACTED***":""}},r=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),a=URL.createObjectURL(r),s=document.createElement("a");s.href=a,s.download=`settings-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a),je(0,{sanitized:!0})},addActivityLog:async n=>{const r=t(),a={id:`${Date.now()}-${Math.random().toString(36).substring(2,11)}`,timestamp:(new Date).toISOString(),...n},s={...r.settings,activityLog:[a,...r.settings.activityLog||[]].slice(0,1e3)};await _e(s),e({settings:s})},clearActivityLog:async()=>{const n={...t().settings,activityLog:[]};await _e(n),e({settings:n})},exportActivityLog:()=>{const{settings:e}=t(),n=e.activityLog||[];if(0===n.length)return void alert("No activity logs to export");const r=n.map(e=>[e.timestamp,e.userName||e.userId||"",e.quoteNumber||"",e.action||"",e.category||"",e.field||"",e.description||"","object"==typeof e.oldValue?JSON.stringify(e.oldValue):e.oldValue||"","object"==typeof e.newValue?JSON.stringify(e.newValue):e.newValue||""]),a=[["Timestamp","User","Quote #","Action","Category","Field","Description","Old Value","New Value"].join(","),...r.map(e=>e.map(e=>`"${String(e).replace(/"/g,'""')}"`).join(","))].join("\n"),s=new Blob([a],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(s),i=document.createElement("a");i.href=o,i.download=`activity-log-${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o)},resetSettings:async()=>{e({settings:Le}),await _e(Le)}}))),Oe="tell_auth_session",qe="tell_auth_attempts",Fe=864e5;function Me(){try{const e=localStorage.getItem(Oe);if(!e)return null;const t=JSON.parse(e);return t.expiresAt&&new Date(t.expiresAt)<new Date?(localStorage.removeItem(Oe),je(0,{email:t.email}),null):t}catch(e){return null}}function Re(e){try{e?(localStorage.setItem(Oe,JSON.stringify(e)),je(0,{email:e.email,expiresAt:e.expiresAt})):localStorage.removeItem(Oe)}catch(t){}}function Be(){try{const e=localStorage.getItem(qe);return e?JSON.parse(e):{attempts:0,lockedUntil:null}}catch{return{attempts:0,lockedUntil:null}}}function Ue(e){try{localStorage.setItem(qe,JSON.stringify(e))}catch(t){}}function $e(){const e=Be();return!!(e.lockedUntil&&new Date(e.lockedUntil)>new Date)||(e.lockedUntil&&new Date(e.lockedUntil)<=new Date?(Ue({attempts:0,lockedUntil:null}),!1):e.attempts>=5)}function Qe(e){const t=Be();if(e)Ue({attempts:0,lockedUntil:null}),je();else{const e=t.attempts+1,n={attempts:e,lockedUntil:null};e>=5?(n.lockedUntil=new Date(Date.now()+9e5).toISOString(),je(0,{attempts:e,lockedUntil:n.lockedUntil})):je(0,{attempts:e,remaining:5-e}),Ue(n)}}function Ve(){const e=Be();if(!e.lockedUntil)return 0;const t=new Date(e.lockedUntil)-new Date;return Math.max(0,Math.ceil(t/1e3))}async function We(e){if(!Q())return null;try{const{data:t,error:n}=await $.from("user_profiles").select("*").eq("auth_user_id",e).single();return n?null:{id:t.id,authUserId:t.auth_user_id,name:t.name,email:t.email,role:t.role,status:t.status||"active",tabPermissions:t.tab_permissions||[]}}catch(t){return null}}const He=u((e,t)=>({isAuthenticated:!!Me(),user:Me(),error:null,isLoading:!1,rateLimited:!1,lockoutTimeRemaining:0,initialize:async()=>{if(Q())try{const{data:{session:t}}=await $.auth.getSession();if(t){const n=await We(t.user.id),r={email:t.user.email,userId:t.user.id,expiresAt:new Date(Date.now()+Fe).toISOString(),provider:"supabase",profile:n};Re(r),e({isAuthenticated:!0,user:r,error:null}),je(0,{email:t.user.email})}$.auth.onAuthStateChange(async(t,n)=>{if("SIGNED_IN"===t&&n){const t=await We(n.user.id),r={email:n.user.email,userId:n.user.id,expiresAt:new Date(Date.now()+Fe).toISOString(),provider:"supabase",profile:t};Re(r),e({isAuthenticated:!0,user:r,error:null})}else"SIGNED_OUT"===t&&(Re(null),e({isAuthenticated:!1,user:null,error:null}))})}catch(t){}},signup:async(t,n,r)=>{e({isLoading:!0,error:null});try{const{data:a,error:s}=await $.auth.signUp({email:n,password:r,options:{data:{name:t}}});if(s)return e({error:s.message||"Signup failed",isLoading:!1}),!1;if(a.user){const{error:r}=await $.from("user_profiles").insert({auth_user_id:a.user.id,name:t,email:n,role:"user",status:"pending",tab_permissions:[]});return await $.auth.signOut(),e({isLoading:!1}),je(0,{email:n}),!0}return!1}catch(a){return e({error:"An error occurred during signup",isLoading:!1}),!1}},loginWithSupabase:async(t,n)=>{if($e()){const t=Ve();return e({error:`Too many failed attempts. Account locked for ${Math.ceil(t/60)} minutes.`,rateLimited:!0,lockoutTimeRemaining:t}),!1}e({isLoading:!0,error:null});try{const{data:r,error:a}=await $.auth.signInWithPassword({email:t,password:n});if(a)return Qe(!1),e({error:a.message||"Login failed",isLoading:!1}),!1;if(r.session){const t=await We(r.user.id);if(t){if("pending"===t.status)return await $.auth.signOut(),e({error:"Your account is pending approval. Please wait for an administrator to activate your account.",isLoading:!1}),!1;if("suspended"===t.status)return await $.auth.signOut(),e({error:"Your account has been suspended. Please contact an administrator.",isLoading:!1}),!1}Qe(!0);const n={email:r.user.email,userId:r.user.id,expiresAt:new Date(Date.now()+Fe).toISOString(),provider:"supabase",profile:t};return Re(n),e({isAuthenticated:!0,user:n,error:null,isLoading:!1}),!0}return!1}catch(r){return Qe(!1),e({error:"An error occurred during login",isLoading:!1}),!1}},loginWithPassword:async t=>{if($e()){const t=Ve();return e({error:`Too many failed attempts. Try again in ${Math.ceil(t/60)} minutes.`,rateLimited:!0,lockoutTimeRemaining:t}),!1}if(e({isLoading:!0,error:null}),await new Promise(e=>setTimeout(e,300)),""===t){Qe(!0);const t={email:"local@tellproductions.com",userId:"local-user",expiresAt:new Date(Date.now()+Fe).toISOString(),provider:"password"};return Re(t),e({isAuthenticated:!0,user:t,error:null,isLoading:!1}),je(),!0}return Qe(!1),e({error:"Incorrect password",isLoading:!1}),!1},login:async(e,n=null)=>Q()&&n?t().loginWithSupabase(e,n):t().loginWithPassword(e),logout:async()=>{if(Q())try{await $.auth.signOut()}catch(t){}Re(null),e({isAuthenticated:!1,user:null,error:null}),je()},validateSession:()=>{const t=Me();return t?!(t.expiresAt&&new Date(t.expiresAt)<new Date)||(Re(null),e({isAuthenticated:!1,user:null,error:"Session expired. Please login again."}),!1):(e({isAuthenticated:!1,user:null}),!1)},extendSession:()=>{const t=Me();if(!t)return;const n={...t,expiresAt:new Date(Date.now()+Fe).toISOString()};Re(n),e({user:n})},clearError:()=>{e({error:null})},getRemainingAttempts:()=>{const e=Be();return Math.max(0,5-e.attempts)},isSupabaseAuth:()=>Q(),hasPermission:e=>{const{user:n}=t();return n?.profile?"admin"===n.profile.role||(n.profile.tabPermissions?.includes(e)??!1):"password"===n?.provider},isAdmin:()=>{const{user:e}=t();return"admin"===e?.profile?.role||"password"===e?.provider},getCurrentUserProfile:()=>{const{user:e}=t();return e?.profile||null},refreshProfile:async()=>{const{user:n}=t();if(!n?.userId||"password"===n.provider)return;const r=await We(n.userId);if(r){const t={...n,profile:r};Re(t),e({user:t})}}}));if("undefined"!=typeof window){let e;He.getState().validateSession();const t=()=>{clearTimeout(e),e=setTimeout(()=>{He.getState().isAuthenticated&&He.getState().extendSession()},6e4)};window.addEventListener("mousemove",t),window.addEventListener("keydown",t)}let Ge=null,Ke=null;function Ye(e){if(O(e),!e.id)return;const{savedQuotes:t,updateQuote:n}=ge.getState();t.some(t=>t.id===e.id)&&n(e.id,e)}async function Je(e){if(!e||!e.quoteNumber)return{synced:!1};if(!Q())return{synced:!1,reason:"supabase not configured"};const t=JSON.stringify(e);if(t===Ke)return{synced:!1,reason:"no changes"};try{const n={quote_number:e.quoteNumber,quote_date:e.quoteDate,validity_days:e.validityDays,status:e.status||"draft",currency:e.currency,region:e.region,prepared_by:e.preparedBy,client:e.client,project:{...e.project,_sectionOrder:e.sectionOrder,_sectionNames:e.sectionNames},sections:e.sections,fees:e.fees,proposal:e.proposal};let r=e.id;if(e.id)await $.from("quotes").update(n).eq("id",e.id);else{const{data:t}=await $.from("quotes").select("id").eq("quote_number",e.quoteNumber).limit(1),a=t?.[0];if(a)await $.from("quotes").update(n).eq("id",a.id),r=a.id;else{const{data:e,error:t}=await $.from("quotes").insert(n).select().single();!t&&e&&(r=e.id)}}if(Ke=t,r&&!e.id){nt.getState().setQuoteId(r);const{saveQuote:t}=ge.getState();t({...e,id:r})}return{synced:!0,id:r}}catch(n){return{synced:!1,error:n.message}}}function Xe(){Ge&&(clearInterval(Ge),Ge=null,window.removeEventListener("beforeunload",Xe))}function Ze(e){const t=nt.getState().quote,{addActivityLog:n}=ze.getState(),{user:r}=He.getState(),a=r?.profile||{id:r?.userId||"unknown",name:r?.email?.split("@")[0]||"Unknown User"};n({userId:a.id,userName:a.name,quoteId:t.id,quoteNumber:t.quoteNumber,projectName:t.project?.title||"",...e})}function et(){const e={};return _.forEach(t=>{const n=D[t],r={};n.subsections.forEach(e=>{r[e]=[]}),e[t]={...n,subsections:r,customSubsections:[],isExpanded:!0}}),e}function tt(){return{quoteNumber:`TP-${(new Date).getFullYear()}-${Math.floor(9e3*Math.random())+1e3}`,currency:"USD",region:"SEA",quoteDate:(new Date).toISOString().split("T")[0],validityDays:30,status:"draft",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),client:{company:"",contactId:null,contact:"",role:"",email:"",phone:"",notes:""},project:{title:"",type:"broadcast",venue:"",startDate:"",endDate:"",description:""},fees:{managementFee:0,commissionFee:0,discount:0,distributeFees:!1},preparedBy:"default",sectionOrder:_,sectionNames:{},sections:et(),proposal:{coverImage:null,proposalText:"",isGenerated:!1},statusHistory:[],nextFollowUpDate:null,lostReason:null,lostReasonNotes:"",internalNotes:"",isLocked:!1,lockedAt:null,lockedBy:null}}const nt=u(T(e=>({quote:tt(),rates:P,ratesLoading:!1,ratesUpdated:null,activeSection:null,initialize:async()=>{const t=function(){try{const e=localStorage.getItem(z);return e?JSON.parse(e):null}catch(e){return null}}();t&&e({quote:t}),e({ratesLoading:!0});const{rates:n,timestamp:r}=await F();e({rates:n,ratesUpdated:r,ratesLoading:!1}),Ge||(Ge=setInterval(()=>{Je(nt.getState().quote)},3e4),window.addEventListener("beforeunload",Xe))},setQuoteId:t=>{e(e=>{const n={...e.quote,id:t};return O(n),{quote:n}})},syncToSupabase:async()=>Je(nt.getState().quote),resetQuote:()=>{const t=tt();e({quote:t}),O(t)},loadQuoteData:t=>{const n={...tt(),...t,updatedAt:(new Date).toISOString()};e({quote:n}),O(n)},setQuoteNumber:t=>{e(e=>{const n={...e.quote,quoteNumber:t,updatedAt:(new Date).toISOString()};return Ye(n),{quote:n}})},setCurrency:t=>{e(e=>{if(e.quote.isLocked)return e;const n=e.quote.currency;if(n===t)return e;const r=e.rates,a={...e.quote.sections};Object.keys(a).forEach(e=>{const s=a[e],o={...s.subsections};Object.keys(o).forEach(e=>{o[e]=o[e].map(e=>({...e,cost:Math.round(100*M(e.cost,n,t,r))/100,charge:Math.round(100*M(e.charge,n,t,r))/100}))}),a[e]={...s,subsections:o}});const s={...e.quote,currency:t,sections:a,updatedAt:(new Date).toISOString()};return Ye(s),{quote:s}})},setRegion:t=>{if(nt.getState().quote.isLocked)return;const n=I[t]?.defaultCurrency||"USD",r=se.getState().items;e(e=>{const a={...e.quote.sections};Object.keys(a).forEach(e=>{const n=a[e];Object.keys(n.subsections).forEach(e=>{n.subsections[e]=n.subsections[e].map(e=>{const n=r.find(t=>t.name===e.name);return n&&n.pricing&&n.pricing[t]?{...e,cost:n.pricing[t].cost||0,charge:n.pricing[t].charge||0}:e})})});const s={...e.quote,region:t,currency:n,sections:a,updatedAt:(new Date).toISOString()};return Ye(s),{quote:s}})},setQuoteDate:t=>{e(e=>{if(e.quote.isLocked)return e;const n={...e.quote,quoteDate:t,updatedAt:(new Date).toISOString()};return Ye(n),{quote:n}})},setValidityDays:t=>{e(e=>{if(e.quote.isLocked)return e;const n={...e.quote,validityDays:parseInt(t),updatedAt:(new Date).toISOString()};return Ye(n),{quote:n}})},setClientDetails:t=>{e(e=>{if(e.quote.isLocked)return e;const n=e.quote.client,r={...e.quote,client:{...e.quote.client,...t},updatedAt:(new Date).toISOString()};return Ye(r),Object.keys(t).forEach(e=>{n[e]!==t[e]&&Ze({action:"update",category:"client",field:`client.${e}`,oldValue:n[e],newValue:t[e],description:`Changed client ${e} from "${n[e]||"(empty)"}" to "${t[e]||"(empty)"}"`})}),{quote:r}})},setProjectDetails:t=>{e(e=>{if(e.quote.isLocked)return e;const n=e.quote.project,r={...e.quote,project:{...e.quote.project,...t},updatedAt:(new Date).toISOString()};return Ye(r),Object.keys(t).forEach(e=>{n[e]!==t[e]&&Ze({action:"update",category:"project",field:`project.${e}`,oldValue:n[e],newValue:t[e],description:`Changed project ${e} from "${n[e]||"(empty)"}" to "${t[e]||"(empty)"}"`})}),{quote:r}})},setFees:t=>{e(e=>{if(e.quote.isLocked)return e;const n=e.quote.fees,r={...e.quote,fees:{...e.quote.fees,...t},updatedAt:(new Date).toISOString()};return Ye(r),Object.keys(t).forEach(e=>{n[e]!==t[e]&&Ze({action:"update",category:"fees",field:`fees.${e}`,oldValue:n[e],newValue:t[e],description:`Changed ${e} from ${n[e]} to ${t[e]}`})}),{quote:r}})},setPreparedBy:t=>{e(e=>{if(e.quote.isLocked)return e;const n={...e.quote,preparedBy:t,updatedAt:(new Date).toISOString()};return Ye(n),{quote:n}})},toggleSection:t=>{e(e=>{const n={...e.quote.sections};n[t]={...n[t],isExpanded:!n[t].isExpanded};return{quote:{...e.quote,sections:n}}})},moveSection:(t,n)=>{e(e=>{if(e.quote.isLocked)return e;const r=[...e.quote.sectionOrder||_],a=r.indexOf(t);if(-1===a)return e;const s="up"===n?a-1:a+1;if(s<0||s>=r.length)return e;[r[a],r[s]]=[r[s],r[a]];const o={...e.quote,sectionOrder:r,updatedAt:(new Date).toISOString()};return Ye(o),{quote:o}})},updateSectionName:(t,n)=>{e(e=>{if(e.quote.isLocked)return e;const r={...e.quote.sectionNames};n.trim()?r[t]=n.trim():delete r[t];const a={...e.quote,sectionNames:r,updatedAt:(new Date).toISOString()};return Ye(a),{quote:a}})},addLineItem:(t,n,r)=>{e(e=>{if(e.quote.isLocked)return e;const a={...e.quote.sections},s={...a[t]},o={...s.subsections},i={id:`${Date.now()}-${Math.random().toString(36).substring(2,11)}`,name:r.name||"",quantity:r.quantity||1,days:r.days||1,cost:r.cost||0,charge:r.charge||0,...r};o[n]=[...o[n]||[],i],s.subsections=o,a[t]=s;const l={...e.quote,sections:a,updatedAt:(new Date).toISOString()};return Ye(l),Ze({action:"create",category:"lineItem",field:`${t}.${n}`,newValue:i,description:`Added line item "${i.name||"Unnamed"}" to ${n}`}),{quote:l}})},updateLineItem:(t,n,r,a)=>{e(e=>{if(e.quote.isLocked)return e;const s={...e.quote.sections},o={...s[t]},i={...o.subsections},l=i[n].find(e=>e.id===r);i[n]=i[n].map(e=>e.id===r?{...e,...a}:e),o.subsections=i,s[t]=o;const c={...e.quote,sections:s,updatedAt:(new Date).toISOString()};return Ye(c),l&&Object.keys(a).forEach(e=>{l[e]!==a[e]&&Ze({action:"update",category:"lineItem",field:`lineItem.${e}`,oldValue:l[e],newValue:a[e],description:`Updated "${l.name||"Unnamed"}" ${e}: ${l[e]}  ${a[e]}`})}),{quote:c}})},deleteLineItem:(t,n,r)=>{e(e=>{if(e.quote.isLocked)return e;const a={...e.quote.sections},s={...a[t]},o={...s.subsections},i=o[n].find(e=>e.id===r);o[n]=o[n].filter(e=>e.id!==r),s.subsections=o,a[t]=s;const l={...e.quote,sections:a,updatedAt:(new Date).toISOString()};return Ye(l),i&&Ze({action:"delete",category:"lineItem",field:`${t}.${n}`,oldValue:i,description:`Deleted line item "${i.name||"Unnamed"}" from ${n}`}),{quote:l}})},moveLineItem:(t,n,r,a,s)=>{e(e=>{if(e.quote.isLocked)return e;const o={...e.quote.sections},i=e=>({...o[e].subsections}),l=i(t),c=t===a?l:i(a),u=l[n].find(e=>e.id===r);if(!u)return{quote:e.quote};l[n]=l[n].filter(e=>e.id!==r),c[s]=[...c[s]||[],u],o[t]={...o[t],subsections:l},t!==a&&(o[a]={...o[a],subsections:c});const d={...e.quote,sections:o,updatedAt:(new Date).toISOString()};return Ye(d),{quote:d}})},addCustomSubsection:(t,n)=>{e(e=>{if(e.quote.isLocked)return e;const r={...e.quote.sections},a={...r[t]};a.customSubsections.includes(n)||(a.customSubsections=[...a.customSubsections,n],a.subsections={...a.subsections,[n]:[]}),r[t]=a;const s={...e.quote,sections:r,updatedAt:(new Date).toISOString()};return Ye(s),{quote:s}})},reorderSubsections:(t,n)=>{e(e=>{if(e.quote.isLocked)return e;const r={...e.quote.sections},a={...r[t]};a.subsectionOrder=n,r[t]=a;const s={...e.quote,sections:r,updatedAt:(new Date).toISOString()};return Ye(s),{quote:s}})},updateSubsectionName:(t,n,r)=>{e(e=>{if(e.quote.isLocked)return e;const a={...e.quote.sections},s={...a[t]},o={...s.subsectionNames||{}};r.trim()&&r.trim()!==n?o[n]=r.trim():delete o[n],s.subsectionNames=o,a[t]=s;const i={...e.quote,sections:a,updatedAt:(new Date).toISOString()};return Ye(i),{quote:i}})},refreshRates:async()=>{e({ratesLoading:!0}),localStorage.removeItem("exchange_rates_cache");const{rates:t,timestamp:n}=await F();e({rates:t,ratesUpdated:n,ratesLoading:!1})},setProposal:t=>{e(e=>{if(e.quote.isLocked)return e;const n={...e.quote,proposal:{...e.quote.proposal,...t},updatedAt:(new Date).toISOString()};return Ye(n),{quote:n}})},updateQuoteStatus:(t,n="",r="default")=>{e(e=>{const a=e.quote.status,s=[...e.quote.statusHistory||[],{status:t,timestamp:(new Date).toISOString(),userId:r,note:n}],o={...e.quote,status:t,statusHistory:s,updatedAt:(new Date).toISOString()};return Ye(o),Ze({action:"status_change",category:"status",field:"status",oldValue:a,newValue:t,description:`Changed status from "${a}" to "${t}"${n?` (${n})`:""}`}),{quote:o}})},setNextFollowUpDate:t=>{e(e=>{const n={...e.quote,nextFollowUpDate:t,updatedAt:(new Date).toISOString()};return Ye(n),{quote:n}})},setLostReason:(t,n="")=>{e(e=>{const r={...e.quote,lostReason:t,lostReasonNotes:n,updatedAt:(new Date).toISOString()};return Ye(r),{quote:r}})},setInternalNotes:t=>{e(e=>{const n={...e.quote,internalNotes:t,updatedAt:(new Date).toISOString()};return Ye(n),{quote:n}})},lockQuote:(t="default")=>{e(e=>{const n={...e.quote,isLocked:!0,lockedAt:(new Date).toISOString(),lockedBy:t,updatedAt:(new Date).toISOString()};return Ye(n),Ze({action:"lock",category:"lock",field:"isLocked",oldValue:!1,newValue:!0,description:"Locked quote for editing"}),{quote:n}})},unlockQuote:(t="default")=>{e(e=>{const t={...e.quote,isLocked:!1,lockedAt:null,lockedBy:null,updatedAt:(new Date).toISOString()};return Ye(t),Ze({action:"unlock",category:"lock",field:"isLocked",oldValue:!0,newValue:!1,description:"Unlocked quote for editing"}),{quote:t}})}})));function rt({activeTab:e,onTabChange:t}){const r=He(e=>e.hasPermission),a=[{id:"dashboard",label:"Dashboard",icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},{id:"quotes",label:"Quotes",icon:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},{id:"clients",label:"Clients",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"},{id:"opportunities",label:"Ops",icon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"tasks",label:"Tasks",icon:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"},{id:"rate-card",label:"Rates",icon:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"},{id:"settings",label:"Settings",icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z"}],s=d.useMemo(()=>a.filter(e=>r(e.id)),[r]);return n.jsxs("nav",{className:"flex justify-center w-full","aria-label":"Main navigation",children:[n.jsx("div",{className:"hidden md:inline-flex bg-gray-900/80 p-1 rounded-xl border border-gray-800/80 gap-1",children:s.map(r=>n.jsx("button",{onClick:()=>t(r.id),className:"px-5 py-2 min-h-[44px] rounded-lg text-sm font-medium transition-all duration-200 "+(e===r.id?"bg-accent-primary/20 text-accent-primary border border-accent-primary/30":"text-gray-400 hover:text-gray-200 hover:bg-white/5 border border-transparent"),"aria-current":e===r.id?"page":void 0,children:r.label},r.id))}),n.jsx("div",{className:"md:hidden inline-flex bg-gray-900/80 p-1 rounded-xl border border-gray-800/80 gap-0.5",children:s.map(r=>n.jsxs("button",{onClick:()=>t(r.id),className:"px-2 py-1.5 min-w-[52px] min-h-[52px] rounded-lg transition-all duration-200 flex flex-col items-center justify-center gap-0.5 "+(e===r.id?"bg-accent-primary/20 text-accent-primary border border-accent-primary/30":"text-gray-400 hover:text-gray-200 hover:bg-white/5 border border-transparent"),"aria-current":e===r.id?"page":void 0,"aria-label":r.label,children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:r.icon})}),n.jsx("span",{className:"text-[9px] font-medium leading-none",children:r.label})]},r.id))})]})}const at=d.createContext(null);function st(){const e=d.useContext(at);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}function ot({children:e}){const[t,r]=d.useState([]),a=d.useCallback((e,t="info",n=4e3)=>{const a=Date.now()+Math.random();return r(n=>[...n,{id:a,message:e,type:t}]),n>0&&setTimeout(()=>{r(e=>e.filter(e=>e.id!==a))},n),a},[]),s=d.useCallback(e=>{r(t=>t.filter(t=>t.id!==e))},[]),o={info:(e,t)=>a(e,"info",t),success:(e,t)=>a(e,"success",t),error:(e,t)=>a(e,"error",t),warning:(e,t)=>a(e,"warning",t)};return n.jsxs(at.Provider,{value:o,children:[e,n.jsx(it,{toasts:t,onRemove:s})]})}function it({toasts:e,onRemove:t}){return 0===e.length?null:n.jsx("div",{className:"fixed bottom-4 right-4 left-4 sm:left-auto z-[100] flex flex-col gap-2 max-w-sm sm:max-w-md mx-auto sm:mx-0",role:"region","aria-label":"Notifications","aria-live":"polite",children:e.map(e=>n.jsx(lt,{toast:e,onRemove:t},e.id))})}function lt({toast:e,onRemove:t}){const[r,a]=d.useState(!1),s=()=>{a(!0),setTimeout(()=>t(e.id),200)};return n.jsxs("div",{role:"alert","aria-atomic":"true",className:`\n                ${{info:"bg-blue-500/90 border-blue-400",success:"bg-green-500/90 border-green-400",error:"bg-red-500/90 border-red-400",warning:"bg-yellow-500/90 border-yellow-400"}[e.type]}\n                border rounded-lg px-4 py-3 text-white shadow-lg\n                flex items-start gap-3 w-full\n                transition-all duration-200 ease-out\n                ${r?"opacity-0 translate-x-4 sm:translate-x-4":"opacity-100 translate-x-0"}\n                animate-slide-in-right\n            `,children:[n.jsx("svg",{className:"w-5 h-5 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:{info:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",success:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",error:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z",warning:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"}[e.type]})}),n.jsx("span",{className:"flex-1 text-sm leading-relaxed",children:e.message}),n.jsx("button",{onClick:s,onKeyDown:e=>{"Escape"!==e.key&&"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),s())},className:"text-white/70 hover:text-white transition-colors min-w-[32px] min-h-[32px] flex items-center justify-center -mr-1","aria-label":"Dismiss notification",title:"Dismiss (Esc)",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}const ct="tell_quote_templates",ut="tell_quote_templates_sync_queue";function dt(){try{const e=localStorage.getItem(ut);return e?JSON.parse(e):[]}catch(e){return[]}}function pt(e){try{localStorage.setItem(ut,JSON.stringify(e))}catch(t){}}function ft(){try{const e=localStorage.getItem(ct);return e?JSON.parse(e):[]}catch(e){return[]}}function mt(e){try{localStorage.setItem(ct,JSON.stringify(e))}catch(t){}}const ht=u(T((e,t)=>({templates:ft(),loading:!1,syncStatus:"idle",syncError:null,pendingSyncCount:dt().length,clearSyncError:()=>{e({syncError:null,syncStatus:"idle"})},getUnsyncedCount:()=>{const e=dt(),n=t().templates.filter(e=>!1===e._synced);return e.length+n.length},addToSyncQueue:(t,n,r)=>{const a=dt();a.push({action:t,id:n,data:r,timestamp:Date.now()}),pt(a),e({pendingSyncCount:a.length})},processSyncQueue:async()=>{if(!Q())return;const t=dt();if(0===t.length)return;e({syncStatus:"syncing"});const n=[];for(const e of t)try{if("create"===e.action){const{error:t}=await $.from("quote_templates").insert(e.data);if(t)throw t}else if("update"===e.action){const{error:t}=await $.from("quote_templates").update(e.data).eq("id",e.id);if(t)throw t}else if("delete"===e.action){const{error:t}=await $.from("quote_templates").delete().eq("id",e.id);if(t)throw t}}catch(r){n.push(e)}pt(n),e({syncStatus:n.length>0?"error":"success",syncError:n.length>0?`${n.length} items failed to sync`:null,pendingSyncCount:n.length})},syncAllToSupabase:async()=>{const{processSyncQueue:e}=t();await e()},initialize:async()=>{if(Q()){e({loading:!0,syncStatus:"syncing"});try{const{data:n,error:r}=await $.from("quote_templates").select("*").order("created_at",{ascending:!1});if(r)throw r;const a=(n||[]).map(e=>({id:e.id,name:e.name,description:e.description,category:e.category,sections:e.sections,currency:e.currency,region:e.region,fees:e.fees,projectDefaults:e.project_defaults,createdAt:e.created_at,updatedAt:e.updated_at,usageCount:e.usage_count||0,_synced:!0}));e({templates:a,loading:!1,syncStatus:"success",syncError:null}),mt(a);dt().length>0&&t().processSyncQueue()}catch(n){e({loading:!1,syncStatus:"error",syncError:n.message})}}else e({loading:!1,syncStatus:"idle"})},getTemplate:e=>t().templates.find(t=>t.id===e),getTemplatesByCategory:e=>t().templates.filter(t=>t.category===e),createTemplate:async n=>{const{templates:r,addToSyncQueue:a}=t(),s={id:`tmpl_${Date.now()}_${Math.random().toString(36).substring(2,11)}`,name:n.name,description:n.description||"",category:n.category||"general",sections:n.sections,currency:n.currency||"USD",region:n.region||"SEA",fees:n.fees||{managementFee:0,commissionFee:0,discountPercent:0},projectDefaults:n.projectDefaults||{},createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),usageCount:0,_synced:!1},o=[s,...r];if(e({templates:o}),mt(o),Q()){const n={id:s.id,name:s.name,description:s.description,category:s.category,sections:s.sections,currency:s.currency,region:s.region,fees:s.fees,project_defaults:s.projectDefaults,usage_count:0};try{const{error:r}=await $.from("quote_templates").insert(n);if(r)throw r;const a=t().templates.map(e=>e.id===s.id?{...e,_synced:!0}:e);e({templates:a,syncStatus:"success",syncError:null}),mt(a)}catch(i){a("create",s.id,n),e({syncStatus:"error",syncError:i.message})}}return s},updateTemplate:async(n,r)=>{const{templates:a,addToSyncQueue:s}=t(),o=a.map(e=>e.id===n?{...e,...r,updatedAt:(new Date).toISOString(),_synced:!1}:e);if(e({templates:o}),mt(o),Q()){const a={name:r.name,description:r.description,category:r.category,sections:r.sections,currency:r.currency,region:r.region,fees:r.fees,project_defaults:r.projectDefaults,updated_at:(new Date).toISOString()};Object.keys(a).forEach(e=>{void 0===a[e]&&delete a[e]});try{const{error:r}=await $.from("quote_templates").update(a).eq("id",n);if(r)throw r;const s=t().templates.map(e=>e.id===n?{...e,_synced:!0}:e);e({templates:s,syncStatus:"success",syncError:null}),mt(s)}catch(i){s("update",n,a),e({syncStatus:"error",syncError:i.message})}}},deleteTemplate:async n=>{const{templates:r,addToSyncQueue:a}=t(),s=r.filter(e=>e.id!==n);if(e({templates:s}),mt(s),Q())try{const{error:t}=await $.from("quote_templates").delete().eq("id",n);if(t)throw t;e({syncStatus:"success",syncError:null})}catch(o){a("delete",n,null),e({syncStatus:"error",syncError:o.message})}},incrementUsageCount:async n=>{const{templates:r}=t(),a=r.find(e=>e.id===n);if(!a)return;const s=(a.usageCount||0)+1,o=r.map(e=>e.id===n?{...e,usageCount:s}:e);if(e({templates:o}),mt(o),Q())try{await $.from("quote_templates").update({usage_count:s}).eq("id",n)}catch(i){}}})));ht.subscribe(e=>e.templates,e=>mt(e));const gt=[{id:"broadcast",label:"Broadcast"},{id:"streaming",label:"Streaming"},{id:"corporate",label:"Corporate Event"},{id:"sports",label:"Sports"},{id:"concert",label:"Concert/Live"},{id:"general",label:"General"}];function yt({isOpen:e,onClose:t}){const r=nt(e=>e.quote),a=ht(e=>e.createTemplate),[s,o]=d.useState(""),[i,l]=d.useState(""),[c,u]=d.useState("general"),[p,f]=d.useState(!1),[m,h]=d.useState(!1),[g,y]=d.useState(!0);if(!e)return null;const b=Object.values(r.sections||{}).reduce((e,t)=>e+Object.values(t.subsections||{}).reduce((e,t)=>e+(t.items?.length||0),0),0);return n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>t(!1)}),n.jsxs("div",{className:"relative bg-dark-card border border-dark-border rounded-xl shadow-2xl w-full max-w-md",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-border",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-brand-teal to-brand-navy flex items-center justify-center",children:n.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"})})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-white",children:"Save as Template"}),n.jsxs("p",{className:"text-xs text-gray-400",children:[b," items will be saved"]})]})]}),n.jsx("button",{onClick:()=>t(!1),className:"p-2 hover:bg-white/5 rounded-lg transition-colors",children:n.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:"Template Name *"}),n.jsx("input",{type:"text",value:s,onChange:e=>o(e.target.value),placeholder:"e.g., Sports Broadcast Package",className:"input",autoFocus:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:"Category"}),n.jsx("select",{value:c,onChange:e=>u(e.target.value),className:"input",children:gt.map(e=>n.jsx("option",{value:e.id,children:e.label},e.id))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:"Description"}),n.jsx("textarea",{value:i,onChange:e=>l(e.target.value),placeholder:"Brief description of when to use this template...",className:"input min-h-[80px] resize-none",rows:3})]}),n.jsxs("div",{className:"space-y-2 pt-2 border-t border-dark-border",children:[n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[n.jsx("input",{type:"checkbox",checked:g,onChange:e=>y(e.target.checked),className:"w-4 h-4 rounded border-gray-600 bg-dark-bg text-brand-teal focus:ring-brand-teal"}),n.jsx("span",{className:"text-sm text-gray-300 group-hover:text-white transition-colors",children:"Include fee percentages"})]}),n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[n.jsx("input",{type:"checkbox",checked:m,onChange:e=>h(e.target.checked),className:"w-4 h-4 rounded border-gray-600 bg-dark-bg text-brand-teal focus:ring-brand-teal"}),n.jsx("span",{className:"text-sm text-gray-300 group-hover:text-white transition-colors",children:"Include project type & description"})]})]}),n.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-3",children:n.jsx("p",{className:"text-xs text-blue-300",children:"Templates save your line items, sections, currency, and region. Client details and dates are not included."})})]}),n.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 border-t border-dark-border",children:[n.jsx("button",{onClick:()=>t(!1),className:"btn btn-ghost",children:"Cancel"}),n.jsx("button",{onClick:async()=>{if(s.trim()){f(!0);try{const e={name:s.trim(),description:i.trim(),category:c,sections:r.sections,currency:r.currency,region:r.region,fees:g?{managementFee:r.managementFee||0,commissionFee:r.commissionFee||0,discountPercent:r.discountPercent||0}:{managementFee:0,commissionFee:0,discountPercent:0},projectDefaults:m?{projectType:r.project?.projectType,description:r.project?.description}:{}};await a(e),t(!0)}catch(e){}finally{f(!1)}}},disabled:!s.trim()||p,className:"btn btn-primary",children:p?n.jsxs(n.Fragment,{children:[n.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save Template"]})})]})]})]})}function bt(){return n.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 focus:z-[100] focus:px-4 focus:py-2 focus:bg-brand-teal focus:text-white focus:rounded-lg focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-dark-bg transition-all",children:"Skip to main content"})}function xt({view:e="editor",onGoToClients:t,onGoToRateCard:r,onGoToSettings:a,onGoToDashboard:s,onGoToQuotes:o,onGoToFS:i,onGoToOpportunities:l,onGoToTasks:c}){const{quote:u,ratesLoading:p,refreshRates:f}=nt(),{saveQuote:m}=ge(),{logout:h,user:g}=He(),y=st(),b=g?.profile?.name||g?.email?.split("@")[0]||"User",x="admin"===g?.profile?.role?"Administrator":"User",v=b.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)||"U",[w,k]=d.useState(!1),[S,j]=d.useState(!1),[C,N]=d.useState(!1),[E,L]=d.useState(!1);if("clients"===e||"client-detail"===e||"dashboard"===e||"quotes"===e||"rate-card"===e||"settings"===e||"opportunities"===e||"opportunity-detail"===e||"tasks"===e){const u="opportunity-detail"===e?"opportunities":"client-detail"===e?"clients":e;return n.jsxs(n.Fragment,{children:[n.jsx(bt,{}),n.jsxs("header",{className:"min-h-[60px] bg-dark-bg/95 backdrop-blur-md border-b border-dark-border flex items-center justify-between px-3 sm:px-6 z-20 sticky top-0",children:[n.jsx("div",{className:"hidden sm:flex items-center gap-4",children:n.jsx("button",{onClick:s,className:"flex items-center hover:opacity-80 transition-all duration-200 min-h-[44px]",title:"Go to Dashboard",children:n.jsx("img",{src:"/tell-logo.svg",alt:"Tell",className:"h-7"})})}),n.jsx("div",{className:"flex-1 flex justify-center sm:absolute sm:left-1/2 sm:transform sm:-translate-x-1/2",children:n.jsx(rt,{activeTab:u,onTabChange:e=>{"dashboard"===e&&s(),"quotes"===e&&o(),"clients"===e&&t(),"opportunities"===e&&l(),"tasks"===e&&c(),"rate-card"===e&&r(),"settings"===e&&a()}})}),n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 relative",children:[n.jsxs("button",{onClick:i,className:"min-w-[44px] min-h-[44px] px-2 sm:px-3 py-1.5 rounded-lg bg-gradient-to-r from-teal-600/20 to-cyan-600/20 border border-teal-500/30 text-teal-400 text-xs font-bold hover:from-teal-600/30 hover:to-cyan-600/30 hover:border-teal-500/50 transition-all flex items-center justify-center gap-1.5",title:"Full Screen Analytics",children:[n.jsx("svg",{className:"w-4 h-4 sm:w-3.5 sm:h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),n.jsx("span",{className:"hidden sm:inline",children:"FS"})]}),n.jsx("button",{onClick:()=>N(!C),className:"min-w-[44px] min-h-[44px] w-10 h-10 sm:w-8 sm:h-8 rounded-full bg-gray-800 border border-gray-700 flex items-center justify-center text-xs text-gray-400 hover:border-gray-600 hover:text-gray-300 transition-colors",title:b,children:v}),C&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>N(!1)}),n.jsxs("div",{className:"absolute right-0 top-full mt-2 w-52 bg-[#1a1f2e] border border-dark-border rounded-lg shadow-2xl z-50 dropdown-menu overflow-hidden",children:[n.jsxs("div",{className:"px-4 py-3 border-b border-dark-border",children:[n.jsx("p",{className:"text-sm font-medium text-gray-200 truncate",children:b}),n.jsx("p",{className:"text-xs text-gray-500",children:x})]}),n.jsxs("button",{onClick:()=>{N(!1),h()},className:"w-full px-4 py-2.5 text-left text-sm text-gray-400 hover:bg-red-500/10 hover:text-red-400 transition-colors flex items-center gap-2",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})]})]})]})]})]})}return n.jsxs(n.Fragment,{children:[n.jsx(bt,{}),n.jsx("header",{className:"sticky top-0 z-50 bg-dark-bg/95 backdrop-blur-md border-b border-dark-border",children:n.jsx("div",{className:"max-w-[1920px] mx-auto px-2 sm:px-4 py-2 sm:py-3",children:n.jsxs("div",{className:"flex items-center justify-between gap-2 sm:gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[n.jsx("button",{onClick:s,className:"min-w-[44px] min-h-[44px] p-2 rounded-lg hover:bg-white/5 transition-colors flex items-center justify-center",title:"Back to Dashboard",children:n.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx("img",{src:"/tell-logo.svg",alt:"Tell",className:"h-5 sm:h-6 hidden xs:block"}),n.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[n.jsx("span",{className:"text-[10px] sm:text-xs font-mono text-accent-primary",children:u.quoteNumber}),n.jsx("span",{className:"text-[10px] text-gray-500 border border-gray-800 rounded px-1 hidden sm:inline",children:"default"===u.preparedBy?"Admin":"User"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[n.jsx("div",{className:"px-2 sm:px-3 py-1 min-h-[32px] rounded-full text-[10px] sm:text-xs font-bold uppercase tracking-wider border flex items-center "+("won"===u.status?"bg-green-500/20 text-green-400 border-green-500/30":"sent"===u.status?"bg-blue-500/20 text-blue-400 border-blue-500/30":"dead"===u.status?"bg-red-500/20 text-red-500 border-red-500/30":"bg-gray-700/50 text-gray-400 border-gray-600"),children:u.status||"Draft"}),n.jsx("button",{onClick:f,disabled:p,className:"btn-ghost min-w-[44px] min-h-[44px] p-2 hidden sm:flex items-center justify-center",title:"Refresh exchange rates",children:n.jsx("svg",{className:"w-4 h-4 "+(p?"animate-spin":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),n.jsxs("button",{onClick:()=>L(!0),className:"btn-ghost min-w-[44px] min-h-[44px] text-sm flex items-center justify-center gap-1",title:"Save as template",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"})}),n.jsx("span",{className:"hidden sm:inline",children:"Template"})]}),n.jsxs("button",{onClick:()=>{k(!0);try{const e=m(u);e?.id&&!u.id&&nt.getState().loadQuoteData({...u,id:e.id}),j(!0),setTimeout(()=>j(!1),2e3)}catch{y.error("Failed to save quote.")}finally{k(!1)}},disabled:w,className:"btn-ghost min-w-[44px] min-h-[44px] text-sm flex items-center justify-center gap-1 "+(S?"text-green-400":""),title:"Save quote to library",children:[S?n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),n.jsx("span",{className:"hidden sm:inline",children:S?"Saved!":"Save"})]})]})]})})}),n.jsx(yt,{isOpen:E,onClose:e=>{L(!1),e&&y.success("Template saved successfully!")}})]})}function vt(){const{quote:e,setClientDetails:t}=nt(),{clients:r,updateContact:a}=ge(),{client:s}=e,[o,i]=d.useState(!1),[l,c]=d.useState(""),u=s.company?r.filter(e=>e?.company?.toLowerCase()?.includes(s.company.toLowerCase())):r;d.useEffect(()=>{const e=e=>{"Escape"===e.key&&o&&i(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[o]);const p=(e,n)=>{t({[e]:n})},f=r.find(e=>e?.company?.toLowerCase()===s?.company?.toLowerCase()),m=(e,t)=>{p(e,t),f&&s.contactId&&a(f.id,s.contactId,{[e]:t})};return n.jsxs("div",{className:"card",children:[n.jsxs("h3",{className:"text-sm font-semibold text-gray-300 mb-3 flex items-center gap-2",children:[n.jsx("svg",{className:"w-4 h-4 text-accent-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Client Details"]}),n.jsxs("div",{className:"space-y-5",children:[n.jsxs("div",{className:"relative",children:[n.jsx("label",{className:"label",children:"Company Name"}),n.jsx("input",{type:"text",value:s.company,onChange:e=>p("company",e.target.value),onFocus:()=>!e.isLocked&&i(!0),placeholder:"Type to search or add new client...",className:"input",disabled:e.isLocked}),o&&u.length>0&&n.jsx("div",{className:"absolute z-50 top-full left-0 right-0 mt-1 bg-dark-card border border-dark-border rounded-lg shadow-xl max-h-64 overflow-y-auto dropdown-menu",children:u.map((e,r)=>n.jsxs("button",{onClick:()=>{return t({company:(n=e).company,contact:n.contact,email:n.email,phone:n.phone}),void i(!1);var n},className:"w-full px-3 py-2.5 text-left hover:bg-accent-primary/10 transition-colors flex items-center gap-3 "+(r!==u.length-1?"border-b border-dark-border/50":""),children:[n.jsx("div",{className:"w-8 h-8 rounded-md bg-gray-800 flex items-center justify-center text-xs font-bold text-gray-400 shrink-0",children:e.company.substring(0,2).toUpperCase()}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm text-gray-200 font-medium truncate",children:e.company}),e.contact&&n.jsx("p",{className:"text-xs text-gray-500 truncate",children:e.contact})]})]},e.id))}),o&&n.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>i(!1)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Contact Person"}),f&&f.contacts?.length>0?n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:s.contactId||"",onChange:e=>(e=>{if(!f)return;const n=f.contacts?.find(t=>t.id===e);n&&t({contactId:n.id,contact:n.name,role:n.role||"",email:n.email,phone:n.phone,notes:n.notes||""})})(e.target.value),className:"input flex-1",disabled:e.isLocked,children:[n.jsx("option",{value:"",children:"Select Contact..."}),f.contacts.map(e=>n.jsxs("option",{value:e.id,children:[e.name," ",e.isPrimary?"(Primary)":""," - ",e.role||"No Role"]},e.id))]}),n.jsx("input",{type:"text",value:s.contact,onChange:e=>p("contact",e.target.value),placeholder:"Or type name...",className:"input w-1/3",disabled:e.isLocked})]}):n.jsx("input",{type:"text",value:s.contact,onChange:e=>p("contact",e.target.value),placeholder:"e.g. Ahmad Rahman",className:"input",disabled:e.isLocked})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"label",children:["Role on Project ",n.jsx("span",{className:"text-gray-600 font-normal",children:"(for this quote)"})]}),n.jsx("input",{type:"text",value:s.role||"",onChange:e=>p("role",e.target.value),placeholder:"e.g. Executive Producer, Client Liaison",className:"input",disabled:e.isLocked})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Email"}),n.jsx("input",{type:"email",value:s.email,onChange:e=>m("email",e.target.value),placeholder:"email@company.com",className:"input",disabled:e.isLocked})]}),n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Phone"}),n.jsx("input",{type:"tel",value:s.phone,onChange:e=>m("phone",e.target.value),placeholder:"+65 9123 4567",className:"input",disabled:e.isLocked})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"label",children:["Notes",s.contactId&&n.jsx("span",{className:"text-accent-primary font-normal ml-1",children:"(synced to contact)"}),!s.contactId&&n.jsx("span",{className:"text-gray-600 font-normal ml-1",children:"(internal only)"})]}),n.jsx("textarea",{value:s.notes||"",onChange:e=>m("notes",e.target.value),placeholder:"Notes about this contact...",rows:2,className:"input resize-none text-sm",disabled:e.isLocked})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"label",children:["Event Tags ",n.jsx("span",{className:"text-gray-600 font-normal",children:"(for this quote)"})]}),n.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:(s.tags||[]).map((r,a)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-accent-primary/20 text-accent-primary rounded text-xs",children:[r,!e.isLocked&&n.jsx("button",{onClick:()=>(e=>{const n=s.tags||[];t({tags:n.filter(t=>t!==e)})})(r),className:"hover:text-white transition-colors",children:n.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},a))}),n.jsx("input",{type:"text",value:l,onChange:e=>c(e.target.value),onKeyDown:e=>{if("Enter"===e.key&&l.trim()){e.preventDefault();const n=s.tags||[];n.includes(l.trim())||t({tags:[...n,l.trim()]}),c("")}},placeholder:"Type and press Enter to add...",className:"input text-sm",disabled:e.isLocked})]})]})]})}function wt({onGoToSettings:e}){const{quote:t,setProjectDetails:r,setPreparedBy:a,setQuoteDate:s,setValidityDays:o,setRegion:i,setNextFollowUpDate:l,setInternalNotes:c,lockQuote:u,unlockQuote:p}=nt(),[f,m]=d.useState(!1),[h,g]=d.useState(!1),{settings:y}=ze(),b=y.projectTypes||[],x=y.regions||[],{project:v}=t,w=y.users||[],k=(e,t)=>{r({[e]:t})},S=w.find(e=>e.id===t.preparedBy)||w[0],j=t.lockedBy?w.find(e=>e.id===t.lockedBy):null;return n.jsxs("div",{className:"card",children:[t.isLocked&&n.jsxs("div",{className:"mb-4 p-3 bg-amber-500/10 border border-amber-500/30 rounded-lg flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2 text-amber-400",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),n.jsxs("span",{className:"text-sm font-medium",children:["This quote is locked",j&&n.jsxs("span",{className:"text-amber-500/70",children:[" by ",j.name]}),t.lockedAt&&n.jsxs("span",{className:"text-amber-500/70",children:[" on ",new Date(t.lockedAt).toLocaleDateString()]})]})]}),n.jsx("button",{onClick:()=>{p(S?.id||"default")},className:"text-xs px-3 py-1 bg-amber-500/20 hover:bg-amber-500/30 text-amber-400 rounded-lg transition-colors",children:"Unlock"})]}),n.jsxs("h3",{className:"text-sm font-semibold text-gray-300 mb-4 flex items-center gap-2",children:[n.jsx("svg",{className:"w-4 h-4 text-accent-secondary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})}),"Project Details"]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Prepared By"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:t.preparedBy||"default",onChange:e=>a(e.target.value),className:"input flex-1",disabled:t.isLocked,children:[n.jsx("option",{value:"default",disabled:!0,children:"Select User"}),w.map(e=>n.jsx("option",{value:e.id,children:e.name},e.id))]}),n.jsx("button",{className:"btn-ghost px-2",title:"Manage Users in Settings",onClick:e,children:n.jsxs("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Quote Date"}),n.jsx("input",{type:"date",value:t.quoteDate,onChange:e=>s(e.target.value),className:"input",disabled:t.isLocked})]}),n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Valid Until"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:t.validityDays,onChange:e=>o(e.target.value),className:"input flex-1",disabled:t.isLocked,children:[n.jsx("option",{value:"7",children:"7 Days"}),n.jsx("option",{value:"14",children:"14 Days"}),n.jsx("option",{value:"30",children:"30 Days"}),n.jsx("option",{value:"60",children:"60 Days"}),n.jsx("option",{value:"90",children:"90 Days"})]}),n.jsx("div",{className:"flex items-center justify-center px-3 bg-dark-bg/50 border border-dark-border rounded-lg text-sm text-gray-400 min-w-[100px]",children:(()=>{if(!t.quoteDate)return"-";const e=new Date(t.quoteDate);return e.setDate(e.getDate()+(parseInt(t.validityDays)||30)),e.toLocaleDateString()})()})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Project Title"}),n.jsx("input",{type:"text",value:v.title,onChange:e=>k("title",e.target.value),placeholder:"e.g. Shopee Cup Semi-Final",className:"input",disabled:t.isLocked})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Project Type"}),n.jsx("select",{value:v.type,onChange:e=>k("type",e.target.value),className:"input",disabled:t.isLocked,children:b.map(e=>n.jsx("option",{value:e.id,children:e.label},e.id))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Region (Rates)"}),n.jsx("select",{value:t.region||x[0]?.id||"SEA",onChange:e=>i(e.target.value),className:"input",disabled:t.isLocked,children:x.map(e=>n.jsx("option",{value:e.id,children:e.label},e.id))})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Currency"}),n.jsx("select",{value:t.currency||"USD",onChange:e=>{nt.getState().setCurrency(e.target.value)},className:"input",disabled:t.isLocked,children:Object.values(A).map(e=>n.jsxs("option",{value:e.code,children:[e.symbol," ",e.code," - ",e.name]},e.code))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Venue"}),n.jsx("input",{type:"text",value:v.venue,onChange:e=>k("venue",e.target.value),placeholder:"e.g. Jalan Besar Stadium",className:"input",disabled:t.isLocked})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Start Date"}),n.jsx("input",{type:"date",value:v.startDate,onChange:e=>{const t=e.target.value;k("startDate",t),v.endDate&&t>v.endDate&&k("endDate",t)},className:"input",disabled:t.isLocked})]}),n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"End Date"}),n.jsx("input",{type:"date",value:v.endDate,onChange:e=>k("endDate",e.target.value),min:v.startDate||"",className:"input",disabled:t.isLocked})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Description"}),n.jsx("textarea",{value:v.description,onChange:e=>k("description",e.target.value),placeholder:"Brief project description...",rows:2,className:"input resize-none",disabled:t.isLocked})]}),n.jsxs("div",{children:[n.jsx("label",{className:"label",children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx("svg",{className:"w-4 h-4 text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),"Follow-up Reminder"]})}),n.jsx("input",{type:"date",value:t.nextFollowUpDate||"",onChange:e=>l(e.target.value||null),className:"input",disabled:t.isLocked}),n.jsx("p",{className:"form-helper",children:"Set a reminder date to follow up on this quote"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"label",children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Internal Notes",n.jsx("span",{className:"text-xs text-gray-500 font-normal",children:"(Not shown in PDF)"})]})}),n.jsx("textarea",{value:t.internalNotes||"",onChange:e=>c(e.target.value),placeholder:"Team notes, context, reminders...",rows:3,className:"input resize-none",disabled:t.isLocked}),n.jsx("p",{className:"form-helper",children:"Useful for handoff context between team members"})]}),n.jsxs("div",{className:"border-t border-dark-border pt-4",children:[n.jsxs("button",{onClick:()=>m(!f),className:"w-full flex items-center justify-between text-sm text-gray-400 hover:text-gray-300 transition-colors",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Activity Log",t.statusHistory?.length>0&&n.jsx("span",{className:"text-xs bg-gray-700 px-1.5 py-0.5 rounded",children:t.statusHistory.length})]}),n.jsx("svg",{className:"w-4 h-4 transition-transform "+(f?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),f&&n.jsx("div",{className:"mt-3 space-y-2 max-h-64 overflow-y-auto",children:t.statusHistory&&0!==t.statusHistory.length?[...t.statusHistory].reverse().map((e,t)=>{const r=w.find(t=>t.id===e.userId),a=new Date(e.timestamp);return n.jsxs("div",{className:"flex items-start gap-3 text-sm p-2 rounded bg-dark-bg/50",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-600 mt-1.5 shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"text-gray-300",children:"Status changed to"}),n.jsx("span",{className:`font-semibold uppercase text-xs ${{draft:"text-gray-400",sent:"text-blue-400",under_review:"text-amber-400",approved:"text-emerald-400",won:"text-green-400",rejected:"text-red-400",expired:"text-gray-500",dead:"text-red-500"}[e.status]||"text-gray-400"}`,children:e.status?.replace("_"," ")})]}),e.note&&n.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:['"',e.note,'"']}),n.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[r?.name||"System","  ",a.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]},t)}):n.jsx("p",{className:"text-sm text-gray-500 italic",children:"No activity recorded yet"})})]}),!t.isLocked&&n.jsxs("div",{className:"border-t border-dark-border pt-4",children:[n.jsxs("button",{onClick:()=>g(!0),className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-dark-bg/50 hover:bg-dark-bg border border-dark-border rounded-lg text-sm text-gray-400 hover:text-gray-300 transition-colors",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Lock Quote"]}),n.jsx("p",{className:"form-helper text-center mt-2",children:"Locking prevents accidental edits to this quote"})]})]}),h&&n.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/75 backdrop-blur-md modal-backdrop p-4",children:n.jsxs("div",{className:"bg-dark-card border border-dark-border rounded-xl p-6 w-full max-w-sm shadow-2xl",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-2 bg-amber-500/20 rounded-lg",children:n.jsx("svg",{className:"w-6 h-6 text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),n.jsx("h3",{className:"text-lg font-semibold text-gray-100",children:"Lock Quote?"})]}),n.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Locking this quote will prevent any further edits. You can unlock it later if needed."}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>g(!1),className:"flex-1 px-4 py-2 bg-dark-bg hover:bg-dark-bg/80 border border-dark-border rounded-lg text-sm text-gray-300 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:()=>{u(S?.id||"default"),g(!1)},className:"flex-1 px-4 py-2 bg-amber-500/20 hover:bg-amber-500/30 border border-amber-500/30 rounded-lg text-sm text-amber-400 font-medium transition-colors",children:"Lock Quote"})]})]})})]})}function kt(){const{quote:e,setFees:t}=nt(),r=e.fees||{managementFee:0,commissionFee:0,discount:0},a=(e,n)=>{if(""===n)return void t({[e]:""});const r=parseFloat(n);if(isNaN(r))return;const a=Math.min(100,Math.max(0,r));t({[e]:a})},s=(e,n)=>{(""===n||isNaN(parseFloat(n)))&&t({[e]:0})};return n.jsxs("div",{className:"card",children:[n.jsxs("h3",{className:"text-sm font-semibold text-gray-300 mb-3 flex items-center gap-2",children:[n.jsx("svg",{className:"w-4 h-4 text-accent-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Fees & Adjustments"]}),n.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Management %"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:r.managementFee,onChange:e=>a("managementFee",e.target.value),onBlur:e=>s("managementFee",e.target.value),min:"0",max:"100",step:"0.5",className:"input pr-8 text-center",disabled:e.isLocked}),n.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:"%"})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Added to charge"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Commission %"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:r.commissionFee,onChange:e=>a("commissionFee",e.target.value),onBlur:e=>s("commissionFee",e.target.value),min:"0",max:"100",step:"0.5",className:"input pr-8 text-center",disabled:e.isLocked}),n.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:"%"})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Added to charge"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Discount %"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:r.discount,onChange:e=>a("discount",e.target.value),onBlur:e=>s("discount",e.target.value),min:"0",max:"100",step:"0.5",className:"input pr-8 text-center",disabled:e.isLocked}),n.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:"%"})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Off final total"})]})]}),n.jsx("div",{className:"mt-4 pt-4 border-t border-gray-800",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[n.jsx("input",{type:"checkbox",checked:r.distributeFees||!1,onChange:e=>t({distributeFees:e.target.checked}),className:"checkbox border-gray-600 rounded bg-gray-900 group-hover:border-accent-primary transition-colors",disabled:e.isLocked}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-300 group-hover:text-white transition-colors",children:"Distribute Fees into Unit Rates"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Hides separate fee line items on PDF by inflating unit prices"})]})]})})]})}function St(e){if(!e)return{totalCost:0,totalCharge:0};const t=Number(e.quantity)||1,n=Number(e.days)||1;return{totalCost:(Number(e.cost)||0)*t*n,totalCharge:(Number(e.charge)||0)*t*n}}function jt(e){if(!e)return 0;const{totalCost:t,totalCharge:n}=St(e);return function(e,t){const n=Number(e)||0,r=Number(t)||0;return 0===r?0:(r-n)/r*100}(t,n)}function Ct(e){if(!e||"object"!=typeof e)return{totalCost:0,totalCharge:0};let t=0,n=0;return Object.values(e).forEach(e=>{const r=function(e){return e&&Array.isArray(e)?e.reduce((e,t)=>{if(!t)return e;const{totalCost:n,totalCharge:r}=St(t);return{totalCost:e.totalCost+n,totalCharge:e.totalCharge+r}},{totalCost:0,totalCharge:0}):{totalCost:0,totalCharge:0}}(e);t+=r.totalCost,n+=r.totalCharge}),{totalCost:t,totalCharge:n}}function Nt(e,t={}){const n=function(e){if(!e||"object"!=typeof e)return{totalCost:0,totalCharge:0};let t=0,n=0;return Object.values(e).forEach(e=>{if(e?.subsections){const r=Ct(e.subsections);t+=r.totalCost,n+=r.totalCharge}}),{totalCost:t,totalCharge:n}}(e),r=t.managementFee||0,a=t.commissionFee||0,s=t.discount||0,o=n.totalCharge*r/100,i=n.totalCharge*a/100,l=n.totalCharge+o+i,c=l*s/100,u=l-c,d=n.totalCost;return{baseCost:n.totalCost,baseCharge:n.totalCharge,managementAmount:o,commissionAmount:i,chargeWithFees:l,discountAmount:c,totalCost:d,totalCharge:u,profit:u-d,margin:u>0?(u-d)/u*100:0,getDistributedRate:e=>{if(!t.distributeFees)return e;return e*(1+(r+a)/100)}}}function Et({item:e,sectionId:t,subsectionName:r}){const{quote:a,updateLineItem:s,deleteLineItem:o,rates:i}=nt(),{items:l,sections:c}=se(),[u,p]=d.useState(!1),[f,m]=d.useState([]),[h,g]=d.useState(-1),y=d.useRef(null),b=St(e),x=jt(e),v=function(e){return e>=30?"text-green-400":e>=20?"text-amber-400":"text-red-400"}(x),w=B(a.region),k="MALAYSIA"===a.region?b.totalCharge:M(b.totalCharge,w,a.currency,i),S=(n,a)=>{s(t,r,e.id,{[n]:a})},j=e=>{if(S("name",e),e.length>=2){const t=(e=>{const t=e.toLowerCase();return l.filter(e=>e.name.toLowerCase().includes(t)).slice(0,8)})(e);m(t),p(t.length>0),g(-1)}else p(!1)},C=e=>{const t=c.find(t=>t.id===e);return t?.name||e},N=n=>{const o=n.pricing?.[a.region]||{cost:0,charge:0};s(t,r,e.id,{name:n.name,cost:o.cost,charge:o.charge}),p(!1),g(-1)};return d.useEffect(()=>{const e=e=>{y.current&&!y.current.contains(e.target)&&(p(!1),g(-1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),n.jsxs("div",{draggable:!a.isLocked,onDragStart:n=>{a.isLocked||(n.dataTransfer.setData("application/json",JSON.stringify({sectionId:t,subsectionName:r,itemId:e.id})),n.dataTransfer.effectAllowed="move")},className:"group bg-dark-card border border-dark-border rounded-lg p-2 hover:border-gray-700 transition-colors "+(a.isLocked?"cursor-default opacity-75":"cursor-move"),role:"article","aria-label":`Line item: ${e.name||"Unnamed item"}`,children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsxs("div",{className:"relative flex-1 min-w-[140px] sm:min-w-[180px]",ref:y,children:[n.jsx("label",{htmlFor:`item-name-${e.id}`,className:"sr-only",children:"Item name"}),n.jsx("input",{id:`item-name-${e.id}`,type:"text",value:e.name,onChange:e=>j(e.target.value),onKeyDown:e=>{if(u)switch(e.key){case"ArrowDown":e.preventDefault(),g(e=>e<f.length-1?e+1:0);break;case"ArrowUp":e.preventDefault(),g(e=>e>0?e-1:f.length-1);break;case"Enter":e.preventDefault(),h>=0&&f[h]&&N(f[h]);break;case"Escape":p(!1),g(-1)}},placeholder:"Item name...",className:"input-sm w-full text-sm","aria-autocomplete":"list","aria-controls":u?`autocomplete-${e.id}`:void 0,"aria-expanded":u,disabled:a.isLocked}),u&&n.jsx("div",{id:`autocomplete-${e.id}`,className:"absolute z-20 top-full left-0 right-0 mt-1 bg-dark-card border border-dark-border rounded-lg shadow-xl overflow-hidden",role:"listbox","aria-label":"Item suggestions",children:f.map((e,t)=>n.jsxs("button",{onClick:()=>N(e),className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex justify-between items-center "+(t===h?"bg-white/10":""),role:"option","aria-selected":t===h,children:[n.jsx("span",{className:"text-gray-200",children:e.name}),n.jsx("span",{className:"text-xs text-gray-500",children:C(e.section)})]},e.id||t))})]}),n.jsxs("div",{className:"w-14 sm:w-16",children:[n.jsx("label",{htmlFor:`quantity-${e.id}`,className:"sr-only",children:"Quantity"}),n.jsx("input",{id:`quantity-${e.id}`,type:"number",value:e.quantity,onChange:e=>S("quantity",""===e.target.value?"":parseFloat(e.target.value)),onBlur:t=>{(""===t.target.value||isNaN(e.quantity))&&S("quantity",1)},onFocus:e=>e.target.select(),min:"1",className:"input-sm w-full text-left text-sm",title:"Qty","aria-label":"Quantity",placeholder:"Qty",disabled:a.isLocked})]}),n.jsxs("div",{className:"w-14 sm:w-16",children:[n.jsx("label",{htmlFor:`days-${e.id}`,className:"sr-only",children:"Days"}),n.jsx("input",{id:`days-${e.id}`,type:"number",value:e.days,onChange:e=>S("days",""===e.target.value?"":parseFloat(e.target.value)),onBlur:t=>{(""===t.target.value||isNaN(e.days))&&S("days",1)},onFocus:e=>e.target.select(),min:"0.5",step:"0.5",className:"input-sm w-full text-left text-sm",title:"Days","aria-label":"Number of days",placeholder:"Days",disabled:a.isLocked})]}),n.jsxs("div",{className:"w-24 hidden lg:block relative",children:[n.jsx("label",{htmlFor:`cost-${e.id}`,className:"sr-only",children:"Cost per unit"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-xs text-gray-500",children:U(a.currency)}),n.jsx("input",{id:`cost-${e.id}`,type:"number",value:e.cost,onChange:e=>S("cost",""===e.target.value?"":parseFloat(e.target.value)),onBlur:t=>{(""===t.target.value||isNaN(e.cost))&&S("cost",0)},onFocus:e=>e.target.select(),min:"0",className:"input-sm w-full pl-6 text-left text-sm text-gray-500",title:"Cost","aria-label":`Cost per unit in ${a.currency}`,disabled:a.isLocked})]})]}),n.jsxs("div",{className:"w-20 sm:w-24 relative",children:[n.jsx("label",{htmlFor:`charge-${e.id}`,className:"sr-only",children:"Charge per unit"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-xs text-gray-400",children:U(a.currency)}),n.jsx("input",{id:`charge-${e.id}`,type:"number",value:e.charge,onChange:e=>S("charge",""===e.target.value?"":parseFloat(e.target.value)),onBlur:t=>{(""===t.target.value||isNaN(e.charge))&&S("charge",0)},onFocus:e=>e.target.select(),min:"0",className:"input-sm w-full pl-5 sm:pl-6 text-left text-sm",title:"Charge","aria-label":`Charge per unit in ${a.currency}`,disabled:a.isLocked})]})]}),n.jsx("div",{className:"w-20 sm:w-24 text-right flex items-center justify-end",role:"status","aria-live":"polite","aria-label":`Total: ${R(k,a.currency)}`,children:n.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-100",children:R(k,a.currency)})}),n.jsx("div",{className:"w-14 text-right hidden lg:flex items-center justify-end",role:"status","aria-live":"polite","aria-label":`Margin: ${x.toFixed(0)}%`,children:n.jsxs("span",{className:"text-xs font-bold px-1.5 py-0.5 rounded "+(x>=30?"bg-green-500/10 text-green-400":x>=15?"bg-amber-500/10 text-amber-400":"bg-red-500/10 text-red-400"),children:[x.toFixed(0),"%"]})}),!a.isLocked&&n.jsx("button",{onClick:()=>{o(t,r,e.id)},className:"p-2 min-w-[36px] min-h-[36px] text-gray-600 hover:text-red-400 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity flex items-center justify-center",title:"Delete item","aria-label":`Delete ${e.name||"item"}`,children:n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),n.jsxs("div",{className:"flex lg:hidden items-center justify-between mt-2 pt-2 border-t border-dark-border text-xs text-gray-500",children:[n.jsxs("span",{"aria-label":`Cost: ${U(a.currency)}${e.cost}`,children:["Cost: ",U(a.currency),e.cost]}),n.jsxs("span",{className:v,"aria-label":`Margin: ${x.toFixed(0)}%`,children:["Margin: ",x.toFixed(0),"%"]})]})]})}function Lt({sectionId:e,subsectionName:t,color:r,isDragging:a}){const{quote:s,addLineItem:o,updateSubsectionName:i}=nt(),{items:l}=se(),c=s.sections[e],u=c?.subsections?.[t]||[],[p,f]=d.useState(!1),[m,h]=d.useState(!1),[g,y]=d.useState(""),b=d.useRef(null),x=c?.subsectionNames?.[t]||t;d.useEffect(()=>{m&&b.current&&(b.current.focus(),b.current.select())},[m]);const v=()=>{i(e,t,g),h(!1)},w=()=>{h(!1),y("")},k=((e,t)=>{if("creative"===e)return"creative";if("logistics"===e)return"logistics";if("expenses"===e)return"expenses";if("productionTeam"===e)return{Production:"prod_production","Technical Crew":"prod_technical","Production Management":"prod_management"}[t]||"prod_production";if("productionEquipment"===e)return{Video:"equip_video",Audio:"equip_audio",Cameras:"equip_cameras",Graphics:"equip_graphics",VT:"equip_vt",Cabling:"equip_cabling",Other:"equip_other"}[t]||"equip_other";return"other"})(e,t),S=l.filter(e=>e.section===k),j=(n=null)=>{const r=s.region,a=n?.currencyPricing?.[r],i=n?.pricing?.[r],l=a?.cost?.amount??i?.cost??0,c=a?.charge?.amount??i?.charge??0;o(e,t,{name:n?.name||"",cost:l,charge:c,quantity:1,days:1,isPercentage:n?.isPercentage||!1,percentValue:n?.percentValue||0}),f(!1)},C=["creative","logistics","expenses"].includes(e)&&"Services"===t;return n.jsxs("div",{className:"bg-dark-bg/50 rounded-md p-2 transition-colors hover:bg-dark-bg/70",onDragOver:e=>{s.isLocked||(e.preventDefault(),e.currentTarget.classList.add("bg-accent-primary/10"))},onDragLeave:e=>{s.isLocked||(e.preventDefault(),e.currentTarget.classList.remove("bg-accent-primary/10"))},onDrop:n=>{if(s.isLocked)return;n.preventDefault(),n.currentTarget.classList.remove("bg-accent-primary/10");const r=JSON.parse(n.dataTransfer.getData("application/json"));!r||r.sectionId===e&&r.subsectionName===t||nt.getState().moveLineItem(r.sectionId,r.subsectionName,r.itemId,e,t)},children:[!C&&n.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[n.jsx("svg",{className:"w-3 h-3 text-gray-600 flex-shrink-0 cursor-grab",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),m?n.jsxs("div",{className:"flex items-center gap-1",onClick:e=>e.stopPropagation(),onMouseDown:e=>e.stopPropagation(),draggable:!1,children:[n.jsx("input",{ref:b,type:"text",value:g,onChange:e=>y(e.target.value),onKeyDown:e=>{"Enter"===e.key&&v(),"Escape"===e.key&&w()},className:"input-sm text-xs py-0.5 w-32","aria-label":"Subsection name",draggable:!1}),n.jsx("button",{onClick:v,className:"p-0.5 text-green-400 hover:text-green-300","aria-label":"Save",children:n.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),n.jsx("button",{onClick:w,className:"p-0.5 text-gray-400 hover:text-gray-300","aria-label":"Cancel",children:n.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):n.jsx("h4",{className:"text-xs font-medium text-gray-400 cursor-text hover:text-gray-300",onClick:e=>{e.stopPropagation(),y(x),h(!0)},onMouseDown:e=>e.stopPropagation(),draggable:!1,title:"Click to rename",children:x}),n.jsxs("span",{className:"text-[10px] text-gray-600",children:[u.length," items"]})]}),u.length>0&&n.jsxs("div",{className:"space-y-1 mb-1",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 px-2 py-0.5 text-[10px] text-gray-500 border-b border-dark-border",children:[n.jsx("div",{className:"flex-1 min-w-[180px]",children:"Item"}),n.jsx("div",{className:"w-16 text-left",children:"Qty"}),n.jsx("div",{className:"w-16 text-left",children:"Days"}),n.jsx("div",{className:"w-24 text-left hidden lg:block",children:"Cost"}),n.jsx("div",{className:"w-24 text-left",children:"Charge"}),n.jsx("div",{className:"w-24 text-right",children:"Total"}),n.jsx("div",{className:"w-14 text-right hidden lg:block",children:"Margin"}),n.jsx("div",{className:"w-6"})]}),u.map(r=>n.jsx(Et,{item:r,sectionId:e,subsectionName:t},r.id))]}),!s.isLocked&&(p?n.jsxs("div",{className:"bg-dark-card rounded-lg p-2 space-y-2",children:[S.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-2",children:"Quick Add"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:S.slice(0,8).map(e=>n.jsxs("button",{onClick:()=>j(e),className:"text-xs px-2.5 py-1.5 bg-dark-bg hover:bg-white/10 rounded-md transition-colors text-gray-400 hover:text-gray-200 border border-dark-border hover:border-gray-600",children:["+ ",e.name]},e.name))})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>j(),className:"text-xs px-3 py-1.5 bg-accent-primary/20 hover:bg-accent-primary/30 text-accent-primary rounded transition-colors",children:"+ Custom Item"}),n.jsx("button",{onClick:()=>f(!1),className:"text-xs px-3 py-1.5 text-gray-500 hover:text-gray-300",children:"Cancel"})]})]}):n.jsxs("button",{onClick:()=>f(!0),className:"w-full py-1.5 text-xs text-gray-500 hover:text-gray-300 hover:bg-white/5 rounded transition-colors flex items-center justify-center gap-1",style:{borderColor:r},children:[n.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Item"]}))]})}const Tt=d.memo(function({sectionId:e,index:t,totalSections:r}){const{quote:a,toggleSection:s,moveSection:o,updateSectionName:i,moveSubsection:l,rates:c}=nt(),u=a.sections[e],p=D[e],[f,m]=d.useState(!1),[h,g]=d.useState(""),[y,b]=d.useState(!1),[x,v]=d.useState(""),[w,k]=d.useState(null),[S,j]=d.useState(null),C=d.useRef(null),N=a.sectionNames?.[e]||p?.name||"";if(d.useEffect(()=>{y&&C.current&&(C.current.focus(),C.current.select())},[y]),!u||!p)return null;const E=Ct(u.subsections),L=B(a.region),T=R("MALAYSIA"===a.region?E.totalCharge:M(E.totalCharge,L,a.currency,c),a.currency),_=[...p.subsections,...u.customSubsections||[]],A=u.subsectionOrder||_,P=Object.values(u.subsections).reduce((e,t)=>e+t.length,0),I=()=>{k(null),j(null)},z=()=>{if(h.trim()){const{addCustomSubsection:t}=nt.getState();t(e,h.trim()),g(""),m(!1)}},O=()=>{i(e,x),b(!1)},q=()=>{b(!1),v("")};return n.jsxs("div",{className:"card overflow-hidden",style:{borderLeftColor:p.color,borderLeftWidth:"3px"},role:"region","aria-labelledby":`section-${e}-title`,children:[n.jsxs("div",{role:"button",tabIndex:0,className:"section-header -m-4 mb-0 w-full cursor-pointer",onClick:()=>s(e),onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),s(e))},"aria-expanded":u.isExpanded,"aria-controls":`section-${e}-content`,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:p.color},"aria-hidden":"true"}),y?n.jsxs("div",{className:"flex items-center gap-2",onClick:e=>e.stopPropagation(),children:[n.jsx("input",{ref:C,type:"text",value:x,onChange:e=>v(e.target.value),onKeyDown:e=>{"Enter"===e.key&&O(),"Escape"===e.key&&q()},className:"input-sm text-sm font-semibold py-0.5","aria-label":"Section name"}),n.jsx("button",{onClick:O,className:"p-1 text-green-400 hover:text-green-300","aria-label":"Save name",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),n.jsx("button",{onClick:q,className:"p-1 text-gray-400 hover:text-gray-300","aria-label":"Cancel",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):n.jsx("h3",{id:`section-${e}-title`,className:"font-semibold text-gray-200 cursor-pointer hover:text-white",onClick:e=>{e.stopPropagation(),v(N),b(!0)},title:"Click to rename",children:N}),n.jsxs("span",{className:"text-xs text-gray-500 bg-dark-card px-2 py-0.5 rounded flex-shrink-0",children:[P," items"]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-1",onClick:e=>e.stopPropagation(),children:[n.jsx("button",{onClick:t=>{t.stopPropagation(),o(e,"up")},disabled:0===t,className:"p-1 rounded transition-colors "+(0===t?"text-gray-600 cursor-not-allowed":"text-gray-400 hover:text-white hover:bg-white/10"),"aria-label":"Move section up",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),n.jsx("button",{onClick:t=>{t.stopPropagation(),o(e,"down")},disabled:t===r-1,className:"p-1 rounded transition-colors "+(t===r-1?"text-gray-600 cursor-not-allowed":"text-gray-400 hover:text-white hover:bg-white/10"),"aria-label":"Move section down",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),n.jsx("span",{className:"text-sm font-medium text-gray-300",children:T}),n.jsx("svg",{className:"w-5 h-5 text-gray-400 transition-transform duration-200 "+(u.isExpanded?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),u.isExpanded&&n.jsxs("div",{id:`section-${e}-content`,className:"mt-3 space-y-2",children:[A.map((t,r)=>n.jsx("div",{draggable:!a.isLocked,onDragStart:e=>!a.isLocked&&((e,t)=>{k(t),e.dataTransfer.setData("subsection",t),e.dataTransfer.effectAllowed="move"})(e,t),onDragOver:e=>!a.isLocked&&((e,t)=>{e.preventDefault(),w&&w!==t&&j(t)})(e,t),onDrop:n=>!a.isLocked&&((t,n)=>{if(t.preventDefault(),w&&w!==n){const t=[...A],r=t.indexOf(w),a=t.indexOf(n);if(-1!==r&&-1!==a){t.splice(r,1),t.splice(a,0,w);const{reorderSubsections:n}=nt.getState();n(e,t)}}k(null),j(null)})(n,t),onDragEnd:I,className:`transition-all duration-150 ${w===t?"opacity-50 scale-[0.98]":""} ${S===t?"ring-2 ring-accent-primary/50 rounded-lg":""}`,children:n.jsx(Lt,{sectionId:e,subsectionName:t,color:p.color,isDragging:w===t})},t)),!a.isLocked&&(f?n.jsxs("div",{className:"flex items-center gap-2 p-2 bg-dark-bg rounded-lg",children:[n.jsx("label",{htmlFor:`new-subsection-${e}`,className:"sr-only",children:"New subsection name"}),n.jsx("input",{id:`new-subsection-${e}`,type:"text",value:h,onChange:e=>g(e.target.value),placeholder:"Subsection name...",className:"input-sm flex-1",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&z(),"Escape"===e.key&&(m(!1),g(""))},"aria-label":"New subsection name"}),n.jsx("button",{onClick:z,className:"btn-primary text-xs py-1 px-2","aria-label":"Add subsection",children:"Add"}),n.jsx("button",{onClick:()=>{m(!1),g("")},className:"btn-ghost text-xs py-1 px-2","aria-label":"Cancel adding subsection",children:"Cancel"})]}):n.jsxs("button",{onClick:()=>m(!0),className:"w-full py-2 text-sm text-gray-500 hover:text-gray-300 hover:bg-white/5 rounded-lg transition-colors flex items-center justify-center gap-1","aria-label":"Add new subsection",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Subsection"]}))]})]})});function Dt({onGoToSettings:e}){const t=nt(e=>e.quote.sectionOrder||_);return n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 h-[calc(100vh-60px)]",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[n.jsx(vt,{}),n.jsx(wt,{onGoToSettings:e})]}),n.jsx(kt,{}),n.jsx("div",{className:"space-y-2",children:t.map((e,r)=>n.jsx(Tt,{sectionId:e,index:r,totalSections:t.length},e))})]})}const _t="#FFFFFF",At="#1E293B",Pt="#334155",It="#64748B",zt="#0F8B8D",Ot="#E2E8F0",qt=a.create({page:{backgroundColor:_t,paddingTop:30,paddingBottom:40,paddingHorizontal:30,fontFamily:"Helvetica",color:At,fontSize:6},header:{marginBottom:12,paddingBottom:8,borderBottomWidth:1,borderBottomColor:Ot},title:{fontSize:10,color:At,letterSpacing:1,textTransform:"uppercase",marginBottom:2},company:{fontSize:7,color:zt,marginBottom:1},address:{fontSize:6,color:It},intro:{fontSize:5.5,color:Pt,marginBottom:10,lineHeight:1.4},columnsContainer:{flexDirection:"row",gap:16},column:{flex:1},section:{marginBottom:6},sectionTitle:{fontSize:6.5,color:At,fontFamily:"Helvetica-Bold",marginBottom:2},subsectionTitle:{fontSize:6,color:Pt,fontFamily:"Helvetica-Bold",marginTop:2,marginBottom:1},text:{fontSize:5.5,color:Pt,lineHeight:1.35,textAlign:"justify"},listItem:{fontSize:5.5,color:Pt,lineHeight:1.35,marginLeft:6},footer:{position:"absolute",bottom:0,left:0,right:0,paddingVertical:10,paddingHorizontal:30,borderTopWidth:1,borderTopColor:Ot,backgroundColor:_t},footerContent:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},footerLeft:{flexDirection:"row",alignItems:"center"},footerLogo:{fontSize:8,color:At,letterSpacing:2,marginRight:6},footerDivider:{width:1,height:8,backgroundColor:Ot,marginRight:6},footerText:{fontSize:6,color:It},footerRight:{flexDirection:"row",alignItems:"center"},footerQuote:{fontSize:6,color:zt},footerPageNum:{fontSize:6,color:It,marginLeft:10}});function Ft({quoteNumber:e,companyWebsite:t}){return n.jsxs(r,{size:"A4",style:qt.page,children:[n.jsxs(s,{style:qt.header,children:[n.jsx(o,{style:qt.title,children:"General Terms and Conditions"}),n.jsx(o,{style:qt.company,children:"TELL PRODUCTIONS SDN BHD"}),n.jsx(o,{style:qt.address,children:"8-3, Jalan Jalil 1, Bukit Jalil, 57000 Kuala Lumpur, Malaysia"})]}),n.jsx(o,{style:qt.intro,children:'These General Terms and Conditions ("Terms") apply to all services provided by Tell Productions Sdn Bhd ("the Company", "we", "us", "our") to any client ("the Client", "you", "your"). By engaging our services, you agree to be bound by these Terms.'}),n.jsxs(s,{style:qt.columnsContainer,children:[n.jsxs(s,{style:qt.column,children:[n.jsxs(s,{style:qt.section,children:[n.jsx(o,{style:qt.sectionTitle,children:"1. DEFINITIONS"}),n.jsx(o,{style:qt.text,children:'"Agreement" means the contract formed between the Company and the Client comprising any quotation, proposal, statement of work, and these Terms; "Deliverables" means any tangible outputs provided to the Client including but not limited to broadcast feeds, recordings, graphics, and technical documentation; "Equipment" means all technical equipment, hardware, software, and infrastructure provided or operated by the Company; "Event" means the sporting event, broadcast, live production, or other activity for which Services are provided; "Fees" means all charges payable by the Client for the Services as set out in any quotation or statement of work; "Footage" means all video, audio, graphics, and visual content captured, created, or produced by the Company; "Services" means the event delivery, technical services, broadcast services, streaming, graphics, presentation, and related services provided by the Company.'})]}),n.jsxs(s,{style:qt.section,children:[n.jsx(o,{style:qt.sectionTitle,children:"2. SERVICES"}),n.jsx(o,{style:qt.subsectionTitle,children:"2.1 Scope"}),n.jsx(o,{style:qt.text,children:"The Company shall provide the Services as described in the relevant quotation or statement of work. Services may include event delivery, outside broadcast, live streaming, graphics operation, vision mixing, audio, presentation services, and technical crew provision. Any services not expressly included are excluded and require separate agreement."}),n.jsx(o,{style:qt.subsectionTitle,children:"2.2 Professional Standards"}),n.jsx(o,{style:qt.text,children:"The Company shall perform the Services with reasonable skill and care in accordance with generally accepted industry standards for professional broadcast and event technical services."}),n.jsx(o,{style:qt.subsectionTitle,children:"2.3 Technical Standards"}),n.jsx(o,{style:qt.text,children:"Unless otherwise specified, technical deliverables shall comply with: (a) EBU R128 loudness standards where applicable; (b) minimum HD resolution (19201080); and (c) industry-standard formats appropriate for the delivery method."})]}),n.jsxs(s,{style:qt.section,children:[n.jsx(o,{style:qt.sectionTitle,children:"3. CLIENT OBLIGATIONS"}),n.jsx(o,{style:qt.text,children:"The Client shall: provide accurate and complete information regarding the Event and requirements; ensure appropriate venue access, power supply, internet connectivity, and working conditions for the Company's personnel and Equipment; obtain all necessary rights, licences, permits, and permissions for the Event; provide timely approvals and decisions as reasonably required; ensure safe working conditions and compliance with health and safety requirements; not interfere with or direct the Company's personnel or Equipment without prior agreement. If the Company's performance is delayed or prevented by any act or omission of the Client, the Company shall not be liable for any resulting delay, and the Client shall remain liable for all Fees."})]}),n.jsxs(s,{style:qt.section,children:[n.jsx(o,{style:qt.sectionTitle,children:"4. PAYMENT"}),n.jsx(o,{style:qt.subsectionTitle,children:"4.1 Payment Schedule"}),n.jsx(o,{style:qt.text,children:"Unless otherwise agreed in writing, Fees shall be payable as follows: 50% upon confirmation of booking (non-refundable deposit); 50% prior to the Event date or within fourteen (14) days of invoice, whichever is earlier."}),n.jsx(o,{style:qt.subsectionTitle,children:"4.2 Payment Terms"}),n.jsx(o,{style:qt.text,children:"All invoices are payable within thirty (30) days of the invoice date unless otherwise specified. All amounts are exclusive of applicable taxes, which shall be charged in addition where required by law."}),n.jsx(o,{style:qt.subsectionTitle,children:"4.3 Late Payment"}),n.jsx(o,{style:qt.text,children:"If any invoice is not paid when due, the Client shall pay interest on the overdue amount at the rate of 1.5% per month (18% per annum) from the due date until payment in full. The Company may suspend Services and withhold Deliverables until all overdue amounts have been paid."}),n.jsx(o,{style:qt.subsectionTitle,children:"4.4 Additional Costs"}),n.jsx(o,{style:qt.text,children:"Travel, accommodation, transport, equipment hire, and other expenses shall be charged in addition to the Fees unless expressly included in the quotation. Any additional services requested during the Event shall be charged at the Company's prevailing rates."})]}),n.jsxs(s,{style:qt.section,children:[n.jsx(o,{style:qt.sectionTitle,children:"5. INTELLECTUAL PROPERTY AND FOOTAGE"}),n.jsx(o,{style:qt.subsectionTitle,children:"5.1 Ownership of Footage"}),n.jsx(o,{style:qt.text,children:"All Footage created by the Company remains the exclusive property of the Company. The Company retains all copyright and intellectual property rights in all Footage unless expressly agreed otherwise in writing."}),n.jsx(o,{style:qt.subsectionTitle,children:"5.2 Conditional Licence"}),n.jsx(o,{style:qt.text,children:"Subject to full payment of all Fees, the Company grants the Client a non-exclusive licence to use the Deliverables for the purposes specified in the Agreement. This licence is conditional upon payment and shall be automatically revoked if payment is not received in full."}),n.jsx(o,{style:qt.subsectionTitle,children:"5.3 Retention Until Payment"}),n.jsx(o,{style:qt.text,children:"Until all Fees have been paid in full: the Company retains full ownership and copyright of all Footage and Deliverables; the Client has no right to use, distribute, broadcast, or exploit any Footage or Deliverables; the Company may withhold delivery of any Footage or Deliverables; and any unauthorised use shall constitute copyright infringement."}),n.jsx(o,{style:qt.subsectionTitle,children:"5.4 Assignment of Rights"}),n.jsx(o,{style:qt.text,children:"Transfer or assignment of copyright in Footage to the Client shall only occur if: (a) expressly agreed in writing; (b) specified in the statement of work or quotation; and (c) all Fees have been paid in full. Any such assignment shall be made pursuant to Section 27 of the Copyright Act 1987 (Malaysia)."}),n.jsx(o,{style:qt.subsectionTitle,children:"5.5 Company's Rights"}),n.jsx(o,{style:qt.text,children:"The Company reserves the right to use Footage for promotional purposes, portfolio display, award submissions, showreels, and case studies, provided such use does not disclose the Client's confidential information."}),n.jsx(o,{style:qt.subsectionTitle,children:"5.6 Company Background IP"}),n.jsx(o,{style:qt.text,children:"All pre-existing materials, templates, graphics libraries, software tools, and methodologies owned by the Company remain the Company's exclusive property and are licensed, not assigned, to the Client solely for use within the Deliverables."})]}),n.jsxs(s,{style:qt.section,children:[n.jsx(o,{style:qt.sectionTitle,children:"6. EQUIPMENT"}),n.jsx(o,{style:qt.subsectionTitle,children:"6.1 Company Equipment"}),n.jsx(o,{style:qt.text,children:"Equipment provided by the Company remains the Company's property at all times. The Client shall not move, adjust, or interfere with Equipment without the Company's consent. The Client shall be liable for any damage to or loss of Equipment caused by the Client, its employees, agents, or invitees, excluding fair wear and tear."}),n.jsx(o,{style:qt.subsectionTitle,children:"6.2 Client Equipment"}),n.jsx(o,{style:qt.text,children:"Any equipment supplied by the Client shall be at the Client's sole risk. The Company accepts no liability for damage to or loss of Client-supplied equipment except where caused by the Company's gross negligence or wilful misconduct."})]})]}),n.jsxs(s,{style:qt.column,children:[n.jsxs(s,{style:qt.section,children:[n.jsx(o,{style:qt.sectionTitle,children:"7. CANCELLATION AND POSTPONEMENT"}),n.jsx(o,{style:qt.subsectionTitle,children:"7.1 Cancellation by Client"}),n.jsx(o,{style:qt.text,children:"If the Client cancels the Agreement, the following cancellation fees apply based on notice prior to the Event date: More than 30 days' notice: 25% of total Fees plus costs incurred; 15 to 30 days' notice: 50% of total Fees plus costs incurred; 5 to 14 days' notice: 75% of total Fees plus costs incurred; Less than 5 days' notice: 100% of total Fees plus costs incurred."}),n.jsx(o,{style:qt.subsectionTitle,children:"7.2 Postponement"}),n.jsx(o,{style:qt.text,children:"If the Event is postponed, the Company shall use reasonable endeavours to accommodate the new date, subject to availability. The Client shall pay any additional costs for rebooking crew and equipment. If the rescheduled date is more than 60 days from the original date, the cancellation fees in Clause 7.1 shall apply."}),n.jsx(o,{style:qt.subsectionTitle,children:"7.3 Cancellation by Company"}),n.jsx(o,{style:qt.text,children:"The Company may cancel the Agreement with immediate effect if the Client fails to pay any amount due or breaches any material term. The Company shall not be liable for any loss resulting from such cancellation."})]}),n.jsxs(s,{style:qt.section,children:[n.jsx(o,{style:qt.sectionTitle,children:"8. FORCE MAJEURE"}),n.jsx(o,{style:qt.text,children:"Neither Party shall be liable for any failure or delay in performance resulting from circumstances beyond its reasonable control, including: acts of God, natural disasters, pandemic, epidemic, war, terrorism, civil unrest, government action, strikes, failure of utilities or telecommunications, cancellation or postponement of the Event by organisers or governing bodies, extreme weather preventing safe working, travel restrictions, or visa denials affecting key personnel. If a force majeure event continues for more than 60 days, either Party may terminate the Agreement. Upon such termination, the Client shall pay for all Services performed and costs incurred to the date of termination."})]}),n.jsxs(s,{style:qt.section,children:[n.jsx(o,{style:qt.sectionTitle,children:"9. LIMITATION OF LIABILITY"}),n.jsx(o,{style:qt.subsectionTitle,children:"9.1 Liability Cap"}),n.jsx(o,{style:qt.text,children:"The Company's total liability under or in connection with this Agreement shall not exceed the total Fees paid or payable by the Client in the 12 months preceding the claim, or RM 500,000, whichever is greater."}),n.jsx(o,{style:qt.subsectionTitle,children:"9.2 Exclusion of Consequential Loss"}),n.jsx(o,{style:qt.text,children:"Neither Party shall be liable for any indirect, special, incidental, or consequential damages, including loss of profits, revenue, business opportunity, or data, whether or not foreseeable."}),n.jsx(o,{style:qt.subsectionTitle,children:"9.3 Exceptions"}),n.jsx(o,{style:qt.text,children:"Nothing in these Terms excludes or limits liability for: (a) fraud or wilful misconduct; (b) death or personal injury caused by negligence; or (c) any liability that cannot be limited under applicable law."})]}),n.jsxs(s,{style:qt.section,children:[n.jsx(o,{style:qt.sectionTitle,children:"10. CONFIDENTIALITY"}),n.jsx(o,{style:qt.text,children:"Each Party shall keep confidential all confidential information of the other Party and shall not disclose such information except as necessary for the performance of the Agreement or as required by law. This obligation shall survive termination of the Agreement for a period of five (5) years."})]}),n.jsxs(s,{style:qt.section,children:[n.jsx(o,{style:qt.sectionTitle,children:"11. DATA PROTECTION"}),n.jsx(o,{style:qt.text,children:"Each Party shall comply with its obligations under the Personal Data Protection Act 2010 (Malaysia) in connection with any personal data processed under this Agreement. Where personal data is transferred outside Malaysia, the transferring Party shall ensure compliance with applicable data protection requirements."})]}),n.jsxs(s,{style:qt.section,children:[n.jsx(o,{style:qt.sectionTitle,children:"12. INSURANCE"}),n.jsx(o,{style:qt.text,children:"The Company maintains public liability insurance and equipment insurance appropriate for its operations. Certificates of insurance shall be provided upon request. The Client is responsible for maintaining its own insurance coverage for the Event, including event cancellation insurance where appropriate."})]}),n.jsxs(s,{style:qt.section,children:[n.jsx(o,{style:qt.sectionTitle,children:"13. INDEMNITY"}),n.jsx(o,{style:qt.text,children:"The Client shall indemnify the Company against all losses, damages, costs, and liabilities arising from: (a) any breach of the Agreement by the Client; (b) any claim that Client-supplied materials infringe third-party rights; (c) any third-party claims arising from the Event; and (d) the Client's unauthorised use of Footage or Deliverables."})]}),n.jsxs(s,{style:qt.section,children:[n.jsx(o,{style:qt.sectionTitle,children:"14. TERMINATION"}),n.jsx(o,{style:qt.text,children:"Either Party may terminate the Agreement with immediate effect if the other Party: (a) commits a material breach and fails to remedy it within 14 days of written notice; (b) becomes insolvent or bankrupt; or (c) ceases to carry on business. Upon termination, the Client shall pay for all Services performed and costs incurred, and all provisions relating to intellectual property, liability, and confidentiality shall survive."})]}),n.jsxs(s,{style:qt.section,children:[n.jsx(o,{style:qt.sectionTitle,children:"15. DISPUTE RESOLUTION"}),n.jsx(o,{style:qt.text,children:"Any dispute arising from this Agreement shall first be referred to good faith negotiation between the Parties. If not resolved within 30 days, the dispute shall be finally determined by arbitration administered by the Asian International Arbitration Centre (AIAC) in Kuala Lumpur, Malaysia, in accordance with the AIAC Arbitration Rules. The arbitration shall be conducted in English by a single arbitrator."})]}),n.jsxs(s,{style:qt.section,children:[n.jsx(o,{style:qt.sectionTitle,children:"16. GOVERNING LAW"}),n.jsx(o,{style:qt.text,children:"This Agreement shall be governed by and construed in accordance with the laws of Malaysia."})]}),n.jsxs(s,{style:qt.section,children:[n.jsx(o,{style:qt.sectionTitle,children:"17. GENERAL PROVISIONS"}),n.jsxs(o,{style:qt.text,children:["17.1 Entire Agreement: These Terms, together with any quotation or statement of work, constitute the entire agreement between the Parties and supersede all prior agreements and understandings.","\n","17.2 Amendment: No amendment to these Terms shall be effective unless agreed in writing by both Parties.","\n","17.3 Assignment: The Client shall not assign or transfer any rights under this Agreement without the Company's prior written consent. The Company may subcontract its obligations with notice to the Client.","\n","17.4 Severability: If any provision of these Terms is held invalid or unenforceable, it shall be modified to the minimum extent necessary or severed, and the remaining provisions shall continue in full force.","\n","17.5 Waiver: No failure or delay in exercising any right shall operate as a waiver. A waiver shall only be effective if in writing.","\n","17.6 Notices: Notices shall be in writing and delivered by hand, registered post, or email to the addresses specified in the quotation or statement of work."]})]})]})]}),n.jsx(s,{style:qt.footer,fixed:!0,children:n.jsxs(s,{style:qt.footerContent,children:[n.jsxs(s,{style:qt.footerLeft,children:[n.jsx(o,{style:qt.footerLogo,children:"TELL"}),n.jsx(s,{style:qt.footerDivider}),n.jsx(o,{style:qt.footerText,children:t||"www.tell.so"})]}),n.jsxs(s,{style:qt.footerRight,children:[n.jsx(o,{style:qt.footerQuote,children:e}),n.jsx(o,{render:({pageNumber:e,totalPages:t})=>`Page ${e} of ${t}`,style:qt.footerPageNum})]})]})})]})}function Mt(e,t=1){return`rgba(${parseInt(e.slice(1,3),16)}, ${parseInt(e.slice(3,5),16)}, ${parseInt(e.slice(5,7),16)}, ${t})`}function Rt({quote:e,currency:t,includeTerms:c=!1}){const u=ze.getState().settings,{company:d,bankDetails:p,quoteDefaults:f,taxInfo:m,pdfOptions:h}=u,{client:g,project:y,sections:b,fees:x}=e,v=Nt(b,x||{}),w={primary:h?.primaryColor||"#143642",accent:h?.accentColor||"#0F8B8D",line:h?.lineColor||h?.primaryColor||"#143642",text:h?.textColor||"#374151",muted:h?.mutedColor||"#6B7280",background:h?.backgroundColor||"#FFFFFF"},k=Mt(w.line,.15),S=Mt(w.primary,.03),j=Mt(w.primary,.08),C=h?.baseFontSize||10,N=h?.fontFamily||"Helvetica",E=a.create({page:{backgroundColor:w.background,fontFamily:N,fontSize:C,color:w.text,paddingTop:30,paddingBottom:50,paddingHorizontal:35},headerBanner:{backgroundColor:w.primary,flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingVertical:14,paddingHorizontal:16,marginBottom:16,borderRadius:4},quotationTitle:{fontSize:14,fontFamily:`${N}-Bold`,color:"#FFFFFF",letterSpacing:2},headerDetails:{flexDirection:"row",alignItems:"center",gap:20},headerItem:{alignItems:"flex-end"},headerItemVenue:{alignItems:"flex-end",maxWidth:140},headerLabel:{fontSize:7,color:"#FFFFFF",opacity:.8,textTransform:"uppercase",marginBottom:2,textAlign:"right"},headerValue:{fontSize:9,fontFamily:`${N}-Bold`,color:"#FFFFFF",textAlign:"right"},twoColumn:{flexDirection:"row",marginBottom:16,gap:16},columnHalf:{flex:1,padding:12,backgroundColor:S,borderRadius:4},columnLabel:{fontSize:8,fontFamily:`${N}-Bold`,color:w.accent,textTransform:"uppercase",letterSpacing:.5,marginBottom:8},columnTitle:{fontSize:11,fontFamily:`${N}-Bold`,color:w.primary,marginBottom:4},columnText:{fontSize:9,color:w.text,lineHeight:1.5,marginBottom:1},descriptionRow:{flexDirection:"row",marginBottom:16,gap:16},descriptionBox:{flex:1,padding:12,borderWidth:1,borderTopColor:w.line,borderBottomColor:w.line,borderLeftColor:w.line,borderRightColor:w.line,borderRadius:4},descriptionLabel:{fontSize:8,fontFamily:`${N}-Bold`,color:w.primary,textTransform:"uppercase",marginBottom:6},descriptionText:{fontSize:9,color:w.text,lineHeight:1.5},sectionHeader:{backgroundColor:w.primary,paddingVertical:6,paddingHorizontal:10,marginTop:12,marginBottom:6,borderRadius:3},sectionHeaderText:{fontSize:9,fontFamily:`${N}-Bold`,color:"#FFFFFF",textTransform:"uppercase",letterSpacing:.5},tableHeader:{flexDirection:"row",backgroundColor:j,paddingVertical:5,paddingLeft:10,paddingRight:8,borderBottomWidth:1,borderBottomColor:w.line},tableHeaderCell:{fontSize:7,fontFamily:`${N}-Bold`,color:w.primary,textTransform:"uppercase"},tableRow:{flexDirection:"row",paddingVertical:4,paddingLeft:10,paddingRight:8,borderBottomWidth:.5,borderBottomColor:"#E5E7EB"},tableCell:{fontSize:8,color:w.text},tableCellRight:{fontSize:8,color:w.text,textAlign:"right"},colName:{width:"42%"},colQty:{width:"10%",textAlign:"center"},colDays:{width:"10%",textAlign:"center"},colRate:{width:"18%",textAlign:"right"},colTotal:{width:"20%",textAlign:"right"},subsectionHeader:{backgroundColor:k,paddingVertical:4,paddingHorizontal:8,marginTop:6,borderLeftWidth:2,borderLeftColor:w.line,borderTopWidth:0,borderBottomWidth:0,borderRightWidth:0},subsectionText:{fontSize:8,fontFamily:`${N}-Bold`,color:w.primary},bottomRow:{flexDirection:"row",marginTop:20,gap:12},termsColumn:{flex:1},termsBox:{padding:10,backgroundColor:S,borderRadius:4,marginBottom:8},termsLabel:{fontSize:8,fontFamily:`${N}-Bold`,color:w.primary,marginBottom:4},termsText:{fontSize:7,color:w.muted,lineHeight:1.5},totalsColumn:{width:180},totalsBox:{borderRadius:4,padding:12,borderWidth:1,borderTopColor:w.line,borderBottomColor:w.line,borderLeftColor:w.line,borderRightColor:w.line},totalsRow:{flexDirection:"row",justifyContent:"space-between",marginBottom:3},totalsLabel:{fontSize:8,color:w.muted},totalsValue:{fontSize:8,color:w.text},totalsFinalRow:{flexDirection:"row",justifyContent:"space-between",borderTopWidth:1,borderTopColor:w.line,paddingTop:8,marginTop:8},totalsFinalLabel:{fontSize:11,fontFamily:`${N}-Bold`,color:w.primary},totalsFinalValue:{fontSize:12,fontFamily:`${N}-Bold`,color:w.primary},footer:{position:"absolute",bottom:18,left:35,right:35,borderTopWidth:.5,borderTopColor:"#E5E7EB",paddingTop:8,flexDirection:"row",justifyContent:"space-between"},footerText:{fontSize:7,color:w.muted},footerBold:{fontSize:7,fontFamily:`${N}-Bold`,color:w.primary},logo:{width:100,maxHeight:40,objectFit:"contain",marginBottom:6}}),L=e=>{if(!e)return"-";const t=new Date(e),n=t.getDate(),r=t.toLocaleDateString("en-GB",{month:"short"}),a=t.getFullYear();return`${n}${(e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}})(n)} ${r} ${a}`},T=new Date(e.createdAt||new Date),A=new Date(T);A.setDate(T.getDate()+(e.validityDays||f?.validityDays||30));const P=(e.sectionOrder||_).filter(e=>{const t=b?.[e];return!!t?.subsections&&Object.values(t.subsections).some(e=>e?.length>0)});return n.jsxs(i,{children:[n.jsxs(r,{size:"A4",style:E.page,children:[n.jsxs(s,{style:E.headerBanner,children:[n.jsx(o,{style:E.quotationTitle,children:"QUOTATION"}),n.jsxs(s,{style:E.headerDetails,children:[n.jsxs(s,{style:E.headerItem,children:[n.jsx(o,{style:E.headerLabel,children:"Quote No."}),n.jsx(o,{style:E.headerValue,children:e.quoteNumber})]}),n.jsxs(s,{style:E.headerItem,children:[n.jsx(o,{style:E.headerLabel,children:"Date"}),n.jsx(o,{style:E.headerValue,children:L(T)})]}),n.jsxs(s,{style:E.headerItem,children:[n.jsx(o,{style:E.headerLabel,children:"Valid Until"}),n.jsx(o,{style:E.headerValue,children:L(A)})]}),y?.venue&&n.jsxs(s,{style:E.headerItemVenue,children:[n.jsx(o,{style:E.headerLabel,children:"Venue"}),n.jsx(o,{style:E.headerValue,children:y.venue})]})]})]}),n.jsxs(s,{style:E.twoColumn,children:[n.jsxs(s,{style:E.columnHalf,children:[n.jsx(o,{style:E.columnLabel,children:"From"}),h?.showLogo&&d.logo&&n.jsx(l,{src:d.logo,style:E.logo}),n.jsx(o,{style:E.columnTitle,children:d.name}),h?.showCompanyAddress&&d.address&&n.jsx(o,{style:E.columnText,children:d.address}),d.city&&n.jsxs(o,{style:E.columnText,children:[d.city,", ",d.country]}),h?.showCompanyPhone&&d.phone&&n.jsx(o,{style:E.columnText,children:d.phone}),h?.showCompanyEmail&&d.email&&n.jsx(o,{style:E.columnText,children:d.email})]}),n.jsxs(s,{style:E.columnHalf,children:[n.jsx(o,{style:E.columnLabel,children:"To"}),n.jsx(o,{style:E.columnTitle,children:g?.company||"-"}),g?.contact&&n.jsx(o,{style:E.columnText,children:g.contact}),g?.email&&n.jsx(o,{style:E.columnText,children:g.email}),g?.phone&&n.jsx(o,{style:E.columnText,children:g.phone})]})]}),n.jsxs(s,{style:E.descriptionRow,children:[n.jsxs(s,{style:E.descriptionBox,children:[n.jsx(o,{style:E.descriptionLabel,children:"Project"}),n.jsx(o,{style:E.columnTitle,children:y?.title||"-"}),y?.type&&n.jsxs(o,{style:E.descriptionText,children:["Type: ",(e=>{if(!e)return null;const t=(u.projectTypes||[]).find(t=>t.id===e);return t?.label||e.replace(/_/g," ")})(y.type)]}),n.jsxs(o,{style:E.descriptionText,children:["Dates: ",(()=>{if(!y?.startDate)return"-";const e=L(y.startDate);return y?.endDate&&y.endDate!==y.startDate?`${e} - ${L(y.endDate)}`:e})()]}),y?.description&&n.jsx(o,{style:[E.descriptionText,{marginTop:4}],children:y.description})]}),n.jsxs(s,{style:E.descriptionBox,children:[n.jsx(o,{style:E.descriptionLabel,children:"Services Included"}),n.jsx(o,{style:E.descriptionText,children:P.map(t=>{const n=b[t];return e.sectionNames?.[t]||n.name||D[t]?.name}).join("  ")})]})]}),P.map(r=>{const a=b[r],i=e.sectionNames?.[r]||a.name||D[r]?.name;return n.jsxs(s,{wrap:!1,children:[n.jsx(s,{style:E.sectionHeader,children:n.jsx(o,{style:E.sectionHeaderText,children:i})}),n.jsxs(s,{style:E.tableHeader,children:[n.jsx(o,{style:[E.tableHeaderCell,E.colName],children:"Description"}),n.jsx(o,{style:[E.tableHeaderCell,E.colQty,{textAlign:"center"}],children:"Qty"}),n.jsx(o,{style:[E.tableHeaderCell,E.colDays,{textAlign:"center"}],children:"Days"}),n.jsx(o,{style:[E.tableHeaderCell,E.colRate,{textAlign:"right"}],children:"Rate"}),n.jsx(o,{style:[E.tableHeaderCell,E.colTotal,{textAlign:"right"}],children:"Total"})]}),Object.entries(a.subsections||{}).map(([e,r])=>{if(!r?.length)return null;const i=a.subsectionNames?.[e]||e;return n.jsxs(s,{children:[n.jsx(s,{style:E.subsectionHeader,children:n.jsx(o,{style:E.subsectionText,children:i})}),r.map((e,r)=>{const a=(e.charge||0)*(e.quantity||1)*(e.days||1);return n.jsxs(s,{style:E.tableRow,children:[n.jsx(o,{style:[E.tableCell,E.colName],children:e.name}),n.jsx(o,{style:[E.tableCell,E.colQty],children:e.quantity||1}),n.jsx(o,{style:[E.tableCell,E.colDays],children:e.days||1}),n.jsx(o,{style:[E.tableCellRight,E.colRate],children:R(e.charge||0,t)}),n.jsx(o,{style:[E.tableCellRight,E.colTotal],children:R(a,t)})]},e.id||r)})]},e)})]},r)}),n.jsxs(s,{style:E.bottomRow,children:[n.jsxs(s,{style:E.termsColumn,children:[f?.paymentTerms&&n.jsxs(s,{style:E.termsBox,children:[n.jsx(o,{style:E.termsLabel,children:"Payment Terms"}),n.jsx(o,{style:E.termsText,children:f.paymentTerms})]}),f?.termsAndConditions&&n.jsxs(s,{style:E.termsBox,children:[n.jsx(o,{style:E.termsLabel,children:"Terms & Conditions"}),n.jsx(o,{style:E.termsText,children:f.termsAndConditions})]}),h?.showBankDetails&&p?.bankName&&n.jsxs(s,{style:E.termsBox,children:[n.jsx(o,{style:E.termsLabel,children:"Bank Details"}),n.jsxs(o,{style:E.termsText,children:[p.bankName," | ",p.accountName," | ",p.accountNumber,p.swiftCode&&` | SWIFT: ${p.swiftCode}`]})]})]}),n.jsx(s,{style:E.totalsColumn,children:n.jsxs(s,{style:E.totalsBox,children:[(x?.managementFee>0||x?.commissionFee>0||x?.discount>0)&&n.jsxs(n.Fragment,{children:[n.jsxs(s,{style:E.totalsRow,children:[n.jsx(o,{style:E.totalsLabel,children:"Subtotal"}),n.jsx(o,{style:E.totalsValue,children:R(v.baseCharge,t)})]}),x?.managementFee>0&&n.jsxs(s,{style:E.totalsRow,children:[n.jsxs(o,{style:E.totalsLabel,children:["Management (",x.managementFee,"%)"]}),n.jsx(o,{style:E.totalsValue,children:R(v.managementAmount,t)})]}),x?.commissionFee>0&&n.jsxs(s,{style:E.totalsRow,children:[n.jsxs(o,{style:E.totalsLabel,children:["Commission (",x.commissionFee,"%)"]}),n.jsx(o,{style:E.totalsValue,children:R(v.commissionAmount,t)})]}),x?.discount>0&&n.jsxs(s,{style:E.totalsRow,children:[n.jsxs(o,{style:E.totalsLabel,children:["Discount (",x.discount,"%)"]}),n.jsxs(o,{style:E.totalsValue,children:["-",R(v.discountAmount,t)]})]})]}),n.jsxs(s,{style:E.totalsFinalRow,children:[n.jsx(o,{style:E.totalsFinalLabel,children:"TOTAL"}),n.jsx(o,{style:E.totalsFinalValue,children:R(v.totalCharge,t)})]})]})})]}),n.jsxs(s,{style:E.footer,fixed:!0,children:[n.jsxs(o,{style:E.footerText,children:[d.name," ",d.website&&`| ${d.website}`]}),n.jsx(o,{style:E.footerBold,children:e.quoteNumber})]})]}),c&&n.jsx(Ft,{quoteNumber:e.quoteNumber,companyWebsite:d?.website})]})}function Bt(){const{quote:e}=nt(),t=st(),[r,a]=d.useState(!1),[s,o]=d.useState(!1),i=Nt(e.sections,e.fees),l=t=>R(t||0,e.currency),u=(i.totalCharge||0)-(i.totalCost||0),p=i.totalCharge>0?u/i.totalCharge*100:0;return n.jsxs("div",{className:"space-y-6 text-gray-100 p-2",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:async()=>{o(!0);try{const t=await c(n.jsx(Rt,{quote:e,currency:e.currency})).toBlob(),r=URL.createObjectURL(t);window.open(r,"_blank"),setTimeout(()=>URL.revokeObjectURL(r),5e3)}catch(r){t.error("Failed to generate preview")}finally{o(!1)}},disabled:s,className:"flex-1 btn-secondary py-3",children:s?n.jsxs("span",{className:"flex items-center justify-center gap-2",children:[n.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):n.jsxs("span",{className:"flex items-center justify-center gap-2",children:[n.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Preview"]})}),n.jsx("button",{onClick:async()=>{a(!0);try{const r=await c(n.jsx(Rt,{quote:e,currency:e.currency})).toBlob(),a=e.client?.company||"Client",s=e.project?.title||"Project",o=`${a} - ${s} - ${e.quoteDate||(new Date).toISOString().split("T")[0]} - Quote.pdf`,i=URL.createObjectURL(r),l=document.createElement("a");l.href=i,l.download=o,l.click(),URL.revokeObjectURL(i),t.success("PDF downloaded successfully")}catch(r){t.error("Failed to generate PDF")}finally{a(!1)}},disabled:r,className:"flex-1 btn-primary py-3 shadow-lg shadow-accent-primary/20",children:r?n.jsxs("span",{className:"flex items-center justify-center gap-2",children:[n.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):n.jsxs("span",{className:"flex items-center justify-center gap-2",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download"]})})]}),n.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Customize PDF colors in Settings  Quote Templates"}),n.jsxs("div",{className:"bg-dark-card border border-dark-border rounded-xl p-5 shadow-lg",children:[n.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4 border-b border-gray-700 pb-2",children:"Financial Summary"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Total Cost"}),n.jsx("p",{className:"text-lg font-mono text-gray-300",children:l(i.totalCost)})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Total Charge"}),n.jsx("p",{className:"text-xl font-bold font-mono text-white",children:l(i.totalCharge)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Est. Profit"}),n.jsx("p",{className:"text-lg font-mono font-bold "+(u>=0?"text-emerald-400":"text-red-400"),children:l(u)})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Gross Margin"}),n.jsxs("p",{className:"text-lg font-mono font-bold "+(p>=30?"text-emerald-400":"text-amber-400"),children:[p.toFixed(1),"%"]})]})]}),n.jsxs("div",{className:"space-y-2 text-sm border-t border-gray-700 pt-4",children:[e.fees.managementFee>0&&n.jsxs("div",{className:"flex justify-between text-gray-400",children:[n.jsxs("span",{children:["Management Fee (",e.fees.managementFee,"%)"]}),n.jsx("span",{children:l(i.managementAmount)})]}),e.fees.commissionFee>0&&n.jsxs("div",{className:"flex justify-between text-gray-400",children:[n.jsxs("span",{children:["Commission (",e.fees.commissionFee,"%)"]}),n.jsx("span",{children:l(i.commissionAmount)})]}),e.fees.discount>0&&n.jsxs("div",{className:"flex justify-between text-red-400",children:[n.jsxs("span",{children:["Discount (",e.fees.discount,"%)"]}),n.jsxs("span",{children:["-",l(i.discountAmount)]})]})]})]}),n.jsxs("div",{className:"bg-dark-card border border-dark-border rounded-xl p-4 shadow-lg",children:[n.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-3 border-b border-gray-700 pb-2",children:"Section Breakdown"}),n.jsx("div",{className:"space-y-3",children:Object.values(e.sections).map(e=>{const t=Object.values(e.subsections).flat().reduce((e,t)=>e+t.cost*t.quantity*t.days,0),r=Object.values(e.subsections).flat().reduce((e,t)=>e+t.charge*t.quantity*t.days,0);return r>0||t>0?n.jsxs("div",{className:"flex items-center justify-between text-sm group",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color}}),n.jsx("span",{className:"text-gray-300",children:e.name})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-gray-200",children:l(r)}),n.jsxs("p",{className:"text-[10px] text-gray-500 opacity-0 group-hover:opacity-100 transition-opacity",children:["Margin: ",r>0?Math.round((r-t)/r*100):0,"%"]})]})]},e.id):null})})]})]})}function Ut(){const{quote:e}=nt(),{settings:t}=ze(),[r,a]=d.useState(!1),[s,o]=d.useState(!0),[i,l]=d.useState(!1),[c,u]=d.useState(null),{client:p,project:f,sections:m,fees:h}=e,g=Nt(m,h||{}),y=!!t.aiSettings?.anthropicKey,b=t.users?.find(t=>t.id===e.preparedBy),x=b?.name?.split(" ")[0]||"Team",v=p.contact?.split(" ")[0]||"there",w=f.startDate?f.endDate&&f.endDate!==f.startDate?`${f.startDate} to ${f.endDate}`:f.startDate:"TBC",k=()=>{const e=[];return Object.values(m||{}).forEach(t=>{if(t?.subsections){Object.values(t.subsections).some(e=>Array.isArray(e)&&e.length>0)&&t.name&&e.push(t.name.toLowerCase())}}),0===e.length?"all the kit and crew":1===e.length?e[0]:2===e.length?`${e[0]} and ${e[1]}`:`${e.slice(0,-1).join(", ")}, and ${e[e.length-1]}`},S=c||(()=>{const t=R(g.totalCharge,e.currency);return{subject:`Quote for ${f.title||"Project"}${"TBC"!==w?` | ${w}`:""}`,body:`Hi ${v},\n\nI've put together the quote for ${f.title||"the project"}${f.venue?` at ${f.venue}`:""}.\n\nAttached is our proposal covering ${k()}. Total comes to ${t}. Quote's valid for ${e.validityDays||30} days.\n\nHappy to jump on a call if you'd like to talk through any of it. Let me know if you have any questions.\n\nBest,\n${x}`}})(),{subject:j,body:C}=S;return n.jsxs("div",{className:"card mt-4",children:[n.jsxs("button",{onClick:()=>o(!s),className:"w-full flex items-center justify-between text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx("svg",{className:"w-4 h-4 text-accent-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Quote Email"]}),n.jsx("svg",{className:"w-4 h-4 transition-transform "+(s?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s&&n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("label",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"Subject"}),n.jsx("button",{onClick:()=>(async e=>{await navigator.clipboard.writeText(e),a(!0),setTimeout(()=>a(!1),2e3)})(j),className:"text-[10px] text-gray-500 hover:text-accent-primary transition-colors",children:"Copy"})]}),n.jsx("div",{className:"bg-slate-800/50 rounded px-2 py-1.5 text-xs text-gray-300 font-mono",children:j})]}),n.jsxs("div",{children:[n.jsx("div",{className:"flex items-center justify-between mb-1",children:n.jsx("label",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"Body"})}),n.jsx("div",{className:"bg-slate-800/50 rounded px-2 py-2 text-xs text-gray-300 whitespace-pre-wrap leading-relaxed max-h-48 overflow-y-auto",children:C})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:async()=>{if(y){l(!0);try{const n=R(g.totalCharge,e.currency),r=`Generate a client email to accompany a production services quote from Tell Productions Sdn Bhd.\n\n## Input Data\n\nCLIENT: ${p.company||"Client"}\nCONTACT: ${v}\nPROJECT: ${f.title||"Project"}\nTYPE: ${f.type||"Production"}\nVENUE: ${f.venue||"TBC"}\nDATES: ${w}\nQUOTE REFERENCE: ${e.quoteNumber}\nTOTAL: ${n}\nCURRENCY: ${e.currency}\nVALIDITY: ${e.validityDays||30} days\nSERVICES: ${k()}\nSENDER: ${x}\n\n## Writing Style\n\nWrite in Tom's voice: professional but casual, direct, efficient. Never stuffy.\n\nTone rules:\n- Use contractions naturally (I'm, we're, it's, we've)\n- Short paragraphs, 1-3 sentences each\n- No waffle or filler\n- Warm but not overly friendly\n- Confident without being pushy\n\n## Email Structure\n\nSubject line: Quote for [Project Title] | [Dates]\n\nBody:\n1. Opening (1 sentence) - Greeting and brief context\n2. The quote (2-3 sentences) - Reference attached quote, mention total and what it covers, note validity\n3. Next steps (1-2 sentences) - Clear call to action, offer to discuss\n4. Sign off: "Best, ${x}"\n\n## Rules\n\nAVOID:\n- Bullet points in the email\n- "Please find attached" (say "I've attached" or "Attached is")\n- "I hope this email finds you well"\n- "Don't hesitate to contact me" (say "Let me know if you have any questions")\n- Long paragraphs\n- Excessive thank-yous\n- Marketing language\n\n## Output Format\n\nReturn ONLY a JSON object:\n{"subject": "the email subject line", "body": "the email body"}\n\nKeep it under 120 words. No bullet points.`,a=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":t.aiSettings.anthropicKey,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:"claude-sonnet-4-20250514",max_tokens:500,messages:[{role:"user",content:r}]})});if(!a.ok)throw new Error("API request failed");const s=await a.json(),o=(s.content[0]?.text||"").match(/\{[\s\S]*\}/);if(o){const e=JSON.parse(o[0]);u(e)}}catch(n){}finally{l(!1)}}},disabled:i||!y,title:y?"":"Add Anthropic API key in Settings",className:`flex-1 py-2 rounded text-xs font-medium transition-all flex items-center justify-center gap-2 ${y?"bg-purple-500/20 text-purple-400 border border-purple-500/30 hover:bg-purple-500/30":"bg-gray-700/50 text-gray-500 border border-gray-600/30 cursor-not-allowed"} disabled:opacity-50`,children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-3 h-3 border-2 border-purple-400 border-t-transparent rounded-full animate-spin"}),"Generating..."]}):n.jsxs(n.Fragment,{children:[n.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),c?"Regenerate":"Generate"]})}),n.jsx("button",{onClick:async()=>{const e=`Subject: ${j}\n\n${C}`;await navigator.clipboard.writeText(e),a(!0),setTimeout(()=>a(!1),2e3)},className:"flex-1 py-2 rounded text-xs font-medium transition-all flex items-center justify-center gap-2 "+(r?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-accent-primary/20 text-accent-primary border border-accent-primary/30 hover:bg-accent-primary/30"),children:r?n.jsxs(n.Fragment,{children:[n.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied!"]}):n.jsxs(n.Fragment,{children:[n.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy"]})})]})]})]})}function $t(){return n.jsx("div",{className:"w-[320px] min-w-[320px] border-l border-dark-border bg-dark-bg overflow-y-auto h-[calc(100vh-60px)] sticky top-[60px]",children:n.jsxs("div",{className:"p-4",children:[n.jsx(Bt,{}),n.jsx(Ut,{})]})})}function Qt(){const{login:e,signup:t,error:r,clearError:a,isLoading:s,rateLimited:o,lockoutTimeRemaining:i,getRemainingAttempts:l,isSupabaseAuth:c}=He(),[u,p]=d.useState("login"),[f,m]=d.useState(""),[h,g]=d.useState(""),[y,b]=d.useState(""),[x,v]=d.useState(""),[w,k]=d.useState(!1),[S,j]=d.useState(0),C=c();d.useEffect(()=>{if(o&&i>0){j(i);const e=setInterval(()=>{j(t=>t<=1?(clearInterval(e),window.location.reload(),0):t-1)},1e3);return()=>clearInterval(e)}},[o,i]);const N=()=>{p("login"===u?"signup":"login"),k(!1),a()},E=!x||y===x,L=l(),T=L<=2&&L>0;return n.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center p-4",children:n.jsxs("div",{className:"w-full max-w-md",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("img",{src:"/tell-logo.svg",alt:"Tell Productions Logo",className:"h-10 mx-auto mb-4",role:"img"}),n.jsx("h1",{className:"text-xl font-bold text-white mb-2",children:"Internal Quote Tool"}),n.jsx("p",{className:"text-gray-500 text-sm",children:"login"===u?"Secure Access":"Request Access"})]}),n.jsxs("div",{className:"bg-dark-card border border-dark-border rounded-xl p-6 shadow-2xl",children:[w?n.jsxs("div",{className:"text-center py-4",children:[n.jsx("div",{className:"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx("svg",{className:"w-8 h-8 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),n.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:"Request Submitted"}),n.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Your access request has been submitted. An administrator will review and approve your account."}),n.jsx("p",{className:"text-gray-500 text-xs mb-6",children:"You will be able to sign in once your account is approved."}),n.jsx("button",{type:"button",onClick:()=>{k(!1),p("login"),m(""),g(""),b(""),v("")},className:"btn-primary px-6 py-2",children:"Back to Sign In"})]}):n.jsxs("form",{onSubmit:async n=>{if(n.preventDefault(),"signup"===u&&C){if(!(f&&h&&y&&x))return;if(y!==x)return;return void(await t(f,h,y)&&k(!0))}if(C){if(!h||!y)return;await e(h,y)}else{if(!y)return;await e(y)}},className:"space-y-5",noValidate:!0,children:[C&&"signup"===u&&n.jsxs("div",{children:[n.jsx("label",{htmlFor:"name",className:"label",children:"Full Name"}),n.jsx("input",{id:"name",name:"name",type:"text",value:f,onChange:e=>{m(e.target.value),r&&a()},placeholder:"Your full name",className:"input",autoFocus:!0,autoComplete:"name",disabled:o,required:!0})]}),C&&n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"label",children:"Email Address"}),n.jsx("input",{id:"email",name:"email",type:"email",value:h,onChange:e=>{g(e.target.value),r&&a()},placeholder:"your.email@tellproductions.com",className:"input",autoFocus:"login"===u,autoComplete:"email",disabled:o,required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"password",className:"label",children:C?"Password":"Access Password"}),n.jsx("input",{id:"password",name:"password",type:"password",value:y,onChange:e=>{b(e.target.value),r&&a()},placeholder:"signup"===u?"Create a password":C?"Enter your password":"Enter access password",className:C?"input":"input text-center text-lg tracking-widest",autoFocus:!C,autoComplete:"signup"===u?"new-password":"current-password",disabled:o,"aria-invalid":r?"true":"false","aria-describedby":r?"password-error":void 0,required:!0})]}),C&&"signup"===u&&n.jsxs("div",{children:[n.jsx("label",{htmlFor:"confirmPassword",className:"label",children:"Confirm Password"}),n.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:x,onChange:e=>{v(e.target.value),r&&a()},placeholder:"Confirm your password",className:"input "+(E?"":"border-red-500 focus:border-red-500 focus:ring-red-500/20"),autoComplete:"new-password",disabled:o,required:!0}),!E&&n.jsx("p",{className:"mt-1 text-xs text-red-400",children:"Passwords do not match"})]}),T&&!o&&n.jsxs("div",{className:"flex items-center gap-2 text-yellow-400 text-sm bg-yellow-500/10 border border-yellow-500/20 rounded-lg px-3 py-2",children:[n.jsx("svg",{className:"w-4 h-4 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),n.jsxs("span",{children:[L," attempt",1!==L?"s":""," remaining"]})]}),o&&S>0&&n.jsxs("div",{className:"flex items-center gap-2 text-red-400 text-sm bg-red-500/10 border border-red-500/20 rounded-lg px-3 py-2",children:[n.jsx("svg",{className:"w-4 h-4 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold",children:"Account temporarily locked"}),n.jsxs("div",{className:"text-xs",children:["Unlock in ",(D=S,`${Math.floor(D/60)}:${(D%60).toString().padStart(2,"0")}`)]})]})]}),r&&!o&&n.jsxs("div",{id:"password-error",role:"alert",className:"flex items-center gap-2 text-red-400 text-sm bg-red-500/10 border border-red-500/20 rounded-lg px-3 py-2",children:[n.jsx("svg",{className:"w-4 h-4 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),n.jsx("span",{children:r})]}),n.jsx("button",{type:"submit",disabled:s||o||("signup"===u?!(f&&h&&y&&x&&E):C&&!h||!y),className:"btn-primary w-full py-3 text-base disabled:opacity-50 disabled:cursor-not-allowed","aria-busy":s,children:s?n.jsxs("span",{className:"flex items-center justify-center gap-2",children:[n.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n.jsx("span",{children:"signup"===u?"Submitting...":"Signing in..."}),n.jsx("span",{className:"sr-only",children:"Please wait"})]}):o?"Account Locked":"signup"===u?"Request Access":"Sign In"}),C&&n.jsx("div",{className:"flex items-center justify-between text-sm",children:"login"===u?n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",onClick:()=>{alert("Password reset feature coming soon. Contact admin for assistance.")},className:"text-gray-500 hover:text-gray-400 transition-colors",children:"Forgot password?"}),n.jsx("button",{type:"button",onClick:N,className:"text-brand-teal hover:text-brand-teal-light transition-colors",children:"Request access"})]}):n.jsx("button",{type:"button",onClick:N,className:"text-brand-teal hover:text-brand-teal-light transition-colors w-full text-center",children:"Already have an account? Sign in"})})]}),!w&&n.jsx("div",{className:"mt-6 pt-6 border-t border-dark-border",children:n.jsxs("div",{className:"flex items-start gap-2 text-xs text-gray-500",children:[n.jsx("svg",{className:"w-4 h-4 mt-0.5 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-gray-400 mb-1",children:"Security Features"}),n.jsxs("ul",{className:"space-y-0.5",children:[n.jsx("li",{children:" Session expires after 24 hours"}),n.jsx("li",{children:" 5 login attempts before lockout"}),n.jsx("li",{children:" 15-minute lockout period"}),C&&n.jsx("li",{children:" Encrypted authentication tokens"})]})]})]})})]}),n.jsx("p",{className:"text-center text-gray-600 text-xs mt-6",children:"Authorized personnel only  All activity is logged"})]})});var D}function Vt({size:e="md",text:t="Loading..."}){return n.jsxs("div",{className:"flex flex-col items-center justify-center p-8",role:"status","aria-live":"polite",children:[n.jsxs("svg",{className:`${{sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12",xl:"w-16 h-16"}[e]} animate-spin text-accent-primary`,fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t&&n.jsx("p",{className:"mt-3 text-sm text-gray-400",children:t}),n.jsx("span",{className:"sr-only",children:t})]})}function Wt(e={}){const{immediate:t=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:a,onRegisteredSW:s,onRegisterError:o}=e,[i,l]=d.useState(!1),[c,u]=d.useState(!1),[p]=d.useState(()=>function(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:a,onRegisteredSW:s,onRegisterError:o}=e;let i,l,c;return l=async function(){if("serviceWorker"in navigator){if(i=await L(async()=>{const{Workbox:e}=await import("./workbox-window.prod.es5-CLYUWRvB.js");return{Workbox:e}},[]).then(({Workbox:e})=>new e("/sw.js",{scope:"/",type:"classic"})).catch(e=>{o?.(e)}),!i)return;c=()=>{i?.messageSkipWaiting()};{let e=!1;const t=()=>{e=!0,i?.addEventListener("controlling",e=>{e.isUpdate&&window.location.reload()}),n?.()};i.addEventListener("installed",n=>{void 0===n.isUpdate?void 0!==n.isExternal&&n.isExternal?t():!e&&r?.():n.isUpdate||r?.()}),i.addEventListener("waiting",t)}i.register({immediate:t}).then(e=>{s?s("/sw.js",e):a?.(e)}).catch(e=>{o?.(e)})}}(),async(e=!0)=>{await l,c?.()}}({immediate:t,onOfflineReady(){u(!0),r?.()},onNeedRefresh(){l(!0),n?.()},onRegistered:a,onRegisteredSW:s,onRegisterError:o}));return{needRefresh:[i,l],offlineReady:[c,u],updateServiceWorker:p}}const Ht=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},Gt=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim(),Kt=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var Yt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Jt=d.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:s,iconNode:o,...i},l)=>d.createElement("svg",{ref:l,...Yt,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:Gt("lucide",a),...!s&&!Kt(i)&&{"aria-hidden":"true"},...i},[...o.map(([e,t])=>d.createElement(e,t)),...Array.isArray(s)?s:[s]])),Xt=(e,t)=>{const n=d.forwardRef(({className:n,...r},a)=>{return d.createElement(Jt,{ref:a,iconNode:t,className:Gt(`lucide-${s=Ht(e),s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...r});var s});return n.displayName=Ht(e),n},Zt=Xt("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),en=Xt("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),tn=Xt("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),nn=Xt("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),rn=Xt("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function an(){const[e,t]=d.useState(navigator.onLine),[r,a]=d.useState(!1),[s,o]=d.useState(!1),[i,l]=d.useState(null),{needRefresh:[c,u],updateServiceWorker:p}=Wt({onRegistered(e){},onRegisterError(e){}});d.useEffect(()=>{const e=()=>{t(!0),a(!1)},n=()=>{t(!1),a(!0)};return window.addEventListener("online",e),window.addEventListener("offline",n),navigator.onLine||a(!0),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}},[]),d.useEffect(()=>{const e=e=>{e.preventDefault(),l(e);const t=localStorage.getItem("pwa-install-dismissed");(!t||Date.now()-parseInt(t)>6048e5)&&o(!0)};return window.addEventListener("beforeinstallprompt",e),()=>{window.removeEventListener("beforeinstallprompt",e)}},[]);return n.jsxs(n.Fragment,{children:[r&&!e&&n.jsx("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-80 z-50 animate-slide-up",children:n.jsxs("div",{className:"bg-amber-500/90 backdrop-blur-sm text-white px-4 py-3 rounded-lg shadow-lg flex items-center gap-3",children:[n.jsx(tn,{className:"w-5 h-5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-sm",children:"You're offline"}),n.jsx("p",{className:"text-xs text-amber-100",children:"Changes will sync when you reconnect"})]}),n.jsx("button",{onClick:()=>a(!1),className:"p-1 hover:bg-white/20 rounded",children:n.jsx(rn,{className:"w-4 h-4"})})]})}),e&&r&&n.jsx("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-80 z-50 animate-slide-up",children:n.jsxs("div",{className:"bg-emerald-500/90 backdrop-blur-sm text-white px-4 py-3 rounded-lg shadow-lg flex items-center gap-3",children:[n.jsx(nn,{className:"w-5 h-5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-sm",children:"Back online"}),n.jsx("p",{className:"text-xs text-emerald-100",children:"Syncing your changes..."})]}),n.jsx("button",{onClick:()=>a(!1),className:"p-1 hover:bg-white/20 rounded",children:n.jsx(rn,{className:"w-4 h-4"})})]})}),c&&n.jsx("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-80 z-50 animate-slide-up",children:n.jsxs("div",{className:"bg-blue-500/90 backdrop-blur-sm text-white px-4 py-3 rounded-lg shadow-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(en,{className:"w-5 h-5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-sm",children:"Update available"}),n.jsx("p",{className:"text-xs text-blue-100",children:"A new version is ready"})]})]}),n.jsxs("div",{className:"flex gap-2 mt-3",children:[n.jsx("button",{onClick:()=>p(!0),className:"flex-1 bg-white text-blue-600 px-3 py-1.5 rounded text-sm font-medium hover:bg-blue-50 transition-colors",children:"Update now"}),n.jsx("button",{onClick:()=>u(!1),className:"px-3 py-1.5 rounded text-sm hover:bg-white/20 transition-colors",children:"Later"})]})]})}),s&&i&&n.jsx("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-80 z-50 animate-slide-up",children:n.jsxs("div",{className:"bg-dark-card border border-dark-border text-white px-4 py-3 rounded-lg shadow-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-brand-navy to-brand-teal rounded-lg flex items-center justify-center",children:n.jsx(Zt,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-sm",children:"Install Tell Quote"}),n.jsx("p",{className:"text-xs text-gray-400",children:"Add to home screen for quick access"})]})]}),n.jsxs("div",{className:"flex gap-2 mt-3",children:[n.jsx("button",{onClick:async()=>{if(!i)return;i.prompt();const{outcome:e}=await i.userChoice;l(null),o(!1)},className:"flex-1 bg-brand-teal text-white px-3 py-1.5 rounded text-sm font-medium hover:bg-brand-teal/90 transition-colors",children:"Install"}),n.jsx("button",{onClick:()=>{localStorage.setItem("pwa-install-dismissed",Date.now().toString()),o(!1)},className:"px-3 py-1.5 rounded text-sm text-gray-400 hover:bg-dark-border transition-colors",children:"Not now"})]})]})}),!e&&n.jsxs("div",{className:"fixed top-0 left-0 right-0 z-40 bg-amber-500 text-white text-center py-1 text-xs font-medium",children:[n.jsx(tn,{className:"w-3 h-3 inline-block mr-1"}),"Offline Mode - Changes saved locally"]})]})}const sn=[{id:"all",label:"All Templates"},{id:"broadcast",label:"Broadcast"},{id:"streaming",label:"Streaming"},{id:"corporate",label:"Corporate Event"},{id:"sports",label:"Sports"},{id:"concert",label:"Concert/Live"},{id:"general",label:"General"}];function on({isOpen:e,onClose:t,onSelectTemplate:r,onStartBlank:a}){const s=ht(e=>e.templates),o=ht(e=>e.deleteTemplate),[i,l]=d.useState("all"),[c,u]=d.useState(""),[p,f]=d.useState(null),m=d.useMemo(()=>{let e=s;if("all"!==i&&(e=e.filter(e=>e.category===i)),c.trim()){const t=c.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.description?.toLowerCase().includes(t))}return e.sort((e,t)=>t.usageCount!==e.usageCount?(t.usageCount||0)-(e.usageCount||0):new Date(t.createdAt)-new Date(e.createdAt))},[s,i,c]);if(!e)return null;return n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>t()}),n.jsxs("div",{className:"relative bg-dark-card border border-dark-border rounded-xl shadow-2xl w-full max-w-2xl max-h-[85vh] flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-border",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-brand-teal to-brand-navy flex items-center justify-center",children:n.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-white",children:"Choose a Template"}),n.jsxs("p",{className:"text-xs text-gray-400",children:[s.length," templates available"]})]})]}),n.jsx("button",{onClick:()=>t(),className:"p-2 hover:bg-white/5 rounded-lg transition-colors",children:n.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"p-4 border-b border-dark-border space-y-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),n.jsx("input",{type:"text",value:c,onChange:e=>u(e.target.value),placeholder:"Search templates...",className:"input pl-10"})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:sn.map(e=>n.jsx("button",{onClick:()=>l(e.id),className:"px-3 py-1.5 text-xs font-medium rounded-full transition-colors "+(i===e.id?"bg-brand-teal text-white":"bg-dark-bg text-gray-400 hover:bg-white/5 hover:text-white"),children:e.label},e.id))})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:0===m.length?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-800 flex items-center justify-center",children:n.jsx("svg",{className:"w-8 h-8 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),n.jsx("p",{className:"text-gray-400 mb-2",children:"No templates found"}),n.jsx("p",{className:"text-sm text-gray-500",children:0===s.length?"Create your first template by saving a quote":"Try adjusting your search or category filter"})]}):n.jsx("div",{className:"grid gap-3",children:m.map(e=>{return n.jsxs("div",{className:"group relative bg-dark-bg border border-dark-border rounded-lg p-4 hover:border-brand-teal/50 transition-all cursor-pointer",onClick:()=>r(e),children:[n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h3",{className:"font-medium text-white truncate",children:e.name}),e.usageCount>0&&n.jsxs("span",{className:"px-1.5 py-0.5 text-[10px] bg-brand-teal/20 text-brand-teal rounded",children:["Used ",e.usageCount,"x"]})]}),e.description&&n.jsx("p",{className:"text-sm text-gray-400 line-clamp-1 mb-2",children:e.description}),n.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),(t=e.sections,t?Object.values(t).reduce((e,t)=>e+Object.values(t.subsections||{}).reduce((e,t)=>e+(t.items?.length||0),0),0):0)," items"]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.region," / ",e.currency]}),n.jsx("span",{className:"px-2 py-0.5 bg-gray-800 rounded text-gray-400 capitalize",children:e.category})]})]}),n.jsx("button",{onClick:t=>{t.stopPropagation(),f(e.id)},className:"opacity-0 group-hover:opacity-100 p-2 hover:bg-red-500/10 text-gray-500 hover:text-red-400 rounded-lg transition-all",title:"Delete template",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),p===e.id&&n.jsxs("div",{className:"absolute inset-0 bg-dark-bg/95 rounded-lg flex items-center justify-center gap-3 p-4",children:[n.jsx("span",{className:"text-sm text-gray-300",children:"Delete this template?"}),n.jsx("button",{onClick:t=>{t.stopPropagation(),(async e=>{await o(e),f(null)})(e.id)},className:"px-3 py-1.5 bg-red-500 text-white text-sm rounded-lg hover:bg-red-600",children:"Delete"}),n.jsx("button",{onClick:e=>{e.stopPropagation(),f(null)},className:"px-3 py-1.5 bg-gray-700 text-white text-sm rounded-lg hover:bg-gray-600",children:"Cancel"})]})]},e.id);var t})})}),n.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-dark-border bg-dark-bg/50",children:[n.jsxs("button",{onClick:a,className:"btn btn-ghost",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Start Blank"]}),n.jsx("button",{onClick:()=>t(),className:"btn btn-ghost",children:"Cancel"})]})]})]})}const ln="tell_opportunities",cn="tell_opportunities_sync_queue",un={GCC:["Saudi Arabia","UAE","Qatar","Kuwait","Bahrain","Oman"],"Central Asia":["Kazakhstan","Uzbekistan","Turkmenistan","Tajikistan","Kyrgyzstan","Afghanistan"],SEA:["Malaysia","Singapore","Indonesia","Thailand","Vietnam","Philippines","Myanmar","Cambodia","Laos","Brunei"]},dn=[...un.GCC,...un["Central Asia"],...un.SEA],pn=e=>un.GCC.includes(e)?"GCC":un["Central Asia"].includes(e)?"Central Asia":un.SEA.includes(e)?"SEA":"Other";function fn(){try{const e=localStorage.getItem(ln);return e?JSON.parse(e):[]}catch(e){return[]}}function mn(e){try{localStorage.setItem(ln,JSON.stringify(e))}catch(t){}}function hn(){try{const e=localStorage.getItem(cn);return e?JSON.parse(e):[]}catch(e){return[]}}function gn(e){try{localStorage.setItem(cn,JSON.stringify(e))}catch(t){}}function yn(){return`${Date.now()}-${Math.random().toString(36).substring(2,11)}`}function bn(e){return{id:e.id.includes("-")&&e.id.length>30?void 0:e.id,title:e.title,client_id:e.clientId,client:e.client,region:e.region,country:e.country,status:e.status,value:e.value,currency:e.currency,probability:e.probability,source:e.source,competitors:e.competitors,contacts:e.contacts,account_owner_id:e.accountOwnerId,brief:e.brief,notes:e.notes,next_action:e.nextAction,next_action_date:e.nextActionDate,expected_close_date:e.expectedCloseDate,converted_to_quote_id:e.convertedToQuoteId}}function xn(e){return{id:e.id,title:e.title,clientId:e.client_id,client:e.client||{},region:e.region,country:e.country,status:e.status||"active",value:e.value,currency:e.currency||"USD",probability:e.probability||50,source:e.source||"",competitors:e.competitors||[],contacts:e.contacts||[],accountOwnerId:e.account_owner_id||null,brief:e.brief||"",notes:e.notes||"",nextAction:e.next_action||"",nextActionDate:e.next_action_date,expectedCloseDate:e.expected_close_date,convertedToQuoteId:e.converted_to_quote_id,createdAt:e.created_at,updatedAt:e.updated_at,_synced:!0}}const vn=u(T((e,t)=>({opportunities:fn(),loading:!1,syncStatus:"idle",syncError:null,pendingSyncCount:hn().length,initialize:async()=>{if(Q()){e({loading:!0,syncStatus:"syncing"});try{const{data:r,error:a}=await $.from("opportunities").select("*").order("created_at",{ascending:!1});if(a)throw a;const s=(r||[]).map(xn),o=fn().filter(e=>!e._synced&&!s.find(t=>t.id===e.id));if(o.length>0)for(const e of o)try{const{data:t,error:n}=await $.from("opportunities").insert(bn(e)).select().single();if(!n&&t){const e=xn(t);s.unshift(e)}}catch(n){}mn(s),e({opportunities:s,loading:!1,syncStatus:"success",syncError:null}),await t().processSyncQueue()}catch(n){e({loading:!1,syncStatus:"error",syncError:n.message})}}else e({loading:!1,syncStatus:"idle"})},processSyncQueue:async()=>{if(!Q())return;const t=hn();if(0===t.length)return;const n=[];for(const e of t)try{if("insert"===e.action){const{error:t}=await $.from("opportunities").insert(e.data);if(t)throw t}else if("update"===e.action){const{error:t}=await $.from("opportunities").update(e.data).eq("id",e.id);if(t)throw t}else if("delete"===e.action){const{error:t}=await $.from("opportunities").delete().eq("id",e.id);if(t)throw t}}catch(r){n.push({...e,retries:(e.retries||0)+1,lastError:r.message})}gn(n),e({pendingSyncCount:n.length})},addToSyncQueue:(t,n,r)=>{const a=hn();a.push({action:t,id:n,data:r,timestamp:Date.now()}),gn(a),e({pendingSyncCount:a.length})},syncAllToSupabase:async()=>{if(!Q())return{success:!1,error:"Supabase not configured"};e({syncStatus:"syncing"});const n=t().opportunities;let r=0,a=0;for(const i of n)try{const n=bn(i),{data:a}=await $.from("opportunities").select("id").eq("id",i.id).single();if(a){const{error:e}=await $.from("opportunities").update(n).eq("id",i.id);if(e)throw e}else{const{data:r,error:a}=await $.from("opportunities").insert(n).select().single();if(a)throw a;if(r&&r.id!==i.id){const n=t().opportunities.map(e=>e.id===i.id?{...e,id:r.id,_synced:!0}:e);e({opportunities:n}),mn(n)}}r++}catch(o){a++}const s=t().opportunities.map(e=>({...e,_synced:!0}));return e({opportunities:s,syncStatus:a>0?"error":"success",syncError:a>0?`${a} items failed to sync`:null}),mn(s),{success:0===a,synced:r,errors:a}},addOpportunity:async n=>{const r={id:yn(),title:n.title||"",clientId:n.clientId||null,client:n.client||{},region:n.region||pn(n.country),country:n.country||"",status:n.status||"active",value:n.value||0,currency:n.currency||"USD",probability:n.probability||50,source:n.source||"",competitors:n.competitors||[],contacts:n.contacts||[],accountOwnerId:n.accountOwnerId||null,brief:n.brief||"",notes:n.notes||"",nextAction:n.nextAction||"",nextActionDate:n.nextActionDate||null,expectedCloseDate:n.expectedCloseDate||null,convertedToQuoteId:null,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),_synced:!1};if(e(e=>{const t=[r,...e.opportunities];return mn(t),{opportunities:t}}),Q())try{const{data:t,error:n}=await $.from("opportunities").insert(bn(r)).select().single();if(n)throw n;t&&(e(e=>{const n=e.opportunities.map(e=>e.id===r.id?{...e,id:t.id,_synced:!0}:e);return mn(n),{opportunities:n,syncStatus:"success",syncError:null}}),r.id=t.id)}catch(a){t().addToSyncQueue("insert",r.id,bn(r)),e({syncStatus:"error",syncError:`Failed to sync: ${a.message}`})}return r},updateOpportunity:async(n,r)=>{if(r.country&&!r.region&&(r.region=pn(r.country)),e(e=>{const t=e.opportunities.map(e=>e.id===n?{...e,...r,updatedAt:(new Date).toISOString(),_synced:!1}:e);return mn(t),{opportunities:t}}),Q())try{const t={};if(void 0!==r.title&&(t.title=r.title),void 0!==r.clientId&&(t.client_id=r.clientId),void 0!==r.client&&(t.client=r.client),void 0!==r.region&&(t.region=r.region),void 0!==r.country&&(t.country=r.country),void 0!==r.status&&(t.status=r.status),void 0!==r.value&&(t.value=r.value),void 0!==r.currency&&(t.currency=r.currency),void 0!==r.probability&&(t.probability=r.probability),void 0!==r.source&&(t.source=r.source),void 0!==r.competitors&&(t.competitors=r.competitors),void 0!==r.contacts&&(t.contacts=r.contacts),void 0!==r.accountOwnerId&&(t.account_owner_id=r.accountOwnerId),void 0!==r.brief&&(t.brief=r.brief),void 0!==r.notes&&(t.notes=r.notes),void 0!==r.nextAction&&(t.next_action=r.nextAction),void 0!==r.nextActionDate&&(t.next_action_date=r.nextActionDate),void 0!==r.expectedCloseDate&&(t.expected_close_date=r.expectedCloseDate),void 0!==r.convertedToQuoteId&&(t.converted_to_quote_id=r.convertedToQuoteId),Object.keys(t).length>0){const{error:r}=await $.from("opportunities").update(t).eq("id",n);if(r)throw r;e(e=>{const t=e.opportunities.map(e=>e.id===n?{...e,_synced:!0}:e);return mn(t),{opportunities:t,syncStatus:"success",syncError:null}})}}catch(a){t().addToSyncQueue("update",n,r),e({syncStatus:"error",syncError:`Failed to sync update: ${a.message}`})}},deleteOpportunity:async n=>{if(e(e=>{const t=e.opportunities.filter(e=>e.id!==n);return mn(t),{opportunities:t}}),Q())try{const{error:t}=await $.from("opportunities").delete().eq("id",n);if(t)throw t;e({syncStatus:"success",syncError:null})}catch(r){t().addToSyncQueue("delete",n,null),e({syncStatus:"error",syncError:`Failed to sync delete: ${r.message}`})}},getOpportunity:e=>t().opportunities.find(t=>t.id===e),getClientOpportunities:e=>t().opportunities.filter(t=>t.clientId===e),getOpportunitiesByCountry:e=>t().opportunities.filter(t=>t.country===e),getOpportunitiesByRegion:e=>t().opportunities.filter(t=>t.region===e),getOpportunitiesGroupedByCountry:()=>{const{opportunities:e}=t(),n={};return dn.forEach(e=>{n[e]=[]}),n.Other=[],e.forEach(e=>{const t=e.country||"Other";n[t]?n[t].push(e):n.Other.push(e)}),n},updateStatus:async(e,n)=>{await t().updateOpportunity(e,{status:n})},addContact:(e,n)=>{const r=t().getOpportunity(e);if(!r)return;const a={id:yn(),name:n.name||"",role:n.role||"",email:n.email||"",phone:n.phone||"",isPrimary:n.isPrimary||!1};let s=[...r.contacts||[]];a.isPrimary&&(s=s.map(e=>({...e,isPrimary:!1}))),s.push(a),t().updateOpportunity(e,{contacts:s})},updateContact:(e,n,r)=>{const a=t().getOpportunity(e);if(!a)return;let s=[...a.contacts||[]];r.isPrimary&&(s=s.map(e=>({...e,isPrimary:!1}))),s=s.map(e=>e.id===n?{...e,...r}:e),t().updateOpportunity(e,{contacts:s})},deleteContact:(e,n)=>{const r=t().getOpportunity(e);if(!r)return;const a=(r.contacts||[]).filter(e=>e.id!==n);t().updateOpportunity(e,{contacts:a})},getPipelineStats:()=>{const{opportunities:e}=t(),n=e.filter(e=>"active"===e.status),r=n.reduce((e,t)=>e+(t.value||0),0),a=n.reduce((e,t)=>{const n=(t.probability||0)/100;return e+(t.value||0)*n},0),s={};n.forEach(e=>{const t=e.country||"Other";s[t]||(s[t]={count:0,value:0}),s[t].count++,s[t].value+=e.value||0});const o={};return n.forEach(e=>{const t=e.region||"Other";o[t]||(o[t]={count:0,value:0}),o[t].count++,o[t].value+=e.value||0}),{totalCount:n.length,totalValue:r,weightedValue:a,byCountry:s,byRegion:o,wonCount:e.filter(e=>"won"===e.status).length,lostCount:e.filter(e=>"lost"===e.status).length}},getUpcomingActions:()=>{const{opportunities:e}=t(),n=new Date,r=new Date(n.getTime()+6048e5);return e.filter(e=>{if("active"!==e.status||!e.nextActionDate)return!1;const t=new Date(e.nextActionDate);return t>=n&&t<=r}).sort((e,t)=>new Date(e.nextActionDate)-new Date(t.nextActionDate))},getUnsyncedCount:()=>t().opportunities.filter(e=>!e._synced).length,clearSyncError:()=>{e({syncError:null,syncStatus:"idle"})}}))),wn="tell_activity_logs",kn="tell_activity_sync_queue";function Sn(){try{const e=localStorage.getItem(kn);return e?JSON.parse(e):[]}catch(e){return[]}}function jn(e){try{localStorage.setItem(kn,JSON.stringify(e))}catch(t){}}function Cn(){try{const e=localStorage.getItem(wn);return e?JSON.parse(e):[]}catch(e){return[]}}function Nn(e){try{localStorage.setItem(wn,JSON.stringify(e))}catch(t){}}const En={call:{label:"Call",icon:"phone",color:"text-green-400",bgColor:"bg-green-400/10"},email:{label:"Email",icon:"mail",color:"text-blue-400",bgColor:"bg-blue-400/10"},meeting:{label:"Meeting",icon:"users",color:"text-purple-400",bgColor:"bg-purple-400/10"},note:{label:"Note",icon:"file-text",color:"text-gray-400",bgColor:"bg-gray-400/10"},task:{label:"Task",icon:"check-square",color:"text-amber-400",bgColor:"bg-amber-400/10"},quote_sent:{label:"Quote Sent",icon:"send",color:"text-cyan-400",bgColor:"bg-cyan-400/10"},quote_won:{label:"Quote Won",icon:"trophy",color:"text-emerald-400",bgColor:"bg-emerald-400/10"},quote_lost:{label:"Quote Lost",icon:"x-circle",color:"text-red-400",bgColor:"bg-red-400/10"},follow_up:{label:"Follow-up",icon:"clock",color:"text-orange-400",bgColor:"bg-orange-400/10"},other:{label:"Other",icon:"more-horizontal",color:"text-gray-400",bgColor:"bg-gray-400/10"}},Ln=u(T((e,t)=>({activities:Cn(),loading:!1,syncStatus:"idle",syncError:null,pendingSyncCount:Sn().length,clearSyncError:()=>{e({syncError:null,syncStatus:"idle"})},getUnsyncedCount:()=>{const e=Sn(),n=t().activities.filter(e=>!1===e._synced);return e.length+n.length},addToSyncQueue:(t,n,r)=>{const a=Sn();a.push({action:t,id:n,data:r,timestamp:Date.now()}),jn(a),e({pendingSyncCount:a.length})},processSyncQueue:async()=>{if(!Q())return;const t=Sn();if(0===t.length)return;e({syncStatus:"syncing"});const n=[];for(const e of t)try{if("create"===e.action){const{error:t}=await $.from("activity_logs").insert(e.data);if(t)throw t}else if("update"===e.action){const{error:t}=await $.from("activity_logs").update(e.data).eq("id",e.id);if(t)throw t}else if("delete"===e.action){const{error:t}=await $.from("activity_logs").delete().eq("id",e.id);if(t)throw t}}catch(r){n.push(e)}jn(n),e({syncStatus:n.length>0?"error":"success",syncError:n.length>0?`${n.length} items failed to sync`:null,pendingSyncCount:n.length})},syncAllToSupabase:async()=>{const{processSyncQueue:e}=t();await e()},initialize:async()=>{if(Q()){e({loading:!0,syncStatus:"syncing"});try{const{data:n,error:r}=await $.from("activity_logs").select("*").order("activity_date",{ascending:!1}).limit(500);if(r)throw r;const a=(n||[]).map(e=>({id:e.id,clientId:e.client_id,contactId:e.contact_id,opportunityId:e.opportunity_id,quoteId:e.quote_id,type:e.type,title:e.title,description:e.description,loggedBy:e.logged_by,loggedByName:e.logged_by_name,activityDate:e.activity_date,followUpDate:e.follow_up_date,followUpCompleted:e.follow_up_completed,createdAt:e.created_at,_synced:!0}));e({activities:a,loading:!1,syncStatus:"success",syncError:null}),Nn(a);Sn().length>0&&t().processSyncQueue()}catch(n){e({loading:!1,syncStatus:"error",syncError:n.message})}}else e({loading:!1,syncStatus:"idle"})},getClientActivities:e=>t().activities.filter(t=>t.clientId===e),getOpportunityActivities:e=>t().activities.filter(t=>t.opportunityId===e),getContactActivities:(e,n)=>t().activities.filter(t=>t.clientId===e&&t.contactId===n),getUpcomingFollowUps:(e=7)=>{const n=new Date((new Date).getTime()+24*e*60*60*1e3);return t().activities.filter(e=>e.followUpDate&&!e.followUpCompleted&&new Date(e.followUpDate)<=n).sort((e,t)=>new Date(e.followUpDate)-new Date(t.followUpDate))},getOverdueFollowUps:()=>{const e=new Date;return t().activities.filter(t=>t.followUpDate&&!t.followUpCompleted&&new Date(t.followUpDate)<e).sort((e,t)=>new Date(e.followUpDate)-new Date(t.followUpDate))},addActivity:async n=>{const{activities:r,addToSyncQueue:a}=t(),s={id:`${Date.now()}-${Math.random().toString(36).substring(2,11)}`,...n,activityDate:n.activityDate||(new Date).toISOString(),createdAt:(new Date).toISOString(),_synced:!1},o=[s,...r];if(e({activities:o}),Nn(o),Q()){const n={client_id:s.clientId,contact_id:s.contactId,opportunity_id:s.opportunityId,quote_id:s.quoteId,type:s.type,title:s.title,description:s.description,logged_by:s.loggedBy,logged_by_name:s.loggedByName,activity_date:s.activityDate,follow_up_date:s.followUpDate,follow_up_completed:s.followUpCompleted||!1};try{const{data:r,error:a}=await $.from("activity_logs").insert(n).select().single();if(a)throw a;if(r){const n={...s,id:r.id,_synced:!0},a=t().activities.map(e=>e.id===s.id?n:e);e({activities:a,syncStatus:"success",syncError:null}),Nn(a)}}catch(i){a("create",s.id,n),e({syncStatus:"error",syncError:i.message})}}return s},updateActivity:async(n,r)=>{const{activities:a,addToSyncQueue:s}=t(),o=a.map(e=>e.id===n?{...e,...r,_synced:!1}:e);if(e({activities:o}),Nn(o),Q()){const a={};void 0!==r.title&&(a.title=r.title),void 0!==r.description&&(a.description=r.description),void 0!==r.type&&(a.type=r.type),void 0!==r.activityDate&&(a.activity_date=r.activityDate),void 0!==r.followUpDate&&(a.follow_up_date=r.followUpDate),void 0!==r.followUpCompleted&&(a.follow_up_completed=r.followUpCompleted);try{const{error:r}=await $.from("activity_logs").update(a).eq("id",n);if(r)throw r;const s=t().activities.map(e=>e.id===n?{...e,_synced:!0}:e);e({activities:s,syncStatus:"success",syncError:null}),Nn(s)}catch(i){s("update",n,a),e({syncStatus:"error",syncError:i.message})}}},completeFollowUp:async e=>{await t().updateActivity(e,{followUpCompleted:!0})},deleteActivity:async n=>{const{activities:r,addToSyncQueue:a}=t(),s=r.filter(e=>e.id!==n);if(e({activities:s}),Nn(s),Q())try{const{error:t}=await $.from("activity_logs").delete().eq("id",n);if(t)throw t;e({syncStatus:"success",syncError:null})}catch(o){a("delete",n,null),e({syncStatus:"error",syncError:o.message})}}})));Ln.subscribe(e=>e.activities,e=>Nn(e));const Tn=d.lazy(()=>L(()=>import("./ClientsPage-lEBv8T9Q.js"),__vite__mapDeps([0,1,2,3,4,5]))),Dn=d.lazy(()=>L(()=>import("./ClientDetailPage-COGhKdbe.js"),__vite__mapDeps([6,1,2,3,4,5]))),_n=d.lazy(()=>L(()=>import("./OpportunitiesPage-B3dYG43-.js"),__vite__mapDeps([7,1,2,3,8,5]))),An=d.lazy(()=>L(()=>import("./OpportunityDetailPage-BCXpmJYI.js"),__vite__mapDeps([9,1,2,3,5]))),Pn=d.lazy(()=>L(()=>import("./RateCardPage-Di0wjhV_.js"),__vite__mapDeps([10,1,2,3,5]))),In=d.lazy(()=>L(()=>import("./DashboardPage-CnucA6LG.js"),__vite__mapDeps([11,1,2,3,5]))),zn=d.lazy(()=>L(()=>import("./QuotesPage-BhdkY8J8.js"),__vite__mapDeps([12,1,2,3,5]))),On=d.lazy(()=>L(()=>import("./SettingsPage-DYqCPmdk.js"),__vite__mapDeps([13,1,2,3,5]))),qn=d.lazy(()=>L(()=>import("./FSPage-D9_2ktjQ.js"),__vite__mapDeps([14,1,2,3,8,5]))),Fn=d.lazy(()=>L(()=>import("./CommercialTasksPage--7eEPw8X.js"),__vite__mapDeps([15,1,2,3,5])));function Mn(){const{isAuthenticated:e}=He(),t=nt(e=>e.initialize),r=ge(e=>e.initialize),a=se(e=>e.initialize),s=ze(e=>e.initialize),o=vn(e=>e.initialize),i=Ln(e=>e.initialize),l=ht(e=>e.initialize),c=nt(e=>e.resetQuote),u=nt(e=>e.loadQuoteData),[p,f]=d.useState("dashboard"),[m,h]=d.useState(null),[g,y]=d.useState(null),[b,x]=d.useState(!1),[v,w]=d.useState(!1),[k,S]=d.useState(null),j=nt(e=>e.quote),{confirmNavigateAway:C,markAsSaved:N}=function(e,t){const n=d.useRef(null),r=d.useCallback(()=>{if(!e)return!1;if(!n.current)return!1;const r={...t},a={...n.current};return delete r.updatedAt,delete a.updatedAt,JSON.stringify(r)!==JSON.stringify(a)},[t,e]),a=d.useCallback(()=>{e&&t&&(n.current={...t})},[t,e]),s=d.useCallback(e=>{r()?window.confirm("You have unsaved changes. Are you sure you want to leave?")&&(n.current=null,e()):e()},[r]);return d.useEffect(()=>{const e=e=>{if(r())return e.preventDefault(),e.returnValue="",""};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[r]),{hasUnsavedChanges:r,confirmNavigateAway:s,markAsSaved:a}}("editor"===p,j),E=d.useCallback(e=>{h(e),f("client-detail")},[]),L=d.useCallback((e=null)=>{S(e),w(!0)},[]),T=d.useCallback(e=>{if(e){const t=ge.getState().getClient(e);t&&nt.getState().setClientDetails({company:t.company,contact:t.contact,email:t.email,phone:t.phone})}},[]),D=d.useCallback(e=>{c();const t={sections:e.sections||{},currency:e.currency||"USD",region:e.region||"SEA",managementFee:e.fees?.managementFee||0,commissionFee:e.fees?.commissionFee||0,discountPercent:e.fees?.discountPercent||0,...e.projectDefaults||{}};u(t),T(k),ht.getState().incrementUsageCount(e.id),w(!1),S(null),f("editor")},[c,u,T,k]),_=d.useCallback(()=>{c(),T(k),w(!1),S(null),f("editor")},[c,T,k]),A=d.useCallback(()=>{w(!1),S(null)},[]),P=d.useCallback(e=>{e&&e.sections&&u(e),f("editor")},[u]),I=d.useCallback(()=>{C(()=>f("clients"))},[C]),z=d.useCallback(()=>{C(()=>f("rate-card"))},[C]),O=d.useCallback(()=>{C(()=>f("dashboard"))},[C]),q=d.useCallback(()=>{C(()=>f("settings"))},[C]),F=d.useCallback(()=>{C(()=>f("quotes"))},[C]),M=d.useCallback(()=>{C(()=>f("fs"))},[C]),R=d.useCallback(()=>{C(()=>f("opportunities"))},[C]),B=d.useCallback(()=>{C(()=>f("tasks"))},[C]),U=d.useCallback(e=>{y(e),f("opportunity-detail")},[]),$=d.useCallback(e=>{c(),e.client&&nt.getState().setClientDetails({company:e.client.company||"",contact:e.client.contact||"",email:e.client.email||"",phone:e.client.phone||"",address:e.client.address||""}),e.project&&nt.getState().setProjectDetails({...e.project,opportunityId:e.opportunityId}),e.currency&&nt.getState().setCurrency(e.currency),e.region&&nt.getState().setRegion(e.region);const t=nt.getState();t.loadQuoteData({...t.quote,quoteDate:(new Date).toISOString().split("T")[0]}),f("editor")},[c]),Q=d.useCallback(()=>{x(e=>!e)},[]);if(d.useEffect(()=>{"editor"===p&&j.quoteNumber&&N()},[p,j.quoteNumber,N]),d.useEffect(()=>{e&&(t(),r(),a(),s(),o(),i(),l())},[e,t,r,a,s,o,i,l]),!e)return n.jsx(Qt,{});return n.jsxs("div",{className:"min-h-screen bg-dark-bg flex flex-col",children:[n.jsx(an,{}),n.jsx(xt,{view:p,onGoToClients:I,onGoToRateCard:z,onGoToDashboard:O,onGoToQuotes:F,onGoToSettings:q,onGoToFS:M,onGoToOpportunities:R,onGoToTasks:B,selectedClientId:m}),(()=>{switch(p){case"clients":return n.jsx(d.Suspense,{fallback:n.jsx(Vt,{text:"Loading clients..."}),children:n.jsx("main",{id:"main-content",tabIndex:"-1",children:n.jsx(Tn,{onSelectClient:E})})});case"client-detail":return n.jsx(d.Suspense,{fallback:n.jsx(Vt,{text:"Loading client details..."}),children:n.jsx("main",{id:"main-content",tabIndex:"-1",children:n.jsx(Dn,{clientId:m,onBackToDashboard:O,onEditQuote:P,onNewQuote:L,onSelectOpportunity:U})})});case"opportunities":return n.jsx(d.Suspense,{fallback:n.jsx(Vt,{text:"Loading opportunities..."}),children:n.jsx("main",{id:"main-content",tabIndex:"-1",children:n.jsx(_n,{onSelectOpportunity:U})})});case"opportunity-detail":return n.jsx(d.Suspense,{fallback:n.jsx(Vt,{text:"Loading opportunity..."}),children:n.jsx("main",{id:"main-content",tabIndex:"-1",children:n.jsx(An,{opportunityId:g,onBack:R,onConvertToQuote:$})})});case"rate-card":return n.jsx(d.Suspense,{fallback:n.jsx(Vt,{text:"Loading rate card..."}),children:n.jsx("main",{id:"main-content",tabIndex:"-1",children:n.jsx(Pn,{})})});case"dashboard":return n.jsx(d.Suspense,{fallback:n.jsx(Vt,{text:"Loading dashboard..."}),children:n.jsx("main",{id:"main-content",tabIndex:"-1",children:n.jsx(In,{onViewQuote:P,onNewQuote:L,onGoToOpportunities:R})})});case"quotes":return n.jsx(d.Suspense,{fallback:n.jsx(Vt,{text:"Loading quotes..."}),children:n.jsx("main",{id:"main-content",tabIndex:"-1",children:n.jsx(zn,{onEditQuote:P,onNewQuote:L})})});case"settings":return n.jsx(d.Suspense,{fallback:n.jsx(Vt,{text:"Loading settings..."}),children:n.jsx("main",{id:"main-content",tabIndex:"-1",children:n.jsx(On,{})})});case"tasks":return n.jsx(d.Suspense,{fallback:n.jsx(Vt,{text:"Loading tasks..."}),children:n.jsx("main",{id:"main-content",tabIndex:"-1",children:n.jsx(Fn,{})})});case"fs":return n.jsx(d.Suspense,{fallback:n.jsx(Vt,{text:"Loading..."}),children:n.jsx("main",{id:"main-content",tabIndex:"-1",children:n.jsx(qn,{onExit:O})})});default:return n.jsxs("main",{id:"main-content",className:"flex-1 flex flex-col lg:flex-row max-w-[1920px] mx-auto w-full",tabIndex:"-1",children:[n.jsx("button",{onClick:Q,className:"lg:hidden fixed bottom-4 right-4 z-50 btn-primary rounded-full p-4 shadow-xl","aria-label":b?"Show editor":"Show preview",children:b?n.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}):n.jsxs("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),n.jsx("div",{className:(b?"hidden lg:flex":"flex")+" flex-1",children:n.jsx(Dt,{onGoToSettings:q})}),n.jsx("div",{className:(b?"flex":"hidden lg:flex")+" w-full lg:w-[320px] lg:min-w-[320px]",children:n.jsx($t,{})})]})}})(),n.jsx(on,{isOpen:v,onClose:A,onSelectTemplate:D,onStartBlank:_})]})}class Rn extends p.Component{constructor(e){super(e),t(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()}),this.state={hasError:!1,error:null,errorInfo:null,copied:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?n.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center p-4",children:n.jsxs("div",{className:"max-w-2xl w-full bg-dark-card border border-red-500/30 rounded-xl p-8 shadow-2xl",children:[n.jsx("div",{className:"flex items-center justify-center mb-6",children:n.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/20 flex items-center justify-center",children:n.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-100 text-center mb-2",children:"Something went wrong"}),n.jsx("p",{className:"text-gray-400 text-center mb-6",children:"The application encountered an unexpected error. Your work has been auto-saved."}),n.jsxs("details",{className:"mb-6 bg-dark-bg rounded-lg border border-dark-border",children:[n.jsx("summary",{className:"px-4 py-3 cursor-pointer text-sm text-gray-400 hover:text-gray-300 select-none",children:"Show error details"}),n.jsx("div",{className:"px-4 pb-4 pt-2",children:n.jsxs("div",{className:"font-mono text-xs text-red-400 bg-red-500/5 p-4 rounded border border-red-500/20 overflow-auto max-h-64",children:[this.state.error&&this.state.error.toString(),n.jsx("br",{}),n.jsx("br",{}),this.state.errorInfo&&this.state.errorInfo.componentStack]})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n.jsxs("button",{onClick:this.handleReset,className:"flex-1 btn-primary py-3 flex items-center justify-center gap-2",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reload Application"]}),n.jsxs("button",{onClick:()=>{const e=`Error: ${this.state.error}\n\nStack: ${this.state.errorInfo?.componentStack}`;navigator.clipboard.writeText(e),this.setState({copied:!0}),setTimeout(()=>this.setState({copied:!1}),2e3)},className:"flex-1 btn-ghost py-3 flex items-center justify-center gap-2 "+(this.state.copied?"text-green-400":""),children:[this.state.copied?n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),this.state.copied?"Copied!":"Copy Error Details"]})]}),n.jsx("p",{className:"text-xs text-gray-600 text-center mt-6",children:"If this problem persists, please contact support with the error details."})]})}):this.props.children}}N.createRoot(document.getElementById("root")).render(n.jsx(d.StrictMode,{children:n.jsx(Rn,{children:n.jsx(ot,{children:n.jsx(Mn,{})})})}));export{En as A,Rt as C,P as F,un as R,nt as a,ze as b,Ln as c,Nt as d,M as e,R as f,He as g,vn as h,dn as i,pn as j,se as k,st as l,Q as m,$ as s,ge as u};
