import{j as e}from"./pdf-vendor-CqWdlgKa.js";import{r as t}from"./zustand-vendor-BohoUguQ.js";import{u as r,b as s,h as a,d as n,e as l,R as o,f as i}from"./index-CeFs1Yio.js";import{R as d,C as c,a as x,X as u,Y as p,T as h,L as m,A as g,b,P as j,c as y,d as f,B as v,e as N,f as k}from"./charts-vendor-BbtJWQl0.js";import"./react-vendor-DRPWudcR.js";import"./supabase-vendor-DWEVVlJw.js";const w={teal:"#0F8B8D",navy:"#143642",orange:"#FE7F2D",green:"#10B981",red:"#EF4444",purple:"#8B5CF6",amber:"#F59E0B",blue:"#3B82F6"},D=[w.teal,w.navy,w.orange,w.green,w.purple,w.amber];function M({onExit:M}){const{savedQuotes:S,clients:F}=r(),{settings:C}=s(),{opportunities:R}=a(),E=C.exchangeRates||{},[P]=t.useState("USD"),B=t.useRef(null),[L,A]=t.useState(!1);t.useEffect(()=>{(async()=>{try{B.current&&document.fullscreenEnabled&&(await B.current.requestFullscreen(),A(!0))}catch(e){}})();const e=()=>{A(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e),document.fullscreenElement&&document.exitFullscreen().catch(()=>{})}},[]);const K=t.useMemo(()=>{const e=[],t=new Date;for(let r=11;r>=0;r--){const s=new Date(t.getFullYear(),t.getMonth()-r,1),a=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`;e.push({month:s.toLocaleDateString("en-US",{month:"short",year:"2-digit"}),monthKey:a,revenue:0,profit:0,cost:0,won:0,pipeline:0,quotes:0})}return S.forEach(t=>{const r=t.project?.startDate?new Date(t.project.startDate):t.createdAt?new Date(t.createdAt):null;if(!r)return;const s=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`,a=e.find(e=>e.monthKey===s);if(!a)return;const o=n(t.sections||{},t.fees||{}),i=l(o.totalCharge,t.currency||"USD",P,E),d=l(o.totalCost,t.currency||"USD",P,E),c=i-d;a.quotes++,"won"===t.status||"approved"===t.status?(a.revenue+=i,a.profit+=c,a.cost+=d,a.won++):"dead"!==t.status&&(a.pipeline+=i)}),e},[S,E,P]),W=t.useMemo(()=>{const e={draft:0,sent:0,approved:0,won:0,dead:0};return S.forEach(t=>{void 0!==e[t.status]&&e[t.status]++}),[{name:"Draft",value:e.draft,color:"#6B7280"},{name:"Sent",value:e.sent,color:w.blue},{name:"Approved",value:e.approved,color:w.amber},{name:"Won",value:e.won,color:w.green},{name:"Lost",value:e.dead,color:w.red}].filter(e=>e.value>0)},[S]),z=t.useMemo(()=>{const e={};return S.forEach(t=>{if("won"!==t.status&&"approved"!==t.status)return;const r=t.client?.company||"Unknown",s=n(t.sections||{},t.fees||{}),a=l(s.totalCharge,t.currency||"USD",P,E);e[r]=(e[r]||0)+a}),Object.entries(e).map(([e,t])=>({name:e.length>15?e.substring(0,15)+"...":e,revenue:t})).sort((e,t)=>t.revenue-e.revenue).slice(0,8)},[S,E,P]),O=t.useMemo(()=>{const e={};return S.forEach(t=>{"won"!==t.status&&"approved"!==t.status||Object.entries(t.sections||{}).forEach(([r,s])=>{const a=r.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase());let n=0;Object.values(s.subsections||{}).forEach(e=>{e.forEach(e=>{n+=(e.charge||0)*(e.quantity||1)*(e.days||1)})});const o=l(n,t.currency||"USD",P,E);e[a]=(e[a]||0)+o})}),Object.entries(e).map(([e,t])=>({name:e.replace("Production ",""),value:t})).sort((e,t)=>t.value-e.value).slice(0,6)},[S,E,P]),$=t.useMemo(()=>{const e=[],t=new Date;for(let r=3;r>=0;r--){const s=new Date(t.getFullYear(),t.getMonth()-3*r-2,1),a=new Date(t.getFullYear(),t.getMonth()-3*r+1,0);let n=0,l=0;S.forEach(e=>{const t=e.createdAt?new Date(e.createdAt):null;!t||t<s||t>a||"won"!==e.status&&"approved"!==e.status&&"dead"!==e.status||(l++,"won"!==e.status&&"approved"!==e.status||n++)}),e.push({quarter:"Q"+(4-r),winRate:l>0?Math.round(n/l*100):0,won:n,lost:l-n})}return e},[S]),U=t.useMemo(()=>{let e=0,t=0,r=0,s=0,a=0,o=0,i=0,d=0,c=0,x=0,u=0,p=0;const h=new Date,m=h.getMonth(),g=h.getFullYear();S.forEach(h=>{const b=n(h.sections||{},h.fees||{}),j=l(b.totalCharge,h.currency||"USD",P,E),y=j-l(b.totalCost,h.currency||"USD",P,E),f=h.createdAt?new Date(h.createdAt):null,v=f&&f.getMonth()===m&&f.getFullYear()===g,N=f&&f.getFullYear()===g;"won"===h.status||"approved"===h.status?(e+=j,t+=y,s++,j>o&&(o=j),v&&(i+=j,d+=y),N&&(x+=j,u+=y)):"dead"===h.status?a++:(r+=j,p++),v&&c++});const b=s+a;return{totalRevenue:e,totalProfit:t,totalPipeline:r,avgDealSize:s>0?e/s:0,winRate:b>0?Math.round(s/b*100):0,totalQuotes:S.length,totalClients:F.length,profitMargin:e>0?Math.round(t/e*100):0,largestDeal:o,thisMonthRevenue:i,thisMonthProfit:d,thisMonthQuotes:c,ytdRevenue:x,ytdProfit:u,pipelineCount:p,wonCount:s,lostCount:a}},[S,F,E,P]),V=t.useMemo(()=>{const e=new Date,t=[];for(let r=0;r<6;r++){const s=new Date(e.getFullYear(),e.getMonth()+r,1),a=new Date(e.getFullYear(),e.getMonth()+r+1,0);let o=0,i=0;S.forEach(e=>{if("dead"===e.status)return;const t=e.project?.startDate?new Date(e.project.startDate):null;if(!t||t<s||t>a)return;const r=n(e.sections||{},e.fees||{}),d=l(r.totalCharge,e.currency||"USD",P,E);"won"===e.status||"approved"===e.status?o+=d:i+=d}),t.push({month:s.toLocaleDateString("en-US",{month:"short"}),won:o,pipeline:i,total:o+i})}return t},[S,E,P]),Y=t.useMemo(()=>{const e=R.filter(e=>"active"===e.status),t=R.filter(e=>"won"===e.status),r=R.filter(e=>"lost"===e.status),s=e.reduce((e,t)=>e+l(t.value||0,t.currency||"USD",P,E),0),a=e.reduce((e,t)=>{const r=(t.probability||0)/100;return e+l(t.value||0,t.currency||"USD",P,E)*r},0),n=t.reduce((e,t)=>e+l(t.value||0,t.currency||"USD",P,E),0),i={};Object.keys(o).forEach(t=>{const r=e.filter(e=>e.region===t);i[t]={count:r.length,value:r.reduce((e,t)=>e+l(t.value||0,t.currency||"USD",P,E),0)}});const d={};e.forEach(e=>{const t=e.country||"Other";d[t]||(d[t]={count:0,value:0}),d[t].count++,d[t].value+=l(e.value||0,e.currency||"USD",P,E)});const c=Object.entries(d).map(([e,t])=>({name:e,...t})).sort((e,t)=>t.value-e.value).slice(0,8);return{activeCount:e.length,wonCount:t.length,lostCount:r.length,totalValue:s,weightedValue:a,wonValue:n,byRegion:i,topCountries:c,avgProbability:e.length>0?Math.round(e.reduce((e,t)=>e+(t.probability||0),0)/e.length):0}},[R,E,P]),T=t.useMemo(()=>Object.entries(Y.byRegion).map(([e,t])=>({name:e,value:t.value,count:t.count})).filter(e=>e.count>0),[Y]),Q=({active:t,payload:r,label:s})=>t&&r?e.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-lg p-3 shadow-xl",children:[e.jsx("p",{className:"text-gray-400 text-xs mb-1",children:s}),r.map((t,r)=>e.jsxs("p",{className:"text-sm",style:{color:t.color},children:[t.name,": ","number"==typeof t.value&&t.value>100?i(t.value,P,0):t.value]},r))]}):null;return e.jsxs("div",{ref:B,className:"fixed inset-0 bg-[#0a0a0a] z-50 overflow-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-[#0a0a0a]/95 backdrop-blur-sm border-b border-gray-800 px-6 py-3 flex items-center justify-between z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h1",{className:"text-xl font-bold text-white tracking-wide",children:"ANALYTICS DASHBOARD"}),e.jsx("span",{className:"text-xs px-2 py-1 rounded "+(L?"text-green-400 bg-green-900/30":"text-gray-500 bg-gray-800"),children:L?"FULLSCREEN":"WINDOWED"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:async()=>{try{document.fullscreenElement?await document.exitFullscreen():B.current&&await B.current.requestFullscreen()}catch(e){}},className:"text-gray-400 hover:text-white transition-colors flex items-center gap-2 text-sm px-3 py-1.5 rounded-lg hover:bg-gray-800",title:L?"Exit Fullscreen":"Enter Fullscreen",children:L?e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5l5.25 5.25"})}):e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"})})}),e.jsxs("button",{onClick:()=>{document.fullscreenElement?document.exitFullscreen().then(()=>M()).catch(()=>M()):M()},className:"text-gray-400 hover:text-white transition-colors flex items-center gap-2 text-sm px-3 py-1.5 rounded-lg hover:bg-red-900/30 hover:text-red-400",children:[e.jsx("span",{children:"Exit"}),e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 to-green-950/20 border border-green-800/30 rounded-xl p-4",children:[e.jsx("p",{className:"text-[10px] text-green-400/70 uppercase tracking-wider mb-1",children:"Total Revenue"}),e.jsx("p",{className:"text-lg font-bold text-green-400",children:i(U.totalRevenue,P,0)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-teal-900/30 to-teal-950/20 border border-teal-800/30 rounded-xl p-4",children:[e.jsx("p",{className:"text-[10px] text-teal-400/70 uppercase tracking-wider mb-1",children:"Total Profit"}),e.jsx("p",{className:"text-lg font-bold text-teal-400",children:i(U.totalProfit,P,0)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-900/30 to-amber-950/20 border border-amber-800/30 rounded-xl p-4",children:[e.jsx("p",{className:"text-[10px] text-amber-400/70 uppercase tracking-wider mb-1",children:"Pipeline Value"}),e.jsx("p",{className:"text-lg font-bold text-amber-400",children:i(U.totalPipeline,P,0)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-purple-950/20 border border-purple-800/30 rounded-xl p-4",children:[e.jsx("p",{className:"text-[10px] text-purple-400/70 uppercase tracking-wider mb-1",children:"Avg Deal Size"}),e.jsx("p",{className:"text-lg font-bold text-purple-400",children:i(U.avgDealSize,P,0)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-900/30 to-blue-950/20 border border-blue-800/30 rounded-xl p-4",children:[e.jsx("p",{className:"text-[10px] text-blue-400/70 uppercase tracking-wider mb-1",children:"Win Rate"}),e.jsxs("p",{className:"text-lg font-bold text-blue-400",children:[U.winRate,"%"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-900/30 to-pink-950/20 border border-pink-800/30 rounded-xl p-4",children:[e.jsx("p",{className:"text-[10px] text-pink-400/70 uppercase tracking-wider mb-1",children:"Profit Margin"}),e.jsxs("p",{className:"text-lg font-bold text-pink-400",children:[U.profitMargin,"%"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/30 border border-gray-700/30 rounded-xl p-4",children:[e.jsx("p",{className:"text-[10px] text-gray-400/70 uppercase tracking-wider mb-1",children:"Total Quotes"}),e.jsx("p",{className:"text-lg font-bold text-gray-300",children:U.totalQuotes})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/30 border border-gray-700/30 rounded-xl p-4",children:[e.jsx("p",{className:"text-[10px] text-gray-400/70 uppercase tracking-wider mb-1",children:"Clients"}),e.jsx("p",{className:"text-lg font-bold text-gray-300",children:U.totalClients})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-cyan-900/30 to-cyan-950/20 border border-cyan-800/30 rounded-xl p-4",children:[e.jsx("p",{className:"text-[10px] text-cyan-400/70 uppercase tracking-wider mb-1",children:"This Month"}),e.jsx("p",{className:"text-lg font-bold text-cyan-400",children:i(U.thisMonthRevenue,P,0)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-900/30 to-emerald-950/20 border border-emerald-800/30 rounded-xl p-4",children:[e.jsx("p",{className:"text-[10px] text-emerald-400/70 uppercase tracking-wider mb-1",children:"Month Profit"}),e.jsx("p",{className:"text-lg font-bold text-emerald-400",children:i(U.thisMonthProfit,P,0)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-900/30 to-indigo-950/20 border border-indigo-800/30 rounded-xl p-4",children:[e.jsx("p",{className:"text-[10px] text-indigo-400/70 uppercase tracking-wider mb-1",children:"YTD Revenue"}),e.jsx("p",{className:"text-lg font-bold text-indigo-400",children:i(U.ytdRevenue,P,0)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-violet-900/30 to-violet-950/20 border border-violet-800/30 rounded-xl p-4",children:[e.jsx("p",{className:"text-[10px] text-violet-400/70 uppercase tracking-wider mb-1",children:"YTD Profit"}),e.jsx("p",{className:"text-lg font-bold text-violet-400",children:i(U.ytdProfit,P,0)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-900/30 to-orange-950/20 border border-orange-800/30 rounded-xl p-4",children:[e.jsx("p",{className:"text-[10px] text-orange-400/70 uppercase tracking-wider mb-1",children:"Largest Deal"}),e.jsx("p",{className:"text-lg font-bold text-orange-400",children:i(U.largestDeal,P,0)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-rose-900/30 to-rose-950/20 border border-rose-800/30 rounded-xl p-4",children:[e.jsx("p",{className:"text-[10px] text-rose-400/70 uppercase tracking-wider mb-1",children:"Quotes This Month"}),e.jsx("p",{className:"text-lg font-bold text-rose-400",children:U.thisMonthQuotes})]}),e.jsxs("div",{className:"bg-gradient-to-br from-lime-900/30 to-lime-950/20 border border-lime-800/30 rounded-xl p-4",children:[e.jsx("p",{className:"text-[10px] text-lime-400/70 uppercase tracking-wider mb-1",children:"Deals Won"}),e.jsx("p",{className:"text-lg font-bold text-lime-400",children:U.wonCount})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-900/30 to-red-950/20 border border-red-800/30 rounded-xl p-4",children:[e.jsx("p",{className:"text-[10px] text-red-400/70 uppercase tracking-wider mb-1",children:"Deals Lost"}),e.jsx("p",{className:"text-lg font-bold text-red-400",children:U.lostCount})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-cyan-900/20 via-teal-900/20 to-emerald-900/20 border border-cyan-800/30 rounded-xl p-4",children:[e.jsx("h3",{className:"text-xs font-semibold text-cyan-400 uppercase tracking-wider mb-3",children:"Opportunities Pipeline"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-1",children:"Active Opps"}),e.jsx("p",{className:"text-lg font-bold text-white",children:Y.activeCount})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-1",children:"Pipeline Value"}),e.jsx("p",{className:"text-lg font-bold text-cyan-400",children:i(Y.totalValue,P,0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-1",children:"Weighted Value"}),e.jsx("p",{className:"text-lg font-bold text-teal-400",children:i(Y.weightedValue,P,0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-1",children:"Avg Probability"}),e.jsxs("p",{className:"text-lg font-bold text-amber-400",children:[Y.avgProbability,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-1",children:"Opps Won"}),e.jsx("p",{className:"text-lg font-bold text-green-400",children:Y.wonCount})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-1",children:"Won Value"}),e.jsx("p",{className:"text-lg font-bold text-green-400",children:i(Y.wonValue,P,0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-1",children:"Opps Lost"}),e.jsx("p",{className:"text-lg font-bold text-red-400",children:Y.lostCount})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-1",children:"Total Opps"}),e.jsx("p",{className:"text-lg font-bold text-gray-300",children:R.length})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-gray-900/50 border border-gray-800 rounded-xl p-5",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-4",children:"Monthly Revenue & Profit"}),e.jsx("div",{className:"h-[280px]",children:e.jsx(d,{width:"100%",height:"100%",children:e.jsxs(c,{data:K,children:[e.jsx(x,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(u,{dataKey:"month",stroke:"#6B7280",fontSize:11}),e.jsx(p,{stroke:"#6B7280",fontSize:11,tickFormatter:e=>`$${(e/1e3).toFixed(0)}k`}),e.jsx(h,{content:e.jsx(Q,{})}),e.jsx(m,{}),e.jsx(g,{type:"monotone",dataKey:"revenue",name:"Revenue",fill:w.teal,fillOpacity:.3,stroke:w.teal,strokeWidth:2}),e.jsx(g,{type:"monotone",dataKey:"profit",name:"Profit",fill:w.green,fillOpacity:.3,stroke:w.green,strokeWidth:2}),e.jsx(b,{type:"monotone",dataKey:"pipeline",name:"Pipeline",stroke:w.amber,strokeWidth:2,strokeDasharray:"5 5",dot:!1})]})})})]}),e.jsxs("div",{className:"bg-gray-900/50 border border-gray-800 rounded-xl p-5",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-4",children:"Quote Status"}),e.jsx("div",{className:"h-[280px] flex items-center justify-center",children:e.jsx(d,{width:"100%",height:"100%",children:e.jsxs(j,{children:[e.jsx(y,{data:W,cx:"50%",cy:"50%",innerRadius:60,outerRadius:90,paddingAngle:2,dataKey:"value",children:W.map((t,r)=>e.jsx(f,{fill:t.color},`cell-${r}`))}),e.jsx(h,{content:e.jsx(Q,{})}),e.jsx(m,{})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gray-900/50 border border-gray-800 rounded-xl p-5",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-4",children:"6-Month Forecast"}),e.jsx("div",{className:"h-[220px]",children:e.jsx(d,{width:"100%",height:"100%",children:e.jsxs(v,{data:V,children:[e.jsx(x,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(u,{dataKey:"month",stroke:"#6B7280",fontSize:11}),e.jsx(p,{stroke:"#6B7280",fontSize:11,tickFormatter:e=>`$${(e/1e3).toFixed(0)}k`}),e.jsx(h,{content:e.jsx(Q,{})}),e.jsx(m,{}),e.jsx(N,{dataKey:"won",name:"Won",stackId:"a",fill:w.green,radius:[0,0,0,0]}),e.jsx(N,{dataKey:"pipeline",name:"Pipeline",stackId:"a",fill:w.amber,radius:[4,4,0,0]})]})})})]}),e.jsxs("div",{className:"bg-gray-900/50 border border-gray-800 rounded-xl p-5",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-4",children:"Top Clients by Revenue"}),e.jsx("div",{className:"h-[220px]",children:e.jsx(d,{width:"100%",height:"100%",children:e.jsxs(v,{data:z,layout:"vertical",children:[e.jsx(x,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(u,{type:"number",stroke:"#6B7280",fontSize:10,tickFormatter:e=>`$${(e/1e3).toFixed(0)}k`}),e.jsx(p,{type:"category",dataKey:"name",stroke:"#6B7280",fontSize:10,width:100}),e.jsx(h,{content:e.jsx(Q,{})}),e.jsx(N,{dataKey:"revenue",name:"Revenue",fill:w.teal,radius:[0,4,4,0]})]})})})]}),e.jsxs("div",{className:"bg-gray-900/50 border border-gray-800 rounded-xl p-5",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-4",children:"Revenue by Service"}),e.jsx("div",{className:"h-[220px]",children:e.jsx(d,{width:"100%",height:"100%",children:e.jsxs(j,{children:[e.jsx(y,{data:O,cx:"50%",cy:"50%",outerRadius:80,paddingAngle:2,dataKey:"value",label:({name:e,percent:t})=>`${e} ${(100*t).toFixed(0)}%`,labelLine:!1,children:O.map((t,r)=>e.jsx(f,{fill:D[r%D.length]},`cell-${r}`))}),e.jsx(h,{content:e.jsx(Q,{})})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-900/50 border border-gray-800 rounded-xl p-5",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-4",children:"Opportunities by Region"}),e.jsx("div",{className:"h-[200px]",children:T.length>0?e.jsx(d,{width:"100%",height:"100%",children:e.jsxs(v,{data:T,children:[e.jsx(x,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(u,{dataKey:"name",stroke:"#6B7280",fontSize:11}),e.jsx(p,{stroke:"#6B7280",fontSize:11,tickFormatter:e=>`$${(e/1e3).toFixed(0)}k`}),e.jsx(h,{content:e.jsx(Q,{})}),e.jsx(N,{dataKey:"value",name:"Pipeline Value",fill:w.teal,radius:[4,4,0,0]})]})}):e.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:"No active opportunities"})})]}),e.jsxs("div",{className:"bg-gray-900/50 border border-gray-800 rounded-xl p-5",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-4",children:"Top Countries by Opportunity Value"}),e.jsx("div",{className:"h-[200px]",children:Y.topCountries.length>0?e.jsx(d,{width:"100%",height:"100%",children:e.jsxs(v,{data:Y.topCountries,layout:"vertical",children:[e.jsx(x,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(u,{type:"number",stroke:"#6B7280",fontSize:10,tickFormatter:e=>`$${(e/1e3).toFixed(0)}k`}),e.jsx(p,{type:"category",dataKey:"name",stroke:"#6B7280",fontSize:10,width:100}),e.jsx(h,{content:e.jsx(Q,{})}),e.jsx(N,{dataKey:"value",name:"Pipeline Value",fill:w.navy,radius:[0,4,4,0]})]})}):e.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:"No active opportunities"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-900/50 border border-gray-800 rounded-xl p-5",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-4",children:"Quarterly Win Rate"}),e.jsx("div",{className:"h-[200px]",children:e.jsx(d,{width:"100%",height:"100%",children:e.jsxs(c,{data:$,children:[e.jsx(x,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(u,{dataKey:"quarter",stroke:"#6B7280",fontSize:11}),e.jsx(p,{yAxisId:"left",stroke:"#6B7280",fontSize:11}),e.jsx(p,{yAxisId:"right",orientation:"right",stroke:"#6B7280",fontSize:11,domain:[0,100],tickFormatter:e=>`${e}%`}),e.jsx(h,{content:e.jsx(Q,{})}),e.jsx(m,{}),e.jsx(N,{yAxisId:"left",dataKey:"won",name:"Won",fill:w.green,radius:[4,4,0,0]}),e.jsx(N,{yAxisId:"left",dataKey:"lost",name:"Lost",fill:w.red,radius:[4,4,0,0]}),e.jsx(b,{yAxisId:"right",type:"monotone",dataKey:"winRate",name:"Win Rate %",stroke:w.blue,strokeWidth:3,dot:{fill:w.blue,r:5}})]})})})]}),e.jsxs("div",{className:"bg-gray-900/50 border border-gray-800 rounded-xl p-5",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-4",children:"Monthly Activity"}),e.jsx("div",{className:"h-[200px]",children:e.jsx(d,{width:"100%",height:"100%",children:e.jsxs(k,{data:K,children:[e.jsx(x,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(u,{dataKey:"month",stroke:"#6B7280",fontSize:11}),e.jsx(p,{stroke:"#6B7280",fontSize:11}),e.jsx(h,{content:e.jsx(Q,{})}),e.jsx(m,{}),e.jsx(g,{type:"monotone",dataKey:"quotes",name:"Quotes Created",fill:w.purple,fillOpacity:.4,stroke:w.purple,strokeWidth:2}),e.jsx(g,{type:"monotone",dataKey:"won",name:"Deals Won",fill:w.green,fillOpacity:.4,stroke:w.green,strokeWidth:2})]})})})]})]}),e.jsx("div",{className:"text-center text-gray-600 text-xs py-4",children:"Tell Productions Analytics Dashboard â€¢ Data refreshes in real-time"})]})]})}export{M as default};
