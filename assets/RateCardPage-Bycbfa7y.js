import{j as e}from"./pdf-vendor-CqWdlgKa.js";import{r as s}from"./zustand-vendor-BohoUguQ.js";import{k as t,a as r,l as a,m as l,n,I as i,F as o}from"./index-g2Iar00F.js";import"./react-vendor-DRPWudcR.js";import"./supabase-vendor-DWEVVlJw.js";const c=[{id:"MALAYSIA",label:"Malaysia",currencies:["MYR"],defaultCurrency:"MYR"},{id:"SEA",label:"SEA",currencies:["USD","GBP"],defaultCurrency:"USD"},{id:"GULF",label:"GCC",currencies:["USD","GBP"],defaultCurrency:"USD"},{id:"CENTRAL_ASIA",label:"Central Asia",currencies:["USD","GBP"],defaultCurrency:"USD"}],d={MYR:"RM",USD:"$",GBP:"Â£"};function x(){const{items:x,sections:m,addItem:h,updateItem:u,updateItemPricing:p,deleteItem:g,exportToCSV:b,importFromCSV:j,addSection:v,deleteSection:f,renameSection:N,moveSection:y,resetSectionsToDefaults:k,exportPublicRateCard:C}=t(),{rates:w}=r(),S=a(e=>e.syncAllToRateCard),L=a(e=>e.items),M=l(),[A,E]=s.useState(!1),P=s.useRef(null),B=s.useRef(null),[R,D]=s.useState("all"),[I,U]=s.useState("all"),[T,W]=s.useState(""),[$,F]=s.useState(!1),[G,V]=s.useState(!1),[z,H]=s.useState(null),[O,Q]=s.useState(null),[Y,_]=s.useState(!1),[q,K]=s.useState(null),[X,J]=s.useState({SEA:"USD",GULF:"USD",CENTRAL_ASIA:"USD"}),Z=(e,s,t)=>{const r=c.find(e=>e.id===s),a=X[s]||r.defaultCurrency,l=e.pricing?.[s]?.[t]?.baseCurrency||r.defaultCurrency,n=e.pricing?.[s]?.[t]?.amount;return void 0!==n?((e,s,t,r)=>e&&s!==t?e/(r[s]||o[s]||1)*(r[t]||o[t]||1):e)(n,l,a,w):0},ee=(e,s,t)=>e.pricing?.[s]?.[t]?.baseCurrency,se=s.useCallback(()=>{_(!0),B.current&&clearTimeout(B.current),B.current=setTimeout(()=>_(!1),2e3)},[]),[te,re]=s.useState({name:"",description:"",section:m[0]?.id||"other",unit:"day"}),[ae,le]=s.useState(""),[ne,ie]=s.useState(!1),[oe,ce]=s.useState("all"),[de,xe]=s.useState(0),[me,he]=s.useState({cost:!0,charge:!0});s.useEffect(()=>{const e=e=>{"Escape"===e.key&&(O?Q(null):$?F(!1):G?V(!1):ne&&ie(!1))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[O,$,G]),s.useEffect(()=>()=>{B.current&&clearTimeout(B.current)},[]);const ue=x.filter(e=>{const s="all"===R||e.section===R,t=!T||e.name.toLowerCase().includes(T.toLowerCase())||e.description?.toLowerCase().includes(T.toLowerCase()),r=e.itemType||n(e.section);return s&&t&&("all"===I||r===I)}),pe=(e,s,t,r)=>{const a=c.find(e=>e.id===s),l=X[s]||a.defaultCurrency;p(e,s,t,r,l),se(),K(`${e}-${s}-${t}`),setTimeout(()=>K(null),2e3)},ge=L.filter(e=>e.dayRate||e.weekRate||e.monthRate).length;return e.jsxs("div",{className:"h-[calc(100vh-60px)] flex flex-col bg-dark-bg",children:[e.jsxs("div",{className:"bg-dark-bg border-b border-dark-border p-3 sm:p-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between sm:justify-start gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg sm:text-xl font-bold text-gray-100",children:"Rate Card"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[x.length," services"]})]}),Y&&e.jsxs("span",{className:"text-xs text-green-400 flex items-center gap-1 bg-green-500/10 px-2 py-1 rounded-full",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Saved"]}),e.jsx("button",{onClick:()=>{re({name:"",description:"",section:m[0]?.id||"other",unit:"day"}),F(!0)},className:"sm:hidden btn-primary text-sm",children:"+ Add"})]}),e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-1 sm:pb-0",children:[e.jsx("input",{type:"file",ref:P,className:"hidden",accept:".csv",onChange:e=>{const s=e.target.files[0];s&&j(s).then(e=>{e.success?(M.success(`Imported ${e.count} items successfully`),se()):M.error("Import failed: "+e.error)}),e.target.value=""}}),e.jsx("button",{onClick:()=>P.current?.click(),className:"btn-ghost text-sm flex-shrink-0 hidden sm:flex",children:"Import CSV"}),e.jsxs("div",{className:"relative group hidden sm:block",children:[e.jsxs("button",{className:"btn-ghost text-sm flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export"]}),e.jsxs("div",{className:"hidden group-hover:block absolute right-0 top-full mt-1 bg-dark-card border border-dark-border rounded-lg shadow-xl z-20 min-w-52",children:[e.jsx("button",{onClick:b,className:"w-full px-4 py-2 text-left text-sm hover:bg-dark-bg transition-colors",children:"Full Rate Card (CSV)"}),e.jsxs("div",{className:"border-t border-dark-border",children:[e.jsx("div",{className:"px-4 py-1 text-xs text-gray-500",children:"Public (Charges Only)"}),e.jsx("button",{onClick:()=>C("SEA"),className:"w-full px-4 py-2 text-left text-sm hover:bg-dark-bg transition-colors",children:"SEA Region"}),e.jsx("button",{onClick:()=>C("GULF"),className:"w-full px-4 py-2 text-left text-sm hover:bg-dark-bg transition-colors",children:"Gulf Region"}),e.jsx("button",{onClick:()=>C("CENTRAL_ASIA"),className:"w-full px-4 py-2 text-left text-sm hover:bg-dark-bg transition-colors",children:"Central Asia Region"})]})]})]}),ge>0&&e.jsxs("button",{onClick:async()=>{E(!0);try{const e=await S();e.syncedCount>0?(M.success(`Synced ${e.syncedCount} kit items to rate card`),se()):M.info("No kit items with rates to sync"),e.errorCount>0&&M.warning(`${e.errorCount} items failed to sync`)}catch(e){M.error("Failed to sync: "+e.message)}finally{E(!1)}},disabled:A,className:"btn-ghost text-sm flex-shrink-0 hidden sm:flex items-center gap-1 text-teal-400 hover:text-teal-300",title:`Sync ${ge} kit items with rates to rate card`,children:[e.jsx("svg",{className:"w-4 h-4 "+(A?"animate-spin":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),A?"Syncing...":`Sync Kit (${ge})`]}),e.jsxs("button",{onClick:()=>ie(!0),className:"btn-ghost text-sm flex-shrink-0 hidden sm:flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Bulk Markup"]}),e.jsxs("button",{onClick:()=>V(!0),className:"btn-secondary text-sm flex-shrink-0",children:[e.jsx("span",{className:"hidden sm:inline",children:"Manage "}),"Categories"]}),e.jsx("button",{onClick:()=>{re({name:"",description:"",section:m[0]?.id||"other",unit:"day"}),F(!0)},className:"hidden sm:flex btn-primary text-sm flex-shrink-0",children:"+ Add Service"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-4",children:[e.jsx("input",{type:"text",value:T,onChange:e=>W(e.target.value),placeholder:"Search services...",className:"input flex-1 sm:max-w-sm"}),e.jsxs("select",{value:I,onChange:e=>U(e.target.value),className:"input w-full sm:w-40",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:i.SERVICE,children:"ðŸ§‘â€ðŸ’¼ Services"}),e.jsx("option",{value:i.EQUIPMENT,children:"ðŸ“¦ Equipment"}),e.jsx("option",{value:i.EXPENSE,children:"ðŸ’° Expenses"})]}),e.jsxs("select",{value:R,onChange:e=>D(e.target.value),className:"input w-full sm:w-48",children:[e.jsx("option",{value:"all",children:"All Categories"}),m.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]})]}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/75 backdrop-blur-md modal-backdrop",onClick:()=>V(!1),children:e.jsxs("div",{className:"bg-[#1a1f2e] border border-dark-border rounded-xl p-6 w-full max-w-sm shadow-2xl modal-content relative",onClick:e=>e.stopPropagation(),children:[e.jsx("button",{onClick:()=>V(!1),className:"absolute top-4 right-4 p-1 text-gray-500 hover:text-white rounded-lg hover:bg-white/10 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-lg font-bold text-gray-100 mb-4",children:"Manage Categories"}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("input",{type:"text",value:ae,onChange:e=>le(e.target.value),placeholder:"New Category Name",className:"input flex-1"}),e.jsx("button",{onClick:()=>{ae.trim()&&(v(ae),le(""),V(!1),se())},disabled:!ae.trim(),className:"btn-primary whitespace-nowrap",children:"Add"})]}),e.jsxs("div",{className:"space-y-4 max-h-[400px] overflow-y-auto pr-2",children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:"Categories (synced with Quote subsections)"}),(()=>{const s={};return m.forEach((e,t)=>{const r=e.group||"Other";s[r]||(s[r]=[]),s[r].push({...e,originalIndex:t})}),Object.entries(s).map(([s,t])=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-[10px] font-medium text-gray-600 uppercase mb-1 px-2",children:s}),e.jsx("div",{className:"space-y-1",children:t.map(s=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-dark-bg/50 rounded hover:bg-dark-bg transition-colors group",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("button",{onClick:()=>{y(s.id,"up"),se()},disabled:0===s.originalIndex,className:"text-gray-600 hover:text-gray-300 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move up",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),e.jsx("button",{onClick:()=>{y(s.id,"down"),se()},disabled:s.originalIndex===m.length-1,className:"text-gray-600 hover:text-gray-300 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move down",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),e.jsx("input",{type:"text",value:s.name,onChange:e=>{N(s.id,e.target.value),se()},className:"flex-1 bg-transparent text-sm text-gray-300 focus:bg-dark-bg rounded px-2 py-1 border border-transparent focus:border-dark-border"}),e.jsx("button",{onClick:()=>{confirm(`Delete category "${s.name}"? Items will be moved to 'Other'.`)&&(f(s.id),se())},className:"text-gray-600 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity p-1",title:"Delete Category",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},s.id))})]},s))})()]}),e.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-dark-border",children:[e.jsx("button",{onClick:async()=>{confirm("Reset categories to sync with Quote subsections? This will replace all current categories.")&&(await k(),se())},className:"text-xs text-gray-500 hover:text-orange-400 transition-colors",children:"Sync with Quotes"}),e.jsx("button",{onClick:()=>V(!1),className:"btn-ghost",children:"Done"})]})]})}),$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/75 backdrop-blur-md modal-backdrop",onClick:()=>F(!1),children:e.jsxs("div",{className:"bg-[#1a1f2e] border border-dark-border rounded-xl p-6 w-full max-w-md shadow-2xl modal-content relative",onClick:e=>e.stopPropagation(),children:[e.jsx("button",{onClick:()=>F(!1),className:"absolute top-4 right-4 p-1 text-gray-500 hover:text-white rounded-lg hover:bg-white/10 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-lg font-bold text-gray-100 mb-4",children:"Add New Service"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Service Name *"}),e.jsx("input",{type:"text",value:te.name,onChange:e=>re({...te,name:e.target.value}),placeholder:"e.g. Camera Operator",className:"input",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Description"}),e.jsx("input",{type:"text",value:te.description,onChange:e=>re({...te,description:e.target.value}),placeholder:"Optional description",className:"input"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Category"}),e.jsx("select",{value:te.section,onChange:e=>re({...te,section:e.target.value}),className:"input",children:m.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Unit"}),e.jsxs("select",{value:te.unit,onChange:e=>re({...te,unit:e.target.value}),className:"input",children:[e.jsx("option",{value:"day",children:"Per Day"}),e.jsx("option",{value:"item",children:"Per Item"}),e.jsx("option",{value:"project",children:"Per Project"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-dark-border",children:[e.jsx("button",{onClick:()=>F(!1),className:"btn-ghost",children:"Cancel"}),e.jsx("button",{onClick:()=>{if(!te.name.trim())return;const e=h(te);re({name:"",description:"",section:m[0]?.id||"other",unit:"day"}),F(!1),H(e.id),se()},className:"btn-primary",children:"Add Service"})]})]})}),O&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/75 backdrop-blur-md modal-backdrop",onClick:()=>Q(null),children:e.jsxs("div",{className:"bg-[#1a1f2e] border border-dark-border rounded-xl p-6 w-full max-w-md shadow-2xl modal-content relative",onClick:e=>e.stopPropagation(),children:[e.jsx("button",{onClick:()=>Q(null),className:"absolute top-4 right-4 p-1 text-gray-500 hover:text-white rounded-lg hover:bg-white/10 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-lg font-bold text-gray-100 mb-4",children:"Edit Service"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Service Name *"}),e.jsx("input",{type:"text",value:O.name,onChange:e=>Q({...O,name:e.target.value}),className:"input",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Description"}),e.jsx("input",{type:"text",value:O.description,onChange:e=>Q({...O,description:e.target.value}),placeholder:"Optional description",className:"input"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Category"}),e.jsx("select",{value:O.section,onChange:e=>Q({...O,section:e.target.value}),className:"input",children:m.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Unit"}),e.jsxs("select",{value:O.unit,onChange:e=>Q({...O,unit:e.target.value}),className:"input",children:[e.jsx("option",{value:"day",children:"Per Day"}),e.jsx("option",{value:"item",children:"Per Item"}),e.jsx("option",{value:"project",children:"Per Project"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-dark-border",children:[e.jsx("button",{onClick:()=>Q(null),className:"btn-ghost",children:"Cancel"}),e.jsx("button",{onClick:()=>{O?.name.trim()&&(u(O.id,{name:O.name,description:O.description,section:O.section,unit:O.unit}),Q(null),se())},className:"btn-primary",children:"Save Changes"})]})]})}),ne&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/75 backdrop-blur-md modal-backdrop",onClick:()=>ie(!1),children:e.jsxs("div",{className:"bg-[#1a1f2e] border border-dark-border rounded-xl p-6 w-full max-w-md shadow-2xl modal-content relative",onClick:e=>e.stopPropagation(),children:[e.jsx("button",{onClick:()=>ie(!1),className:"absolute top-4 right-4 p-1 text-gray-500 hover:text-white rounded-lg hover:bg-white/10 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-lg font-bold text-gray-100 mb-4",children:"Bulk Markup"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Apply a percentage increase or decrease to multiple items at once."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Category"}),e.jsxs("select",{value:oe,onChange:e=>ce(e.target.value),className:"input",children:[e.jsxs("option",{value:"all",children:["All Categories (",x.length," items)"]}),m.map(s=>{const t=x.filter(e=>e.section===s.id).length;return e.jsxs("option",{value:s.id,children:[s.name," (",t," items)"]},s.id)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Markup Percentage"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:de,onChange:e=>xe(parseFloat(e.target.value)||0),className:"input",placeholder:"e.g. 10 for 10% increase",step:"0.1"}),e.jsx("span",{className:"text-gray-400",children:"%"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use negative values to decrease prices (e.g. -10 for 10% discount)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Apply To"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:me.cost,onChange:e=>he({...me,cost:e.target.checked}),className:"rounded border-gray-600 bg-dark-bg text-accent-primary focus:ring-accent-primary"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Cost"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:me.charge,onChange:e=>he({...me,charge:e.target.checked}),className:"rounded border-gray-600 bg-dark-bg text-accent-primary focus:ring-accent-primary"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Charge"})]})]})]}),0!==de&&e.jsx("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-amber-400",children:[de>0?"Increase":"Decrease"," ",me.cost&&me.charge?"cost and charge":me.cost?"cost only":"charge only"," by ",Math.abs(de),"% for ","all"===oe?"all items":m.find(e=>e.id===oe)?.name||oe,"."]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-dark-border",children:[e.jsx("button",{onClick:()=>ie(!1),className:"btn-ghost",children:"Cancel"}),e.jsx("button",{onClick:()=>{if(0===de)return void M.error("Please enter a markup percentage");const e="all"===oe?x:x.filter(e=>e.section===oe);if(0===e.length)return void M.error("No items found in selected category");const s=1+de/100;let t=0;e.forEach(e=>{c.forEach(t=>{const r=t.id,a=X[r]||t.defaultCurrency;if(me.cost){const t=Z(e,r,"cost")||0;if(t>0){const l=Math.round(t*s*100)/100;p(e.id,r,"cost",l,a)}}if(me.charge){const t=Z(e,r,"charge")||0;if(t>0){const l=Math.round(t*s*100)/100;p(e.id,r,"charge",l,a)}}}),t++}),M.success(`Applied ${de}% markup to ${t} items`),ie(!1),xe(0),se()},disabled:0===de||!me.cost&&!me.charge,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:"Apply Markup"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:0!==ue.length||T?0===ue.length?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-700 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-400 mb-2",children:"No matches found"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Try a different search term"})]}):e.jsx("div",{className:"space-y-2",children:ue.map(s=>e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>H(z===s.id?null:s.id),children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-200 font-medium truncate",children:s.name}),e.jsx("span",{className:"text-xs text-gray-600 px-2 py-0.5 bg-dark-bg rounded flex-shrink-0",children:m.find(e=>e.id===s.section)?.name||"Other"})]}),s.description&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:e=>{e.stopPropagation(),(e=>{Q({id:e.id,name:e.name,description:e.description||"",section:e.section,unit:e.unit||"day"})})(s)},className:"p-1 text-gray-600 hover:text-blue-400",title:"Edit service",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:e=>{e.stopPropagation(),confirm("Delete this service?")&&(g(s.id),se())},className:"p-1 text-gray-600 hover:text-red-400",title:"Delete service",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),e.jsx("svg",{className:"w-5 h-5 text-gray-500 transition-transform "+(z===s.id?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),z===s.id&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-dark-border",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase mb-3",children:"Regional Pricing"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:c.map(t=>{const r=X[t.id]||t.defaultCurrency,a=d[r],l=t.currencies.length>1;return e.jsxs("div",{className:"bg-dark-bg rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-400",children:t.label}),l?e.jsx("div",{className:"flex rounded overflow-hidden border border-dark-border",children:t.currencies.map(s=>e.jsx("button",{onClick:()=>J(e=>({...e,[t.id]:s})),className:"px-2 py-0.5 text-xs font-medium transition-colors "+(r===s?"bg-accent-primary text-white":"bg-dark-card text-gray-500 hover:text-white"),children:d[s]},s))}):e.jsx("span",{className:"text-xs text-gray-600",children:a})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Cost"}),q===`${s.id}-${t.id}-cost`&&e.jsx("span",{className:"text-[10px] text-green-400",children:"âœ“ Saved"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:a}),e.jsx("input",{type:"number",value:Math.round(100*Z(s,t.id,"cost"))/100||"",onChange:e=>pe(s.id,t.id,"cost",e.target.value),className:"input text-sm pl-7",placeholder:"0"})]}),ee(s,t.id,"cost")&&ee(s,t.id,"cost")!==r&&e.jsxs("span",{className:"text-[10px] text-amber-500/70",children:["from ",ee(s,t.id,"cost")]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Charge"}),q===`${s.id}-${t.id}-charge`&&e.jsx("span",{className:"text-[10px] text-green-400",children:"âœ“ Saved"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:a}),e.jsx("input",{type:"number",value:Math.round(100*Z(s,t.id,"charge"))/100||"",onChange:e=>pe(s.id,t.id,"charge",e.target.value),className:"input text-sm pl-7",placeholder:"0"})]}),ee(s,t.id,"charge")&&ee(s,t.id,"charge")!==r&&e.jsxs("span",{className:"text-[10px] text-amber-500/70",children:["from ",ee(s,t.id,"charge")]})]})]})]},t.id)})})]})]},s.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-700 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-400 mb-2",children:"No services yet"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Add your rates and services to use in quotes"}),e.jsx("button",{onClick:()=>F(!0),className:"btn-primary",children:"+ Add Service"})]})})]})}export{x as default};
