const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ClientsPage-Bxl0VwyR.js","assets/pdf-vendor-CqWdlgKa.js","assets/zustand-vendor-BohoUguQ.js","assets/react-vendor-DRPWudcR.js","assets/validation-DQPS0e0-.js","assets/supabase-vendor-DWEVVlJw.js","assets/ClientDetailPage-D_fLlZJt.js","assets/OpportunitiesPage-BcgiAsE1.js","assets/charts-vendor-BbtJWQl0.js","assets/OpportunityDetailPage--vjrMhPr.js","assets/RateCardPage-B5tWCivS.js","assets/DashboardPage-BsYd2v7v.js","assets/QuotesPage-B-heRWCB.js","assets/SettingsPage-BNSoYx-q.js","assets/FSPage-CKi6ilQp.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,n,r)=>((t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r)(t,"symbol"!=typeof n?n+"":n,r);import{j as n,D as r,P as a,S as o,V as l,T as i,I as s,p as c}from"./pdf-vendor-CqWdlgKa.js";import{c as u,r as d,R as f}from"./zustand-vendor-BohoUguQ.js";import{r as p,b as m}from"./react-vendor-DRPWudcR.js";import{c as h}from"./supabase-vendor-DWEVVlJw.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var g,y,b,v,x={exports:{}},w={},k={exports:{}},S={};function j(){return y||(y=1,k.exports=(g||(g=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<a(o,t)))break e;e[r]=t,e[n]=o,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,l=o>>>1;r<l;){var i=2*(r+1)-1,s=e[i],c=i+1,u=e[c];if(0>a(s,n))c<o&&0>a(u,s)?(e[r]=u,e[c]=n,r=c):(e[r]=s,e[i]=n,r=i);else{if(!(c<o&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,i=l.now();e.unstable_now=function(){return l.now()-i}}var s=[],c=[],u=1,d=null,f=3,p=!1,m=!1,h=!1,g=!1,y="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function x(e){for(var a=n(c);null!==a;){if(null===a.callback)r(c);else{if(!(a.startTime<=e))break;r(c),a.sortIndex=a.expirationTime,t(s,a)}a=n(c)}}function w(e){if(h=!1,x(e),!m)if(null!==n(s))m=!0,S||(S=!0,k());else{var t=n(c);null!==t&&A(w,t.startTime-e)}}var k,S=!1,j=-1,C=5,N=-1;function E(){return!(!g&&e.unstable_now()-N<C)}function D(){if(g=!1,S){var t=e.unstable_now();N=t;var a=!0;try{e:{m=!1,h&&(h=!1,b(j),j=-1),p=!0;var o=f;try{t:{for(x(t),d=n(s);null!==d&&!(d.expirationTime>t&&E());){var l=d.callback;if("function"==typeof l){d.callback=null,f=d.priorityLevel;var i=l(d.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof i){d.callback=i,x(t),a=!0;break t}d===n(s)&&r(s),x(t)}else r(s);d=n(s)}if(null!==d)a=!0;else{var u=n(c);null!==u&&A(w,u.startTime-t),a=!1}}break e}finally{d=null,f=o,p=!1}a=void 0}}finally{a?k():S=!1}}}if("function"==typeof v)k=function(){v(D)};else if("undefined"!=typeof MessageChannel){var L=new MessageChannel,T=L.port2;L.port1.onmessage=D,k=function(){T.postMessage(null)}}else k=function(){y(D,0)};function A(t,n){j=y(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e||(C=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_scheduleCallback=function(r,a,o){var l=e.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?l+o:l,r){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return r={id:u++,callback:a,priorityLevel:r,startTime:o,expirationTime:i=o+i,sortIndex:-1},o>l?(r.sortIndex=o,t(c,r),null===n(s)&&r===n(c)&&(h?(b(j),j=-1):h=!0,A(w,o-l))):(r.sortIndex=i,t(s,r),m||p||(m=!0,S||(S=!0,k()))),r},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}}(S)),S)),k.exports}function C(){if(b)return w;b=1;var e=j(),t=p(),n=m();function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function l(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function i(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function s(e){if(o(e)!==e)throw Error(r(188))}function c(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=c(e)))return t;e=e.sibling}return null}var u=Object.assign,d=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),x=Symbol.for("react.consumer"),k=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),T=Symbol.for("react.memo_cache_sentinel"),A=Symbol.iterator;function _(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=A&&e[A]||e["@@iterator"])?e:null}var P=Symbol.for("react.client.reference");function z(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===P?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case g:return"Fragment";case v:return"Profiler";case y:return"StrictMode";case C:return"Suspense";case N:return"SuspenseList";case L:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case h:return"Portal";case k:return e.displayName||"Context";case x:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case E:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}var I=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M={pending:!1,data:null,method:null,action:null},R=[],q=-1;function B(e){return{current:e}}function U(e){0>q||(e.current=R[q],R[q]=null,q--)}function $(e,t){q++,R[q]=e.current,e.current=t}var Q,V,H=B(null),W=B(null),G=B(null),K=B(null);function Y(e,t){switch($(G,t),$(W,e),$(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?vd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=xd(t=vd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(H),$(H,e)}function J(){U(H),U(W),U(G)}function X(e){null!==e.memoizedState&&$(K,e);var t=H.current,n=xd(t,e.type);t!==n&&($(W,e),$(H,n))}function Z(e){W.current===e&&(U(H),U(W)),K.current===e&&(U(K),pf._currentValue=M)}function ee(e){if(void 0===Q)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Q=t&&t[1]||"",V=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Q+e+V}var te=!1;function ne(e,t){if(!e||te)return"";te=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(a){var r=a}Reflect.construct(e,[],n)}else{try{n.call()}catch(o){r=o}e.call(n.prototype)}}else{try{throw Error()}catch(l){r=l}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(i){if(i&&r&&"string"==typeof i.stack)return[i.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=r.DetermineComponentFrameRoot(),l=o[0],i=o[1];if(l&&i){var s=l.split("\n"),c=i.split("\n");for(a=r=0;r<s.length&&!s[r].includes("DetermineComponentFrameRoot");)r++;for(;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;if(r===s.length||a===c.length)for(r=s.length-1,a=c.length-1;1<=r&&0<=a&&s[r]!==c[a];)a--;for(;1<=r&&0<=a;r--,a--)if(s[r]!==c[a]){if(1!==r||1!==a)do{if(r--,0>--a||s[r]!==c[a]){var u="\n"+s[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=a);break}}}finally{te=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?ee(n):""}function re(e,t){switch(e.tag){case 26:case 27:case 5:return ee(e.type);case 16:return ee("Lazy");case 13:return e.child!==t&&null!==t?ee("Suspense Fallback"):ee("Suspense");case 19:return ee("SuspenseList");case 0:case 15:return ne(e.type,!1);case 11:return ne(e.type.render,!1);case 1:return ne(e.type,!0);case 31:return ee("Activity");default:return""}}function ae(e){try{var t="",n=null;do{t+=re(e,n),n=e,e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}var oe=Object.prototype.hasOwnProperty,le=e.unstable_scheduleCallback,ie=e.unstable_cancelCallback,se=e.unstable_shouldYield,ce=e.unstable_requestPaint,ue=e.unstable_now,de=e.unstable_getCurrentPriorityLevel,fe=e.unstable_ImmediatePriority,pe=e.unstable_UserBlockingPriority,me=e.unstable_NormalPriority,he=e.unstable_LowPriority,ge=e.unstable_IdlePriority,ye=e.log,be=e.unstable_setDisableYieldValue,ve=null,xe=null;function we(e){if("function"==typeof ye&&be(e),xe&&"function"==typeof xe.setStrictMode)try{xe.setStrictMode(ve,e)}catch(t){}}var ke=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(Se(e)/je|0)|0},Se=Math.log,je=Math.LN2;var Ce=256,Ne=262144,Ee=4194304;function De(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Le(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var a=0,o=e.suspendedLanes,l=e.pingedLanes;e=e.warmLanes;var i=134217727&r;return 0!==i?0!==(r=i&~o)?a=De(r):0!==(l&=i)?a=De(l):n||0!==(n=i&~e)&&(a=De(n)):0!==(i=r&~o)?a=De(i):0!==l?a=De(l):n||0!==(n=r&~e)&&(a=De(n)),0===a?0:0!==t&&t!==a&&0===(t&o)&&((o=a&-a)>=(n=t&-t)||32===o&&4194048&n)?t:a}function Te(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ae(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function _e(){var e=Ee;return!(62914560&(Ee<<=1))&&(Ee=4194304),e}function Pe(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ze(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ie(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-ke(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function Oe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ke(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}function Fe(e,t){var n=t&-t;return 0!==((n=42&n?1:Me(n))&(e.suspendedLanes|t))?0:n}function Me(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Re(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function qe(){var e=F.p;return 0!==e?e:void 0===(e=window.event)?32:Lf(e.type)}function Be(e,t){var n=F.p;try{return F.p=e,t()}finally{F.p=n}}var Ue=Math.random().toString(36).slice(2),$e="__reactFiber$"+Ue,Qe="__reactProps$"+Ue,Ve="__reactContainer$"+Ue,He="__reactEvents$"+Ue,We="__reactListeners$"+Ue,Ge="__reactHandles$"+Ue,Ke="__reactResources$"+Ue,Ye="__reactMarker$"+Ue;function Je(e){delete e[$e],delete e[Qe],delete e[He],delete e[We],delete e[Ge]}function Xe(e){var t=e[$e];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ve]||n[$e]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Md(e);null!==e;){if(n=e[$e])return n;e=Md(e)}return t}n=(e=n).parentNode}return null}function Ze(e){if(e=e[$e]||e[Ve]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function et(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(r(33))}function tt(e){var t=e[Ke];return t||(t=e[Ke]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function nt(e){e[Ye]=!0}var rt=new Set,at={};function ot(e,t){lt(e,t),lt(e+"Capture",t)}function lt(e,t){for(at[e]=t,e=0;e<t.length;e++)rt.add(t[e])}var it=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),st={},ct={};function ut(e,t,n){if(a=t,oe.call(ct,a)||!oe.call(st,a)&&(it.test(a)?ct[a]=!0:(st[a]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var a}function dt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ft(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function pt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function mt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ht(e){if(!e._valueTracker){var t=mt(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var a=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function gt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=mt(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function yt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var bt=/[\n"\\]/g;function vt(e){return e.replace(bt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function xt(e,t,n,r,a,o,l,i){e.name="",null!=l&&"function"!=typeof l&&"symbol"!=typeof l&&"boolean"!=typeof l?e.type=l:e.removeAttribute("type"),null!=t?"number"===l?(0===t&&""===e.value||e.value!=t)&&(e.value=""+pt(t)):e.value!==""+pt(t)&&(e.value=""+pt(t)):"submit"!==l&&"reset"!==l||e.removeAttribute("value"),null!=t?kt(e,l,pt(t)):null!=n?kt(e,l,pt(n)):null!=r&&e.removeAttribute("value"),null==a&&null!=o&&(e.defaultChecked=!!o),null!=a&&(e.checked=a&&"function"!=typeof a&&"symbol"!=typeof a),null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i?e.name=""+pt(i):e.removeAttribute("name")}function wt(e,t,n,r,a,o,l,i){if(null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o&&(e.type=o),null!=t||null!=n){if(("submit"===o||"reset"===o)&&null==t)return void ht(e);n=null!=n?""+pt(n):"",t=null!=t?""+pt(t):n,i||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=null!=r?r:a)&&"symbol"!=typeof r&&!!r,e.checked=i?e.checked:!!r,e.defaultChecked=!!r,null!=l&&"function"!=typeof l&&"symbol"!=typeof l&&"boolean"!=typeof l&&(e.name=l),ht(e)}function kt(e,t,n){"number"===t&&yt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function St(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+pt(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function jt(e,t,n){null==t||((t=""+pt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+pt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function Ct(e,t,n,a){if(null==t){if(null!=a){if(null!=n)throw Error(r(92));if(I(a)){if(1<a.length)throw Error(r(93));a=a[0]}n=a}null==n&&(n=""),t=n}n=pt(t),e.defaultValue=n,(a=e.textContent)===n&&""!==a&&null!==a&&(e.value=a),ht(e)}function Nt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Et=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Dt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||Et.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Lt(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(r(62));if(e=e.style,null!=n){for(var a in n)!n.hasOwnProperty(a)||null!=t&&t.hasOwnProperty(a)||(0===a.indexOf("--")?e.setProperty(a,""):"float"===a?e.cssFloat="":e[a]="");for(var o in t)a=t[o],t.hasOwnProperty(o)&&n[o]!==a&&Dt(e,o,a)}else for(var l in t)t.hasOwnProperty(l)&&Dt(e,l,t[l])}function Tt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var At=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_t=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pt(e){return _t.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function zt(){}var It=null;function Ot(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ft=null,Mt=null;function Rt(e){var t=Ze(e);if(t&&(e=t.stateNode)){var n=e[Qe]||null;e:switch(e=t.stateNode,t.type){case"input":if(xt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+vt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var o=a[Qe]||null;if(!o)throw Error(r(90));xt(a,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)(a=n[t]).form===e.form&&gt(a)}break e;case"textarea":jt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&St(e,!!n.multiple,t,!1)}}}var qt=!1;function Bt(e,t,n){if(qt)return e(t,n);qt=!0;try{return e(t)}finally{if(qt=!1,(null!==Ft||null!==Mt)&&(tu(),Ft&&(t=Ft,e=Mt,Mt=Ft=null,Rt(t),e)))for(t=0;t<e.length;t++)Rt(e[t])}}function Ut(e,t){var n=e.stateNode;if(null===n)return null;var a=n[Qe]||null;if(null===a)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(r(231,t,typeof n));return n}var $t=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Qt=!1;if($t)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Qt=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch(ep){Qt=!1}var Ht=null,Wt=null,Gt=null;function Kt(){if(Gt)return Gt;var e,t,n=Wt,r=n.length,a="value"in Ht?Ht.value:Ht.textContent,o=a.length;for(e=0;e<r&&n[e]===a[e];e++);var l=r-e;for(t=1;t<=l&&n[r-t]===a[o-t];t++);return Gt=a.slice(e,1<t?1-t:void 0)}function Yt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Jt(){return!0}function Xt(){return!1}function Zt(e){function t(t,n,r,a,o){for(var l in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(l)&&(t=e[l],this[l]=t?t(a):a[l]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?Jt:Xt,this.isPropagationStopped=Xt,this}return u(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Jt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Jt)},persist:function(){},isPersistent:Jt}),t}var en,tn,nn,rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},an=Zt(rn),on=u({},rn,{view:0,detail:0}),ln=Zt(on),sn=u({},on,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nn&&(nn&&"mousemove"===e.type?(en=e.screenX-nn.screenX,tn=e.screenY-nn.screenY):tn=en=0,nn=e),en)},movementY:function(e){return"movementY"in e?e.movementY:tn}}),cn=Zt(sn),un=Zt(u({},sn,{dataTransfer:0})),dn=Zt(u({},on,{relatedTarget:0})),fn=Zt(u({},rn,{animationName:0,elapsedTime:0,pseudoElement:0})),pn=Zt(u({},rn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),mn=Zt(u({},rn,{data:0})),hn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=yn[e])&&!!t[e]}function vn(){return bn}var xn=Zt(u({},on,{key:function(e){if(e.key){var t=hn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Yt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?gn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vn,charCode:function(e){return"keypress"===e.type?Yt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Yt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),wn=Zt(u({},sn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),kn=Zt(u({},on,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vn})),Sn=Zt(u({},rn,{propertyName:0,elapsedTime:0,pseudoElement:0})),jn=Zt(u({},sn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Cn=Zt(u({},rn,{newState:0,oldState:0})),Nn=[9,13,27,32],En=$t&&"CompositionEvent"in window,Dn=null;$t&&"documentMode"in document&&(Dn=document.documentMode);var Ln=$t&&"TextEvent"in window&&!Dn,Tn=$t&&(!En||Dn&&8<Dn&&11>=Dn),An=String.fromCharCode(32),_n=!1;function Pn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var In=!1;var On={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!On[e.type]:"textarea"===t}function Mn(e,t,n,r){Ft?Mt?Mt.push(r):Mt=[r]:Ft=r,0<(t=od(t,"onChange")).length&&(n=new an("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Rn=null,qn=null;function Bn(e){Ju(e,0)}function Un(e){if(gt(et(e)))return e}function $n(e,t){if("change"===e)return t}var Qn=!1;if($t){var Vn;if($t){var Hn="oninput"in document;if(!Hn){var Wn=document.createElement("div");Wn.setAttribute("oninput","return;"),Hn="function"==typeof Wn.oninput}Vn=Hn}else Vn=!1;Qn=Vn&&(!document.documentMode||9<document.documentMode)}function Gn(){Rn&&(Rn.detachEvent("onpropertychange",Kn),qn=Rn=null)}function Kn(e){if("value"===e.propertyName&&Un(qn)){var t=[];Mn(t,qn,e,Ot(e)),Bt(Bn,t)}}function Yn(e,t,n){"focusin"===e?(Gn(),qn=n,(Rn=t).attachEvent("onpropertychange",Kn)):"focusout"===e&&Gn()}function Jn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Un(qn)}function Xn(e,t){if("click"===e)return Un(t)}function Zn(e,t){if("input"===e||"change"===e)return Un(t)}var er="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function tr(e,t){if(er(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!oe.call(t,a)||!er(e[a],t[a]))return!1}return!0}function nr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rr(e,t){var n,r=nr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=nr(r)}}function ar(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ar(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function or(e){for(var t=yt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=yt((e=t.contentWindow).document)}return t}function lr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ir=$t&&"documentMode"in document&&11>=document.documentMode,sr=null,cr=null,ur=null,dr=!1;function fr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;dr||null==sr||sr!==yt(r)||("selectionStart"in(r=sr)&&lr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ur&&tr(ur,r)||(ur=r,0<(r=od(cr,"onSelect")).length&&(t=new an("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=sr)))}function pr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var mr={animationend:pr("Animation","AnimationEnd"),animationiteration:pr("Animation","AnimationIteration"),animationstart:pr("Animation","AnimationStart"),transitionrun:pr("Transition","TransitionRun"),transitionstart:pr("Transition","TransitionStart"),transitioncancel:pr("Transition","TransitionCancel"),transitionend:pr("Transition","TransitionEnd")},hr={},gr={};function yr(e){if(hr[e])return hr[e];if(!mr[e])return e;var t,n=mr[e];for(t in n)if(n.hasOwnProperty(t)&&t in gr)return hr[e]=n[t];return e}$t&&(gr=document.createElement("div").style,"AnimationEvent"in window||(delete mr.animationend.animation,delete mr.animationiteration.animation,delete mr.animationstart.animation),"TransitionEvent"in window||delete mr.transitionend.transition);var br=yr("animationend"),vr=yr("animationiteration"),xr=yr("animationstart"),wr=yr("transitionrun"),kr=yr("transitionstart"),Sr=yr("transitioncancel"),jr=yr("transitionend"),Cr=new Map,Nr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){Cr.set(e,t),ot(t,[e])}Nr.push("scrollEnd");var Dr="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)},Lr=[],Tr=0,Ar=0;function _r(){for(var e=Tr,t=Ar=Tr=0;t<e;){var n=Lr[t];Lr[t++]=null;var r=Lr[t];Lr[t++]=null;var a=Lr[t];Lr[t++]=null;var o=Lr[t];if(Lr[t++]=null,null!==r&&null!==a){var l=r.pending;null===l?a.next=a:(a.next=l.next,l.next=a),r.pending=a}0!==o&&Or(n,a,o)}}function Pr(e,t,n,r){Lr[Tr++]=e,Lr[Tr++]=t,Lr[Tr++]=n,Lr[Tr++]=r,Ar|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function zr(e,t,n,r){return Pr(e,t,n,r),Fr(e)}function Ir(e,t){return Pr(e,null,null,t),Fr(e)}function Or(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var a=!1,o=e.return;null!==o;)o.childLanes|=n,null!==(r=o.alternate)&&(r.childLanes|=n),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(a=!0)),e=o,o=o.return;return 3===e.tag?(o=e.stateNode,a&&null!==t&&(a=31-ke(n),null===(r=(e=o.hiddenUpdates)[a])?e[a]=[t]:r.push(t),t.lane=536870912|n),o):null}function Fr(e){if(50<Hc)throw Hc=0,Wc=null,Error(r(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Mr={};function Rr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qr(e,t,n,r){return new Rr(e,t,n,r)}function Br(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ur(e,t){var n=e.alternate;return null===n?((n=qr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function $r(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Qr(e,t,n,a,o,l){var i=0;if(a=e,"function"==typeof e)Br(e)&&(i=1);else if("string"==typeof e)i=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,H.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case L:return(e=qr(31,n,t,o)).elementType=L,e.lanes=l,e;case g:return Vr(n.children,o,l,t);case y:i=8,o|=24;break;case v:return(e=qr(12,n,t,2|o)).elementType=v,e.lanes=l,e;case C:return(e=qr(13,n,t,o)).elementType=C,e.lanes=l,e;case N:return(e=qr(19,n,t,o)).elementType=N,e.lanes=l,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case k:i=10;break e;case x:i=9;break e;case S:i=11;break e;case E:i=14;break e;case D:i=16,a=null;break e}i=29,n=Error(r(130,null===e?"null":typeof e,"")),a=null}return(t=qr(i,n,t,o)).elementType=e,t.type=a,t.lanes=l,t}function Vr(e,t,n,r){return(e=qr(7,e,r,t)).lanes=n,e}function Hr(e,t,n){return(e=qr(6,e,null,t)).lanes=n,e}function Wr(e){var t=qr(18,null,null,0);return t.stateNode=e,t}function Gr(e,t,n){return(t=qr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Kr=new WeakMap;function Yr(e,t){if("object"==typeof e&&null!==e){var n=Kr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ae(t)},Kr.set(e,t),t)}return{value:e,source:t,stack:ae(t)}}var Jr=[],Xr=0,Zr=null,ea=0,ta=[],na=0,ra=null,aa=1,oa="";function la(e,t){Jr[Xr++]=ea,Jr[Xr++]=Zr,Zr=e,ea=t}function ia(e,t,n){ta[na++]=aa,ta[na++]=oa,ta[na++]=ra,ra=e;var r=aa;e=oa;var a=32-ke(r)-1;r&=~(1<<a),n+=1;var o=32-ke(t)+a;if(30<o){var l=a-a%5;o=(r&(1<<l)-1).toString(32),r>>=l,a-=l,aa=1<<32-ke(t)+a|n<<a|r,oa=o+e}else aa=1<<o|n<<a|r,oa=e}function sa(e){null!==e.return&&(la(e,1),ia(e,1,0))}function ca(e){for(;e===Zr;)Zr=Jr[--Xr],Jr[Xr]=null,ea=Jr[--Xr],Jr[Xr]=null;for(;e===ra;)ra=ta[--na],ta[na]=null,oa=ta[--na],ta[na]=null,aa=ta[--na],ta[na]=null}function ua(e,t){ta[na++]=aa,ta[na++]=oa,ta[na++]=ra,aa=t.id,oa=t.overflow,ra=e}var da=null,fa=null,pa=!1,ma=null,ha=!1,ga=Error(r(519));function ya(e){throw Sa(Yr(Error(r(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),ga}function ba(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[$e]=e,t[Qe]=r,n){case"dialog":Xu("cancel",t),Xu("close",t);break;case"iframe":case"object":case"embed":Xu("load",t);break;case"video":case"audio":for(n=0;n<Ku.length;n++)Xu(Ku[n],t);break;case"source":Xu("error",t);break;case"img":case"image":case"link":Xu("error",t),Xu("load",t);break;case"details":Xu("toggle",t);break;case"input":Xu("invalid",t),wt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Xu("invalid",t);break;case"textarea":Xu("invalid",t),Ct(t,r.value,r.defaultValue,r.children)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||dd(t.textContent,n)?(null!=r.popover&&(Xu("beforetoggle",t),Xu("toggle",t)),null!=r.onScroll&&Xu("scroll",t),null!=r.onScrollEnd&&Xu("scrollend",t),null!=r.onClick&&(t.onclick=zt),t=!0):t=!1,t||ya(e,!0)}function va(e){for(da=e.return;da;)switch(da.tag){case 5:case 31:case 13:return void(ha=!1);case 27:case 3:return void(ha=!0);default:da=da.return}}function xa(e){if(e!==da)return!1;if(!pa)return va(e),pa=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||wd(e.type,e.memoizedProps)),t=!t),t&&fa&&ya(e),va(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));fa=Fd(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));fa=Fd(e)}else 27===n?(n=fa,Dd(e.type)?(e=Od,Od=null,fa=e):fa=n):fa=da?Id(e.stateNode.nextSibling):null;return!0}function wa(){fa=da=null,pa=!1}function ka(){var e=ma;return null!==e&&(null===_c?_c=e:_c.push.apply(_c,e),ma=null),e}function Sa(e){null===ma?ma=[e]:ma.push(e)}var ja=B(null),Ca=null,Na=null;function Ea(e,t,n){$(ja,t._currentValue),t._currentValue=n}function Da(e){e._currentValue=ja.current,U(ja)}function La(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ta(e,t,n,a){var o=e.child;for(null!==o&&(o.return=e);null!==o;){var l=o.dependencies;if(null!==l){var i=o.child;l=l.firstContext;e:for(;null!==l;){var s=l;l=o;for(var c=0;c<t.length;c++)if(s.context===t[c]){l.lanes|=n,null!==(s=l.alternate)&&(s.lanes|=n),La(l.return,n,e),a||(i=null);break e}l=s.next}}else if(18===o.tag){if(null===(i=o.return))throw Error(r(341));i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),La(i,n,e),i=null}else i=o.child;if(null!==i)i.return=o;else for(i=o;null!==i;){if(i===e){i=null;break}if(null!==(o=i.sibling)){o.return=i.return,i=o;break}i=i.return}o=i}}function Aa(e,t,n,a){e=null;for(var o=t,l=!1;null!==o;){if(!l)if(524288&o.flags)l=!0;else if(262144&o.flags)break;if(10===o.tag){var i=o.alternate;if(null===i)throw Error(r(387));if(null!==(i=i.memoizedProps)){var s=o.type;er(o.pendingProps.value,i.value)||(null!==e?e.push(s):e=[s])}}else if(o===K.current){if(null===(i=o.alternate))throw Error(r(387));i.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(null!==e?e.push(pf):e=[pf])}o=o.return}null!==e&&Ta(t,e,n,a),t.flags|=262144}function _a(e){for(e=e.firstContext;null!==e;){if(!er(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Pa(e){Ca=e,Na=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function za(e){return Oa(Ca,e)}function Ia(e,t){return null===Ca&&Pa(e),Oa(e,t)}function Oa(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Na){if(null===e)throw Error(r(308));Na=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Na=Na.next=t;return n}var Fa="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ma=e.unstable_scheduleCallback,Ra=e.unstable_NormalPriority,qa={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ba(){return{controller:new Fa,data:new Map,refCount:0}}function Ua(e){e.refCount--,0===e.refCount&&Ma(Ra,function(){e.controller.abort()})}var $a=null,Qa=0,Va=0,Ha=null;function Wa(){if(0===--Qa&&null!==$a){null!==Ha&&(Ha.status="fulfilled");var e=$a;$a=null,Va=0,Ha=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ga=O.S;O.S=function(e,t){Ic=ue(),"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===$a){var n=$a=[];Qa=0,Va=Qu(),Ha={status:"pending",value:void 0,then:function(e){n.push(e)}}}Qa++,t.then(Wa,Wa)}(0,t),null!==Ga&&Ga(e,t)};var Ka=B(null);function Ya(){var e=Ka.current;return null!==e?e:gc.pooledCache}function Ja(e,t){$(Ka,null===t?Ka.current:t.pool)}function Xa(){var e=Ya();return null===e?null:{parent:qa._currentValue,pool:e}}var Za=Error(r(460)),eo=Error(r(474)),to=Error(r(542)),no={then:function(){}};function ro(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ao(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(zt,zt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw so(e=t.reason),e;default:if("string"==typeof t.status)t.then(zt,zt);else{if(null!==(e=gc)&&100<e.shellSuspendCounter)throw Error(r(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw so(e=t.reason),e}throw lo=t,Za}}function oo(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"==typeof t&&"function"==typeof t.then)throw lo=t,Za;throw t}}var lo=null;function io(){if(null===lo)throw Error(r(459));var e=lo;return lo=null,e}function so(e){if(e===Za||e===to)throw Error(r(483))}var co=null,uo=0;function fo(e){var t=uo;return uo+=1,null===co&&(co=[]),ao(co,e,t)}function po(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function mo(e,t){if(t.$$typeof===d)throw Error(r(525));throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ho(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function a(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(e,t){return(e=Ur(e,t)).index=0,e.sibling=null,e}function l(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function i(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Hr(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===g?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===D&&oo(a)===t.type)?(po(t=o(t,n.props),n),t.return=e,t):(po(t=Qr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Gr(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Vr(n,e.mode,r,a)).return=e,t):((t=o(t,n)).return=e,t)}function p(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Hr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case f:return po(n=Qr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case h:return(t=Gr(t,e.mode,n)).return=e,t;case D:return p(e,t=oo(t),n)}if(I(t)||_(t))return(t=Vr(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return p(e,fo(t),n);if(t.$$typeof===k)return p(e,Ia(e,t),n);mo(e,t)}return null}function m(e,t,n,r){var a=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==a?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case f:return n.key===a?c(e,t,n,r):null;case h:return n.key===a?u(e,t,n,r):null;case D:return m(e,t,n=oo(n),r)}if(I(n)||_(n))return null!==a?null:d(e,t,n,r,null);if("function"==typeof n.then)return m(e,t,fo(n),r);if(n.$$typeof===k)return m(e,t,Ia(e,n),r);mo(e,n)}return null}function y(e,t,n,r,a){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return s(t,e=e.get(n)||null,""+r,a);if("object"==typeof r&&null!==r){switch(r.$$typeof){case f:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case h:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case D:return y(e,t,n,r=oo(r),a)}if(I(r)||_(r))return d(t,e=e.get(n)||null,r,a,null);if("function"==typeof r.then)return y(e,t,n,fo(r),a);if(r.$$typeof===k)return y(e,t,n,Ia(t,r),a);mo(t,r)}return null}function b(s,c,u,d){if("object"==typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case f:e:{for(var v=u.key;null!==c;){if(c.key===v){if((v=u.type)===g){if(7===c.tag){n(s,c.sibling),(d=o(c,u.props.children)).return=s,s=d;break e}}else if(c.elementType===v||"object"==typeof v&&null!==v&&v.$$typeof===D&&oo(v)===c.type){n(s,c.sibling),po(d=o(c,u.props),u),d.return=s,s=d;break e}n(s,c);break}t(s,c),c=c.sibling}u.type===g?((d=Vr(u.props.children,s.mode,d,u.key)).return=s,s=d):(po(d=Qr(u.type,u.key,u.props,null,s.mode,d),u),d.return=s,s=d)}return i(s);case h:e:{for(v=u.key;null!==c;){if(c.key===v){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(s,c.sibling),(d=o(c,u.children||[])).return=s,s=d;break e}n(s,c);break}t(s,c),c=c.sibling}(d=Gr(u,s.mode,d)).return=s,s=d}return i(s);case D:return b(s,c,u=oo(u),d)}if(I(u))return function(r,o,i,s){for(var c=null,u=null,d=o,f=o=0,h=null;null!==d&&f<i.length;f++){d.index>f?(h=d,d=null):h=d.sibling;var g=m(r,d,i[f],s);if(null===g){null===d&&(d=h);break}e&&d&&null===g.alternate&&t(r,d),o=l(g,o,f),null===u?c=g:u.sibling=g,u=g,d=h}if(f===i.length)return n(r,d),pa&&la(r,f),c;if(null===d){for(;f<i.length;f++)null!==(d=p(r,i[f],s))&&(o=l(d,o,f),null===u?c=d:u.sibling=d,u=d);return pa&&la(r,f),c}for(d=a(d);f<i.length;f++)null!==(h=y(d,r,f,i[f],s))&&(e&&null!==h.alternate&&d.delete(null===h.key?f:h.key),o=l(h,o,f),null===u?c=h:u.sibling=h,u=h);return e&&d.forEach(function(e){return t(r,e)}),pa&&la(r,f),c}(s,c,u,d);if(_(u)){if("function"!=typeof(v=_(u)))throw Error(r(150));return function(o,i,s,c){if(null==s)throw Error(r(151));for(var u=null,d=null,f=i,h=i=0,g=null,b=s.next();null!==f&&!b.done;h++,b=s.next()){f.index>h?(g=f,f=null):g=f.sibling;var v=m(o,f,b.value,c);if(null===v){null===f&&(f=g);break}e&&f&&null===v.alternate&&t(o,f),i=l(v,i,h),null===d?u=v:d.sibling=v,d=v,f=g}if(b.done)return n(o,f),pa&&la(o,h),u;if(null===f){for(;!b.done;h++,b=s.next())null!==(b=p(o,b.value,c))&&(i=l(b,i,h),null===d?u=b:d.sibling=b,d=b);return pa&&la(o,h),u}for(f=a(f);!b.done;h++,b=s.next())null!==(b=y(f,o,h,b.value,c))&&(e&&null!==b.alternate&&f.delete(null===b.key?h:b.key),i=l(b,i,h),null===d?u=b:d.sibling=b,d=b);return e&&f.forEach(function(e){return t(o,e)}),pa&&la(o,h),u}(s,c,u=v.call(u),d)}if("function"==typeof u.then)return b(s,c,fo(u),d);if(u.$$typeof===k)return b(s,c,Ia(s,u),d);mo(s,u)}return"string"==typeof u&&""!==u||"number"==typeof u||"bigint"==typeof u?(u=""+u,null!==c&&6===c.tag?(n(s,c.sibling),(d=o(c,u)).return=s,s=d):(n(s,c),(d=Hr(u,s.mode,d)).return=s,s=d),i(s)):n(s,c)}return function(e,t,n,r){try{uo=0;var a=b(e,t,n,r);return co=null,a}catch(l){if(l===Za||l===to)throw l;var o=qr(29,l,null,e.mode);return o.lanes=r,o.return=e,o}}}var go=ho(!0),yo=ho(!1),bo=!1;function vo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function wo(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ko(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&hc){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,t=Fr(e),Or(e,null,n),t}return Pr(e,r,t,n),Fr(e)}function So(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}function jo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var l={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===o?a=o=l:o=o.next=l,n=n.next}while(null!==n);null===o?a=o=t:o=o.next=t}else a=o=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Co=!1;function No(){if(Co){if(null!==Ha)throw Ha}}function Eo(e,t,n,r){Co=!1;var a=e.updateQueue;bo=!1;var o=a.firstBaseUpdate,l=a.lastBaseUpdate,i=a.shared.pending;if(null!==i){a.shared.pending=null;var s=i,c=s.next;s.next=null,null===l?o=c:l.next=c,l=s;var d=e.alternate;null!==d&&((i=(d=d.updateQueue).lastBaseUpdate)!==l&&(null===i?d.firstBaseUpdate=c:i.next=c,d.lastBaseUpdate=s))}if(null!==o){var f=a.baseState;for(l=0,d=c=s=null,i=o;;){var p=-536870913&i.lane,m=p!==i.lane;if(m?(bc&p)===p:(r&p)===p){0!==p&&p===Va&&(Co=!0),null!==d&&(d=d.next={lane:0,tag:i.tag,payload:i.payload,callback:null,next:null});e:{var h=e,g=i;p=t;var y=n;switch(g.tag){case 1:if("function"==typeof(h=g.payload)){f=h.call(y,f,p);break e}f=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null==(p="function"==typeof(h=g.payload)?h.call(y,f,p):h))break e;f=u({},f,p);break e;case 2:bo=!0}}null!==(p=i.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=a.callbacks)?a.callbacks=[p]:m.push(p))}else m={lane:p,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===d?(c=d=m,s=f):d=d.next=m,l|=p;if(null===(i=i.next)){if(null===(i=a.shared.pending))break;i=(m=i).next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}null===d&&(s=f),a.baseState=s,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null===o&&(a.shared.lanes=0),Nc|=l,e.lanes=l,e.memoizedState=f}}function Do(e,t){if("function"!=typeof e)throw Error(r(191,e));e.call(t)}function Lo(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Do(n[e],t)}var To=B(null),Ao=B(0);function _o(e,t){$(Ao,e=jc),$(To,t),jc=e|t.baseLanes}function Po(){$(Ao,jc),$(To,To.current)}function zo(){jc=Ao.current,U(To),U(Ao)}var Io=B(null),Oo=null;function Fo(e){var t=e.alternate;$(Uo,1&Uo.current),$(Io,e),null===Oo&&(null===t||null!==To.current||null!==t.memoizedState)&&(Oo=e)}function Mo(e){$(Uo,Uo.current),$(Io,e),null===Oo&&(Oo=e)}function Ro(e){22===e.tag?($(Uo,Uo.current),$(Io,e),null===Oo&&(Oo=e)):qo()}function qo(){$(Uo,Uo.current),$(Io,Io.current)}function Bo(e){U(Io),Oo===e&&(Oo=null),U(Uo)}var Uo=B(0);function $o(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Pd(n)||zd(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(128&t.flags)return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Qo=0,Vo=null,Ho=null,Wo=null,Go=!1,Ko=!1,Yo=!1,Jo=0,Xo=0,Zo=null,el=0;function tl(){throw Error(r(321))}function nl(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!er(e[n],t[n]))return!1;return!0}function rl(e,t,n,r,a,o){return Qo=o,Vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?bi:vi,Yo=!1,o=n(r,a),Yo=!1,Ko&&(o=ol(t,n,r,a)),al(e),o}function al(e){O.H=yi;var t=null!==Ho&&null!==Ho.next;if(Qo=0,Wo=Ho=Vo=null,Go=!1,Xo=0,Zo=null,t)throw Error(r(300));null===e||Ii||null!==(e=e.dependencies)&&_a(e)&&(Ii=!0)}function ol(e,t,n,a){Vo=e;var o=0;do{if(Ko&&(Zo=null),Xo=0,Ko=!1,25<=o)throw Error(r(301));if(o+=1,Wo=Ho=null,null!=e.updateQueue){var l=e.updateQueue;l.lastEffect=null,l.events=null,l.stores=null,null!=l.memoCache&&(l.memoCache.index=0)}O.H=xi,l=t(n,a)}while(Ko);return l}function ll(){var e=O.H,t=e.useState()[0];return t="function"==typeof t.then?fl(t):t,e=e.useState()[0],(null!==Ho?Ho.memoizedState:null)!==e&&(Vo.flags|=1024),t}function il(){var e=0!==Jo;return Jo=0,e}function sl(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function cl(e){if(Go){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Go=!1}Qo=0,Wo=Ho=Vo=null,Ko=!1,Xo=Jo=0,Zo=null}function ul(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Wo?Vo.memoizedState=Wo=e:Wo=Wo.next=e,Wo}function dl(){if(null===Ho){var e=Vo.alternate;e=null!==e?e.memoizedState:null}else e=Ho.next;var t=null===Wo?Vo.memoizedState:Wo.next;if(null!==t)Wo=t,Ho=e;else{if(null===e){if(null===Vo.alternate)throw Error(r(467));throw Error(r(310))}e={memoizedState:(Ho=e).memoizedState,baseState:Ho.baseState,baseQueue:Ho.baseQueue,queue:Ho.queue,next:null},null===Wo?Vo.memoizedState=Wo=e:Wo=Wo.next=e}return Wo}function fl(e){var t=Xo;return Xo+=1,null===Zo&&(Zo=[]),e=ao(Zo,e,t),t=Vo,null===(null===Wo?t.memoizedState:Wo.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?bi:vi),e}function pl(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return fl(e);if(e.$$typeof===k)return za(e)}throw Error(r(438,String(e)))}function ml(e){var t=null,n=Vo.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Vo.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Vo.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=T;return t.index++,n}function hl(e,t){return"function"==typeof t?t(e):t}function gl(e){return yl(dl(),Ho,e)}function yl(e,t,n){var a=e.queue;if(null===a)throw Error(r(311));a.lastRenderedReducer=n;var o=e.baseQueue,l=a.pending;if(null!==l){if(null!==o){var i=o.next;o.next=l.next,l.next=i}t.baseQueue=o=l,a.pending=null}if(l=e.baseState,null===o)e.memoizedState=l;else{var s=i=null,c=null,u=t=o.next,d=!1;do{var f=-536870913&u.lane;if(f!==u.lane?(bc&f)===f:(Qo&f)===f){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===Va&&(d=!0);else{if((Qo&p)===p){u=u.next,p===Va&&(d=!0);continue}f={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(s=c=f,i=l):c=c.next=f,Vo.lanes|=p,Nc|=p}f=u.action,Yo&&n(l,f),l=u.hasEagerState?u.eagerState:n(l,f)}else p={lane:f,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(s=c=p,i=l):c=c.next=p,Vo.lanes|=f,Nc|=f;u=u.next}while(null!==u&&u!==t);if(null===c?i=l:c.next=s,!er(l,e.memoizedState)&&(Ii=!0,d&&null!==(n=Ha)))throw n;e.memoizedState=l,e.baseState=i,e.baseQueue=c,a.lastRenderedState=l}return null===o&&(a.lanes=0),[e.memoizedState,a.dispatch]}function bl(e){var t=dl(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var a=n.dispatch,o=n.pending,l=t.memoizedState;if(null!==o){n.pending=null;var i=o=o.next;do{l=e(l,i.action),i=i.next}while(i!==o);er(l,t.memoizedState)||(Ii=!0),t.memoizedState=l,null===t.baseQueue&&(t.baseState=l),n.lastRenderedState=l}return[l,a]}function vl(e,t,n){var a=Vo,o=dl(),l=pa;if(l){if(void 0===n)throw Error(r(407));n=n()}else n=t();var i=!er((Ho||o).memoizedState,n);if(i&&(o.memoizedState=n,Ii=!0),o=o.queue,Ql(kl.bind(null,a,o,e),[e]),o.getSnapshot!==t||i||null!==Wo&&1&Wo.memoizedState.tag){if(a.flags|=2048,Rl(9,{destroy:void 0},wl.bind(null,a,o,n,t),null),null===gc)throw Error(r(349));l||127&Qo||xl(a,t,n)}return n}function xl(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Vo.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function wl(e,t,n,r){t.value=n,t.getSnapshot=r,Sl(t)&&jl(e)}function kl(e,t,n){return n(function(){Sl(t)&&jl(e)})}function Sl(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!er(e,n)}catch(r){return!0}}function jl(e){var t=Ir(e,2);null!==t&&Yc(t,e,2)}function Cl(e){var t=ul();if("function"==typeof e){var n=e;if(e=n(),Yo){we(!0);try{n()}finally{we(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hl,lastRenderedState:e},t}function Nl(e,t,n,r){return e.baseState=n,yl(e,Ho,"function"==typeof r?r:hl)}function El(e,t,n,a,o){if(mi(e))throw Error(r(485));if(null!==(e=t.action)){var l={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){l.listeners.push(e)}};null!==O.T?n(!0):l.isTransition=!1,a(l),null===(n=t.pending)?(l.next=t.pending=l,Dl(t,l)):(l.next=n.next,t.pending=n.next=l)}}function Dl(e,t){var n=t.action,r=t.payload,a=e.state;if(t.isTransition){var o=O.T,l={};O.T=l;try{var i=n(a,r),s=O.S;null!==s&&s(l,i),Ll(e,t,i)}catch(c){Al(e,t,c)}finally{null!==o&&null!==l.types&&(o.types=l.types),O.T=o}}else try{Ll(e,t,o=n(a,r))}catch(u){Al(e,t,u)}}function Ll(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){Tl(e,t,n)},function(n){return Al(e,t,n)}):Tl(e,t,n)}function Tl(e,t,n){t.status="fulfilled",t.value=n,_l(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Dl(e,n)))}function Al(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,_l(t),t=t.next}while(t!==r)}e.action=null}function _l(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Pl(e,t){return t}function zl(e,t){if(pa){var n=gc.formState;if(null!==n){e:{var r=Vo;if(pa){if(fa){t:{for(var a=fa,o=ha;8!==a.nodeType;){if(!o){a=null;break t}if(null===(a=Id(a.nextSibling))){a=null;break t}}a="F!"===(o=a.data)||"F"===o?a:null}if(a){fa=Id(a.nextSibling),r="F!"===a.data;break e}}ya(r)}r=!1}r&&(t=n[0])}}return(n=ul()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pl,lastRenderedState:t},n.queue=r,n=di.bind(null,Vo,r),r.dispatch=n,r=Cl(!1),o=pi.bind(null,Vo,!1,r.queue),a={state:t,dispatch:null,action:e,pending:null},(r=ul()).queue=a,n=El.bind(null,Vo,a,o,n),a.dispatch=n,r.memoizedState=e,[t,n,!1]}function Il(e){return Ol(dl(),Ho,e)}function Ol(e,t,n){if(t=yl(e,t,Pl)[0],e=gl(hl)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var r=fl(t)}catch(l){if(l===Za)throw to;throw l}else r=t;var a=(t=dl()).queue,o=a.dispatch;return n!==t.memoizedState&&(Vo.flags|=2048,Rl(9,{destroy:void 0},Fl.bind(null,a,n),null)),[r,o,e]}function Fl(e,t){e.action=t}function Ml(e){var t=dl(),n=Ho;if(null!==n)return Ol(t,n,e);dl(),t=t.memoizedState;var r=(n=dl()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Rl(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Vo.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Vo.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ql(){return dl().memoizedState}function Bl(e,t,n,r){var a=ul();Vo.flags|=e,a.memoizedState=Rl(1|t,{destroy:void 0},n,void 0===r?null:r)}function Ul(e,t,n,r){var a=dl();r=void 0===r?null:r;var o=a.memoizedState.inst;null!==Ho&&null!==r&&nl(r,Ho.memoizedState.deps)?a.memoizedState=Rl(t,o,n,r):(Vo.flags|=e,a.memoizedState=Rl(1|t,o,n,r))}function $l(e,t){Bl(8390656,8,e,t)}function Ql(e,t){Ul(2048,8,e,t)}function Vl(e){var t=dl().memoizedState;return function(e){Vo.flags|=4;var t=Vo.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Vo.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(2&hc)throw Error(r(440));return t.impl.apply(void 0,arguments)}}function Hl(e,t){return Ul(4,2,e,t)}function Wl(e,t){return Ul(4,4,e,t)}function Gl(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Kl(e,t,n){n=null!=n?n.concat([e]):null,Ul(4,4,Gl.bind(null,t,e),n)}function Yl(){}function Jl(e,t){var n=dl();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&nl(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xl(e,t){var n=dl();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&nl(t,r[1]))return r[0];if(r=e(),Yo){we(!0);try{e()}finally{we(!1)}}return n.memoizedState=[r,t],r}function Zl(e,t,n){return void 0===n||1073741824&Qo&&!(261930&bc)?e.memoizedState=t:(e.memoizedState=n,e=Kc(),Vo.lanes|=e,Nc|=e,n)}function ei(e,t,n,r){return er(n,t)?n:null!==To.current?(e=Zl(e,n,r),er(e,t)||(Ii=!0),e):42&Qo&&(!(1073741824&Qo)||261930&bc)?(e=Kc(),Vo.lanes|=e,Nc|=e,t):(Ii=!0,e.memoizedState=n)}function ti(e,t,n,r,a){var o=F.p;F.p=0!==o&&8>o?o:8;var l,i,s,c=O.T,u={};O.T=u,pi(e,!1,t,n);try{var d=a(),f=O.S;if(null!==f&&f(u,d),null!==d&&"object"==typeof d&&"function"==typeof d.then)fi(e,t,(l=r,i=[],s={status:"pending",value:null,reason:null,then:function(e){i.push(e)}},d.then(function(){s.status="fulfilled",s.value=l;for(var e=0;e<i.length;e++)(0,i[e])(l)},function(e){for(s.status="rejected",s.reason=e,e=0;e<i.length;e++)(0,i[e])(void 0)}),s),Gc());else fi(e,t,r,Gc())}catch(p){fi(e,t,{then:function(){},status:"rejected",reason:p},Gc())}finally{F.p=o,null!==c&&null!==u.types&&(c.types=u.types),O.T=c}}function ni(){}function ri(e,t,n,a){if(5!==e.tag)throw Error(r(476));var o=ai(e).queue;ti(e,o,t,M,null===n?ni:function(){return oi(e),n(a)})}function ai(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hl,lastRenderedState:M},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hl,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function oi(e){var t=ai(e);null===t.next&&(t=e.alternate.memoizedState),fi(e,t.next.queue,{},Gc())}function li(){return za(pf)}function ii(){return dl().memoizedState}function si(){return dl().memoizedState}function ci(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Gc(),r=ko(t,e=wo(n),n);return null!==r&&(Yc(r,t,n),So(r,t,n)),t={cache:Ba()},void(e.payload=t)}t=t.return}}function ui(e,t,n){var r=Gc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},mi(e)?hi(t,n):null!==(n=zr(e,t,n,r))&&(Yc(n,e,r),gi(n,t,r))}function di(e,t,n){fi(e,t,n,Gc())}function fi(e,t,n,r){var a={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(mi(e))hi(t,a);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var l=t.lastRenderedState,i=o(l,n);if(a.hasEagerState=!0,a.eagerState=i,er(i,l))return Pr(e,t,a,0),null===gc&&_r(),!1}catch(s){}if(null!==(n=zr(e,t,a,r)))return Yc(n,e,r),gi(n,t,r),!0}return!1}function pi(e,t,n,a){if(a={lane:2,revertLane:Qu(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},mi(e)){if(t)throw Error(r(479))}else null!==(t=zr(e,n,a,2))&&Yc(t,e,2)}function mi(e){var t=e.alternate;return e===Vo||null!==t&&t===Vo}function hi(e,t){Ko=Go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function gi(e,t,n){if(4194048&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}var yi={readContext:za,use:pl,useCallback:tl,useContext:tl,useEffect:tl,useImperativeHandle:tl,useLayoutEffect:tl,useInsertionEffect:tl,useMemo:tl,useReducer:tl,useRef:tl,useState:tl,useDebugValue:tl,useDeferredValue:tl,useTransition:tl,useSyncExternalStore:tl,useId:tl,useHostTransitionStatus:tl,useFormState:tl,useActionState:tl,useOptimistic:tl,useMemoCache:tl,useCacheRefresh:tl};yi.useEffectEvent=tl;var bi={readContext:za,use:pl,useCallback:function(e,t){return ul().memoizedState=[e,void 0===t?null:t],e},useContext:za,useEffect:$l,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,Bl(4194308,4,Gl.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bl(4194308,4,e,t)},useInsertionEffect:function(e,t){Bl(4,2,e,t)},useMemo:function(e,t){var n=ul();t=void 0===t?null:t;var r=e();if(Yo){we(!0);try{e()}finally{we(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=ul();if(void 0!==n){var a=n(t);if(Yo){we(!0);try{n(t)}finally{we(!1)}}}else a=t;return r.memoizedState=r.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},r.queue=e,e=e.dispatch=ui.bind(null,Vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ul().memoizedState=e},useState:function(e){var t=(e=Cl(e)).queue,n=di.bind(null,Vo,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Yl,useDeferredValue:function(e,t){return Zl(ul(),e,t)},useTransition:function(){var e=Cl(!1);return e=ti.bind(null,Vo,e.queue,!0,!1),ul().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=Vo,o=ul();if(pa){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===gc)throw Error(r(349));127&bc||xl(a,t,n)}o.memoizedState=n;var l={value:n,getSnapshot:t};return o.queue=l,$l(kl.bind(null,a,l,e),[e]),a.flags|=2048,Rl(9,{destroy:void 0},wl.bind(null,a,l,n,t),null),n},useId:function(){var e=ul(),t=gc.identifierPrefix;if(pa){var n=oa;t="_"+t+"R_"+(n=(aa&~(1<<32-ke(aa)-1)).toString(32)+n),0<(n=Jo++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=el++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:li,useFormState:zl,useActionState:zl,useOptimistic:function(e){var t=ul();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=pi.bind(null,Vo,!0,n),n.dispatch=t,[e,t]},useMemoCache:ml,useCacheRefresh:function(){return ul().memoizedState=ci.bind(null,Vo)},useEffectEvent:function(e){var t=ul(),n={impl:e};return t.memoizedState=n,function(){if(2&hc)throw Error(r(440));return n.impl.apply(void 0,arguments)}}},vi={readContext:za,use:pl,useCallback:Jl,useContext:za,useEffect:Ql,useImperativeHandle:Kl,useInsertionEffect:Hl,useLayoutEffect:Wl,useMemo:Xl,useReducer:gl,useRef:ql,useState:function(){return gl(hl)},useDebugValue:Yl,useDeferredValue:function(e,t){return ei(dl(),Ho.memoizedState,e,t)},useTransition:function(){var e=gl(hl)[0],t=dl().memoizedState;return["boolean"==typeof e?e:fl(e),t]},useSyncExternalStore:vl,useId:ii,useHostTransitionStatus:li,useFormState:Il,useActionState:Il,useOptimistic:function(e,t){return Nl(dl(),0,e,t)},useMemoCache:ml,useCacheRefresh:si};vi.useEffectEvent=Vl;var xi={readContext:za,use:pl,useCallback:Jl,useContext:za,useEffect:Ql,useImperativeHandle:Kl,useInsertionEffect:Hl,useLayoutEffect:Wl,useMemo:Xl,useReducer:bl,useRef:ql,useState:function(){return bl(hl)},useDebugValue:Yl,useDeferredValue:function(e,t){var n=dl();return null===Ho?Zl(n,e,t):ei(n,Ho.memoizedState,e,t)},useTransition:function(){var e=bl(hl)[0],t=dl().memoizedState;return["boolean"==typeof e?e:fl(e),t]},useSyncExternalStore:vl,useId:ii,useHostTransitionStatus:li,useFormState:Ml,useActionState:Ml,useOptimistic:function(e,t){var n=dl();return null!==Ho?Nl(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ml,useCacheRefresh:si};function wi(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:u({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}xi.useEffectEvent=Vl;var ki={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Gc(),a=wo(r);a.payload=t,null!=n&&(a.callback=n),null!==(t=ko(e,a,r))&&(Yc(t,e,r),So(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Gc(),a=wo(r);a.tag=1,a.payload=t,null!=n&&(a.callback=n),null!==(t=ko(e,a,r))&&(Yc(t,e,r),So(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Gc(),r=wo(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=ko(e,r,n))&&(Yc(t,e,n),So(t,e,n))}};function Si(e,t,n,r,a,o,l){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,l):!t.prototype||!t.prototype.isPureReactComponent||(!tr(n,r)||!tr(a,o))}function ji(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ki.enqueueReplaceState(t,t.state,null)}function Ci(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var a in n===t&&(n=u({},n)),e)void 0===n[a]&&(n[a]=e[a]);return n}function Ni(e){Dr(e)}function Ei(e){}function Di(e){Dr(e)}function Li(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Ti(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Ai(e,t,n){return(n=wo(n)).tag=3,n.payload={element:null},n.callback=function(){Li(e,t)},n}function _i(e){return(e=wo(e)).tag=3,e}function Pi(e,t,n,r){var a=n.type.getDerivedStateFromError;if("function"==typeof a){var o=r.value;e.payload=function(){return a(o)},e.callback=function(){Ti(t,n,r)}}var l=n.stateNode;null!==l&&"function"==typeof l.componentDidCatch&&(e.callback=function(){Ti(t,n,r),"function"!=typeof a&&(null===Mc?Mc=new Set([this]):Mc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var zi=Error(r(461)),Ii=!1;function Oi(e,t,n,r){t.child=null===e?yo(t,null,n,r):go(t,e.child,n,r)}function Fi(e,t,n,r,a){n=n.render;var o=t.ref;if("ref"in r){var l={};for(var i in r)"ref"!==i&&(l[i]=r[i])}else l=r;return Pa(t),r=rl(e,t,n,l,o,a),i=il(),null===e||Ii?(pa&&i&&sa(t),t.flags|=1,Oi(e,t,r,a),t.child):(sl(e,t,a),ls(e,t,a))}function Mi(e,t,n,r,a){if(null===e){var o=n.type;return"function"!=typeof o||Br(o)||void 0!==o.defaultProps||null!==n.compare?((e=Qr(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ri(e,t,o,r,a))}if(o=e.child,!is(e,a)){var l=o.memoizedProps;if((n=null!==(n=n.compare)?n:tr)(l,r)&&e.ref===t.ref)return ls(e,t,a)}return t.flags|=1,(e=Ur(o,r)).ref=t.ref,e.return=t,t.child=e}function Ri(e,t,n,r,a){if(null!==e){var o=e.memoizedProps;if(tr(o,r)&&e.ref===t.ref){if(Ii=!1,t.pendingProps=r=o,!is(e,a))return t.lanes=e.lanes,ls(e,t,a);131072&e.flags&&(Ii=!0)}}return Hi(e,t,n,r,a)}function qi(e,t,n,r){var a=r.children,o=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(128&t.flags){if(o=null!==o?o.baseLanes|n:n,null!==e){for(r=t.child=e.child,a=0;null!==r;)a=a|r.lanes|r.childLanes,r=r.sibling;r=a&~o}else r=0,t.child=null;return Ui(e,t,o,n,r)}if(!(536870912&n))return r=t.lanes=536870912,Ui(e,t,null!==o?o.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Ja(0,null!==o?o.cachePool:null),null!==o?_o(t,o):Po(),Ro(t)}else null!==o?(Ja(0,o.cachePool),_o(t,o),qo(),t.memoizedState=null):(null!==e&&Ja(0,null),Po(),qo());return Oi(e,t,a,n),t.child}function Bi(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Ui(e,t,n,r,a){var o=Ya();return o=null===o?null:{parent:qa._currentValue,pool:o},t.memoizedState={baseLanes:n,cachePool:o},null!==e&&Ja(0,null),Po(),Ro(t),null!==e&&Aa(e,t,r,!0),t.childLanes=a,null}function $i(e,t){return(t=ts({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Qi(e,t,n){return go(t,e.child,null,n),(e=$i(t,t.pendingProps)).flags|=2,Bo(t),t.memoizedState=null,e}function Vi(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(r(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Hi(e,t,n,r,a){return Pa(t),n=rl(e,t,n,r,void 0,a),r=il(),null===e||Ii?(pa&&r&&sa(t),t.flags|=1,Oi(e,t,n,a),t.child):(sl(e,t,a),ls(e,t,a))}function Wi(e,t,n,r,a,o){return Pa(t),t.updateQueue=null,n=ol(t,r,n,a),al(e),r=il(),null===e||Ii?(pa&&r&&sa(t),t.flags|=1,Oi(e,t,n,o),t.child):(sl(e,t,o),ls(e,t,o))}function Gi(e,t,n,r,a){if(Pa(t),null===t.stateNode){var o=Mr,l=n.contextType;"object"==typeof l&&null!==l&&(o=za(l)),o=new n(r,o),t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=ki,t.stateNode=o,o._reactInternals=t,(o=t.stateNode).props=r,o.state=t.memoizedState,o.refs={},vo(t),l=n.contextType,o.context="object"==typeof l&&null!==l?za(l):Mr,o.state=t.memoizedState,"function"==typeof(l=n.getDerivedStateFromProps)&&(wi(t,n,l,r),o.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(l=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),l!==o.state&&ki.enqueueReplaceState(o,o.state,null),Eo(t,r,o,a),No(),o.state=t.memoizedState),"function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){o=t.stateNode;var i=t.memoizedProps,s=Ci(n,i);o.props=s;var c=o.context,u=n.contextType;l=Mr,"object"==typeof u&&null!==u&&(l=za(u));var d=n.getDerivedStateFromProps;u="function"==typeof d||"function"==typeof o.getSnapshotBeforeUpdate,i=t.pendingProps!==i,u||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(i||c!==l)&&ji(t,o,r,l),bo=!1;var f=t.memoizedState;o.state=f,Eo(t,r,o,a),No(),c=t.memoizedState,i||f!==c||bo?("function"==typeof d&&(wi(t,n,d,r),c=t.memoizedState),(s=bo||Si(t,n,s,r,f,c,l))?(u||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=l,r=s):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,xo(e,t),u=Ci(n,l=t.memoizedProps),o.props=u,d=t.pendingProps,f=o.context,c=n.contextType,s=Mr,"object"==typeof c&&null!==c&&(s=za(c)),(c="function"==typeof(i=n.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(l!==d||f!==s)&&ji(t,o,r,s),bo=!1,f=t.memoizedState,o.state=f,Eo(t,r,o,a),No();var p=t.memoizedState;l!==d||f!==p||bo||null!==e&&null!==e.dependencies&&_a(e.dependencies)?("function"==typeof i&&(wi(t,n,i,r),p=t.memoizedState),(u=bo||Si(t,n,u,r,f,p,s)||null!==e&&null!==e.dependencies&&_a(e.dependencies))?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=u):("function"!=typeof o.componentDidUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return o=r,Vi(e,t),r=!!(128&t.flags),o||r?(o=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:o.render(),t.flags|=1,null!==e&&r?(t.child=go(t,e.child,null,a),t.child=go(t,null,n,a)):Oi(e,t,n,a),t.memoizedState=o.state,e=t.child):e=ls(e,t,a),e}function Ki(e,t,n,r){return wa(),t.flags|=256,Oi(e,t,n,r),t.child}var Yi={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ji(e){return{baseLanes:e,cachePool:Xa()}}function Xi(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Lc),e}function Zi(e,t,n){var a,o=t.pendingProps,l=!1,i=!!(128&t.flags);if((a=i)||(a=(null===e||null!==e.memoizedState)&&!!(2&Uo.current)),a&&(l=!0,t.flags&=-129),a=!!(32&t.flags),t.flags&=-33,null===e){if(pa){if(l?Fo(t):qo(),(e=fa)?null!==(e=null!==(e=_d(e,ha))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ra?{id:aa,overflow:oa}:null,retryLane:536870912,hydrationErrors:null},(n=Wr(e)).return=t,t.child=n,da=t,fa=null):e=null,null===e)throw ya(t);return zd(e)?t.lanes=32:t.lanes=536870912,null}var s=o.children;return o=o.fallback,l?(qo(),s=ts({mode:"hidden",children:s},l=t.mode),o=Vr(o,l,n,null),s.return=t,o.return=t,s.sibling=o,t.child=s,(o=t.child).memoizedState=Ji(n),o.childLanes=Xi(e,a,n),t.memoizedState=Yi,Bi(null,o)):(Fo(t),es(t,s))}var c=e.memoizedState;if(null!==c&&null!==(s=c.dehydrated)){if(i)256&t.flags?(Fo(t),t.flags&=-257,t=ns(e,t,n)):null!==t.memoizedState?(qo(),t.child=e.child,t.flags|=128,t=null):(qo(),s=o.fallback,l=t.mode,o=ts({mode:"visible",children:o.children},l),(s=Vr(s,l,n,null)).flags|=2,o.return=t,s.return=t,o.sibling=s,t.child=o,go(t,e.child,null,n),(o=t.child).memoizedState=Ji(n),o.childLanes=Xi(e,a,n),t.memoizedState=Yi,t=Bi(null,o));else if(Fo(t),zd(s)){if(a=s.nextSibling&&s.nextSibling.dataset)var u=a.dgst;a=u,(o=Error(r(419))).stack="",o.digest=a,Sa({value:o,source:null,stack:null}),t=ns(e,t,n)}else if(Ii||Aa(e,t,n,!1),a=0!==(n&e.childLanes),Ii||a){if(null!==(a=gc)&&(0!==(o=Fe(a,n))&&o!==c.retryLane))throw c.retryLane=o,Ir(e,o),Yc(a,e,o),zi;Pd(s)||su(),t=ns(e,t,n)}else Pd(s)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,fa=Id(s.nextSibling),da=t,pa=!0,ma=null,ha=!1,null!==e&&ua(t,e),(t=es(t,o.children)).flags|=4096);return t}return l?(qo(),s=o.fallback,l=t.mode,u=(c=e.child).sibling,(o=Ur(c,{mode:"hidden",children:o.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?s=Ur(u,s):(s=Vr(s,l,n,null)).flags|=2,s.return=t,o.return=t,o.sibling=s,t.child=o,Bi(null,o),o=t.child,null===(s=e.child.memoizedState)?s=Ji(n):(null!==(l=s.cachePool)?(c=qa._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=Xa(),s={baseLanes:s.baseLanes|n,cachePool:l}),o.memoizedState=s,o.childLanes=Xi(e,a,n),t.memoizedState=Yi,Bi(e.child,o)):(Fo(t),e=(n=e.child).sibling,(n=Ur(n,{mode:"visible",children:o.children})).return=t,n.sibling=null,null!==e&&(null===(a=t.deletions)?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function es(e,t){return(t=ts({mode:"visible",children:t},e.mode)).return=e,e.child=t}function ts(e,t){return(e=qr(22,e,null,t)).lanes=0,e}function ns(e,t,n){return go(t,e.child,null,n),(e=es(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function rs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),La(e.return,t,n)}function as(e,t,n,r,a,o){var l=e.memoizedState;null===l?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,treeForkCount:o}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=a,l.treeForkCount=o)}function os(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;r=r.children;var l=Uo.current,i=!!(2&l);if(i?(l=1&l|2,t.flags|=128):l&=1,$(Uo,l),Oi(e,t,r,n),r=pa?ea:0,!i&&null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&rs(e,n,t);else if(19===e.tag)rs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===$o(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),as(t,!1,a,n,o,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===$o(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}as(t,!0,n,null,o,r);break;case"together":as(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function ls(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Nc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Aa(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=Ur(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ur(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function is(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!_a(e))}function ss(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ii=!0;else{if(!(is(e,n)||128&t.flags))return Ii=!1,function(e,t,n){switch(t.tag){case 3:Y(t,t.stateNode.containerInfo),Ea(0,qa,e.memoizedState.cache),wa();break;case 27:case 5:X(t);break;case 4:Y(t,t.stateNode.containerInfo);break;case 10:Ea(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Mo(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Fo(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Zi(e,t,n):(Fo(t),null!==(e=ls(e,t,n))?e.sibling:null);Fo(t);break;case 19:var a=!!(128&e.flags);if((r=0!==(n&t.childLanes))||(Aa(e,t,n,!1),r=0!==(n&t.childLanes)),a){if(r)return os(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),$(Uo,Uo.current),r)break;return null;case 22:return t.lanes=0,qi(e,t,n,t.pendingProps);case 24:Ea(0,qa,e.memoizedState.cache)}return ls(e,t,n)}(e,t,n);Ii=!!(131072&e.flags)}else Ii=!1,pa&&1048576&t.flags&&ia(t,ea,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=oo(t.elementType),t.type=e,"function"!=typeof e){if(null!=e){var o=e.$$typeof;if(o===S){t.tag=11,t=Fi(null,t,e,a,n);break e}if(o===E){t.tag=14,t=Mi(null,t,e,a,n);break e}}throw t=z(e)||e,Error(r(306,t,""))}Br(e)?(a=Ci(e,a),t.tag=1,t=Gi(null,t,e,a,n)):(t.tag=0,t=Hi(null,t,e,a,n))}return t;case 0:return Hi(e,t,t.type,t.pendingProps,n);case 1:return Gi(e,t,a=t.type,o=Ci(a,t.pendingProps),n);case 3:e:{if(Y(t,t.stateNode.containerInfo),null===e)throw Error(r(387));a=t.pendingProps;var l=t.memoizedState;o=l.element,xo(e,t),Eo(t,a,null,n);var i=t.memoizedState;if(a=i.cache,Ea(0,qa,a),a!==l.cache&&Ta(t,[qa],n,!0),No(),a=i.element,l.isDehydrated){if(l={element:a,isDehydrated:!1,cache:i.cache},t.updateQueue.baseState=l,t.memoizedState=l,256&t.flags){t=Ki(e,t,a,n);break e}if(a!==o){Sa(o=Yr(Error(r(424)),t)),t=Ki(e,t,a,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(fa=Id(e.firstChild),da=t,pa=!0,ma=null,ha=!0,n=yo(t,null,a,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(wa(),a===o){t=ls(e,t,n);break e}Oi(e,t,a,n)}t=t.child}return t;case 26:return Vi(e,t),null===e?(n=Wd(t.type,null,t.pendingProps,null))?t.memoizedState=n:pa||(n=t.type,e=t.pendingProps,(a=bd(G.current).createElement(n))[$e]=t,a[Qe]=e,md(a,n,e),nt(a),t.stateNode=a):t.memoizedState=Wd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return X(t),null===e&&pa&&(a=t.stateNode=Rd(t.type,t.pendingProps,G.current),da=t,ha=!0,o=fa,Dd(t.type)?(Od=o,fa=Id(a.firstChild)):fa=o),Oi(e,t,t.pendingProps.children,n),Vi(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&pa&&((o=a=fa)&&(null!==(a=function(e,t,n,r){for(;1===e.nodeType;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ye])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(o=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(o!==a.rel||e.getAttribute("href")!==(null==a.href||""===a.href?null:a.href)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin)||e.getAttribute("title")!==(null==a.title?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((o=e.getAttribute("src"))!==(null==a.src?null:a.src)||e.getAttribute("type")!==(null==a.type?null:a.type)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var o=null==a.name?null:""+a.name;if("hidden"===a.type&&e.getAttribute("name")===o)return e}if(null===(e=Id(e.nextSibling)))break}return null}(a,t.type,t.pendingProps,ha))?(t.stateNode=a,da=t,fa=Id(a.firstChild),ha=!1,o=!0):o=!1),o||ya(t)),X(t),o=t.type,l=t.pendingProps,i=null!==e?e.memoizedProps:null,a=l.children,wd(o,l)?a=null:null!==i&&wd(o,i)&&(t.flags|=32),null!==t.memoizedState&&(o=rl(e,t,ll,null,null,n),pf._currentValue=o),Vi(e,t),Oi(e,t,a,n),t.child;case 6:return null===e&&pa&&((e=n=fa)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Id(e.nextSibling)))return null}return e}(n,t.pendingProps,ha))?(t.stateNode=n,da=t,fa=null,e=!0):e=!1),e||ya(t)),null;case 13:return Zi(e,t,n);case 4:return Y(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=go(t,null,a,n):Oi(e,t,a,n),t.child;case 11:return Fi(e,t,t.type,t.pendingProps,n);case 7:return Oi(e,t,t.pendingProps,n),t.child;case 8:case 12:return Oi(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,Ea(0,t.type,a.value),Oi(e,t,a.children,n),t.child;case 9:return o=t.type._context,a=t.pendingProps.children,Pa(t),a=a(o=za(o)),t.flags|=1,Oi(e,t,a,n),t.child;case 14:return Mi(e,t,t.type,t.pendingProps,n);case 15:return Ri(e,t,t.type,t.pendingProps,n);case 19:return os(e,t,n);case 31:return function(e,t,n){var a=t.pendingProps,o=!!(128&t.flags);if(t.flags&=-129,null===e){if(pa){if("hidden"===a.mode)return e=$i(t,a),t.lanes=536870912,Bi(null,e);if(Mo(t),(e=fa)?null!==(e=null!==(e=_d(e,ha))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ra?{id:aa,overflow:oa}:null,retryLane:536870912,hydrationErrors:null},(n=Wr(e)).return=t,t.child=n,da=t,fa=null):e=null,null===e)throw ya(t);return t.lanes=536870912,null}return $i(t,a)}var l=e.memoizedState;if(null!==l){var i=l.dehydrated;if(Mo(t),o)if(256&t.flags)t.flags&=-257,t=Qi(e,t,n);else{if(null===t.memoizedState)throw Error(r(558));t.child=e.child,t.flags|=128,t=null}else if(Ii||Aa(e,t,n,!1),o=0!==(n&e.childLanes),Ii||o){if(null!==(a=gc)&&0!==(i=Fe(a,n))&&i!==l.retryLane)throw l.retryLane=i,Ir(e,i),Yc(a,e,i),zi;su(),t=Qi(e,t,n)}else e=l.treeContext,fa=Id(i.nextSibling),da=t,pa=!0,ma=null,ha=!1,null!==e&&ua(t,e),(t=$i(t,a)).flags|=4096;return t}return(e=Ur(e.child,{mode:a.mode,children:a.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return qi(e,t,n,t.pendingProps);case 24:return Pa(t),a=za(qa),null===e?(null===(o=Ya())&&(o=gc,l=Ba(),o.pooledCache=l,l.refCount++,null!==l&&(o.pooledCacheLanes|=n),o=l),t.memoizedState={parent:a,cache:o},vo(t),Ea(0,qa,o)):(0!==(e.lanes&n)&&(xo(e,t),Eo(t,null,null,n),No()),o=e.memoizedState,l=t.memoizedState,o.parent!==a?(o={parent:a,cache:a},t.memoizedState=o,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=o),Ea(0,qa,a)):(a=l.cache,Ea(0,qa,a),a!==o.cache&&Ta(t,[qa],n,!0))),Oi(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function cs(e){e.flags|=4}function us(e,t,n,r,a){if((t=!!(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&a)===a)if(e.stateNode.complete)e.flags|=8192;else{if(!ou())throw lo=no,eo;e.flags|=8192}}else e.flags&=-16777217}function ds(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!lf(t)){if(!ou())throw lo=no,eo;e.flags|=8192}}function fs(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?_e():536870912,e.lanes|=t,Tc|=t)}function ps(e,t){if(!pa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ms(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=65011712&a.subtreeFlags,r|=65011712&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function hs(e,t,n){var a=t.pendingProps;switch(ca(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return ms(t),null;case 3:return n=t.stateNode,a=null,null!==e&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Da(qa),J(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(xa(t)?cs(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,ka())),ms(t),null;case 26:var o=t.type,l=t.memoizedState;return null===e?(cs(t),null!==l?(ms(t),ds(t,l)):(ms(t),us(t,o,0,0,n))):l?l!==e.memoizedState?(cs(t),ms(t),ds(t,l)):(ms(t),t.flags&=-16777217):((e=e.memoizedProps)!==a&&cs(t),ms(t),us(t,o,0,0,n)),null;case 27:if(Z(t),n=G.current,o=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==a&&cs(t);else{if(!a){if(null===t.stateNode)throw Error(r(166));return ms(t),null}e=H.current,xa(t)?ba(t):(e=Rd(o,a,n),t.stateNode=e,cs(t))}return ms(t),null;case 5:if(Z(t),o=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==a&&cs(t);else{if(!a){if(null===t.stateNode)throw Error(r(166));return ms(t),null}if(l=H.current,xa(t))ba(t);else{var i=bd(G.current);switch(l){case 1:l=i.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:l=i.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":l=i.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":l=i.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":(l=i.createElement("div")).innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l="string"==typeof a.is?i.createElement("select",{is:a.is}):i.createElement("select"),a.multiple?l.multiple=!0:a.size&&(l.size=a.size);break;default:l="string"==typeof a.is?i.createElement(o,{is:a.is}):i.createElement(o)}}l[$e]=t,l[Qe]=a;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)l.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=l;e:switch(md(l,o,a),o){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&cs(t)}}return ms(t),us(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==a&&cs(t);else{if("string"!=typeof a&&null===t.stateNode)throw Error(r(166));if(e=G.current,xa(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,null!==(o=da))switch(o.tag){case 27:case 5:a=o.memoizedProps}e[$e]=t,(e=!!(e.nodeValue===n||null!==a&&!0===a.suppressHydrationWarning||dd(e.nodeValue,n)))||ya(t,!0)}else(e=bd(e).createTextNode(a))[$e]=t,t.stateNode=e}return ms(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(a=xa(t),null!==n){if(null===e){if(!a)throw Error(r(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(r(557));e[$e]=t}else wa(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;ms(t),e=!1}else n=ka(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Bo(t),t):(Bo(t),null);if(128&t.flags)throw Error(r(558))}return ms(t),null;case 13:if(a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(o=xa(t),null!==a&&null!==a.dehydrated){if(null===e){if(!o)throw Error(r(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(r(317));o[$e]=t}else wa(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;ms(t),o=!1}else o=ka(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return 256&t.flags?(Bo(t),t):(Bo(t),null)}return Bo(t),128&t.flags?(t.lanes=n,t):(n=null!==a,e=null!==e&&null!==e.memoizedState,n&&(o=null,null!==(a=t.child).alternate&&null!==a.alternate.memoizedState&&null!==a.alternate.memoizedState.cachePool&&(o=a.alternate.memoizedState.cachePool.pool),l=null,null!==a.memoizedState&&null!==a.memoizedState.cachePool&&(l=a.memoizedState.cachePool.pool),l!==o&&(a.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),fs(t,t.updateQueue),ms(t),null);case 4:return J(),null===e&&td(t.stateNode.containerInfo),ms(t),null;case 10:return Da(t.type),ms(t),null;case 19:if(U(Uo),null===(a=t.memoizedState))return ms(t),null;if(o=!!(128&t.flags),null===(l=a.rendering))if(o)ps(a,!1);else{if(0!==Cc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(l=$o(e))){for(t.flags|=128,ps(a,!1),e=l.updateQueue,t.updateQueue=e,fs(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)$r(n,e),n=n.sibling;return $(Uo,1&Uo.current|2),pa&&la(t,a.treeForkCount),t.child}e=e.sibling}null!==a.tail&&ue()>Oc&&(t.flags|=128,o=!0,ps(a,!1),t.lanes=4194304)}else{if(!o)if(null!==(e=$o(l))){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,fs(t,e),ps(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!pa)return ms(t),null}else 2*ue()-a.renderingStartTime>Oc&&536870912!==n&&(t.flags|=128,o=!0,ps(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(e=a.last)?e.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=ue(),e.sibling=null,n=Uo.current,$(Uo,o?1&n|2:1&n),pa&&la(t,a.treeForkCount),e):(ms(t),null);case 22:case 23:return Bo(t),zo(),a=null!==t.memoizedState,null!==e?null!==e.memoizedState!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?!!(536870912&n)&&!(128&t.flags)&&(ms(t),6&t.subtreeFlags&&(t.flags|=8192)):ms(t),null!==(n=t.updateQueue)&&fs(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),a=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),null!==e&&U(Ka),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Da(qa),ms(t),null;case 25:case 30:return null}throw Error(r(156,t.tag))}function gs(e,t){switch(ca(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Da(qa),J(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Z(t),null;case 31:if(null!==t.memoizedState){if(Bo(t),null===t.alternate)throw Error(r(340));wa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Bo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));wa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return U(Uo),null;case 4:return J(),null;case 10:return Da(t.type),null;case 22:case 23:return Bo(t),zo(),null!==e&&U(Ka),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Da(qa),null;default:return null}}function ys(e,t){switch(ca(t),t.tag){case 3:Da(qa),J();break;case 26:case 27:case 5:Z(t);break;case 4:J();break;case 31:null!==t.memoizedState&&Bo(t);break;case 13:Bo(t);break;case 19:U(Uo);break;case 10:Da(t.type);break;case 22:case 23:Bo(t),zo(),null!==e&&U(Ka);break;case 24:Da(qa)}}function bs(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var a=r.next;n=a;do{if((n.tag&e)===e){r=void 0;var o=n.create,l=n.inst;r=o(),l.destroy=r}n=n.next}while(n!==a)}}catch(i){Cu(t,t.return,i)}}function vs(e,t,n){try{var r=t.updateQueue,a=null!==r?r.lastEffect:null;if(null!==a){var o=a.next;r=o;do{if((r.tag&e)===e){var l=r.inst,i=l.destroy;if(void 0!==i){l.destroy=void 0,a=t;var s=n,c=i;try{c()}catch(u){Cu(a,s,u)}}}r=r.next}while(r!==o)}}catch(u){Cu(t,t.return,u)}}function xs(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Lo(t,n)}catch(r){Cu(e,e.return,r)}}}function ws(e,t,n){n.props=Ci(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){Cu(e,t,r)}}function ks(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"==typeof n?e.refCleanup=n(r):n.current=r}}catch(a){Cu(e,t,a)}}function Ss(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"==typeof r)try{r()}catch(a){Cu(e,t,a)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(o){Cu(e,t,o)}else n.current=null}function js(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(a){Cu(e,e.return,a)}}function Cs(e,t,n){try{var a=e.stateNode;!function(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,l=null,i=null,s=null,c=null,u=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&null!=f)switch(m){case"checked":case"value":break;case"defaultValue":c=f;default:a.hasOwnProperty(m)||fd(e,t,m,null,a,f)}}for(var p in a){var m=a[p];if(f=n[p],a.hasOwnProperty(p)&&(null!=m||null!=f))switch(p){case"type":l=m;break;case"name":o=m;break;case"checked":u=m;break;case"defaultChecked":d=m;break;case"value":i=m;break;case"defaultValue":s=m;break;case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(r(137,t));break;default:m!==f&&fd(e,t,p,m,a,f)}}return void xt(e,i,s,c,u,d,l,o);case"select":for(l in m=i=s=p=null,n)if(c=n[l],n.hasOwnProperty(l)&&null!=c)switch(l){case"value":break;case"multiple":m=c;default:a.hasOwnProperty(l)||fd(e,t,l,null,a,c)}for(o in a)if(l=a[o],c=n[o],a.hasOwnProperty(o)&&(null!=l||null!=c))switch(o){case"value":p=l;break;case"defaultValue":s=l;break;case"multiple":i=l;default:l!==c&&fd(e,t,o,l,a,c)}return t=s,n=i,a=m,void(null!=p?St(e,!!n,p,!1):!!a!=!!n&&(null!=t?St(e,!!n,t,!0):St(e,!!n,n?[]:"",!1)));case"textarea":for(s in m=p=null,n)if(o=n[s],n.hasOwnProperty(s)&&null!=o&&!a.hasOwnProperty(s))switch(s){case"value":case"children":break;default:fd(e,t,s,null,a,o)}for(i in a)if(o=a[i],l=n[i],a.hasOwnProperty(i)&&(null!=o||null!=l))switch(i){case"value":p=o;break;case"defaultValue":m=o;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(r(91));break;default:o!==l&&fd(e,t,i,o,a,l)}return void jt(e,p,m);case"option":for(var h in n)if(p=n[h],n.hasOwnProperty(h)&&null!=p&&!a.hasOwnProperty(h))if("selected"===h)e.selected=!1;else fd(e,t,h,null,a,p);for(c in a)if(p=a[c],m=n[c],a.hasOwnProperty(c)&&p!==m&&(null!=p||null!=m))if("selected"===c)e.selected=p&&"function"!=typeof p&&"symbol"!=typeof p;else fd(e,t,c,p,a,m);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&null!=p&&!a.hasOwnProperty(g)&&fd(e,t,g,null,a,p);for(u in a)if(p=a[u],m=n[u],a.hasOwnProperty(u)&&p!==m&&(null!=p||null!=m))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(r(137,t));break;default:fd(e,t,u,p,a,m)}return;default:if(Tt(t)){for(var y in n)p=n[y],n.hasOwnProperty(y)&&void 0!==p&&!a.hasOwnProperty(y)&&pd(e,t,y,void 0,a,p);for(d in a)p=a[d],m=n[d],!a.hasOwnProperty(d)||p===m||void 0===p&&void 0===m||pd(e,t,d,p,a,m);return}}for(var b in n)p=n[b],n.hasOwnProperty(b)&&null!=p&&!a.hasOwnProperty(b)&&fd(e,t,b,null,a,p);for(f in a)p=a[f],m=n[f],!a.hasOwnProperty(f)||p===m||null==p&&null==m||fd(e,t,f,p,a,m)}(a,e.type,n,t),a[Qe]=t}catch(o){Cu(e,e.return,o)}}function Ns(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Dd(e.type)||4===e.tag}function Es(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Ns(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Dd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Ds(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=zt));else if(4!==r&&(27===r&&Dd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Ds(e,t,n),e=e.sibling;null!==e;)Ds(e,t,n),e=e.sibling}function Ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Dd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Ls(e,t,n),e=e.sibling;null!==e;)Ls(e,t,n),e=e.sibling}function Ts(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);md(t,r,n),t[$e]=e,t[Qe]=n}catch(o){Cu(e,e.return,o)}}var As=!1,_s=!1,Ps=!1,zs="function"==typeof WeakSet?WeakSet:Set,Is=null;function Os(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Ys(e,n),4&r&&bs(5,n);break;case 1:if(Ys(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(l){Cu(n,n.return,l)}else{var a=Ci(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(i){Cu(n,n.return,i)}}64&r&&xs(n),512&r&&ks(n,n.return);break;case 3:if(Ys(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Lo(e,t)}catch(l){Cu(n,n.return,l)}}break;case 27:null===t&&4&r&&Ts(n);case 26:case 5:Ys(e,n),null===t&&4&r&&js(n),512&r&&ks(n,n.return);break;case 12:Ys(e,n);break;case 31:Ys(e,n),4&r&&Us(e,n);break;case 13:Ys(e,n),4&r&&$s(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Lu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||As)){t=null!==t&&null!==t.memoizedState||_s,a=As;var o=_s;As=r,(_s=t)&&!o?Xs(e,n,!!(8772&n.subtreeFlags)):Ys(e,n),As=a,_s=o}break;case 30:break;default:Ys(e,n)}}function Fs(e){var t=e.alternate;null!==t&&(e.alternate=null,Fs(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Je(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ms=null,Rs=!1;function qs(e,t,n){for(n=n.child;null!==n;)Bs(e,t,n),n=n.sibling}function Bs(e,t,n){if(xe&&"function"==typeof xe.onCommitFiberUnmount)try{xe.onCommitFiberUnmount(ve,n)}catch(o){}switch(n.tag){case 26:_s||Ss(n,t),qs(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:_s||Ss(n,t);var r=Ms,a=Rs;Dd(n.type)&&(Ms=n.stateNode,Rs=!1),qs(e,t,n),qd(n.stateNode),Ms=r,Rs=a;break;case 5:_s||Ss(n,t);case 6:if(r=Ms,a=Rs,Ms=null,qs(e,t,n),Rs=a,null!==(Ms=r))if(Rs)try{(9===Ms.nodeType?Ms.body:"HTML"===Ms.nodeName?Ms.ownerDocument.body:Ms).removeChild(n.stateNode)}catch(l){Cu(n,t,l)}else try{Ms.removeChild(n.stateNode)}catch(l){Cu(n,t,l)}break;case 18:null!==Ms&&(Rs?(Ld(9===(e=Ms).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Wf(e)):Ld(Ms,n.stateNode));break;case 4:r=Ms,a=Rs,Ms=n.stateNode.containerInfo,Rs=!0,qs(e,t,n),Ms=r,Rs=a;break;case 0:case 11:case 14:case 15:vs(2,n,t),_s||vs(4,n,t),qs(e,t,n);break;case 1:_s||(Ss(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&ws(n,t,r)),qs(e,t,n);break;case 21:qs(e,t,n);break;case 22:_s=(r=_s)||null!==n.memoizedState,qs(e,t,n),_s=r;break;default:qs(e,t,n)}}function Us(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Wf(e)}catch(n){Cu(t,t.return,n)}}}function $s(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Wf(e)}catch(n){Cu(t,t.return,n)}}function Qs(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new zs),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new zs),t;default:throw Error(r(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Tu.bind(null,e,t);t.then(r,r)}})}function Vs(e,t){var n=t.deletions;if(null!==n)for(var a=0;a<n.length;a++){var o=n[a],l=e,i=t,s=i;e:for(;null!==s;){switch(s.tag){case 27:if(Dd(s.type)){Ms=s.stateNode,Rs=!1;break e}break;case 5:Ms=s.stateNode,Rs=!1;break e;case 3:case 4:Ms=s.stateNode.containerInfo,Rs=!0;break e}s=s.return}if(null===Ms)throw Error(r(160));Bs(l,i,o),Ms=null,Rs=!1,null!==(l=o.alternate)&&(l.return=null),o.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Ws(t,e),t=t.sibling}var Hs=null;function Ws(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Vs(t,e),Gs(e),4&a&&(vs(3,e,e.return),bs(3,e),vs(5,e,e.return));break;case 1:Vs(t,e),Gs(e),512&a&&(_s||null===n||Ss(n,n.return)),64&a&&As&&(null!==(e=e.updateQueue)&&(null!==(a=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?a:n.concat(a))));break;case 26:var o=Hs;if(Vs(t,e),Gs(e),512&a&&(_s||null===n||Ss(n,n.return)),4&a){var l=null!==n?n.memoizedState:null;if(a=e.memoizedState,null===n)if(null===a)if(null===e.stateNode){e:{a=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(a){case"title":(!(l=o.getElementsByTagName("title")[0])||l[Ye]||l[$e]||"http://www.w3.org/2000/svg"===l.namespaceURI||l.hasAttribute("itemprop"))&&(l=o.createElement(a),o.head.insertBefore(l,o.querySelector("head > title"))),md(l,a,n),l[$e]=e,nt(l),a=l;break e;case"link":var i=af("link","href",o).get(a+(n.href||""));if(i)for(var s=0;s<i.length;s++)if((l=i[s]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&l.getAttribute("rel")===(null==n.rel?null:n.rel)&&l.getAttribute("title")===(null==n.title?null:n.title)&&l.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){i.splice(s,1);break t}md(l=o.createElement(a),a,n),o.head.appendChild(l);break;case"meta":if(i=af("meta","content",o).get(a+(n.content||"")))for(s=0;s<i.length;s++)if((l=i[s]).getAttribute("content")===(null==n.content?null:""+n.content)&&l.getAttribute("name")===(null==n.name?null:n.name)&&l.getAttribute("property")===(null==n.property?null:n.property)&&l.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&l.getAttribute("charset")===(null==n.charSet?null:n.charSet)){i.splice(s,1);break t}md(l=o.createElement(a),a,n),o.head.appendChild(l);break;default:throw Error(r(468,a))}l[$e]=e,nt(l),a=l}e.stateNode=a}else of(o,e.type,e.stateNode);else e.stateNode=Zd(o,a,e.memoizedProps);else l!==a?(null===l?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):l.count--,null===a?of(o,e.type,e.stateNode):Zd(o,a,e.memoizedProps)):null===a&&null!==e.stateNode&&Cs(e,e.memoizedProps,n.memoizedProps)}break;case 27:Vs(t,e),Gs(e),512&a&&(_s||null===n||Ss(n,n.return)),null!==n&&4&a&&Cs(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Vs(t,e),Gs(e),512&a&&(_s||null===n||Ss(n,n.return)),32&e.flags){o=e.stateNode;try{Nt(o,"")}catch(h){Cu(e,e.return,h)}}4&a&&null!=e.stateNode&&Cs(e,o=e.memoizedProps,null!==n?n.memoizedProps:o),1024&a&&(Ps=!0);break;case 6:if(Vs(t,e),Gs(e),4&a){if(null===e.stateNode)throw Error(r(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(h){Cu(e,e.return,h)}}break;case 3:if(rf=null,o=Hs,Hs=$d(t.containerInfo),Vs(t,e),Hs=o,Gs(e),4&a&&null!==n&&n.memoizedState.isDehydrated)try{Wf(t.containerInfo)}catch(h){Cu(e,e.return,h)}Ps&&(Ps=!1,Ks(e));break;case 4:a=Hs,Hs=$d(e.stateNode.containerInfo),Vs(t,e),Gs(e),Hs=a;break;case 12:default:Vs(t,e),Gs(e);break;case 31:case 19:Vs(t,e),Gs(e),4&a&&(null!==(a=e.updateQueue)&&(e.updateQueue=null,Qs(e,a)));break;case 13:Vs(t,e),Gs(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(zc=ue()),4&a&&(null!==(a=e.updateQueue)&&(e.updateQueue=null,Qs(e,a)));break;case 22:o=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=As,d=_s;if(As=u||o,_s=d||c,Vs(t,e),_s=d,As=u,Gs(e),8192&a)e:for(t=e.stateNode,t._visibility=o?-2&t._visibility:1|t._visibility,o&&(null===n||c||As||_s||Js(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(l=c.stateNode,o)"function"==typeof(i=l.style).setProperty?i.setProperty("display","none","important"):i.display="none";else{s=c.stateNode;var f=c.memoizedProps.style,p=null!=f&&f.hasOwnProperty("display")?f.display:null;s.style.display=null==p||"boolean"==typeof p?"":(""+p).trim()}}catch(h){Cu(c,c.return,h)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=o?"":c.memoizedProps}catch(h){Cu(c,c.return,h)}}}else if(18===t.tag){if(null===n){c=t;try{var m=c.stateNode;o?Td(m,!0):Td(c.stateNode,!1)}catch(h){Cu(c,c.return,h)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&a&&(null!==(a=e.updateQueue)&&(null!==(n=a.retryQueue)&&(a.retryQueue=null,Qs(e,n))));case 30:case 21:}}function Gs(e){var t=e.flags;if(2&t){try{for(var n,a=e.return;null!==a;){if(Ns(a)){n=a;break}a=a.return}if(null==n)throw Error(r(160));switch(n.tag){case 27:var o=n.stateNode;Ls(e,Es(e),o);break;case 5:var l=n.stateNode;32&n.flags&&(Nt(l,""),n.flags&=-33),Ls(e,Es(e),l);break;case 3:case 4:var i=n.stateNode.containerInfo;Ds(e,Es(e),i);break;default:throw Error(r(161))}}catch(s){Cu(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ks(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ks(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ys(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Os(e,t.alternate,t),t=t.sibling}function Js(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:vs(4,t,t.return),Js(t);break;case 1:Ss(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&ws(t,t.return,n),Js(t);break;case 27:qd(t.stateNode);case 26:case 5:Ss(t,t.return),Js(t);break;case 22:null===t.memoizedState&&Js(t);break;default:Js(t)}e=e.sibling}}function Xs(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,a=e,o=t,l=o.flags;switch(o.tag){case 0:case 11:case 15:Xs(a,o,n),bs(4,o);break;case 1:if(Xs(a,o,n),"function"==typeof(a=(r=o).stateNode).componentDidMount)try{a.componentDidMount()}catch(c){Cu(r,r.return,c)}if(null!==(a=(r=o).updateQueue)){var i=r.stateNode;try{var s=a.shared.hiddenCallbacks;if(null!==s)for(a.shared.hiddenCallbacks=null,a=0;a<s.length;a++)Do(s[a],i)}catch(c){Cu(r,r.return,c)}}n&&64&l&&xs(o),ks(o,o.return);break;case 27:Ts(o);case 26:case 5:Xs(a,o,n),n&&null===r&&4&l&&js(o),ks(o,o.return);break;case 12:Xs(a,o,n);break;case 31:Xs(a,o,n),n&&4&l&&Us(a,o);break;case 13:Xs(a,o,n),n&&4&l&&$s(a,o);break;case 22:null===o.memoizedState&&Xs(a,o,n),ks(o,o.return);break;case 30:break;default:Xs(a,o,n)}t=t.sibling}}function Zs(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ua(n))}function ec(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ua(e))}function tc(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)nc(e,t,n,r),t=t.sibling}function nc(e,t,n,r){var a=t.flags;switch(t.tag){case 0:case 11:case 15:tc(e,t,n,r),2048&a&&bs(9,t);break;case 1:case 31:case 13:default:tc(e,t,n,r);break;case 3:tc(e,t,n,r),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ua(e)));break;case 12:if(2048&a){tc(e,t,n,r),e=t.stateNode;try{var o=t.memoizedProps,l=o.id,i=o.onPostCommit;"function"==typeof i&&i(l,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(s){Cu(t,t.return,s)}}else tc(e,t,n,r);break;case 23:break;case 22:o=t.stateNode,l=t.alternate,null!==t.memoizedState?2&o._visibility?tc(e,t,n,r):ac(e,t):2&o._visibility?tc(e,t,n,r):(o._visibility|=2,rc(e,t,n,r,!!(10256&t.subtreeFlags)||!1)),2048&a&&Zs(l,t);break;case 24:tc(e,t,n,r),2048&a&&ec(t.alternate,t)}}function rc(e,t,n,r,a){for(a=a&&(!!(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var o=e,l=t,i=n,s=r,c=l.flags;switch(l.tag){case 0:case 11:case 15:rc(o,l,i,s,a),bs(8,l);break;case 23:break;case 22:var u=l.stateNode;null!==l.memoizedState?2&u._visibility?rc(o,l,i,s,a):ac(o,l):(u._visibility|=2,rc(o,l,i,s,a)),a&&2048&c&&Zs(l.alternate,l);break;case 24:rc(o,l,i,s,a),a&&2048&c&&ec(l.alternate,l);break;default:rc(o,l,i,s,a)}t=t.sibling}}function ac(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,a=r.flags;switch(r.tag){case 22:ac(n,r),2048&a&&Zs(r.alternate,r);break;case 24:ac(n,r),2048&a&&ec(r.alternate,r);break;default:ac(n,r)}t=t.sibling}}var oc=8192;function lc(e,t,n){if(e.subtreeFlags&oc)for(e=e.child;null!==e;)ic(e,t,n),e=e.sibling}function ic(e,t,n){switch(e.tag){case 26:lc(e,t,n),e.flags&oc&&null!==e.memoizedState&&function(e,t,n,r){if(!("stylesheet"!==n.type||"string"==typeof r.media&&!1===matchMedia(r.media).matches||4&n.state.loading)){if(null===n.instance){var a=Gd(r.href),o=t.querySelector(Kd(a));if(o)return null!==(t=o._p)&&"object"==typeof t&&"function"==typeof t.then&&(e.count++,e=cf.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=o,void nt(o);o=t.ownerDocument||t,r=Yd(r),(a=Bd.get(a))&&tf(r,a),nt(o=o.createElement("link"));var l=o;l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),md(o,"link",r),n.instance=o}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(3&n.state.loading)&&(e.count++,n=cf.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Hs,e.memoizedState,e.memoizedProps);break;case 5:default:lc(e,t,n);break;case 3:case 4:var r=Hs;Hs=$d(e.stateNode.containerInfo),lc(e,t,n),Hs=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=oc,oc=16777216,lc(e,t,n),oc=r):lc(e,t,n))}}function sc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function cc(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Is=r,fc(r,e)}sc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)uc(e),e=e.sibling}function uc(e){switch(e.tag){case 0:case 11:case 15:cc(e),2048&e.flags&&vs(9,e,e.return);break;case 3:case 12:default:cc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,dc(e)):cc(e)}}function dc(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Is=r,fc(r,e)}sc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:vs(8,t,t.return),dc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,dc(t));break;default:dc(t)}e=e.sibling}}function fc(e,t){for(;null!==Is;){var n=Is;switch(n.tag){case 0:case 11:case 15:vs(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ua(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Is=r;else e:for(n=e;null!==Is;){var a=(r=Is).sibling,o=r.return;if(Fs(r),r===n){Is=null;break e}if(null!==a){a.return=o,Is=a;break e}Is=o}}}var pc={getCacheForType:function(e){var t=za(qa),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return za(qa).controller.signal}},mc="function"==typeof WeakMap?WeakMap:Map,hc=0,gc=null,yc=null,bc=0,vc=0,xc=null,wc=!1,kc=!1,Sc=!1,jc=0,Cc=0,Nc=0,Ec=0,Dc=0,Lc=0,Tc=0,Ac=null,_c=null,Pc=!1,zc=0,Ic=0,Oc=1/0,Fc=null,Mc=null,Rc=0,qc=null,Bc=null,Uc=0,$c=0,Qc=null,Vc=null,Hc=0,Wc=null;function Gc(){return 2&hc&&0!==bc?bc&-bc:null!==O.T?Qu():qe()}function Kc(){if(0===Lc)if(536870912&bc&&!pa)Lc=536870912;else{var e=Ne;!(3932160&(Ne<<=1))&&(Ne=262144),Lc=e}return null!==(e=Io.current)&&(e.flags|=32),Lc}function Yc(e,t,n){(e!==gc||2!==vc&&9!==vc)&&null===e.cancelPendingCommit||(ru(e,0),eu(e,bc,Lc,!1)),ze(e,n),2&hc&&e===gc||(e===gc&&(!(2&hc)&&(Ec|=n),4===Cc&&eu(e,bc,Lc,!1)),Fu(e))}function Jc(e,t,n){if(6&hc)throw Error(r(327));for(var a=!n&&!(127&t)&&0===(t&e.expiredLanes)||Te(e,t),o=a?function(e,t){var n=hc;hc|=2;var a=lu(),o=iu();gc!==e||bc!==t?(Fc=null,Oc=ue()+500,ru(e,t)):kc=Te(e,t);e:for(;;)try{if(0!==vc&&null!==yc){t=yc;var l=xc;t:switch(vc){case 1:vc=0,xc=null,mu(e,t,l,1);break;case 2:case 9:if(ro(l)){vc=0,xc=null,pu(t);break}t=function(){2!==vc&&9!==vc||gc!==e||(vc=7),Fu(e)},l.then(t,t);break e;case 3:vc=7;break e;case 4:vc=5;break e;case 7:ro(l)?(vc=0,xc=null,pu(t)):(vc=0,xc=null,mu(e,t,l,7));break;case 5:var i=null;switch(yc.tag){case 26:i=yc.memoizedState;case 5:case 27:var s=yc;if(i?lf(i):s.stateNode.complete){vc=0,xc=null;var c=s.sibling;if(null!==c)yc=c;else{var u=s.return;null!==u?(yc=u,hu(u)):yc=null}break t}}vc=0,xc=null,mu(e,t,l,5);break;case 6:vc=0,xc=null,mu(e,t,l,6);break;case 8:nu(),Cc=6;break e;default:throw Error(r(462))}}du();break}catch(d){au(e,d)}return Na=Ca=null,O.H=a,O.A=o,hc=n,null!==yc?0:(gc=null,bc=0,_r(),Cc)}(e,t):cu(e,t,!0),l=a;;){if(0===o){kc&&!a&&eu(e,t,0,!1);break}if(n=e.current.alternate,!l||Zc(n)){if(2===o){if(l=t,e.errorRecoveryDisabledLanes&l)var i=0;else i=0!==(i=-536870913&e.pendingLanes)?i:536870912&i?536870912:0;if(0!==i){t=i;e:{var s=e;o=Ac;var c=s.current.memoizedState.isDehydrated;if(c&&(ru(s,i).flags|=256),2!==(i=cu(s,i,!1))){if(Sc&&!c){s.errorRecoveryDisabledLanes|=l,Ec|=l,o=4;break e}l=_c,_c=o,null!==l&&(null===_c?_c=l:_c.push.apply(_c,l))}o=i}if(l=!1,2!==o)continue}}if(1===o){ru(e,0),eu(e,t,0,!0);break}e:{switch(a=e,l=o){case 0:case 1:throw Error(r(345));case 4:if((4194048&t)!==t)break;case 6:eu(a,t,Lc,!wc);break e;case 2:_c=null;break;case 3:case 5:break;default:throw Error(r(329))}if((62914560&t)===t&&10<(o=zc+300-ue())){if(eu(a,t,Lc,!wc),0!==Le(a,0,!0))break e;Uc=t,a.timeoutHandle=Sd(Xc.bind(null,a,n,_c,Fc,Pc,t,Lc,Ec,Tc,wc,l,"Throttled",-0,0),o)}else Xc(a,n,_c,Fc,Pc,t,Lc,Ec,Tc,wc,l,null,-0,0)}break}o=cu(e,t,!1),l=!1}Fu(e)}function Xc(e,t,n,r,a,o,l,i,s,c,u,d,f,p){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||!(16785408&~d)){ic(t,o,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:zt});var m=(62914560&o)===o?zc-ue():(4194048&o)===o?Ic-ue():0;if(null!==(m=function(e,t){return e.stylesheets&&0===e.count&&df(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&df(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===sf&&(sf=62500*function(){if("function"==typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var a=n[r],o=a.transferSize,l=a.initiatorType,i=a.duration;if(o&&i&&hd(l)){for(l=0,i=a.responseEnd,r+=1;r<n.length;r++){var s=n[r],c=s.startTime;if(c>i)break;var u=s.transferSize,d=s.initiatorType;u&&hd(d)&&(l+=u*((s=s.responseEnd)<i?1:(i-c)/(s-c)))}if(--r,t+=8*(o+l)/(a.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"==typeof(e=navigator.connection.downlink)?e:5}());var a=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&df(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>sf?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(a)}}:null}(d,m)))return Uc=o,e.cancelPendingCommit=m(yu.bind(null,e,t,o,n,r,a,l,i,s,u,d,null,f,p)),void eu(e,o,l,!c)}yu(e,t,o,n,r,a,l,i,s)}function Zc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var a=n[r],o=a.getSnapshot;a=a.value;try{if(!er(o(),a))return!1}catch(l){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function eu(e,t,n,r){t&=~Dc,t&=~Ec,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var a=t;0<a;){var o=31-ke(a),l=1<<o;r[o]=-1,a&=~l}0!==n&&Ie(e,n,t)}function tu(){return!!(6&hc)||(Mu(0),!1)}function nu(){if(null!==yc){if(0===vc)var e=yc.return;else Na=Ca=null,cl(e=yc),co=null,uo=0,e=yc;for(;null!==e;)ys(e.alternate,e),e=e.return;yc=null}}function ru(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,jd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Uc=0,nu(),gc=e,yc=n=Ur(e.current,null),bc=t,vc=0,xc=null,wc=!1,kc=Te(e,t),Sc=!1,Tc=Lc=Dc=Ec=Nc=Cc=0,_c=Ac=null,Pc=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var a=31-ke(r),o=1<<a;t|=e[a],r&=~o}return jc=t,_r(),n}function au(e,t){Vo=null,O.H=yi,t===Za||t===to?(t=io(),vc=3):t===eo?(t=io(),vc=4):vc=t===zi?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,xc=t,null===yc&&(Cc=1,Li(e,Yr(t,e.current)))}function ou(){var e=Io.current;return null===e||((4194048&bc)===bc?null===Oo:!!((62914560&bc)===bc||536870912&bc)&&e===Oo)}function lu(){var e=O.H;return O.H=yi,null===e?yi:e}function iu(){var e=O.A;return O.A=pc,e}function su(){Cc=4,wc||(4194048&bc)!==bc&&null!==Io.current||(kc=!0),!(134217727&Nc)&&!(134217727&Ec)||null===gc||eu(gc,bc,Lc,!1)}function cu(e,t,n){var r=hc;hc|=2;var a=lu(),o=iu();gc===e&&bc===t||(Fc=null,ru(e,t)),t=!1;var l=Cc;e:for(;;)try{if(0!==vc&&null!==yc){var i=yc,s=xc;switch(vc){case 8:nu(),l=6;break e;case 3:case 2:case 9:case 6:null===Io.current&&(t=!0);var c=vc;if(vc=0,xc=null,mu(e,i,s,c),n&&kc){l=0;break e}break;default:c=vc,vc=0,xc=null,mu(e,i,s,c)}}uu(),l=Cc;break}catch(u){au(e,u)}return t&&e.shellSuspendCounter++,Na=Ca=null,hc=r,O.H=a,O.A=o,null===yc&&(gc=null,bc=0,_r()),l}function uu(){for(;null!==yc;)fu(yc)}function du(){for(;null!==yc&&!se();)fu(yc)}function fu(e){var t=ss(e.alternate,e,jc);e.memoizedProps=e.pendingProps,null===t?hu(e):yc=t}function pu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Wi(n,t,t.pendingProps,t.type,void 0,bc);break;case 11:t=Wi(n,t,t.pendingProps,t.type.render,t.ref,bc);break;case 5:cl(t);default:ys(n,t),t=ss(n,t=yc=$r(t,jc),jc)}e.memoizedProps=e.pendingProps,null===t?hu(e):yc=t}function mu(e,t,n,a){Na=Ca=null,cl(t),co=null,uo=0;var o=t.return;try{if(function(e,t,n,a,o){if(n.flags|=32768,null!==a&&"object"==typeof a&&"function"==typeof a.then){if(null!==(t=n.alternate)&&Aa(t,n,o,!0),null!==(n=Io.current)){switch(n.tag){case 31:case 13:return null===Oo?su():null===n.alternate&&0===Cc&&(Cc=3),n.flags&=-257,n.flags|=65536,n.lanes=o,a===no?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([a]):t.add(a),Nu(e,a,o)),!1;case 22:return n.flags|=65536,a===no?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([a]):n.add(a),Nu(e,a,o)),!1}throw Error(r(435,n.tag))}return Nu(e,a,o),su(),!1}if(pa)return null!==(t=Io.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=o,a!==ga&&Sa(Yr(e=Error(r(422),{cause:a}),n))):(a!==ga&&Sa(Yr(t=Error(r(423),{cause:a}),n)),(e=e.current.alternate).flags|=65536,o&=-o,e.lanes|=o,a=Yr(a,n),jo(e,o=Ai(e.stateNode,a,o)),4!==Cc&&(Cc=2)),!1;var l=Error(r(520),{cause:a});if(l=Yr(l,n),null===Ac?Ac=[l]:Ac.push(l),4!==Cc&&(Cc=2),null===t)return!0;a=Yr(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,jo(n,e=Ai(n.stateNode,a,e)),!1;case 1:if(t=n.type,l=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===l||"function"!=typeof l.componentDidCatch||null!==Mc&&Mc.has(l))))return n.flags|=65536,o&=-o,n.lanes|=o,Pi(o=_i(o),e,n,a),jo(n,o),!1}n=n.return}while(null!==n);return!1}(e,o,t,n,bc))return Cc=1,Li(e,Yr(n,e.current)),void(yc=null)}catch(l){if(null!==o)throw yc=o,l;return Cc=1,Li(e,Yr(n,e.current)),void(yc=null)}32768&t.flags?(pa||1===a?e=!0:kc||536870912&bc?e=!1:(wc=e=!0,(2===a||9===a||3===a||6===a)&&(null!==(a=Io.current)&&13===a.tag&&(a.flags|=16384))),gu(t,e)):hu(t)}function hu(e){var t=e;do{if(32768&t.flags)return void gu(t,wc);e=t.return;var n=hs(t.alternate,t,jc);if(null!==n)return void(yc=n);if(null!==(t=t.sibling))return void(yc=t);yc=t=e}while(null!==t);0===Cc&&(Cc=5)}function gu(e,t){do{var n=gs(e.alternate,e);if(null!==n)return n.flags&=32767,void(yc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(yc=e);yc=e=n}while(null!==e);Cc=6,yc=null}function yu(e,t,n,a,o,l,i,s,c){e.cancelPendingCommit=null;do{ku()}while(0!==Rc);if(6&hc)throw Error(r(327));if(null!==t){if(t===e.current)throw Error(r(177));if(l=t.lanes|t.childLanes,function(e,t,n,r,a,o){var l=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var i=e.entanglements,s=e.expirationTimes,c=e.hiddenUpdates;for(n=l&~n;0<n;){var u=31-ke(n),d=1<<u;i[u]=0,s[u]=-1;var f=c[u];if(null!==f)for(c[u]=null,u=0;u<f.length;u++){var p=f[u];null!==p&&(p.lane&=-536870913)}n&=~d}0!==r&&Ie(e,r,0),0!==o&&0===a&&0!==e.tag&&(e.suspendedLanes|=o&~(l&~t))}(e,n,l|=Ar,i,s,c),e===gc&&(yc=gc=null,bc=0),Bc=t,qc=e,Uc=n,$c=l,Qc=o,Vc=a,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,le(me,function(){return Su(),null})):(e.callbackNode=null,e.callbackPriority=0),a=!!(13878&t.flags),13878&t.subtreeFlags||a){a=O.T,O.T=null,o=F.p,F.p=2,i=hc,hc|=4;try{!function(e,t){if(e=e.containerInfo,gd=kf,lr(e=or(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(a&&0!==a.rangeCount){n=a.anchorNode;var o=a.anchorOffset,l=a.focusNode;a=a.focusOffset;try{n.nodeType,l.nodeType}catch(g){n=null;break e}var i=0,s=-1,c=-1,u=0,d=0,f=e,p=null;t:for(;;){for(var m;f!==n||0!==o&&3!==f.nodeType||(s=i+o),f!==l||0!==a&&3!==f.nodeType||(c=i+a),3===f.nodeType&&(i+=f.nodeValue.length),null!==(m=f.firstChild);)p=f,f=m;for(;;){if(f===e)break t;if(p===n&&++u===o&&(s=i),p===l&&++d===a&&(c=i),null!==(m=f.nextSibling))break;p=(f=p).parentNode}f=m}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(yd={focusedElem:e,selectionRange:n},kf=!1,Is=t;null!==Is;)if(e=(t=Is).child,1028&t.subtreeFlags&&null!==e)e.return=t,Is=e;else for(;null!==Is;){switch(l=(t=Is).alternate,e=t.flags,t.tag){case 0:if(4&e&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(o=e[n]).ref.impl=o.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==l){e=void 0,n=t,o=l.memoizedProps,l=l.memoizedState,a=n.stateNode;try{var h=Ci(n.type,o);e=a.getSnapshotBeforeUpdate(h,l),a.__reactInternalSnapshotBeforeUpdate=e}catch(y){Cu(n,n.return,y)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))Ad(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ad(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(r(163))}if(null!==(e=t.sibling)){e.return=t.return,Is=e;break}Is=t.return}}(e,t)}finally{hc=i,F.p=o,O.T=a}}Rc=1,bu(),vu(),xu()}}function bu(){if(1===Rc){Rc=0;var e=qc,t=Bc,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=O.T,O.T=null;var r=F.p;F.p=2;var a=hc;hc|=4;try{Ws(t,e);var o=yd,l=or(e.containerInfo),i=o.focusedElem,s=o.selectionRange;if(l!==i&&i&&i.ownerDocument&&ar(i.ownerDocument.documentElement,i)){if(null!==s&&lr(i)){var c=s.start,u=s.end;if(void 0===u&&(u=c),"selectionStart"in i)i.selectionStart=c,i.selectionEnd=Math.min(u,i.value.length);else{var d=i.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),m=i.textContent.length,h=Math.min(s.start,m),g=void 0===s.end?h:Math.min(s.end,m);!p.extend&&h>g&&(l=g,g=h,h=l);var y=rr(i,h),b=rr(i,g);if(y&&b&&(1!==p.rangeCount||p.anchorNode!==y.node||p.anchorOffset!==y.offset||p.focusNode!==b.node||p.focusOffset!==b.offset)){var v=d.createRange();v.setStart(y.node,y.offset),p.removeAllRanges(),h>g?(p.addRange(v),p.extend(b.node,b.offset)):(v.setEnd(b.node,b.offset),p.addRange(v))}}}}for(d=[],p=i;p=p.parentNode;)1===p.nodeType&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"==typeof i.focus&&i.focus(),i=0;i<d.length;i++){var x=d[i];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}kf=!!gd,yd=gd=null}finally{hc=a,F.p=r,O.T=n}}e.current=t,Rc=2}}function vu(){if(2===Rc){Rc=0;var e=qc,t=Bc,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=O.T,O.T=null;var r=F.p;F.p=2;var a=hc;hc|=4;try{Os(e,t.alternate,t)}finally{hc=a,F.p=r,O.T=n}}Rc=3}}function xu(){if(4===Rc||3===Rc){Rc=0,ce();var e=qc,t=Bc,n=Uc,r=Vc;10256&t.subtreeFlags||10256&t.flags?Rc=5:(Rc=0,Bc=qc=null,wu(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(Mc=null),Re(n),t=t.stateNode,xe&&"function"==typeof xe.onCommitFiberRoot)try{xe.onCommitFiberRoot(ve,t,void 0,!(128&~t.current.flags))}catch(s){}if(null!==r){t=O.T,a=F.p,F.p=2,O.T=null;try{for(var o=e.onRecoverableError,l=0;l<r.length;l++){var i=r[l];o(i.value,{componentStack:i.stack})}}finally{O.T=t,F.p=a}}3&Uc&&ku(),Fu(e),a=e.pendingLanes,261930&n&&42&a?e===Wc?Hc++:(Hc=0,Wc=e):Hc=0,Mu(0)}}function wu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ua(t)))}function ku(){return bu(),vu(),xu(),Su()}function Su(){if(5!==Rc)return!1;var e=qc,t=$c;$c=0;var n=Re(Uc),a=O.T,o=F.p;try{F.p=32>n?32:n,O.T=null,n=Qc,Qc=null;var l=qc,i=Uc;if(Rc=0,Bc=qc=null,Uc=0,6&hc)throw Error(r(331));var s=hc;if(hc|=4,uc(l.current),nc(l,l.current,i,n),hc=s,Mu(0,!1),xe&&"function"==typeof xe.onPostCommitFiberRoot)try{xe.onPostCommitFiberRoot(ve,l)}catch(c){}return!0}finally{F.p=o,O.T=a,wu(e,t)}}function ju(e,t,n){t=Yr(n,t),null!==(e=ko(e,t=Ai(e.stateNode,t,2),2))&&(ze(e,2),Fu(e))}function Cu(e,t,n){if(3===e.tag)ju(e,e,n);else for(;null!==t;){if(3===t.tag){ju(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Mc||!Mc.has(r))){e=Yr(n,e),null!==(r=ko(t,n=_i(2),2))&&(Pi(n,r,t,e),ze(r,2),Fu(r));break}}t=t.return}}function Nu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new mc;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(Sc=!0,a.add(n),e=Eu.bind(null,e,t,n),t.then(e,e))}function Eu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,gc===e&&(bc&n)===n&&(4===Cc||3===Cc&&(62914560&bc)===bc&&300>ue()-zc?!(2&hc)&&ru(e,0):Dc|=n,Tc===bc&&(Tc=0)),Fu(e)}function Du(e,t){0===t&&(t=_e()),null!==(e=Ir(e,t))&&(ze(e,t),Fu(e))}function Lu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Du(e,n)}function Tu(e,t){var n=0;switch(e.tag){case 31:case 13:var a=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(r(314))}null!==a&&a.delete(t),Du(e,n)}var Au=null,_u=null,Pu=!1,zu=!1,Iu=!1,Ou=0;function Fu(e){e!==_u&&null===e.next&&(null===_u?Au=_u=e:_u=_u.next=e),zu=!0,Pu||(Pu=!0,Nd(function(){6&hc?le(fe,Ru):qu()}))}function Mu(e,t){if(!Iu&&zu){Iu=!0;do{for(var n=!1,r=Au;null!==r;){if(0!==e){var a=r.pendingLanes;if(0===a)var o=0;else{var l=r.suspendedLanes,i=r.pingedLanes;o=(1<<31-ke(42|e)+1)-1,o=201326741&(o&=a&~(l&~i))?201326741&o|1:o?2|o:0}0!==o&&(n=!0,$u(r,o))}else o=bc,!(3&(o=Le(r,r===gc?o:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Te(r,o)||(n=!0,$u(r,o));r=r.next}}while(n);Iu=!1}}function Ru(){qu()}function qu(){zu=Pu=!1;var e=0;0!==Ou&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==kd&&(kd=e,!0);return kd=null,!1}()&&(e=Ou);for(var t=ue(),n=null,r=Au;null!==r;){var a=r.next,o=Bu(r,t);0===o?(r.next=null,null===n?Au=a:n.next=a,null===a&&(_u=n)):(n=r,(0!==e||3&o)&&(zu=!0)),r=a}0!==Rc&&5!==Rc||Mu(e),0!==Ou&&(Ou=0)}function Bu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=-62914561&e.pendingLanes;0<o;){var l=31-ke(o),i=1<<l,s=a[l];-1===s?0!==(i&n)&&0===(i&r)||(a[l]=Ae(i,t)):s<=t&&(e.expiredLanes|=i),o&=~i}if(n=bc,n=Le(e,e===(t=gc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===vc||9===vc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ie(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||Te(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ie(r),Re(n)){case 2:case 8:n=pe;break;case 32:default:n=me;break;case 268435456:n=ge}return r=Uu.bind(null,e),n=le(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ie(r),e.callbackPriority=2,e.callbackNode=null,2}function Uu(e,t){if(0!==Rc&&5!==Rc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ku()&&e.callbackNode!==n)return null;var r=bc;return 0===(r=Le(e,e===gc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Jc(e,r,t),Bu(e,ue()),null!=e.callbackNode&&e.callbackNode===n?Uu.bind(null,e):null)}function $u(e,t){if(ku())return null;Jc(e,t,!0)}function Qu(){if(0===Ou){var e=Va;0===e&&(e=Ce,!(261888&(Ce<<=1))&&(Ce=256)),Ou=e}return Ou}function Vu(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:Pt(""+e)}function Hu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Wu=0;Wu<Nr.length;Wu++){var Gu=Nr[Wu];Er(Gu.toLowerCase(),"on"+(Gu[0].toUpperCase()+Gu.slice(1)))}Er(br,"onAnimationEnd"),Er(vr,"onAnimationIteration"),Er(xr,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(wr,"onTransitionRun"),Er(kr,"onTransitionStart"),Er(Sr,"onTransitionCancel"),Er(jr,"onTransitionEnd"),lt("onMouseEnter",["mouseout","mouseover"]),lt("onMouseLeave",["mouseout","mouseover"]),lt("onPointerEnter",["pointerout","pointerover"]),lt("onPointerLeave",["pointerout","pointerover"]),ot("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ot("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ot("onBeforeInput",["compositionend","keypress","textInput","paste"]),ot("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ot("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ot("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ku));function Ju(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var l=r.length-1;0<=l;l--){var i=r[l],s=i.instance,c=i.currentTarget;if(i=i.listener,s!==o&&a.isPropagationStopped())break e;o=i,a.currentTarget=c;try{o(a)}catch(u){Dr(u)}a.currentTarget=null,o=s}else for(l=0;l<r.length;l++){if(s=(i=r[l]).instance,c=i.currentTarget,i=i.listener,s!==o&&a.isPropagationStopped())break e;o=i,a.currentTarget=c;try{o(a)}catch(u){Dr(u)}a.currentTarget=null,o=s}}}}function Xu(e,t){var n=t[He];void 0===n&&(n=t[He]=new Set);var r=e+"__bubble";n.has(r)||(nd(t,e,2,!1),n.add(r))}function Zu(e,t,n){var r=0;t&&(r|=4),nd(n,e,r,t)}var ed="_reactListening"+Math.random().toString(36).slice(2);function td(e){if(!e[ed]){e[ed]=!0,rt.forEach(function(t){"selectionchange"!==t&&(Yu.has(t)||Zu(t,!1,e),Zu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[ed]||(t[ed]=!0,Zu("selectionchange",!1,t))}}function nd(e,t,n,r){switch(Lf(t)){case 2:var a=Sf;break;case 8:a=jf;break;default:a=Cf}n=a.bind(null,t,n,e),a=void 0,!Qt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function rd(e,t,n,r,a){var l=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var s=r.stateNode.containerInfo;if(s===a)break;if(4===i)for(i=r.return;null!==i;){var c=i.tag;if((3===c||4===c)&&i.stateNode.containerInfo===a)return;i=i.return}for(;null!==s;){if(null===(i=Xe(s)))return;if(5===(c=i.tag)||6===c||26===c||27===c){r=l=i;continue e}s=s.parentNode}}r=r.return}Bt(function(){var r=l,a=Ot(n),i=[];e:{var s=Cr.get(e);if(void 0!==s){var c=an,u=e;switch(e){case"keypress":if(0===Yt(n))break e;case"keydown":case"keyup":c=xn;break;case"focusin":u="focus",c=dn;break;case"focusout":u="blur",c=dn;break;case"beforeblur":case"afterblur":c=dn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=cn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=un;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=kn;break;case br:case vr:case xr:c=fn;break;case jr:c=Sn;break;case"scroll":case"scrollend":c=ln;break;case"wheel":c=jn;break;case"copy":case"cut":case"paste":c=pn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=wn;break;case"toggle":case"beforetoggle":c=Cn}var d=!!(4&t),f=!d&&("scroll"===e||"scrollend"===e),p=d?null!==s?s+"Capture":null:s;d=[];for(var m,h=r;null!==h;){var g=h;if(m=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===m||null===p||null!=(g=Ut(h,p))&&d.push(ad(h,g,m)),f)break;h=h.return}0<d.length&&(s=new c(s,u,null,n,a),i.push({event:s,listeners:d}))}}if(!(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===It||!(u=n.relatedTarget||n.fromElement)||!Xe(u)&&!u[Ve])&&(c||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Xe(u):null)&&(f=o(u),d=u.tag,u!==f||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=cn,g="onMouseLeave",p="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(d=wn,g="onPointerLeave",p="onPointerEnter",h="pointer"),f=null==c?s:et(c),m=null==u?s:et(u),(s=new d(g,h+"leave",c,n,a)).target=f,s.relatedTarget=m,g=null,Xe(a)===r&&((d=new d(p,h+"enter",u,n,a)).target=m,d.relatedTarget=f,g=d),f=g,c&&u)e:{for(d=ld,h=u,m=0,g=p=c;g;g=d(g))m++;g=0;for(var y=h;y;y=d(y))g++;for(;0<m-g;)p=d(p),m--;for(;0<g-m;)h=d(h),g--;for(;m--;){if(p===h||null!==h&&p===h.alternate){d=p;break e}p=d(p),h=d(h)}d=null}else d=null;null!==c&&id(i,s,c,d,!1),null!==u&&null!==f&&id(i,f,u,d,!0)}if("select"===(c=(s=r?et(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var b=$n;else if(Fn(s))if(Qn)b=Zn;else{b=Jn;var v=Yn}else!(c=s.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?r&&Tt(r.elementType)&&(b=$n):b=Xn;switch(b&&(b=b(e,r))?Mn(i,b,n,a):(v&&v(e,s,r),"focusout"===e&&r&&"number"===s.type&&null!=r.memoizedProps.value&&kt(s,"number",s.value)),v=r?et(r):window,e){case"focusin":(Fn(v)||"true"===v.contentEditable)&&(sr=v,cr=r,ur=null);break;case"focusout":ur=cr=sr=null;break;case"mousedown":dr=!0;break;case"contextmenu":case"mouseup":case"dragend":dr=!1,fr(i,n,a);break;case"selectionchange":if(ir)break;case"keydown":case"keyup":fr(i,n,a)}var x;if(En)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else In?Pn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Tn&&"ko"!==n.locale&&(In||"onCompositionStart"!==w?"onCompositionEnd"===w&&In&&(x=Kt()):(Wt="value"in(Ht=a)?Ht.value:Ht.textContent,In=!0)),0<(v=od(r,w)).length&&(w=new mn(w,e,null,n,a),i.push({event:w,listeners:v}),x?w.data=x:null!==(x=zn(n))&&(w.data=x))),(x=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(_n=!0,An);case"textInput":return(e=t.data)===An&&_n?null:e;default:return null}}(e,n):function(e,t){if(In)return"compositionend"===e||!En&&Pn(e,t)?(e=Kt(),Gt=Wt=Ht=null,In=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=od(r,"onBeforeInput")).length&&(v=new mn("onBeforeInput","beforeinput",null,n,a),i.push({event:v,listeners:w}),v.data=x)),function(e,t,n,r,a){if("submit"===t&&n&&n.stateNode===a){var o=Vu((a[Qe]||null).action),l=r.submitter;l&&null!==(t=(t=l[Qe]||null)?Vu(t.formAction):l.getAttribute("formAction"))&&(o=t,l=null);var i=new an("action","action",null,r,a);e.push({event:i,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Ou){var e=l?Hu(a,l):new FormData(a);ri(n,{pending:!0,data:e,method:a.method,action:o},null,e)}}else"function"==typeof o&&(i.preventDefault(),e=l?Hu(a,l):new FormData(a),ri(n,{pending:!0,data:e,method:a.method,action:o},o,e))},currentTarget:a}]})}}(i,e,r,n,a)}Ju(i,t)})}function ad(e,t,n){return{instance:e,listener:t,currentTarget:n}}function od(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,o=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===o||(null!=(a=Ut(e,n))&&r.unshift(ad(e,a,o)),null!=(a=Ut(e,t))&&r.push(ad(e,a,o))),3===e.tag)return r;e=e.return}return[]}function ld(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function id(e,t,n,r,a){for(var o=t._reactName,l=[];null!==n&&n!==r;){var i=n,s=i.alternate,c=i.stateNode;if(i=i.tag,null!==s&&s===r)break;5!==i&&26!==i&&27!==i||null===c||(s=c,a?null!=(c=Ut(n,o))&&l.unshift(ad(n,c,s)):a||null!=(c=Ut(n,o))&&l.push(ad(n,c,s))),n=n.return}0!==l.length&&e.push({event:t,listeners:l})}var sd=/\r\n?/g,cd=/\u0000|\uFFFD/g;function ud(e){return("string"==typeof e?e:""+e).replace(sd,"\n").replace(cd,"")}function dd(e,t){return t=ud(t),ud(e)===t}function fd(e,t,n,a,o,l){switch(n){case"children":"string"==typeof a?"body"===t||"textarea"===t&&""===a||Nt(e,a):("number"==typeof a||"bigint"==typeof a)&&"body"!==t&&Nt(e,""+a);break;case"className":dt(e,"class",a);break;case"tabIndex":dt(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":dt(e,n,a);break;case"style":Lt(e,a,l);break;case"data":if("object"!==t){dt(e,"data",a);break}case"src":case"href":if(""===a&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==a||"function"==typeof a||"symbol"==typeof a||"boolean"==typeof a){e.removeAttribute(n);break}a=Pt(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if("function"==typeof a){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof l&&("formAction"===n?("input"!==t&&fd(e,t,"name",o.name,o,null),fd(e,t,"formEncType",o.formEncType,o,null),fd(e,t,"formMethod",o.formMethod,o,null),fd(e,t,"formTarget",o.formTarget,o,null)):(fd(e,t,"encType",o.encType,o,null),fd(e,t,"method",o.method,o,null),fd(e,t,"target",o.target,o,null))),null==a||"symbol"==typeof a||"boolean"==typeof a){e.removeAttribute(n);break}a=Pt(""+a),e.setAttribute(n,a);break;case"onClick":null!=a&&(e.onclick=zt);break;case"onScroll":null!=a&&Xu("scroll",e);break;case"onScrollEnd":null!=a&&Xu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=a){if("object"!=typeof a||!("__html"in a))throw Error(r(61));if(null!=(n=a.__html)){if(null!=o.children)throw Error(r(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&"function"!=typeof a&&"symbol"!=typeof a;break;case"muted":e.muted=a&&"function"!=typeof a&&"symbol"!=typeof a;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==a||"function"==typeof a||"boolean"==typeof a||"symbol"==typeof a){e.removeAttribute("xlink:href");break}n=Pt(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=a&&"function"!=typeof a&&"symbol"!=typeof a?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&"function"!=typeof a&&"symbol"!=typeof a?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===a?e.setAttribute(n,""):!1!==a&&null!=a&&"function"!=typeof a&&"symbol"!=typeof a?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":null==a||"function"==typeof a||"symbol"==typeof a||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":Xu("beforetoggle",e),Xu("toggle",e),ut(e,"popover",a);break;case"xlinkActuate":ft(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":ft(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":ft(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":ft(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":ft(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":ft(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":ft(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":ft(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":ft(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":ut(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&ut(e,n=At.get(n)||n,a)}}function pd(e,t,n,a,o,l){switch(n){case"style":Lt(e,a,l);break;case"dangerouslySetInnerHTML":if(null!=a){if("object"!=typeof a||!("__html"in a))throw Error(r(61));if(null!=(n=a.__html)){if(null!=o.children)throw Error(r(60));e.innerHTML=n}}break;case"children":"string"==typeof a?Nt(e,a):("number"==typeof a||"bigint"==typeof a)&&Nt(e,""+a);break;case"onScroll":null!=a&&Xu("scroll",e);break;case"onScrollEnd":null!=a&&Xu("scrollend",e);break;case"onClick":null!=a&&(e.onclick=zt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:at.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),"function"==typeof(l=null!=(l=e[Qe]||null)?l[n]:null)&&e.removeEventListener(t,l,o),"function"!=typeof a)?n in e?e[n]=a:!0===a?e.setAttribute(n,""):ut(e,n,a):("function"!=typeof l&&null!==l&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,o)))}}function md(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xu("error",e),Xu("load",e);var a,o=!1,l=!1;for(a in n)if(n.hasOwnProperty(a)){var i=n[a];if(null!=i)switch(a){case"src":o=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:fd(e,t,a,i,n,null)}}return l&&fd(e,t,"srcSet",n.srcSet,n,null),void(o&&fd(e,t,"src",n.src,n,null));case"input":Xu("invalid",e);var s=a=i=l=null,c=null,u=null;for(o in n)if(n.hasOwnProperty(o)){var d=n[o];if(null!=d)switch(o){case"name":l=d;break;case"type":i=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":a=d;break;case"defaultValue":s=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(r(137,t));break;default:fd(e,t,o,d,n,null)}}return void wt(e,a,s,c,u,i,l,!1);case"select":for(l in Xu("invalid",e),o=i=a=null,n)if(n.hasOwnProperty(l)&&null!=(s=n[l]))switch(l){case"value":a=s;break;case"defaultValue":i=s;break;case"multiple":o=s;default:fd(e,t,l,s,n,null)}return t=a,n=i,e.multiple=!!o,void(null!=t?St(e,!!o,t,!1):null!=n&&St(e,!!o,n,!0));case"textarea":for(i in Xu("invalid",e),a=l=o=null,n)if(n.hasOwnProperty(i)&&null!=(s=n[i]))switch(i){case"value":o=s;break;case"defaultValue":l=s;break;case"children":a=s;break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(r(91));break;default:fd(e,t,i,s,n,null)}return void Ct(e,o,l,a);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(o=n[c]))if("selected"===c)e.selected=o&&"function"!=typeof o&&"symbol"!=typeof o;else fd(e,t,c,o,n,null);return;case"dialog":Xu("beforetoggle",e),Xu("toggle",e),Xu("cancel",e),Xu("close",e);break;case"iframe":case"object":Xu("load",e);break;case"video":case"audio":for(o=0;o<Ku.length;o++)Xu(Ku[o],e);break;case"image":Xu("error",e),Xu("load",e);break;case"details":Xu("toggle",e);break;case"embed":case"source":case"link":Xu("error",e),Xu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(o=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:fd(e,t,u,o,n,null)}return;default:if(Tt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(o=n[d])&&pd(e,t,d,o,n,void 0));return}}for(s in n)n.hasOwnProperty(s)&&(null!=(o=n[s])&&fd(e,t,s,o,n,null))}function hd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var gd=null,yd=null;function bd(e){return 9===e.nodeType?e:e.ownerDocument}function vd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function wd(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var kd=null;var Sd="function"==typeof setTimeout?setTimeout:void 0,jd="function"==typeof clearTimeout?clearTimeout:void 0,Cd="function"==typeof Promise?Promise:void 0,Nd="function"==typeof queueMicrotask?queueMicrotask:void 0!==Cd?function(e){return Cd.resolve(null).then(e).catch(Ed)}:Sd;function Ed(e){setTimeout(function(){throw e})}function Dd(e){return"head"===e}function Ld(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)||"/&"===n){if(0===r)return e.removeChild(a),void Wf(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)qd(e.ownerDocument.documentElement);else if("head"===n){qd(n=e.ownerDocument.head);for(var o=n.firstChild;o;){var l=o.nextSibling,i=o.nodeName;o[Ye]||"SCRIPT"===i||"STYLE"===i||"LINK"===i&&"stylesheet"===o.rel.toLowerCase()||n.removeChild(o),o=l}}else"body"===n&&qd(e.ownerDocument.body);n=a}while(n);Wf(t)}function Td(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function Ad(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Ad(n),Je(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function _d(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Id(e.nextSibling)))return null}return e}function Pd(e){return"$?"===e.data||"$~"===e.data}function zd(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Id(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Od=null;function Fd(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Id(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Md(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Rd(e,t,n){switch(t=bd(n),e){case"html":if(!(e=t.documentElement))throw Error(r(452));return e;case"head":if(!(e=t.head))throw Error(r(453));return e;case"body":if(!(e=t.body))throw Error(r(454));return e;default:throw Error(r(451))}}function qd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Je(e)}var Bd=new Map,Ud=new Set;function $d(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Qd=F.d;F.d={f:function(){var e=Qd.f(),t=tu();return e||t},r:function(e){var t=Ze(e);null!==t&&5===t.tag&&"form"===t.type?oi(t):Qd.r(e)},D:function(e){Qd.D(e),Hd("dns-prefetch",e,null)},C:function(e,t){Qd.C(e,t),Hd("preconnect",e,t)},L:function(e,t,n){Qd.L(e,t,n);var r=Vd;if(r&&e&&t){var a='link[rel="preload"][as="'+vt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(a+='[imagesrcset="'+vt(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(a+='[imagesizes="'+vt(n.imageSizes)+'"]')):a+='[href="'+vt(e)+'"]';var o=a;switch(t){case"style":o=Gd(e);break;case"script":o=Jd(e)}Bd.has(o)||(e=u({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Bd.set(o,e),null!==r.querySelector(a)||"style"===t&&r.querySelector(Kd(o))||"script"===t&&r.querySelector(Xd(o))||(md(t=r.createElement("link"),"link",e),nt(t),r.head.appendChild(t)))}},m:function(e,t){Qd.m(e,t);var n=Vd;if(n&&e){var r=t&&"string"==typeof t.as?t.as:"script",a='link[rel="modulepreload"][as="'+vt(r)+'"][href="'+vt(e)+'"]',o=a;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Jd(e)}if(!Bd.has(o)&&(e=u({rel:"modulepreload",href:e},t),Bd.set(o,e),null===n.querySelector(a))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Xd(o)))return}md(r=n.createElement("link"),"link",e),nt(r),n.head.appendChild(r)}}},X:function(e,t){Qd.X(e,t);var n=Vd;if(n&&e){var r=tt(n).hoistableScripts,a=Jd(e),o=r.get(a);o||((o=n.querySelector(Xd(a)))||(e=u({src:e,async:!0},t),(t=Bd.get(a))&&nf(e,t),nt(o=n.createElement("script")),md(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(a,o))}},S:function(e,t,n){Qd.S(e,t,n);var r=Vd;if(r&&e){var a=tt(r).hoistableStyles,o=Gd(e);t=t||"default";var l=a.get(o);if(!l){var i={loading:0,preload:null};if(l=r.querySelector(Kd(o)))i.loading=5;else{e=u({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Bd.get(o))&&tf(e,n);var s=l=r.createElement("link");nt(s),md(s,"link",e),s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),s.addEventListener("load",function(){i.loading|=1}),s.addEventListener("error",function(){i.loading|=2}),i.loading|=4,ef(l,t,r)}l={type:"stylesheet",instance:l,count:1,state:i},a.set(o,l)}}},M:function(e,t){Qd.M(e,t);var n=Vd;if(n&&e){var r=tt(n).hoistableScripts,a=Jd(e),o=r.get(a);o||((o=n.querySelector(Xd(a)))||(e=u({src:e,async:!0,type:"module"},t),(t=Bd.get(a))&&nf(e,t),nt(o=n.createElement("script")),md(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(a,o))}}};var Vd="undefined"==typeof document?null:document;function Hd(e,t,n){var r=Vd;if(r&&"string"==typeof t&&t){var a=vt(t);a='link[rel="'+e+'"][href="'+a+'"]',"string"==typeof n&&(a+='[crossorigin="'+n+'"]'),Ud.has(a)||(Ud.add(a),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(a)&&(md(t=r.createElement("link"),"link",e),nt(t),r.head.appendChild(t)))}}function Wd(e,t,n,a){var o,l,i,s,c=(c=G.current)?$d(c):null;if(!c)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=Gd(n.href),(a=(n=tt(c).hoistableStyles).get(t))||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=Gd(n.href);var u=tt(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Kd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Bd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Bd.set(e,n),u||(o=c,l=e,i=n,s=d.state,o.querySelector('link[rel="preload"][as="style"]['+l+"]")?s.loading=1:(l=o.createElement("link"),s.preload=l,l.addEventListener("load",function(){return s.loading|=1}),l.addEventListener("error",function(){return s.loading|=2}),md(l,"link",i),nt(l),o.head.appendChild(l))))),t&&null===a)throw Error(r(528,""));return d}if(t&&null!==a)throw Error(r(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Jd(n),(a=(n=tt(c).hoistableScripts).get(t))||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Gd(e){return'href="'+vt(e)+'"'}function Kd(e){return'link[rel="stylesheet"]['+e+"]"}function Yd(e){return u({},e,{"data-precedence":e.precedence,precedence:null})}function Jd(e){return'[src="'+vt(e)+'"]'}function Xd(e){return"script[async]"+e}function Zd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+vt(n.href)+'"]');if(a)return t.instance=a,nt(a),a;var o=u({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return nt(a=(e.ownerDocument||e).createElement("style")),md(a,"style",o),ef(a,n.precedence,e),t.instance=a;case"stylesheet":o=Gd(n.href);var l=e.querySelector(Kd(o));if(l)return t.state.loading|=4,t.instance=l,nt(l),l;a=Yd(n),(o=Bd.get(o))&&tf(a,o),nt(l=(e.ownerDocument||e).createElement("link"));var i=l;return i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),md(l,"link",a),t.state.loading|=4,ef(l,n.precedence,e),t.instance=l;case"script":return l=Jd(n.src),(o=e.querySelector(Xd(l)))?(t.instance=o,nt(o),o):(a=n,(o=Bd.get(l))&&nf(a=u({},n),o),nt(o=(e=e.ownerDocument||e).createElement("script")),md(o,"link",a),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(r(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(a=t.instance,t.state.loading|=4,ef(a,n.precedence,e));return t.instance}function ef(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=r.length?r[r.length-1]:null,o=a,l=0;l<r.length;l++){var i=r[l];if(i.dataset.precedence===t)o=i;else if(o!==a)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function tf(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function nf(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var rf=null;function af(e,t,n){if(null===rf){var r=new Map,a=rf=new Map;a.set(n,r)}else(r=(a=rf).get(n))||(r=new Map,a.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var o=n[a];if(!(o[Ye]||o[$e]||"link"===e&&"stylesheet"===o.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==o.namespaceURI){var l=o.getAttribute(t)||"";l=e+l;var i=r.get(l);i?i.push(o):r.set(l,[o])}}return r}function of(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function lf(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var sf=0;function cf(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)df(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var uf=null;function df(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,uf=new Map,t.forEach(ff,e),uf=null,cf.call(e))}function ff(e,t){if(!(4&t.state.loading)){var n=uf.get(e);if(n)var r=n.get(null);else{n=new Map,uf.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<a.length;o++){var l=a[o];"LINK"!==l.nodeName&&"not all"===l.getAttribute("media")||(n.set(l.dataset.precedence,l),r=l)}r&&n.set(null,r)}l=(a=t.instance).getAttribute("data-precedence"),(o=n.get(l)||r)===r&&n.set(null,a),n.set(l,a),this.count++,r=cf.bind(this),a.addEventListener("load",r),a.addEventListener("error",r),o?o.parentNode.insertBefore(a,o.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var pf={$$typeof:k,Provider:null,Consumer:null,_currentValue:M,_currentValue2:M,_threadCount:0};function mf(e,t,n,r,a,o,l,i,s){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pe(0),this.hiddenUpdates=Pe(null),this.identifierPrefix=r,this.onUncaughtError=a,this.onCaughtError=o,this.onRecoverableError=l,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function hf(e,t,n,r,a,o,l,i,s,c,u,d){return e=new mf(e,t,n,l,s,c,u,d,i),t=1,!0===o&&(t|=24),o=qr(3,null,null,t),e.current=o,o.stateNode=e,(t=Ba()).refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:r,isDehydrated:n,cache:t},vo(o),e}function gf(e){return e?e=Mr:Mr}function yf(e,t,n,r,a,o){a=gf(a),null===r.context?r.context=a:r.pendingContext=a,(r=wo(t)).payload={element:n},null!==(o=void 0===o?null:o)&&(r.callback=o),null!==(n=ko(e,r,t))&&(Yc(n,0,t),So(n,e,t))}function bf(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function vf(e,t){bf(e,t),(e=e.alternate)&&bf(e,t)}function xf(e){if(13===e.tag||31===e.tag){var t=Ir(e,67108864);null!==t&&Yc(t,0,67108864),vf(e,67108864)}}function wf(e){if(13===e.tag||31===e.tag){var t=Gc(),n=Ir(e,t=Me(t));null!==n&&Yc(n,0,t),vf(e,t)}}var kf=!0;function Sf(e,t,n,r){var a=O.T;O.T=null;var o=F.p;try{F.p=2,Cf(e,t,n,r)}finally{F.p=o,O.T=a}}function jf(e,t,n,r){var a=O.T;O.T=null;var o=F.p;try{F.p=8,Cf(e,t,n,r)}finally{F.p=o,O.T=a}}function Cf(e,t,n,r){if(kf){var a=Nf(r);if(null===a)rd(e,t,r,Ef,n),Mf(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Af=Rf(Af,e,t,n,r,a),!0;case"dragenter":return _f=Rf(_f,e,t,n,r,a),!0;case"mouseover":return Pf=Rf(Pf,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return zf.set(o,Rf(zf.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,If.set(o,Rf(If.get(o)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Mf(e,r),4&t&&-1<Ff.indexOf(e)){for(;null!==a;){var o=Ze(a);if(null!==o)switch(o.tag){case 3:if((o=o.stateNode).current.memoizedState.isDehydrated){var l=De(o.pendingLanes);if(0!==l){var i=o;for(i.pendingLanes|=2,i.entangledLanes|=2;l;){var s=1<<31-ke(l);i.entanglements[1]|=s,l&=~s}Fu(o),!(6&hc)&&(Oc=ue()+500,Mu(0))}}break;case 31:case 13:null!==(i=Ir(o,2))&&Yc(i,0,2),tu(),vf(o,2)}if(null===(o=Nf(r))&&rd(e,t,r,Ef,n),o===a)break;a=o}null!==a&&r.stopPropagation()}else rd(e,t,r,null,n)}}function Nf(e){return Df(e=Ot(e))}var Ef=null;function Df(e){if(Ef=null,null!==(e=Xe(e))){var t=o(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=l(t)))return e;e=null}else if(31===n){if(null!==(e=i(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ef=e,null}function Lf(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(de()){case fe:return 2;case pe:return 8;case me:case he:return 32;case ge:return 268435456;default:return 32}default:return 32}}var Tf=!1,Af=null,_f=null,Pf=null,zf=new Map,If=new Map,Of=[],Ff="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Mf(e,t){switch(e){case"focusin":case"focusout":Af=null;break;case"dragenter":case"dragleave":_f=null;break;case"mouseover":case"mouseout":Pf=null;break;case"pointerover":case"pointerout":zf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":If.delete(t.pointerId)}}function Rf(e,t,n,r,a,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},null!==t&&(null!==(t=Ze(t))&&xf(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function qf(e){var t=Xe(e.target);if(null!==t){var n=o(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=l(n)))return e.blockedOn=t,void Be(e.priority,function(){wf(n)})}else if(31===t){if(null!==(t=i(n)))return e.blockedOn=t,void Be(e.priority,function(){wf(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bf(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Nf(e.nativeEvent);if(null!==n)return null!==(t=Ze(n))&&xf(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);It=r,n.target.dispatchEvent(r),It=null,t.shift()}return!0}function Uf(e,t,n){Bf(e)&&n.delete(t)}function $f(){Tf=!1,null!==Af&&Bf(Af)&&(Af=null),null!==_f&&Bf(_f)&&(_f=null),null!==Pf&&Bf(Pf)&&(Pf=null),zf.forEach(Uf),If.forEach(Uf)}function Qf(t,n){t.blockedOn===n&&(t.blockedOn=null,Tf||(Tf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$f)))}var Vf=null;function Hf(t){Vf!==t&&(Vf=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Vf===t&&(Vf=null);for(var e=0;e<t.length;e+=3){var n=t[e],r=t[e+1],a=t[e+2];if("function"!=typeof r){if(null===Df(r||n))continue;break}var o=Ze(n);null!==o&&(t.splice(e,3),e-=3,ri(o,{pending:!0,data:a,method:n.method,action:r},r,a))}}))}function Wf(e){function t(t){return Qf(t,e)}null!==Af&&Qf(Af,e),null!==_f&&Qf(_f,e),null!==Pf&&Qf(Pf,e),zf.forEach(t),If.forEach(t);for(var n=0;n<Of.length;n++){var r=Of[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Of.length&&null===(n=Of[0]).blockedOn;)qf(n),null===n.blockedOn&&Of.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var a=n[r],o=n[r+1],l=a[Qe]||null;if("function"==typeof o)l||Hf(n);else if(l){var i=null;if(o&&o.hasAttribute("formAction")){if(a=o,l=o[Qe]||null)i=l.formAction;else if(null!==Df(a))continue}else i=l.action;"function"==typeof i?n[r+1]=i:(n.splice(r,3),r-=3),Hf(n)}}}function Gf(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return a=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==a&&(a(),a=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"==typeof navigation){var r=!1,a=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==a&&(a(),a=null)}}}function Kf(e){this._internalRoot=e}function Yf(e){this._internalRoot=e}Yf.prototype.render=Kf.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));yf(t.current,Gc(),e,t,null,null)},Yf.prototype.unmount=Kf.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;yf(e.current,2,null,e,null,null),tu(),t[Ve]=null}},Yf.prototype.unstable_scheduleHydration=function(e){if(e){var t=qe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Of.length&&0!==t&&t<Of[n].priority;n++);Of.splice(n,0,e),0===n&&qf(e)}};var Jf=t.version;if("19.2.3"!==Jf)throw Error(r(527,Jf,"19.2.3"));F.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=o(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,a=t;;){var l=n.return;if(null===l)break;var i=l.alternate;if(null===i){if(null!==(a=l.return)){n=a;continue}break}if(l.child===i.child){for(i=l.child;i;){if(i===n)return s(l),e;if(i===a)return s(l),t;i=i.sibling}throw Error(r(188))}if(n.return!==a.return)n=l,a=i;else{for(var c=!1,u=l.child;u;){if(u===n){c=!0,n=l,a=i;break}if(u===a){c=!0,a=l,n=i;break}u=u.sibling}if(!c){for(u=i.child;u;){if(u===n){c=!0,n=i,a=l;break}if(u===a){c=!0,a=i,n=l;break}u=u.sibling}if(!c)throw Error(r(189))}}if(n.alternate!==a)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?c(e):null)?null:e.stateNode};var Xf={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.3"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Zf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zf.isDisabled&&Zf.supportsFiber)try{ve=Zf.inject(Xf),xe=Zf}catch(tp){}}return w.createRoot=function(e,t){if(!a(e))throw Error(r(299));var n=!1,o="",l=Ni,i=Ei,s=Di;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(o=t.identifierPrefix),void 0!==t.onUncaughtError&&(l=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=hf(e,1,!1,null,0,n,o,null,l,i,s,Gf),e[Ve]=t.current,td(e),new Kf(t)},w.hydrateRoot=function(e,t,n){if(!a(e))throw Error(r(299));var o=!1,l="",i=Ni,s=Ei,c=Di,u=null;return null!=n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(l=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(s=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=hf(e,1,!0,t,0,o,l,u,i,s,c,Gf)).context=gf(null),n=t.current,(l=wo(o=Me(o=Gc()))).callback=null,ko(n,l,o),n=o,t.current.lanes=n,ze(t,n),Fu(t),e[Ve]=t.current,td(e),new Yf(t)},w.version="19.2.3",w}var N=(v||(v=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),x.exports=C()),x.exports);const E={},D=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),a=n?.nonce||n?.getAttribute("nonce");r=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in E)return;E[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,a&&r.setAttribute("nonce",a),document.head.appendChild(r),t?new Promise((t,n)=>{r.addEventListener("load",t),r.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})},L=e=>(t,n,r)=>{const a=r.subscribe;r.subscribe=(e,t,n)=>{let o=e;if(t){const a=(null==n?void 0:n.equalityFn)||Object.is;let l=e(r.getState());o=n=>{const r=e(n);if(!a(l,r)){const e=l;t(l=r,e)}},(null==n?void 0:n.fireImmediately)&&t(l,l)}return a(o)};return e(t,n,r)},T={productionTeam:{id:"productionTeam",name:"Production Team",color:"#3B82F6",subsections:["Production","Technical Crew","Production Management"]},productionEquipment:{id:"productionEquipment",name:"Production Equipment",color:"#06B6D4",subsections:["Video","Audio","Cameras","Graphics","VT","Cabling","Other"]},creative:{id:"creative",name:"Creative",color:"#EC4899",subsections:["Services"]},logistics:{id:"logistics",name:"Logistics",color:"#F59E0B",subsections:["Services"]},expenses:{id:"expenses",name:"Expenses",color:"#10B981",subsections:["Services"]}},A=["productionTeam","productionEquipment","creative","logistics","expenses"],_={USD:{code:"USD",symbol:"$",name:"US Dollar"},GBP:{code:"GBP",symbol:"",name:"British Pound"},MYR:{code:"MYR",symbol:"RM",name:"Malaysian Ringgit"},IDR:{code:"IDR",symbol:"Rp",name:"Indonesian Rupiah"},KWD:{code:"KWD",symbol:"KD",name:"Kuwaiti Dinar"},AED:{code:"AED",symbol:".",name:"UAE Dirham"},SGD:{code:"SGD",symbol:"S$",name:"Singapore Dollar"},THB:{code:"THB",symbol:"",name:"Thai Baht"},QAR:{code:"QAR",symbol:"QR",name:"Qatari Riyal"},SAR:{code:"SAR",symbol:"SR",name:"Saudi Riyal"}},P={USD:1,GBP:.79,MYR:4.47,IDR:15850,KWD:.31,AED:3.67,SGD:1.34,THB:34.5,QAR:3.64,SAR:3.75},z={MALAYSIA:{id:"MALAYSIA",name:"Malaysia",defaultCurrency:"MYR",countries:["Malaysia"]},SEA:{id:"SEA",name:"Southeast Asia",defaultCurrency:"USD",countries:["Singapore","Indonesia","Thailand","Vietnam","Philippines"]},GULF:{id:"GULF",name:"Gulf States",defaultCurrency:"KWD",countries:["UAE","Kuwait","Saudi Arabia","Qatar","Bahrain","Oman"]},CENTRAL_ASIA:{id:"CENTRAL_ASIA",name:"Central Asia",defaultCurrency:"USD",countries:["Kazakhstan","Uzbekistan","Tajikistan"]}},I="tell_quote_current";function O(e){try{return localStorage.setItem(I,JSON.stringify(e)),!0}catch(t){return!1}}const F="exchange_rates_cache";async function M(){const e=function(){try{const e=localStorage.getItem(F);if(e){const{rates:t,timestamp:n}=JSON.parse(e);if(Date.now()-n<36e5)return{rates:t,timestamp:n}}}catch(e){}return null}();if(e)return e;try{const e=await fetch("https://api.exchangerate-api.com/v4/latest/USD");if(!e.ok)throw new Error("Failed to fetch rates");const t=await e.json(),n={};return Object.keys(_).forEach(e=>{n[e]=t.rates[e]||P[e]}),function(e){try{localStorage.setItem(F,JSON.stringify({rates:e,timestamp:Date.now()}))}catch(t){}}(n),{rates:n,timestamp:Date.now()}}catch(t){return{rates:P,timestamp:null}}}function R(e,t,n,r){if(t===n)return e;return e/(r[t]||P[t])*(r[n]||P[n])}function q(e,t,n={}){const{showSymbol:r=!0,decimals:a=2}=n,o=_[t];if(!o)return`${e.toFixed(a)}`;const l="IDR"===t?0:a,i=new Intl.NumberFormat("en-US",{minimumFractionDigits:l,maximumFractionDigits:l}).format(e);return r?`${o.symbol}${i}`:i}function B(e){return{MALAYSIA:"MYR",SEA:"USD",GULF:"USD",CENTRAL_ASIA:"USD"}[e]||"USD"}function U(e){return _[e]?.symbol||e}const $=h("https://deitlnfumugxcbxqqivk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlaXRsbmZ1bXVneGNieHFxaXZrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU1NDgxMzMsImV4cCI6MjA4MTEyNDEzM30.unFRnnjTCuxoaAyjfWK1UNjgubq9MYjElXbTN77mjEc",{auth:{storage:window.localStorage,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"},global:{headers:{"x-application-name":"tell-quote-tool"}},db:{schema:"public"},realtime:{params:{eventsPerSecond:10}}}),Q=()=>!!$,V=(e,t=1.5)=>({MALAYSIA:{cost:.85*e,charge:.85*e*t},SEA:{cost:e,charge:e*t},GULF:{cost:1.2*e,charge:1.2*e*t},CENTRAL_ASIA:{cost:1.1*e,charge:1.1*e*t}}),H=[{name:"Project Manager",description:"Remote project management",section:"prod_mgmt_remote",unit:"day",pricing:V(300)},{name:"Technical Project Manager",description:"Remote technical project management",section:"prod_mgmt_remote",unit:"day",pricing:V(300)},{name:"Consultant - TE",description:"Technical engineering consultant",section:"prod_mgmt_remote",unit:"day",pricing:V(500)},{name:"Graphics System - VMix",description:"VMix graphics system package",section:"event_graphics",unit:"day",pricing:V(33.8)},{name:"Graphics Design",description:"Graphics design services",section:"event_graphics",unit:"day",pricing:V(150)},{name:"Graphics Integration",description:"Graphics integration and setup",section:"event_graphics",unit:"day",pricing:V(50)},{name:"Photo Editing",description:"Photo editing services",section:"event_graphics",unit:"item",pricing:V(10)},{name:"Graphics Operator",description:"On-site graphics operator",section:"event_graphics",unit:"day",pricing:V(100)},{name:"Graphics Producer - On Site",description:"On-site graphics producer",section:"event_graphics",unit:"day",pricing:V(400)},{name:"Graphics Engineer",description:"Graphics engineering and technical support",section:"event_graphics",unit:"day",pricing:V(150)},{name:"Technical Producer - Int",description:"International technical producer",section:"prod_staffing",unit:"day",pricing:V(500)},{name:"Technical Director - Int",description:"International technical director",section:"prod_staffing",unit:"day",pricing:V(450)},{name:"Producer - Int On Site",description:"International producer on-site",section:"prod_staffing",unit:"day",pricing:V(500)},{name:"Producer - Remote Int",description:"International remote producer",section:"prod_staffing",unit:"day",pricing:V(300)},{name:"Sound Engineer - Int",description:"International sound engineer",section:"prod_staffing",unit:"day",pricing:V(500)},{name:"Sound Engineer - SEA",description:"South East Asia sound engineer",section:"prod_staffing",unit:"day",pricing:V(350)},{name:"Talent - Int",description:"International talent/presenter",section:"prod_staffing",unit:"day",pricing:V(500)},{name:"Field Producer/Floor Manager - Int",description:"International field producer/floor manager",section:"prod_staffing",unit:"day",pricing:V(450)},{name:"Field Producer/Floor Manager - SEA",description:"South East Asia field producer/floor manager",section:"prod_staffing",unit:"day",pricing:V(250)},{name:"Camera Operator - Int",description:"International camera operator",section:"prod_staffing",unit:"day",pricing:V(450)},{name:"Camera Operator - SEA",description:"South East Asia camera operator",section:"prod_staffing",unit:"day",pricing:V(250)},{name:"SPR Equipment - Silver Package",description:"SPR equipment silver package",section:"spr_equipment",unit:"day",pricing:V(700)},{name:"DJ Cam",description:"DJ camera setup",section:"extras",unit:"day",pricing:V(75)},{name:"Wireless Camera System",description:"Wireless camera system",section:"extras",unit:"day",pricing:V(250)},{name:"Comms",description:"Communications equipment",section:"extras",unit:"day",pricing:V(250)}],W="tell_rate_card",G="tell_rate_card_sections",K=()=>({MALAYSIA:{cost:0,charge:0},SEA:{cost:0,charge:0},GULF:{cost:0,charge:0},CENTRAL_ASIA:{cost:0,charge:0}}),Y=[{id:"prod_production",name:"Production",group:"Production Team"},{id:"prod_technical",name:"Technical Crew",group:"Production Team"},{id:"prod_management",name:"Production Management",group:"Production Team"},{id:"equip_video",name:"Video",group:"Production Equipment"},{id:"equip_audio",name:"Audio",group:"Production Equipment"},{id:"equip_cameras",name:"Cameras",group:"Production Equipment"},{id:"equip_graphics",name:"Graphics",group:"Production Equipment"},{id:"equip_vt",name:"VT",group:"Production Equipment"},{id:"equip_cabling",name:"Cabling",group:"Production Equipment"},{id:"equip_other",name:"Other Equipment",group:"Production Equipment"},{id:"creative",name:"Creative",group:"Creative"},{id:"logistics",name:"Logistics",group:"Logistics"},{id:"expenses",name:"Expenses",group:"Expenses"}];function J(){try{const e=localStorage.getItem(W);return e?JSON.parse(e):[]}catch(e){return[]}}function X(){try{const e=localStorage.getItem(G);return e?JSON.parse(e):Y}catch(e){return Y}}function Z(e){try{localStorage.setItem(W,JSON.stringify(e))}catch(t){}}function ee(e){try{localStorage.setItem(G,JSON.stringify(e))}catch(t){}}function te(){return`${Date.now()}-${Math.random().toString(36).substring(2,11)}`}const ne=u(L((e,t)=>({items:J(),sections:X(),loading:!1,initialize:async()=>{if(Q()){e({loading:!0});try{const{data:t,error:n}=await $.from("rate_cards").select("*").order("created_at",{ascending:!0});if(n)throw n;const{data:r,error:a}=await $.from("rate_card_sections").select("*").order("sort_order",{ascending:!0});if(a)throw a;const o=(t||[]).map(e=>({id:e.id,name:e.name,description:e.description||"",section:e.section,unit:e.unit||"day",pricing:e.pricing||{MALAYSIA:{cost:0,charge:0},SEA:{cost:0,charge:0},GULF:{cost:0,charge:0},CENTRAL_ASIA:{cost:0,charge:0}},createdAt:e.created_at,updatedAt:e.updated_at})),l=r&&r.length>0?r.map(e=>({id:e.id,name:e.name,group:e.group_name||"Other"})):Y;if(!r||0===r.length)for(let e=0;e<Y.length;e++){const t=Y[e];await $.from("rate_card_sections").upsert({id:t.id,name:t.name,sort_order:e,group_name:t.group})}Z(o),ee(l),e({items:o,sections:l,loading:!1})}catch(t){e({loading:!1})}}else e({loading:!1})},addSection:async n=>{const r={id:n.toLowerCase().replace(/\s+/g,"_")+"_"+Math.random().toString(36).substring(2,7),name:n};if(e(e=>{const t=[...e.sections,r];return ee(t),{sections:t}}),Q())try{await $.from("rate_card_sections").insert({id:r.id,name:r.name,sort_order:t().sections.length})}catch(a){}return r},deleteSection:async n=>{if(t().items.some(e=>e.section===n)&&e(e=>{const t=e.items.map(e=>e.section===n?{...e,section:"extras",updatedAt:(new Date).toISOString()}:e);return Z(t),Q()&&t.filter(e=>"extras"===e.section).forEach(e=>{$.from("rate_cards").update({section:"extras"}).eq("id",e.id)}),{items:t}}),e(e=>{const t=e.sections.filter(e=>e.id!==n);return ee(t),{sections:t}}),Q())try{await $.from("rate_card_sections").delete().eq("id",n)}catch(r){}},renameSection:async(t,n)=>{if(e(e=>{const r=e.sections.map(e=>e.id===t?{...e,name:n}:e);return ee(r),{sections:r}}),Q())try{await $.from("rate_card_sections").update({name:n}).eq("id",t)}catch(r){}},moveSection:async(t,n)=>{e(e=>{const r=[...e.sections],a=r.findIndex(e=>e.id===t);if(-1===a)return e;const o="up"===n?a-1:a+1;return o<0||o>=r.length?e:([r[a],r[o]]=[r[o],r[a]],ee(r),Q()&&r.forEach((e,t)=>{$.from("rate_card_sections").update({sort_order:t}).eq("id",e.id)}),{sections:r})})},addItem:async t=>{const n={id:te(),name:t.name||"",description:t.description||"",section:t.section||"extras",unit:t.unit||"day",pricing:t.pricing||{MALAYSIA:{cost:0,charge:0},SEA:{cost:0,charge:0},GULF:{cost:0,charge:0},CENTRAL_ASIA:{cost:0,charge:0}},createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};if(Q())try{const{data:e,error:t}=await $.from("rate_cards").insert({name:n.name,description:n.description,section:n.section,unit:n.unit,pricing:n.pricing}).select().single();if(t)throw t;n.id=e.id}catch(r){}return e(e=>{const t=[...e.items,n];return Z(t),{items:t}}),n},updateItem:async(t,n)=>{if(e(e=>{const r=e.items.map(e=>e.id===t?{...e,...n,updatedAt:(new Date).toISOString()}:e);return Z(r),{items:r}}),Q())try{const e={};void 0!==n.name&&(e.name=n.name),void 0!==n.description&&(e.description=n.description),void 0!==n.section&&(e.section=n.section),void 0!==n.unit&&(e.unit=n.unit),void 0!==n.pricing&&(e.pricing=n.pricing),Object.keys(e).length>0&&await $.from("rate_cards").update(e).eq("id",t)}catch(r){}},updateItemPricing:async(t,n,r)=>{let a=null;if(e(e=>{const o=e.items.map(e=>e.id!==t?e:(a={...e,pricing:{...e.pricing,[n]:{...e.pricing[n],...r}},updatedAt:(new Date).toISOString()},a));return Z(o),{items:o}}),Q()&&a)try{await $.from("rate_cards").update({pricing:a.pricing}).eq("id",t)}catch(o){}},deleteItem:async t=>{if(e(e=>{const n=e.items.filter(e=>e.id!==t);return Z(n),{items:n}}),Q())try{await $.from("rate_cards").delete().eq("id",t)}catch(n){}},getItemsBySection:e=>t().items.filter(t=>t.section===e),searchItems:e=>{const n=e.toLowerCase();return t().items.filter(e=>e.name.toLowerCase().includes(n)||e.description.toLowerCase().includes(n))},duplicateItem:e=>{const n=t().items.find(t=>t.id===e);return n?t().addItem({...n,name:`${n.name} (Copy)`}):null},seedRateCard:async()=>{const n=new Set(t().items.map(e=>e.name.toLowerCase())),r=H.filter(e=>!n.has(e.name.toLowerCase())).map(e=>({...e,id:te(),createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}));if(0===r.length)return{success:!0,added:0,message:"All items already exist"};if(Q())try{const e=r.map(e=>({name:e.name,description:e.description,section:e.section,unit:e.unit,pricing:e.pricing})),{data:t,error:n}=await $.from("rate_cards").insert(e).select();if(n)throw n;t&&t.forEach((e,t)=>{r[t]&&(r[t].id=e.id)})}catch(a){}return e(e=>{const t=[...e.items,...r];return Z(t),{items:t}}),e({sections:Y}),ee(Y),{success:!0,added:r.length}},resetSectionsToDefaults:async()=>{if(Q())try{await $.from("rate_card_sections").delete().neq("id","");for(let e=0;e<Y.length;e++){const t=Y[e];await $.from("rate_card_sections").upsert({id:t.id,name:t.name,sort_order:e,group_name:t.group})}}catch(t){}return e({sections:Y}),ee(Y),{success:!0}},importFromCSV:async n=>{try{const r=(await n.text()).split("\n");if(r.length<2)throw new Error("Invalid CSV format");const a=r[0].split(",").map(e=>e.trim()),o=["MALAYSIA","SEA","GULF","CENTRAL_ASIA"],l=e=>a.indexOf(e),i=[],s=[];for(let e=1;e<r.length;e++){const n=r[e].trim();if(!n||n.startsWith("#"))continue;const a=[];let c=!1,u="";for(let e=0;e<n.length;e++){const t=n[e];'"'===t?c&&'"'===n[e+1]?(u+='"',e++):c=!c:","!==t||c?u+=t:(a.push(u),u="")}a.push(u);const d={id:a[l("id")]||te(),section:a[l("section")]||"extras",name:a[l("name")]||"",description:a[l("description")]||"",unit:a[l("unit")]||"day",pricing:K(),createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};o.forEach(e=>{const t=l(`${e}_cost`),n=l(`${e}_charge`);-1!==t&&-1!==n&&(d.pricing[e]={cost:parseFloat(a[t])||0,charge:parseFloat(a[n])||0})});t().items.some(e=>e.id===d.id)?s.push(d):i.push(d)}if(Q()){if(i.length>0){const e=i.map(e=>({name:e.name,description:e.description,section:e.section,unit:e.unit,pricing:e.pricing})),{data:t}=await $.from("rate_cards").insert(e).select();t&&t.forEach((e,t)=>{i[t]&&(i[t].id=e.id)})}for(const e of s)await $.from("rate_cards").update({name:e.name,description:e.description,section:e.section,unit:e.unit,pricing:e.pricing}).eq("id",e.id)}return e(e=>{let t=[...e.items];return s.forEach(e=>{t=t.map(t=>t.id===e.id?e:t)}),t=[...t,...i],Z(t),{items:t}}),{success:!0,count:i.length+s.length}}catch(r){return{success:!1,error:r.message}}},exportToCSV:()=>{const{items:e}=t(),n=["MALAYSIA","SEA","GULF","CENTRAL_ASIA"],r=["id","section","name","description","unit"];n.forEach(e=>{r.push(`${e}_cost`),r.push(`${e}_charge`)});let a=r.join(",")+"\n";e.forEach(e=>{const t=[e.id,e.section||"",`"${(e.name||"").replace(/"/g,'""')}"`,`"${(e.description||"").replace(/"/g,'""')}"`,e.unit||"day"];n.forEach(n=>{const r=e.pricing?.[n]||{cost:0,charge:0};t.push(r.cost||0),t.push(r.charge||0)}),a+=t.join(",")+"\n"});const o=new Blob([a],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(o),i=document.createElement("a");i.href=l,i.download=`rate-card-${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(l)},exportTemplate:()=>{const{sections:e}=t(),n=["id","section","name","description","unit"];["MALAYSIA","SEA","GULF","CENTRAL_ASIA"].forEach(e=>{n.push(`${e}_cost`),n.push(`${e}_charge`)});let r=n.join(",")+"\n";r+="# INSTRUCTIONS: Fill in your services below. Delete example rows before importing.\n",r+='# Leave "id" empty for new items. Unit options: day, item, project\n',r+=`# Available sections: ${e.map(e=>e.id+" ("+e.name+")").join(", ")}\n`,r+="#\n",e.slice(0,3).forEach((e,t)=>{const n=100+50*t,a=1.5*n;r+=`,${e.id},"Example ${e.name} Item","Description here",day,${n},${a},${1.2*n},${1.2*a},${1.5*n},${1.5*a},${1.3*n},${1.3*a}\n`});const a=new Blob([r],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(a),l=document.createElement("a");l.href=o,l.download="rate-card-template.csv",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)}}))),re="tell_clients",ae="tell_saved_quotes";function oe(){try{const e=localStorage.getItem(re);return e?JSON.parse(e):[]}catch(e){return[]}}function le(){try{const e=localStorage.getItem(ae);return e?JSON.parse(e):[]}catch(e){return[]}}function ie(e){try{localStorage.setItem(re,JSON.stringify(e))}catch(t){}}function se(e){try{localStorage.setItem(ae,JSON.stringify(e))}catch(t){}}function ce(){return`${Date.now()}-${Math.random().toString(36).substring(2,11)}`}const ue=u(L((e,t)=>({clients:oe(),savedQuotes:le(),loading:!1,initialize:async()=>{if(Q()){e({loading:!0});try{const{data:t,error:n}=await $.from("clients").select("*").order("created_at",{ascending:!1});if(n)throw n;const{data:r,error:a}=await $.from("quotes").select("*").order("created_at",{ascending:!1});if(a)throw a;const o=(t||[]).map(e=>({id:e.id,company:e.company,contact:e.contact,email:e.email,phone:e.phone,address:e.address,notes:e.notes,tags:e.tags||[],contacts:e.contacts||[],createdAt:e.created_at,updatedAt:e.updated_at})),l=(r||[]).map(e=>{const t=e.client?.company?.toLowerCase(),n=t?o.find(e=>e.company?.toLowerCase()===t):null;return{id:e.id,quoteNumber:e.quote_number,quoteDate:e.quote_date,validityDays:e.validity_days,status:e.status,currency:e.currency,region:e.region,preparedBy:e.prepared_by,client:e.client||{},clientId:n?.id||null,project:e.project||{},sections:e.sections||{},fees:e.fees||{},proposal:e.proposal||{},createdAt:e.created_at,updatedAt:e.updated_at}});ie(o),se(l),e({clients:o,savedQuotes:l,loading:!1})}catch(t){e({loading:!1})}}else e({loading:!1})},addClient:async t=>{const n={id:ce(),company:t.company||"",contact:t.contact||"",email:t.email||"",phone:t.phone||"",website:t.website||"",location:t.location||"",address:t.address||"",region:t.region||"MALAYSIA",notes:t.notes||"",contacts:t.contacts||[],tags:t.tags||[],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};if(n.contacts.length||!n.contact&&!n.email||n.contacts.push({id:ce(),name:n.contact,email:n.email,phone:n.phone,role:"Primary",isPrimary:!0}),Q())try{const{data:e,error:t}=await $.from("clients").insert({company:n.company,contact:n.contact,email:n.email,phone:n.phone,address:n.address,notes:n.notes,tags:n.tags,contacts:n.contacts}).select().single();if(t)throw t;n.id=e.id}catch(r){}return e(e=>{const t=[...e.clients,n];return ie(t),{clients:t}}),n},updateClient:async(t,n)=>{if(e(e=>{const r=e.clients.map(e=>e.id===t?{...e,...n,updatedAt:(new Date).toISOString()}:e);return ie(r),{clients:r}}),Q())try{await $.from("clients").update({company:n.company,contact:n.contact,email:n.email,phone:n.phone,address:n.address,notes:n.notes,tags:n.tags,contacts:n.contacts}).eq("id",t)}catch(r){}},deleteClient:async t=>{if(e(e=>{const n=e.clients.filter(e=>e.id!==t),r=e.savedQuotes.filter(e=>e.clientId!==t);return ie(n),se(r),{clients:n,savedQuotes:r}}),Q())try{await $.from("clients").delete().eq("id",t)}catch(n){}},getClient:e=>t().clients.find(t=>t.id===e),getOrCreateClient:e=>{const{clients:n}=t(),r=n.find(t=>t.company.toLowerCase()===e.company?.toLowerCase());return r||t().addClient(e)},addContact:(t,n)=>{e(e=>{const r=e.clients.map(e=>{if(e.id!==t)return e;const r={id:ce(),...n,isPrimary:n.isPrimary||!1},a=n.isPrimary?e.contacts?.map(e=>({...e,isPrimary:!1}))||[]:e.contacts||[];return{...e,contacts:[...a,r],updatedAt:(new Date).toISOString()}});if(ie(r),Q()){const e=r.find(e=>e.id===t);e&&$.from("clients").update({contacts:e.contacts}).eq("id",t).catch(e=>{})}return{clients:r}})},updateContact:(t,n,r)=>{e(e=>{const a=e.clients.map(e=>{if(e.id!==t)return e;let a=e.contacts||[];return r.isPrimary&&(a=a.map(e=>({...e,isPrimary:!1}))),a=a.map(e=>e.id===n?{...e,...r}:e),{...e,contacts:a,updatedAt:(new Date).toISOString()}});if(ie(a),Q()){const e=a.find(e=>e.id===t);e&&$.from("clients").update({contacts:e.contacts}).eq("id",t).catch(e=>{})}return{clients:a}})},deleteContact:(t,n)=>{e(e=>{const r=e.clients.map(e=>e.id!==t?e:{...e,contacts:(e.contacts||[]).filter(e=>e.id!==n),updatedAt:(new Date).toISOString()});if(ie(r),Q()){const e=r.find(e=>e.id===t);e&&$.from("clients").update({contacts:e.contacts}).eq("id",t).catch(e=>{})}return{clients:r}})},saveQuote:async(n,r=null)=>{const{getOrCreateClient:a}=t();let o=r;if(!o&&n.client?.company){o=(await a(n.client)).id}const l={...n,id:n.id||ce(),clientId:o,status:n.status||"draft",savedAt:(new Date).toISOString()};try{const e={quote_number:l.quoteNumber,quote_date:l.quoteDate,validity_days:l.validityDays,status:l.status,currency:l.currency,prepared_by:l.preparedBy,client:l.client,project:l.project,sections:l.sections,fees:l.fees,proposal:l.proposal},{data:t}=await $.from("quotes").select("id").eq("quote_number",l.quoteNumber).single();if(t)await $.from("quotes").update(e).eq("id",t.id),l.id=t.id;else{const{data:t,error:n}=await $.from("quotes").insert(e).select().single();!n&&t&&(l.id=t.id)}}catch(i){}return e(e=>{const t=e.savedQuotes.findIndex(e=>e.quoteNumber===n.quoteNumber);let r;return t>=0?(r=[...e.savedQuotes],r[t]=l):r=[...e.savedQuotes,l],se(r),{savedQuotes:r}}),l},getClientQuotes:e=>t().savedQuotes.filter(t=>t.clientId===e),getQuote:e=>t().savedQuotes.find(t=>t.id===e),getQuoteByNumber:e=>t().savedQuotes.find(t=>t.quoteNumber===e),deleteQuote:async t=>{if(e(e=>{const n=e.savedQuotes.filter(e=>e.id!==t);return se(n),{savedQuotes:n}}),Q())try{await $.from("quotes").delete().eq("id",t)}catch(n){}},updateQuoteStatus:async(n,r,a="",o=null,l="")=>{if(e(e=>{const t=e.savedQuotes.map(e=>{if(e.id!==n)return e;const t=[...e.statusHistory||[],{status:r,timestamp:(new Date).toISOString(),userId:"default",note:a}];return{...e,status:r,statusHistory:t,lostReason:o||e.lostReason,lostReasonNotes:l||e.lostReasonNotes,updatedAt:(new Date).toISOString()}});return se(t),{savedQuotes:t}}),Q())try{const e=t().savedQuotes.find(e=>e.id===n);await $.from("quotes").update({status:r,project:{...e?.project||{},_statusHistory:e?.statusHistory,_lostReason:e?.lostReason,_lostReasonNotes:e?.lostReasonNotes,_nextFollowUpDate:e?.nextFollowUpDate,_internalNotes:e?.internalNotes}}).eq("id",n)}catch(i){}},updateQuote:async(t,n)=>{e(e=>{const r=e.savedQuotes.map(e=>e.id===t?{...e,...n,updatedAt:(new Date).toISOString()}:e);return se(r),{savedQuotes:r}});try{const e={};n.status&&(e.status=n.status),n.client&&(e.client=n.client),n.project&&(e.project=n.project),n.sections&&(e.sections=n.sections),n.fees&&(e.fees=n.fees),Object.keys(e).length>0&&await $.from("quotes").update(e).eq("id",t)}catch(r){}},exportData:()=>{const{clients:e,savedQuotes:n}=t(),r={version:1,exportedAt:(new Date).toISOString(),clients:e,savedQuotes:n},a=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),o=URL.createObjectURL(a),l=document.createElement("a");l.href=o,l.download=`tell-productions-backup-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)},importData:async t=>{try{const n=await t.text(),r=JSON.parse(n);if(!r.clients||!r.savedQuotes)throw new Error("Invalid backup file format");return e({clients:r.clients,savedQuotes:r.savedQuotes}),ie(r.clients),se(r.savedQuotes),{success:!0,clientCount:r.clients.length,quoteCount:r.savedQuotes.length}}catch(n){return{success:!1,error:n.message}}},getClientStats:e=>{const n=t().savedQuotes.filter(t=>t.clientId===e);if(!n.length)return null;const r=n.filter(e=>"won"===e.status),a=n.filter(e=>"dead"===e.status||"rejected"===e.status),o=r.length+a.length;return{totalQuotes:n.length,wonCount:r.length,lostCount:a.length,winRate:o>0?Math.round(r.length/o*100):0}},getStats:()=>{const{clients:e,savedQuotes:n}=t();return{totalClients:e.length,totalQuotes:n.length,draftQuotes:n.filter(e=>"draft"===e.status).length,sentQuotes:n.filter(e=>"sent"===e.status).length,approvedQuotes:n.filter(e=>"approved"===e.status||"won"===e.status).length}},getFinancialStats:()=>{const{savedQuotes:e}=t();let n=0,r=0,a=0;return e.forEach(e=>{"won"===e.status?(n++,a++):"dead"!==e.status&&"rejected"!==e.status||(r++,a++)}),{winRate:a>0?Math.round(n/a*100):0,wonCount:n,lostCount:r}}})));let de=null,fe=null;function pe(e){if(O(e),!e.id)return;const{savedQuotes:t,updateQuote:n}=ue.getState();t.some(t=>t.id===e.id)&&n(e.id,e)}async function me(e){if(!e||!e.quoteNumber)return{synced:!1};if(!Q())return{synced:!1,reason:"supabase not configured"};const t=JSON.stringify(e);if(t===fe)return{synced:!1,reason:"no changes"};try{const n={quote_number:e.quoteNumber,quote_date:e.quoteDate,validity_days:e.validityDays,status:e.status||"draft",currency:e.currency,region:e.region,prepared_by:e.preparedBy,client:e.client,project:{...e.project,_sectionOrder:e.sectionOrder,_sectionNames:e.sectionNames},sections:e.sections,fees:e.fees,proposal:e.proposal};let r=e.id;if(e.id)await $.from("quotes").update(n).eq("id",e.id);else{const{data:t}=await $.from("quotes").select("id").eq("quote_number",e.quoteNumber).limit(1),a=t?.[0];if(a)await $.from("quotes").update(n).eq("id",a.id),r=a.id;else{const{data:e,error:t}=await $.from("quotes").insert(n).select().single();!t&&e&&(r=e.id)}}if(fe=t,r&&!e.id){be.getState().setQuoteId(r);const{saveQuote:t}=ue.getState();t({...e,id:r})}return{synced:!0,id:r}}catch(n){return{synced:!1,error:n.message}}}function he(){de&&(clearInterval(de),de=null,window.removeEventListener("beforeunload",he))}function ge(){const e={};return A.forEach(t=>{const n=T[t],r={};n.subsections.forEach(e=>{r[e]=[]}),e[t]={...n,subsections:r,customSubsections:[],isExpanded:!0}}),e}function ye(){return{quoteNumber:`TP-${(new Date).getFullYear()}-${Math.floor(9e3*Math.random())+1e3}`,currency:"USD",region:"SEA",quoteDate:(new Date).toISOString().split("T")[0],validityDays:30,status:"draft",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),client:{company:"",contactId:null,contact:"",role:"",email:"",phone:"",notes:""},project:{title:"",type:"broadcast",venue:"",startDate:"",endDate:"",description:""},fees:{managementFee:0,commissionFee:0,discount:0,distributeFees:!1},preparedBy:"default",sectionOrder:A,sectionNames:{},sections:ge(),proposal:{coverImage:null,proposalText:"",isGenerated:!1},statusHistory:[],nextFollowUpDate:null,lostReason:null,lostReasonNotes:"",internalNotes:""}}const be=u(L(e=>({quote:ye(),rates:P,ratesLoading:!1,ratesUpdated:null,activeSection:null,initialize:async()=>{const t=function(){try{const e=localStorage.getItem(I);return e?JSON.parse(e):null}catch(e){return null}}();t&&e({quote:t}),e({ratesLoading:!0});const{rates:n,timestamp:r}=await M();e({rates:n,ratesUpdated:r,ratesLoading:!1}),de||(de=setInterval(()=>{me(be.getState().quote)},3e4),window.addEventListener("beforeunload",he))},setQuoteId:t=>{e(e=>{const n={...e.quote,id:t};return O(n),{quote:n}})},syncToSupabase:async()=>me(be.getState().quote),resetQuote:()=>{const t=ye();e({quote:t}),O(t)},loadQuoteData:t=>{const n={...ye(),...t,updatedAt:(new Date).toISOString()};e({quote:n}),O(n)},setQuoteNumber:t=>{e(e=>{const n={...e.quote,quoteNumber:t,updatedAt:(new Date).toISOString()};return pe(n),{quote:n}})},setCurrency:t=>{e(e=>{const n=e.quote.currency;if(n===t)return e;const r=e.rates,a={...e.quote.sections};Object.keys(a).forEach(e=>{const o=a[e],l={...o.subsections};Object.keys(l).forEach(e=>{l[e]=l[e].map(e=>({...e,cost:Math.round(100*R(e.cost,n,t,r))/100,charge:Math.round(100*R(e.charge,n,t,r))/100}))}),a[e]={...o,subsections:l}});const o={...e.quote,currency:t,sections:a,updatedAt:(new Date).toISOString()};return pe(o),{quote:o}})},setRegion:t=>{const n=z[t]?.defaultCurrency||"USD",r=ne.getState().items;e(e=>{const a={...e.quote.sections};Object.keys(a).forEach(e=>{const n=a[e];Object.keys(n.subsections).forEach(e=>{n.subsections[e]=n.subsections[e].map(e=>{const n=r.find(t=>t.name===e.name);return n&&n.pricing&&n.pricing[t]?{...e,cost:n.pricing[t].cost||0,charge:n.pricing[t].charge||0}:e})})});const o={...e.quote,region:t,currency:n,sections:a,updatedAt:(new Date).toISOString()};return pe(o),{quote:o}})},setQuoteDate:t=>{e(e=>{const n={...e.quote,quoteDate:t,updatedAt:(new Date).toISOString()};return pe(n),{quote:n}})},setValidityDays:t=>{e(e=>{const n={...e.quote,validityDays:parseInt(t),updatedAt:(new Date).toISOString()};return pe(n),{quote:n}})},setClientDetails:t=>{e(e=>{const n={...e.quote,client:{...e.quote.client,...t},updatedAt:(new Date).toISOString()};return pe(n),{quote:n}})},setProjectDetails:t=>{e(e=>{const n={...e.quote,project:{...e.quote.project,...t},updatedAt:(new Date).toISOString()};return pe(n),{quote:n}})},setFees:t=>{e(e=>{const n={...e.quote,fees:{...e.quote.fees,...t},updatedAt:(new Date).toISOString()};return pe(n),{quote:n}})},setPreparedBy:t=>{e(e=>{const n={...e.quote,preparedBy:t,updatedAt:(new Date).toISOString()};return pe(n),{quote:n}})},toggleSection:t=>{e(e=>{const n={...e.quote.sections};n[t]={...n[t],isExpanded:!n[t].isExpanded};return{quote:{...e.quote,sections:n}}})},moveSection:(t,n)=>{e(e=>{const r=[...e.quote.sectionOrder||A],a=r.indexOf(t);if(-1===a)return e;const o="up"===n?a-1:a+1;if(o<0||o>=r.length)return e;[r[a],r[o]]=[r[o],r[a]];const l={...e.quote,sectionOrder:r,updatedAt:(new Date).toISOString()};return pe(l),{quote:l}})},updateSectionName:(t,n)=>{e(e=>{const r={...e.quote.sectionNames};n.trim()?r[t]=n.trim():delete r[t];const a={...e.quote,sectionNames:r,updatedAt:(new Date).toISOString()};return pe(a),{quote:a}})},addLineItem:(t,n,r)=>{e(e=>{const a={...e.quote.sections},o={...a[t]},l={...o.subsections},i={id:`${Date.now()}-${Math.random().toString(36).substring(2,11)}`,name:r.name||"",quantity:r.quantity||1,days:r.days||1,cost:r.cost||0,charge:r.charge||0,...r};l[n]=[...l[n]||[],i],o.subsections=l,a[t]=o;const s={...e.quote,sections:a,updatedAt:(new Date).toISOString()};return pe(s),{quote:s}})},updateLineItem:(t,n,r,a)=>{e(e=>{const o={...e.quote.sections},l={...o[t]},i={...l.subsections};i[n]=i[n].map(e=>e.id===r?{...e,...a}:e),l.subsections=i,o[t]=l;const s={...e.quote,sections:o,updatedAt:(new Date).toISOString()};return pe(s),{quote:s}})},deleteLineItem:(t,n,r)=>{e(e=>{const a={...e.quote.sections},o={...a[t]},l={...o.subsections};l[n]=l[n].filter(e=>e.id!==r),o.subsections=l,a[t]=o;const i={...e.quote,sections:a,updatedAt:(new Date).toISOString()};return pe(i),{quote:i}})},moveLineItem:(t,n,r,a,o)=>{e(e=>{const l={...e.quote.sections},i=e=>({...l[e].subsections}),s=i(t),c=t===a?s:i(a),u=s[n].find(e=>e.id===r);if(!u)return{quote:e.quote};s[n]=s[n].filter(e=>e.id!==r),c[o]=[...c[o]||[],u],l[t]={...l[t],subsections:s},t!==a&&(l[a]={...l[a],subsections:c});const d={...e.quote,sections:l,updatedAt:(new Date).toISOString()};return pe(d),{quote:d}})},addCustomSubsection:(t,n)=>{e(e=>{const r={...e.quote.sections},a={...r[t]};a.customSubsections.includes(n)||(a.customSubsections=[...a.customSubsections,n],a.subsections={...a.subsections,[n]:[]}),r[t]=a;const o={...e.quote,sections:r,updatedAt:(new Date).toISOString()};return pe(o),{quote:o}})},reorderSubsections:(t,n)=>{e(e=>{const r={...e.quote.sections},a={...r[t]};a.subsectionOrder=n,r[t]=a;const o={...e.quote,sections:r,updatedAt:(new Date).toISOString()};return pe(o),{quote:o}})},updateSubsectionName:(t,n,r)=>{e(e=>{const a={...e.quote.sections},o={...a[t]},l={...o.subsectionNames||{}};r.trim()&&r.trim()!==n?l[n]=r.trim():delete l[n],o.subsectionNames=l,a[t]=o;const i={...e.quote,sections:a,updatedAt:(new Date).toISOString()};return pe(i),{quote:i}})},refreshRates:async()=>{e({ratesLoading:!0}),localStorage.removeItem("exchange_rates_cache");const{rates:t,timestamp:n}=await M();e({rates:t,ratesUpdated:n,ratesLoading:!1})},setProposal:t=>{e(e=>{const n={...e.quote,proposal:{...e.quote.proposal,...t},updatedAt:(new Date).toISOString()};return pe(n),{quote:n}})},updateQuoteStatus:(t,n="",r="default")=>{e(e=>{const a=[...e.quote.statusHistory||[],{status:t,timestamp:(new Date).toISOString(),userId:r,note:n}],o={...e.quote,status:t,statusHistory:a,updatedAt:(new Date).toISOString()};return pe(o),{quote:o}})},setNextFollowUpDate:t=>{e(e=>{const n={...e.quote,nextFollowUpDate:t,updatedAt:(new Date).toISOString()};return pe(n),{quote:n}})},setLostReason:(t,n="")=>{e(e=>{const r={...e.quote,lostReason:t,lostReasonNotes:n,updatedAt:(new Date).toISOString()};return pe(r),{quote:r}})},setInternalNotes:t=>{e(e=>{const n={...e.quote,internalNotes:t,updatedAt:(new Date).toISOString()};return pe(n),{quote:n}})}})));function ve(){return[navigator.userAgent,navigator.language,screen.colorDepth,screen.width,screen.height,(new Date).getTimezoneOffset()].join("|")}async function xe(e){const t=(new TextEncoder).encode(e);if(window.crypto&&window.crypto.subtle)try{const e=await window.crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(e))}catch(n){}return function(e){const t=[];for(let n=0;n<32;n++){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)+n,r&=r;t.push(Math.abs(r)%256)}return t}(e)}async function we(e){if(!e)return"";try{const t=ve(),n=await xe(t),r=(new TextEncoder).encode(e),a=new Uint8Array(r.length);for(let e=0;e<r.length;e++)a[e]=r[e]^n[e%n.length];return btoa(String.fromCharCode(...a))}catch(t){return e}}async function ke(e){if(!e)return"";try{const t=ve(),n=await xe(t),r=new Uint8Array(atob(e).split("").map(e=>e.charCodeAt(0))),a=new Uint8Array(r.length);for(let e=0;e<r.length;e++)a[e]=r[e]^n[e%n.length];return(new TextDecoder).decode(a)}catch(t){return e}}async function Se(e,t){const n={...e};for(const r of t)n[r]&&(n[r]=await we(String(n[r])));return n}async function je(e,t){const n={...e};for(const r of t)n[r]&&(n[r]=await ke(n[r]));return n}function Ce(e,t=""){if(!e)return!1;const n=/^[a-zA-Z0-9_-]+$/.test(e);return!(t&&!e.startsWith(t))&&(n&&e.length>=20&&e.length<=200)}function Ne(e,t={}){(new Date).toISOString()}const Ee="tell_auth_session",De="tell_auth_attempts",Le=864e5;function Te(){try{const e=localStorage.getItem(Ee);if(!e)return null;const t=JSON.parse(e);return t.expiresAt&&new Date(t.expiresAt)<new Date?(localStorage.removeItem(Ee),Ne(0,{email:t.email}),null):t}catch(e){return null}}function Ae(e){try{e?(localStorage.setItem(Ee,JSON.stringify(e)),Ne(0,{email:e.email,expiresAt:e.expiresAt})):localStorage.removeItem(Ee)}catch(t){}}function _e(){try{const e=localStorage.getItem(De);return e?JSON.parse(e):{attempts:0,lockedUntil:null}}catch{return{attempts:0,lockedUntil:null}}}function Pe(e){try{localStorage.setItem(De,JSON.stringify(e))}catch(t){}}function ze(){const e=_e();return!!(e.lockedUntil&&new Date(e.lockedUntil)>new Date)||(e.lockedUntil&&new Date(e.lockedUntil)<=new Date?(Pe({attempts:0,lockedUntil:null}),!1):e.attempts>=5)}function Ie(e){const t=_e();if(e)Pe({attempts:0,lockedUntil:null}),Ne();else{const e=t.attempts+1,n={attempts:e,lockedUntil:null};e>=5?(n.lockedUntil=new Date(Date.now()+9e5).toISOString(),Ne(0,{attempts:e,lockedUntil:n.lockedUntil})):Ne(0,{attempts:e,remaining:5-e}),Pe(n)}}function Oe(){const e=_e();if(!e.lockedUntil)return 0;const t=new Date(e.lockedUntil)-new Date;return Math.max(0,Math.ceil(t/1e3))}const Fe=u((e,t)=>({isAuthenticated:!!Te(),user:Te(),error:null,isLoading:!1,rateLimited:!1,lockoutTimeRemaining:0,initialize:async()=>{if(Q())try{const{data:{session:t}}=await $.auth.getSession();if(t){const n={email:t.user.email,userId:t.user.id,expiresAt:new Date(Date.now()+Le).toISOString(),provider:"supabase"};Ae(n),e({isAuthenticated:!0,user:n,error:null}),Ne(0,{email:t.user.email})}$.auth.onAuthStateChange((t,n)=>{if("SIGNED_IN"===t&&n){const t={email:n.user.email,userId:n.user.id,expiresAt:new Date(Date.now()+Le).toISOString(),provider:"supabase"};Ae(t),e({isAuthenticated:!0,user:t,error:null})}else"SIGNED_OUT"===t&&(Ae(null),e({isAuthenticated:!1,user:null,error:null}))})}catch(t){}},loginWithSupabase:async(t,n)=>{if(ze()){const t=Oe();return e({error:`Too many failed attempts. Account locked for ${Math.ceil(t/60)} minutes.`,rateLimited:!0,lockoutTimeRemaining:t}),!1}e({isLoading:!0,error:null});try{const{data:r,error:a}=await $.auth.signInWithPassword({email:t,password:n});if(a)return Ie(!1),e({error:a.message||"Login failed",isLoading:!1}),!1;if(r.session){Ie(!0);const t={email:r.user.email,userId:r.user.id,expiresAt:new Date(Date.now()+Le).toISOString(),provider:"supabase"};return Ae(t),e({isAuthenticated:!0,user:t,error:null,isLoading:!1}),!0}return!1}catch(r){return Ie(!1),e({error:"An error occurred during login",isLoading:!1}),!1}},loginWithPassword:async t=>{if(ze()){const t=Oe();return e({error:`Too many failed attempts. Try again in ${Math.ceil(t/60)} minutes.`,rateLimited:!0,lockoutTimeRemaining:t}),!1}if(e({isLoading:!0,error:null}),await new Promise(e=>setTimeout(e,300)),"tell2024"===t){Ie(!0);const t={email:"local@tellproductions.com",userId:"local-user",expiresAt:new Date(Date.now()+Le).toISOString(),provider:"password"};return Ae(t),e({isAuthenticated:!0,user:t,error:null,isLoading:!1}),Ne(),!0}return Ie(!1),e({error:"Incorrect password",isLoading:!1}),!1},login:async(e,n=null)=>Q()&&n?t().loginWithSupabase(e,n):t().loginWithPassword(e),logout:async()=>{if(Q())try{await $.auth.signOut()}catch(t){}Ae(null),e({isAuthenticated:!1,user:null,error:null}),Ne()},validateSession:()=>{const t=Te();return t?!(t.expiresAt&&new Date(t.expiresAt)<new Date)||(Ae(null),e({isAuthenticated:!1,user:null,error:"Session expired. Please login again."}),!1):(e({isAuthenticated:!1,user:null}),!1)},extendSession:()=>{const t=Te();if(!t)return;const n={...t,expiresAt:new Date(Date.now()+Le).toISOString()};Ae(n),e({user:n})},clearError:()=>{e({error:null})},getRemainingAttempts:()=>{const e=_e();return Math.max(0,5-e.attempts)},isSupabaseAuth:()=>!1}));if("undefined"!=typeof window){let e;Fe.getState().validateSession();const t=()=>{clearTimeout(e),e=setTimeout(()=>{Fe.getState().isAuthenticated&&Fe.getState().extendSession()},6e4)};window.addEventListener("mousemove",t),window.addEventListener("keydown",t)}function Me({activeTab:e,onTabChange:t}){const r=[{id:"dashboard",label:"Dashboard",icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},{id:"quotes",label:"Quotes",icon:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},{id:"clients",label:"Clients",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"},{id:"opportunities",label:"Opps",icon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"rate-card",label:"Rates",icon:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"},{id:"settings",label:"Settings",icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z"}];return n.jsxs("nav",{className:"flex justify-center w-full","aria-label":"Main navigation",children:[n.jsx("div",{className:"hidden md:inline-flex bg-gray-900/80 p-1 rounded-xl border border-gray-800/80 gap-1",children:r.map(r=>n.jsx("button",{onClick:()=>t(r.id),className:"px-5 py-2 min-h-[44px] rounded-lg text-sm font-medium transition-all duration-200 "+(e===r.id?"bg-accent-primary/10 text-accent-primary":"text-gray-400 hover:text-gray-200 hover:bg-white/5"),"aria-current":e===r.id?"page":void 0,children:r.label},r.id))}),n.jsx("div",{className:"md:hidden inline-flex bg-gray-900/80 p-1 rounded-xl border border-gray-800/80 gap-0.5",children:r.map(r=>n.jsxs("button",{onClick:()=>t(r.id),className:"px-2 py-1.5 min-w-[52px] min-h-[52px] rounded-lg transition-all duration-200 flex flex-col items-center justify-center gap-0.5 "+(e===r.id?"bg-accent-primary/10 text-accent-primary":"text-gray-400 hover:text-gray-200 hover:bg-white/5"),"aria-current":e===r.id?"page":void 0,"aria-label":r.label,children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:r.icon})}),n.jsx("span",{className:"text-[9px] font-medium leading-none",children:r.label})]},r.id))})]})}const Re=d.createContext(null);function qe(){const e=d.useContext(Re);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}function Be({children:e}){const[t,r]=d.useState([]),a=d.useCallback((e,t="info",n=4e3)=>{const a=Date.now()+Math.random();return r(n=>[...n,{id:a,message:e,type:t}]),n>0&&setTimeout(()=>{r(e=>e.filter(e=>e.id!==a))},n),a},[]),o=d.useCallback(e=>{r(t=>t.filter(t=>t.id!==e))},[]),l={info:(e,t)=>a(e,"info",t),success:(e,t)=>a(e,"success",t),error:(e,t)=>a(e,"error",t),warning:(e,t)=>a(e,"warning",t)};return n.jsxs(Re.Provider,{value:l,children:[e,n.jsx(Ue,{toasts:t,onRemove:o})]})}function Ue({toasts:e,onRemove:t}){return 0===e.length?null:n.jsx("div",{className:"fixed bottom-4 right-4 left-4 sm:left-auto z-[100] flex flex-col gap-2 max-w-sm sm:max-w-md mx-auto sm:mx-0",role:"region","aria-label":"Notifications","aria-live":"polite",children:e.map(e=>n.jsx($e,{toast:e,onRemove:t},e.id))})}function $e({toast:e,onRemove:t}){const[r,a]=d.useState(!1),o=()=>{a(!0),setTimeout(()=>t(e.id),200)};return n.jsxs("div",{role:"alert","aria-atomic":"true",className:`\n                ${{info:"bg-blue-500/90 border-blue-400",success:"bg-green-500/90 border-green-400",error:"bg-red-500/90 border-red-400",warning:"bg-yellow-500/90 border-yellow-400"}[e.type]}\n                border rounded-lg px-4 py-3 text-white shadow-lg\n                flex items-start gap-3 w-full\n                transition-all duration-200 ease-out\n                ${r?"opacity-0 translate-x-4 sm:translate-x-4":"opacity-100 translate-x-0"}\n                animate-slide-in-right\n            `,children:[n.jsx("svg",{className:"w-5 h-5 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:{info:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",success:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",error:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z",warning:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"}[e.type]})}),n.jsx("span",{className:"flex-1 text-sm leading-relaxed",children:e.message}),n.jsx("button",{onClick:o,onKeyDown:e=>{"Escape"!==e.key&&"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),o())},className:"text-white/70 hover:text-white transition-colors min-w-[32px] min-h-[32px] flex items-center justify-center -mr-1","aria-label":"Dismiss notification",title:"Dismiss (Esc)",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}function Qe(){return n.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 focus:z-[100] focus:px-4 focus:py-2 focus:bg-brand-teal focus:text-white focus:rounded-lg focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-dark-bg transition-all",children:"Skip to main content"})}function Ve({view:e="editor",onGoToClients:t,onGoToRateCard:r,onGoToSettings:a,onGoToDashboard:o,onGoToQuotes:l,onGoToFS:i,onGoToOpportunities:s}){const{quote:c,ratesLoading:u,refreshRates:f}=be(),{saveQuote:p}=ue(),{logout:m}=Fe(),h=qe(),[g,y]=d.useState(!1),[b,v]=d.useState(!1),[x,w]=d.useState(!1);if("clients"===e||"client-detail"===e||"dashboard"===e||"quotes"===e||"rate-card"===e||"settings"===e||"opportunities"===e||"opportunity-detail"===e){const c="opportunity-detail"===e?"opportunities":"client-detail"===e?"clients":e;return n.jsxs(n.Fragment,{children:[n.jsx(Qe,{}),n.jsxs("header",{className:"min-h-[60px] bg-dark-bg/95 backdrop-blur-md border-b border-dark-border flex items-center justify-between px-3 sm:px-6 z-20 sticky top-0",children:[n.jsx("div",{className:"hidden sm:flex items-center gap-4",children:n.jsx("button",{onClick:o,className:"flex items-center hover:opacity-80 transition-all duration-200 min-h-[44px]",title:"Go to Dashboard",children:n.jsx("img",{src:"/tell-logo.svg",alt:"Tell",className:"h-7"})})}),n.jsx("div",{className:"flex-1 flex justify-center sm:absolute sm:left-1/2 sm:transform sm:-translate-x-1/2",children:n.jsx(Me,{activeTab:c,onTabChange:e=>{"dashboard"===e&&o(),"quotes"===e&&l(),"clients"===e&&t(),"opportunities"===e&&s(),"rate-card"===e&&r(),"settings"===e&&a()}})}),n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 relative",children:[n.jsxs("button",{onClick:i,className:"min-w-[44px] min-h-[44px] px-2 sm:px-3 py-1.5 rounded-lg bg-gradient-to-r from-teal-600/20 to-cyan-600/20 border border-teal-500/30 text-teal-400 text-xs font-bold hover:from-teal-600/30 hover:to-cyan-600/30 hover:border-teal-500/50 transition-all flex items-center justify-center gap-1.5",title:"Full Screen Analytics",children:[n.jsx("svg",{className:"w-4 h-4 sm:w-3.5 sm:h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),n.jsx("span",{className:"hidden sm:inline",children:"FS"})]}),n.jsx("button",{onClick:()=>w(!x),className:"min-w-[44px] min-h-[44px] w-10 h-10 sm:w-8 sm:h-8 rounded-full bg-gray-800 border border-gray-700 flex items-center justify-center text-xs text-gray-400 hover:border-gray-600 hover:text-gray-300 transition-colors",children:"TM"}),x&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>w(!1)}),n.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-dark-card border border-dark-border rounded-lg shadow-2xl z-50 dropdown-menu overflow-hidden",children:[n.jsxs("div",{className:"px-4 py-3 border-b border-dark-border",children:[n.jsx("p",{className:"text-sm font-medium text-gray-200",children:"Signed in as"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Director / Partner"})]}),n.jsxs("button",{onClick:()=>{w(!1),m()},className:"w-full px-4 py-2.5 text-left text-sm text-gray-400 hover:bg-red-500/10 hover:text-red-400 transition-colors flex items-center gap-2",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})]})]})]})]})]})}return n.jsxs(n.Fragment,{children:[n.jsx(Qe,{}),n.jsx("header",{className:"sticky top-0 z-50 bg-dark-bg/95 backdrop-blur-md border-b border-dark-border",children:n.jsx("div",{className:"max-w-[1920px] mx-auto px-2 sm:px-4 py-2 sm:py-3",children:n.jsxs("div",{className:"flex items-center justify-between gap-2 sm:gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[n.jsx("button",{onClick:o,className:"min-w-[44px] min-h-[44px] p-2 rounded-lg hover:bg-white/5 transition-colors flex items-center justify-center",title:"Back to Dashboard",children:n.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx("img",{src:"/tell-logo.svg",alt:"Tell",className:"h-5 sm:h-6 hidden xs:block"}),n.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[n.jsx("span",{className:"text-[10px] sm:text-xs font-mono text-accent-primary",children:c.quoteNumber}),n.jsx("span",{className:"text-[10px] text-gray-500 border border-gray-800 rounded px-1 hidden sm:inline",children:"default"===c.preparedBy?"Admin":"User"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[n.jsx("div",{className:"px-2 sm:px-3 py-1 min-h-[32px] rounded-full text-[10px] sm:text-xs font-bold uppercase tracking-wider border flex items-center "+("won"===c.status?"bg-green-500/20 text-green-400 border-green-500/30":"sent"===c.status?"bg-blue-500/20 text-blue-400 border-blue-500/30":"dead"===c.status?"bg-red-500/20 text-red-500 border-red-500/30":"bg-gray-700/50 text-gray-400 border-gray-600"),children:c.status||"Draft"}),n.jsx("button",{onClick:f,disabled:u,className:"btn-ghost min-w-[44px] min-h-[44px] p-2 hidden sm:flex items-center justify-center",title:"Refresh exchange rates",children:n.jsx("svg",{className:"w-4 h-4 "+(u?"animate-spin":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),n.jsxs("button",{onClick:()=>{y(!0);try{const e=p(c);e?.id&&!c.id&&be.getState().loadQuoteData({...c,id:e.id}),v(!0),setTimeout(()=>v(!1),2e3)}catch{h.error("Failed to save quote.")}finally{y(!1)}},disabled:g,className:"btn-ghost min-w-[44px] min-h-[44px] text-sm flex items-center justify-center gap-1 "+(b?"text-green-400":""),title:"Save quote to library",children:[b?n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),n.jsx("span",{className:"hidden sm:inline",children:b?"Saved!":"Save"})]})]})]})})})]})}function He(){const{quote:e,setClientDetails:t}=be(),{clients:r,updateContact:a}=ue(),{client:o}=e,[l,i]=d.useState(!1),[s,c]=d.useState(""),u=o.company?r.filter(e=>e?.company?.toLowerCase()?.includes(o.company.toLowerCase())):r;d.useEffect(()=>{const e=e=>{"Escape"===e.key&&l&&i(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[l]);const f=(e,n)=>{t({[e]:n})},p=r.find(e=>e?.company?.toLowerCase()===o?.company?.toLowerCase()),m=(e,t)=>{f(e,t),p&&o.contactId&&a(p.id,o.contactId,{[e]:t})};return n.jsxs("div",{className:"card",children:[n.jsxs("h3",{className:"text-sm font-semibold text-gray-300 mb-3 flex items-center gap-2",children:[n.jsx("svg",{className:"w-4 h-4 text-accent-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Client Details"]}),n.jsxs("div",{className:"space-y-5",children:[n.jsxs("div",{className:"relative",children:[n.jsx("label",{className:"label",children:"Company Name"}),n.jsx("input",{type:"text",value:o.company,onChange:e=>f("company",e.target.value),onFocus:()=>i(!0),placeholder:"Type to search or add new client...",className:"input"}),l&&u.length>0&&n.jsx("div",{className:"absolute z-50 top-full left-0 right-0 mt-1 bg-dark-card border border-dark-border rounded-lg shadow-xl max-h-64 overflow-y-auto dropdown-menu",children:u.map((e,r)=>n.jsxs("button",{onClick:()=>{return t({company:(n=e).company,contact:n.contact,email:n.email,phone:n.phone}),void i(!1);var n},className:"w-full px-3 py-2.5 text-left hover:bg-accent-primary/10 transition-colors flex items-center gap-3 "+(r!==u.length-1?"border-b border-dark-border/50":""),children:[n.jsx("div",{className:"w-8 h-8 rounded-md bg-gray-800 flex items-center justify-center text-xs font-bold text-gray-400 shrink-0",children:e.company.substring(0,2).toUpperCase()}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm text-gray-200 font-medium truncate",children:e.company}),e.contact&&n.jsx("p",{className:"text-xs text-gray-500 truncate",children:e.contact})]})]},e.id))}),l&&n.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>i(!1)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Contact Person"}),p&&p.contacts?.length>0?n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:o.contactId||"",onChange:e=>(e=>{if(!p)return;const n=p.contacts?.find(t=>t.id===e);n&&t({contactId:n.id,contact:n.name,role:n.role||"",email:n.email,phone:n.phone,notes:n.notes||""})})(e.target.value),className:"input flex-1",children:[n.jsx("option",{value:"",children:"Select Contact..."}),p.contacts.map(e=>n.jsxs("option",{value:e.id,children:[e.name," ",e.isPrimary?"(Primary)":""," - ",e.role||"No Role"]},e.id))]}),n.jsx("input",{type:"text",value:o.contact,onChange:e=>f("contact",e.target.value),placeholder:"Or type name...",className:"input w-1/3"})]}):n.jsx("input",{type:"text",value:o.contact,onChange:e=>f("contact",e.target.value),placeholder:"e.g. Ahmad Rahman",className:"input"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"label",children:["Role on Project ",n.jsx("span",{className:"text-gray-600 font-normal",children:"(for this quote)"})]}),n.jsx("input",{type:"text",value:o.role||"",onChange:e=>f("role",e.target.value),placeholder:"e.g. Executive Producer, Client Liaison",className:"input"})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Email"}),n.jsx("input",{type:"email",value:o.email,onChange:e=>m("email",e.target.value),placeholder:"email@company.com",className:"input"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Phone"}),n.jsx("input",{type:"tel",value:o.phone,onChange:e=>m("phone",e.target.value),placeholder:"+65 9123 4567",className:"input"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"label",children:["Notes",o.contactId&&n.jsx("span",{className:"text-accent-primary font-normal ml-1",children:"(synced to contact)"}),!o.contactId&&n.jsx("span",{className:"text-gray-600 font-normal ml-1",children:"(internal only)"})]}),n.jsx("textarea",{value:o.notes||"",onChange:e=>m("notes",e.target.value),placeholder:"Notes about this contact...",rows:2,className:"input resize-none text-sm"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"label",children:["Event Tags ",n.jsx("span",{className:"text-gray-600 font-normal",children:"(for this quote)"})]}),n.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:(o.tags||[]).map((e,r)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-accent-primary/20 text-accent-primary rounded text-xs",children:[e,n.jsx("button",{onClick:()=>(e=>{const n=o.tags||[];t({tags:n.filter(t=>t!==e)})})(e),className:"hover:text-white transition-colors",children:n.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},r))}),n.jsx("input",{type:"text",value:s,onChange:e=>c(e.target.value),onKeyDown:e=>{if("Enter"===e.key&&s.trim()){e.preventDefault();const n=o.tags||[];n.includes(s.trim())||t({tags:[...n,s.trim()]}),c("")}},placeholder:"Type and press Enter to add...",className:"input text-sm"})]})]})]})}const We="tell_settings",Ge=["anthropicKey","openaiKey"],Ke=["accountNumber","swiftCode"],Ye={company:{name:"Tell Productions Sdn Bhd",address:"",city:"",country:"Malaysia",phone:"",email:"",website:"",logo:null},taxInfo:{taxNumber:"",registrationNumber:"",licenses:""},bankDetails:{bankName:"",accountName:"",accountNumber:"",swiftCode:"",currency:"MYR"},quoteDefaults:{validityDays:30,paymentTerms:"50% deposit on confirmation, balance on completion",termsAndConditions:" This quote is valid for 30 days from the date of issue.\n 50% deposit required upon confirmation.\n Final payment due within 14 days of project completion.\n Any additional requirements may incur extra charges.\n Cancellation within 7 days of project start may incur fees."},users:[{id:"default",name:"Tom",email:"",role:"admin"}],pdfOptions:{showCompanyAddress:!0,showCompanyPhone:!0,showCompanyEmail:!0,showTaxNumber:!1,showBankDetails:!1,showLogo:!0,primaryColor:"#143642",accentColor:"#0F8B8D",lineColor:"#143642",textColor:"#374151",mutedColor:"#6B7280",backgroundColor:"#FFFFFF"},aiSettings:{anthropicKey:"",openaiKey:""},projectTypes:[{id:"broadcast",label:"Broadcast"},{id:"streaming",label:"Streaming"},{id:"graphics",label:"Graphics"},{id:"sports_presentation",label:"Sports Presentation"},{id:"technical_consultancy",label:"Technical Management & Consultancy"},{id:"other",label:"Other"}],regions:[{id:"MALAYSIA",label:"Malaysia",currency:"MYR"},{id:"SEA",label:"South East Asia",currency:"USD"},{id:"GULF",label:"Gulf States",currency:"USD"},{id:"CENTRAL_ASIA",label:"Central Asia",currency:"USD"}],opsPreferences:{expandedCountries:{},hiddenCountries:{},dashboardCurrency:"USD"}};async function Je(){try{const e=localStorage.getItem(We);if(e){const t=Xe(JSON.parse(e));return t.aiSettings&&(t.aiSettings=await je(t.aiSettings,Ge)),t.bankDetails&&(t.bankDetails=await je(t.bankDetails,Ke)),t}return Ye}catch(e){return Ye}}function Xe(e){return{...Ye,...e,company:{...Ye.company,...e.company},taxInfo:{...Ye.taxInfo,...e.taxInfo},bankDetails:{...Ye.bankDetails,...e.bankDetails},quoteDefaults:{...Ye.quoteDefaults,...e.quoteDefaults},pdfOptions:{...Ye.pdfOptions,...e.pdfOptions},aiSettings:{...Ye.aiSettings,...e.aiSettings},opsPreferences:{...Ye.opsPreferences,...e.opsPreferences},users:e.users||Ye.users,projectTypes:e.projectTypes||Ye.projectTypes,regions:e.regions||Ye.regions}}async function Ze(e){try{const t=JSON.parse(JSON.stringify(e));t.aiSettings&&(t.aiSettings=await Se(t.aiSettings,Ge)),t.bankDetails&&(t.bankDetails=await Se(t.bankDetails,Ke)),localStorage.setItem(We,JSON.stringify(t)),Ne(0,{encrypted:!0})}catch(t){}}let et=null;async function tt(e){if(Q())try{const t=await Se(e.aiSettings||{},Ge);et&&(await $.from("settings").update({company:e.company,quote_defaults:e.quoteDefaults,terms_and_conditions:e.quoteDefaults?.termsAndConditions||"",users:e.users,ai_settings:t,ops_preferences:e.opsPreferences}).eq("id",et),Ne(0,{encrypted:!0}))}catch(t){}}let nt=Ye;Je().then(e=>{nt=e,rt.setState({settings:e,loading:!1})});const rt=u(L((e,t)=>({settings:nt,loading:!0,initialize:async()=>{if(!Q()){const t=await Je();return void e({settings:t,loading:!1})}e({loading:!0});try{const{data:t,error:n}=await $.from("settings").select("*").limit(1).single();if(n)throw n;if(t){et=t.id;const n=t.ai_settings?await je(t.ai_settings,Ge):Ye.aiSettings,r=Xe({...await Je(),company:t.company||Ye.company,quoteDefaults:{...Ye.quoteDefaults,...t.quote_defaults,termsAndConditions:t.terms_and_conditions||Ye.quoteDefaults.termsAndConditions},users:t.users||Ye.users,aiSettings:n,opsPreferences:t.ops_preferences||Ye.opsPreferences});await Ze(r),e({settings:r,loading:!1})}else{const t=await Je();e({settings:t,loading:!1})}}catch(t){const n=await Je();e({settings:n,loading:!1})}},setCompanyInfo:async n=>{const r=t(),a={...r.settings,company:{...r.settings.company,...n}};await Ze(a),tt(a),e({settings:a})},setTaxInfo:async n=>{const r=t(),a={...r.settings,taxInfo:{...r.settings.taxInfo,...n}};await Ze(a),e({settings:a})},setBankDetails:async n=>{const r=t(),a={...r.settings,bankDetails:{...r.settings.bankDetails,...n}};await Ze(a),e({settings:a}),Ne(0,{encrypted:!0})},setQuoteDefaults:async n=>{const r=t(),a={...r.settings,quoteDefaults:{...r.settings.quoteDefaults,...n}};await Ze(a),tt(a),e({settings:a})},setPdfOptions:async n=>{const r=t(),a={...r.settings,pdfOptions:{...r.settings.pdfOptions,...n}};await Ze(a),e({settings:a})},setOpsPreferences:async n=>{const r=t(),a={...r.settings,opsPreferences:{...r.settings.opsPreferences,...n}};await Ze(a),tt(a),e({settings:a})},setAiSettings:async n=>{const r=t();n.anthropicKey&&Ce(n.anthropicKey,"sk-ant-"),n.openaiKey&&Ce(n.openaiKey,"sk-"),n.anthropicKey||n.openaiKey;const a={...r.settings,aiSettings:{...r.settings.aiSettings,...n}};await Ze(a),tt(a),e({settings:a}),Ne(0,{hasAnthropicKey:!!n.anthropicKey,hasOpenaiKey:!!n.openaiKey,encrypted:!0})},addUser:async n=>{const r=t(),a={id:`${Date.now()}-${Math.random().toString(36).substring(2,11)}`,name:n.name||"",email:n.email||"",role:n.role||"user"},o={...r.settings,users:[...r.settings.users,a]};await Ze(o),tt(o),e({settings:o})},updateUser:async(n,r)=>{const a=t(),o={...a.settings,users:a.settings.users.map(e=>e.id===n?{...e,...r}:e)};await Ze(o),tt(o),e({settings:o})},deleteUser:async n=>{const r=t(),a={...r.settings,users:r.settings.users.filter(e=>e.id!==n)};await Ze(a),tt(a),e({settings:a})},getUser:e=>t().settings.users.find(t=>t.id===e),addProjectType:async n=>{const r=t(),a=n.toLowerCase().replace(/\s+/g,"_")+"_"+Math.random().toString(36).substring(2,7),o={...r.settings,projectTypes:[...r.settings.projectTypes,{id:a,label:n}]};await Ze(o),e({settings:o})},updateProjectType:async(n,r)=>{const a=t(),o={...a.settings,projectTypes:a.settings.projectTypes.map(e=>e.id===n?{...e,label:r}:e)};await Ze(o),e({settings:o})},deleteProjectType:async n=>{const r=t(),a={...r.settings,projectTypes:r.settings.projectTypes.filter(e=>e.id!==n)};await Ze(a),e({settings:a})},moveProjectType:async(n,r)=>{const a=t(),o=[...a.settings.projectTypes],l=o.findIndex(e=>e.id===n);if(-1===l)return;const i="up"===r?l-1:l+1;if(i<0||i>=o.length)return;[o[l],o[i]]=[o[i],o[l]];const s={...a.settings,projectTypes:o};await Ze(s),e({settings:s})},addRegion:async(n,r="USD")=>{const a=t(),o=n.toUpperCase().replace(/\s+/g,"_"),l={...a.settings,regions:[...a.settings.regions,{id:o,label:n,currency:r}]};await Ze(l),e({settings:l})},updateRegion:async(n,r)=>{const a=t(),o={...a.settings,regions:a.settings.regions.map(e=>e.id===n?{...e,...r}:e)};await Ze(o),e({settings:o})},deleteRegion:async n=>{const r=t(),a={...r.settings,regions:r.settings.regions.filter(e=>e.id!==n)};await Ze(a),e({settings:a})},moveRegion:async(n,r)=>{const a=t(),o=[...a.settings.regions],l=o.findIndex(e=>e.id===n);if(-1===l)return;const i="up"===r?l-1:l+1;if(i<0||i>=o.length)return;[o[l],o[i]]=[o[i],o[l]];const s={...a.settings,regions:o};await Ze(s),e({settings:s})},exportSettings:async()=>{const{settings:e}=t(),n={...e,aiSettings:{anthropicKey:e.aiSettings.anthropicKey?"***REDACTED***":"",openaiKey:e.aiSettings.openaiKey?"***REDACTED***":""},bankDetails:{...e.bankDetails,accountNumber:e.bankDetails.accountNumber?"***REDACTED***":"",swiftCode:e.bankDetails.swiftCode?"***REDACTED***":""}},r=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),a=URL.createObjectURL(r),o=document.createElement("a");o.href=a,o.download=`settings-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a),Ne(0,{sanitized:!0})},resetSettings:async()=>{e({settings:Ye}),await Ze(Ye)}})));function at({onGoToSettings:e}){const{quote:t,setProjectDetails:r,setPreparedBy:a,setQuoteDate:o,setValidityDays:l,setRegion:i,setNextFollowUpDate:s,setInternalNotes:c}=be(),[u,f]=d.useState(!1),{settings:p}=rt(),m=p.projectTypes||[],h=p.regions||[],{project:g}=t,y=p.users||[],b=(e,t)=>{r({[e]:t})};return n.jsxs("div",{className:"card",children:[n.jsxs("h3",{className:"text-sm font-semibold text-gray-300 mb-4 flex items-center gap-2",children:[n.jsx("svg",{className:"w-4 h-4 text-accent-secondary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})}),"Project Details"]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Prepared By"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:t.preparedBy||"default",onChange:e=>a(e.target.value),className:"input flex-1",children:[n.jsx("option",{value:"default",disabled:!0,children:"Select User"}),y.map(e=>n.jsx("option",{value:e.id,children:e.name},e.id))]}),n.jsx("button",{className:"btn-ghost px-2",title:"Manage Users in Settings",onClick:e,children:n.jsxs("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Quote Date"}),n.jsx("input",{type:"date",value:t.quoteDate,onChange:e=>o(e.target.value),className:"input"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Valid Until"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:t.validityDays,onChange:e=>l(e.target.value),className:"input flex-1",children:[n.jsx("option",{value:"7",children:"7 Days"}),n.jsx("option",{value:"14",children:"14 Days"}),n.jsx("option",{value:"30",children:"30 Days"}),n.jsx("option",{value:"60",children:"60 Days"}),n.jsx("option",{value:"90",children:"90 Days"})]}),n.jsx("div",{className:"flex items-center justify-center px-3 bg-dark-bg/50 border border-dark-border rounded-lg text-sm text-gray-400 min-w-[100px]",children:(()=>{if(!t.quoteDate)return"-";const e=new Date(t.quoteDate);return e.setDate(e.getDate()+(parseInt(t.validityDays)||30)),e.toLocaleDateString()})()})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Project Title"}),n.jsx("input",{type:"text",value:g.title,onChange:e=>b("title",e.target.value),placeholder:"e.g. Shopee Cup Semi-Final",className:"input"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Project Type"}),n.jsx("select",{value:g.type,onChange:e=>b("type",e.target.value),className:"input",children:m.map(e=>n.jsx("option",{value:e.id,children:e.label},e.id))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Region (Rates)"}),n.jsx("select",{value:t.region||h[0]?.id||"SEA",onChange:e=>i(e.target.value),className:"input",children:h.map(e=>n.jsx("option",{value:e.id,children:e.label},e.id))})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Currency"}),n.jsx("select",{value:t.currency||"USD",onChange:e=>{be.getState().setCurrency(e.target.value)},className:"input",children:Object.values(_).map(e=>n.jsxs("option",{value:e.code,children:[e.symbol," ",e.code," - ",e.name]},e.code))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Venue"}),n.jsx("input",{type:"text",value:g.venue,onChange:e=>b("venue",e.target.value),placeholder:"e.g. Jalan Besar Stadium",className:"input"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Start Date"}),n.jsx("input",{type:"date",value:g.startDate,onChange:e=>{const t=e.target.value;b("startDate",t),g.endDate&&t>g.endDate&&b("endDate",t)},className:"input"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"End Date"}),n.jsx("input",{type:"date",value:g.endDate,onChange:e=>b("endDate",e.target.value),min:g.startDate||"",className:"input"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Description"}),n.jsx("textarea",{value:g.description,onChange:e=>b("description",e.target.value),placeholder:"Brief project description...",rows:2,className:"input resize-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"label",children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx("svg",{className:"w-4 h-4 text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),"Follow-up Reminder"]})}),n.jsx("input",{type:"date",value:t.nextFollowUpDate||"",onChange:e=>s(e.target.value||null),className:"input"}),n.jsx("p",{className:"form-helper",children:"Set a reminder date to follow up on this quote"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"label",children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Internal Notes",n.jsx("span",{className:"text-xs text-gray-500 font-normal",children:"(Not shown in PDF)"})]})}),n.jsx("textarea",{value:t.internalNotes||"",onChange:e=>c(e.target.value),placeholder:"Team notes, context, reminders...",rows:3,className:"input resize-none"}),n.jsx("p",{className:"form-helper",children:"Useful for handoff context between team members"})]}),n.jsxs("div",{className:"border-t border-dark-border pt-4",children:[n.jsxs("button",{onClick:()=>f(!u),className:"w-full flex items-center justify-between text-sm text-gray-400 hover:text-gray-300 transition-colors",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Activity Log",t.statusHistory?.length>0&&n.jsx("span",{className:"text-xs bg-gray-700 px-1.5 py-0.5 rounded",children:t.statusHistory.length})]}),n.jsx("svg",{className:"w-4 h-4 transition-transform "+(u?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u&&n.jsx("div",{className:"mt-3 space-y-2 max-h-64 overflow-y-auto",children:t.statusHistory&&0!==t.statusHistory.length?[...t.statusHistory].reverse().map((e,t)=>{const r=y.find(t=>t.id===e.userId),a=new Date(e.timestamp);return n.jsxs("div",{className:"flex items-start gap-3 text-sm p-2 rounded bg-dark-bg/50",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-600 mt-1.5 shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"text-gray-300",children:"Status changed to"}),n.jsx("span",{className:`font-semibold uppercase text-xs ${{draft:"text-gray-400",sent:"text-blue-400",under_review:"text-amber-400",approved:"text-emerald-400",won:"text-green-400",rejected:"text-red-400",expired:"text-gray-500",dead:"text-red-500"}[e.status]||"text-gray-400"}`,children:e.status?.replace("_"," ")})]}),e.note&&n.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:['"',e.note,'"']}),n.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[r?.name||"System","  ",a.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]},t)}):n.jsx("p",{className:"text-sm text-gray-500 italic",children:"No activity recorded yet"})})]})]})]})}function ot(){const{quote:e,setFees:t}=be(),r=e.fees||{managementFee:0,commissionFee:0,discount:0},a=(e,n)=>{if(""===n)return void t({[e]:""});const r=parseFloat(n);if(isNaN(r))return;const a=Math.min(100,Math.max(0,r));t({[e]:a})},o=(e,n)=>{(""===n||isNaN(parseFloat(n)))&&t({[e]:0})};return n.jsxs("div",{className:"card",children:[n.jsxs("h3",{className:"text-sm font-semibold text-gray-300 mb-3 flex items-center gap-2",children:[n.jsx("svg",{className:"w-4 h-4 text-accent-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Fees & Adjustments"]}),n.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Management %"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:r.managementFee,onChange:e=>a("managementFee",e.target.value),onBlur:e=>o("managementFee",e.target.value),min:"0",max:"100",step:"0.5",className:"input pr-8 text-center"}),n.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:"%"})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Added to charge"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Commission %"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:r.commissionFee,onChange:e=>a("commissionFee",e.target.value),onBlur:e=>o("commissionFee",e.target.value),min:"0",max:"100",step:"0.5",className:"input pr-8 text-center"}),n.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:"%"})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Added to charge"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"label",children:"Discount %"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:r.discount,onChange:e=>a("discount",e.target.value),onBlur:e=>o("discount",e.target.value),min:"0",max:"100",step:"0.5",className:"input pr-8 text-center"}),n.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:"%"})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Off final total"})]})]}),n.jsx("div",{className:"mt-4 pt-4 border-t border-gray-800",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[n.jsx("input",{type:"checkbox",checked:r.distributeFees||!1,onChange:e=>t({distributeFees:e.target.checked}),className:"checkbox border-gray-600 rounded bg-gray-900 group-hover:border-accent-primary transition-colors"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-300 group-hover:text-white transition-colors",children:"Distribute Fees into Unit Rates"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Hides separate fee line items on PDF by inflating unit prices"})]})]})})]})}function lt(e){if(!e)return{totalCost:0,totalCharge:0};const t=Number(e.quantity)||1,n=Number(e.days)||1;return{totalCost:(Number(e.cost)||0)*t*n,totalCharge:(Number(e.charge)||0)*t*n}}function it(e){if(!e)return 0;const{totalCost:t,totalCharge:n}=lt(e);return function(e,t){const n=Number(e)||0,r=Number(t)||0;return 0===r?0:(r-n)/r*100}(t,n)}function st(e){if(!e||"object"!=typeof e)return{totalCost:0,totalCharge:0};let t=0,n=0;return Object.values(e).forEach(e=>{const r=function(e){return e&&Array.isArray(e)?e.reduce((e,t)=>{if(!t)return e;const{totalCost:n,totalCharge:r}=lt(t);return{totalCost:e.totalCost+n,totalCharge:e.totalCharge+r}},{totalCost:0,totalCharge:0}):{totalCost:0,totalCharge:0}}(e);t+=r.totalCost,n+=r.totalCharge}),{totalCost:t,totalCharge:n}}function ct(e,t={}){const n=function(e){if(!e||"object"!=typeof e)return{totalCost:0,totalCharge:0};let t=0,n=0;return Object.values(e).forEach(e=>{if(e?.subsections){const r=st(e.subsections);t+=r.totalCost,n+=r.totalCharge}}),{totalCost:t,totalCharge:n}}(e),r=t.managementFee||0,a=t.commissionFee||0,o=t.discount||0,l=n.totalCharge*r/100,i=n.totalCharge*a/100,s=n.totalCharge+l+i,c=s*o/100,u=s-c,d=n.totalCost;return{baseCost:n.totalCost,baseCharge:n.totalCharge,managementAmount:l,commissionAmount:i,chargeWithFees:s,discountAmount:c,totalCost:d,totalCharge:u,profit:u-d,margin:u>0?(u-d)/u*100:0,getDistributedRate:e=>{if(!t.distributeFees)return e;return e*(1+(r+a)/100)}}}function ut({item:e,sectionId:t,subsectionName:r}){const{quote:a,updateLineItem:o,deleteLineItem:l,rates:i}=be(),{items:s,sections:c}=ne(),[u,f]=d.useState(!1),[p,m]=d.useState([]),[h,g]=d.useState(-1),y=d.useRef(null),b=lt(e),v=it(e),x=function(e){return e>=30?"text-green-400":e>=20?"text-amber-400":"text-red-400"}(v),w=B(a.region),k="MALAYSIA"===a.region?b.totalCharge:R(b.totalCharge,w,a.currency,i),S=(n,a)=>{o(t,r,e.id,{[n]:a})},j=e=>{if(S("name",e),e.length>=2){const t=(e=>{const t=e.toLowerCase();return s.filter(e=>e.name.toLowerCase().includes(t)).slice(0,8)})(e);m(t),f(t.length>0),g(-1)}else f(!1)},C=e=>{const t=c.find(t=>t.id===e);return t?.name||e},N=n=>{const l=n.pricing?.[a.region]||{cost:0,charge:0};o(t,r,e.id,{name:n.name,cost:l.cost,charge:l.charge}),f(!1),g(-1)};return d.useEffect(()=>{const e=e=>{y.current&&!y.current.contains(e.target)&&(f(!1),g(-1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),n.jsxs("div",{draggable:!0,onDragStart:n=>{n.dataTransfer.setData("application/json",JSON.stringify({sectionId:t,subsectionName:r,itemId:e.id})),n.dataTransfer.effectAllowed="move"},className:"group bg-dark-card border border-dark-border rounded-lg p-2 hover:border-gray-700 transition-colors cursor-move",role:"article","aria-label":`Line item: ${e.name||"Unnamed item"}`,children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsxs("div",{className:"relative flex-1 min-w-[140px] sm:min-w-[180px]",ref:y,children:[n.jsx("label",{htmlFor:`item-name-${e.id}`,className:"sr-only",children:"Item name"}),n.jsx("input",{id:`item-name-${e.id}`,type:"text",value:e.name,onChange:e=>j(e.target.value),onKeyDown:e=>{if(u)switch(e.key){case"ArrowDown":e.preventDefault(),g(e=>e<p.length-1?e+1:0);break;case"ArrowUp":e.preventDefault(),g(e=>e>0?e-1:p.length-1);break;case"Enter":e.preventDefault(),h>=0&&p[h]&&N(p[h]);break;case"Escape":f(!1),g(-1)}},placeholder:"Item name...",className:"input-sm w-full text-sm","aria-autocomplete":"list","aria-controls":u?`autocomplete-${e.id}`:void 0,"aria-expanded":u}),u&&n.jsx("div",{id:`autocomplete-${e.id}`,className:"absolute z-20 top-full left-0 right-0 mt-1 bg-dark-card border border-dark-border rounded-lg shadow-xl overflow-hidden",role:"listbox","aria-label":"Item suggestions",children:p.map((e,t)=>n.jsxs("button",{onClick:()=>N(e),className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex justify-between items-center "+(t===h?"bg-white/10":""),role:"option","aria-selected":t===h,children:[n.jsx("span",{className:"text-gray-200",children:e.name}),n.jsx("span",{className:"text-xs text-gray-500",children:C(e.section)})]},e.id||t))})]}),n.jsxs("div",{className:"w-14 sm:w-16",children:[n.jsx("label",{htmlFor:`quantity-${e.id}`,className:"sr-only",children:"Quantity"}),n.jsx("input",{id:`quantity-${e.id}`,type:"number",value:e.quantity,onChange:e=>S("quantity",""===e.target.value?"":parseFloat(e.target.value)),onBlur:t=>{(""===t.target.value||isNaN(e.quantity))&&S("quantity",1)},onFocus:e=>e.target.select(),min:"1",className:"input-sm w-full text-left text-sm",title:"Qty","aria-label":"Quantity",placeholder:"Qty"})]}),n.jsxs("div",{className:"w-14 sm:w-16",children:[n.jsx("label",{htmlFor:`days-${e.id}`,className:"sr-only",children:"Days"}),n.jsx("input",{id:`days-${e.id}`,type:"number",value:e.days,onChange:e=>S("days",""===e.target.value?"":parseFloat(e.target.value)),onBlur:t=>{(""===t.target.value||isNaN(e.days))&&S("days",1)},onFocus:e=>e.target.select(),min:"0.5",step:"0.5",className:"input-sm w-full text-left text-sm",title:"Days","aria-label":"Number of days",placeholder:"Days"})]}),n.jsxs("div",{className:"w-24 hidden lg:block relative",children:[n.jsx("label",{htmlFor:`cost-${e.id}`,className:"sr-only",children:"Cost per unit"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-xs text-gray-500",children:U(a.currency)}),n.jsx("input",{id:`cost-${e.id}`,type:"number",value:e.cost,onChange:e=>S("cost",""===e.target.value?"":parseFloat(e.target.value)),onBlur:t=>{(""===t.target.value||isNaN(e.cost))&&S("cost",0)},onFocus:e=>e.target.select(),min:"0",className:"input-sm w-full pl-6 text-left text-sm text-gray-500",title:"Cost","aria-label":`Cost per unit in ${a.currency}`})]})]}),n.jsxs("div",{className:"w-20 sm:w-24 relative",children:[n.jsx("label",{htmlFor:`charge-${e.id}`,className:"sr-only",children:"Charge per unit"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-xs text-gray-400",children:U(a.currency)}),n.jsx("input",{id:`charge-${e.id}`,type:"number",value:e.charge,onChange:e=>S("charge",""===e.target.value?"":parseFloat(e.target.value)),onBlur:t=>{(""===t.target.value||isNaN(e.charge))&&S("charge",0)},onFocus:e=>e.target.select(),min:"0",className:"input-sm w-full pl-5 sm:pl-6 text-left text-sm",title:"Charge","aria-label":`Charge per unit in ${a.currency}`})]})]}),n.jsx("div",{className:"w-20 sm:w-24 text-right flex items-center justify-end",role:"status","aria-live":"polite","aria-label":`Total: ${q(k,a.currency)}`,children:n.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-100",children:q(k,a.currency)})}),n.jsx("div",{className:"w-14 text-right hidden lg:flex items-center justify-end",role:"status","aria-live":"polite","aria-label":`Margin: ${v.toFixed(0)}%`,children:n.jsxs("span",{className:"text-xs font-bold px-1.5 py-0.5 rounded "+(v>=30?"bg-green-500/10 text-green-400":v>=15?"bg-amber-500/10 text-amber-400":"bg-red-500/10 text-red-400"),children:[v.toFixed(0),"%"]})}),n.jsx("button",{onClick:()=>{l(t,r,e.id)},className:"p-2 min-w-[36px] min-h-[36px] text-gray-600 hover:text-red-400 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity flex items-center justify-center",title:"Delete item","aria-label":`Delete ${e.name||"item"}`,children:n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),n.jsxs("div",{className:"flex lg:hidden items-center justify-between mt-2 pt-2 border-t border-dark-border text-xs text-gray-500",children:[n.jsxs("span",{"aria-label":`Cost: ${U(a.currency)}${e.cost}`,children:["Cost: ",U(a.currency),e.cost]}),n.jsxs("span",{className:x,"aria-label":`Margin: ${v.toFixed(0)}%`,children:["Margin: ",v.toFixed(0),"%"]})]})]})}function dt({sectionId:e,subsectionName:t,color:r,isDragging:a}){const{quote:o,addLineItem:l,updateSubsectionName:i}=be(),{items:s}=ne(),c=o.sections[e],u=c?.subsections?.[t]||[],[f,p]=d.useState(!1),[m,h]=d.useState(!1),[g,y]=d.useState(""),b=d.useRef(null),v=c?.subsectionNames?.[t]||t;d.useEffect(()=>{m&&b.current&&(b.current.focus(),b.current.select())},[m]);const x=()=>{i(e,t,g),h(!1)},w=()=>{h(!1),y("")},k=((e,t)=>{if("creative"===e)return"creative";if("logistics"===e)return"logistics";if("expenses"===e)return"expenses";if("productionTeam"===e)return{Production:"prod_production","Technical Crew":"prod_technical","Production Management":"prod_management"}[t]||"prod_production";if("productionEquipment"===e)return{Video:"equip_video",Audio:"equip_audio",Cameras:"equip_cameras",Graphics:"equip_graphics",VT:"equip_vt",Cabling:"equip_cabling",Other:"equip_other"}[t]||"equip_other";return"other"})(e,t),S=s.filter(e=>e.section===k),j=(n=null)=>{const r=o.region,a=n?.pricing?.[r]||{cost:0,charge:0};l(e,t,{name:n?.name||"",cost:a.cost,charge:a.charge,quantity:1,days:1,isPercentage:n?.isPercentage||!1,percentValue:n?.percentValue||0}),p(!1)},C=["creative","logistics","expenses"].includes(e)&&"Services"===t;return n.jsxs("div",{className:"bg-dark-bg/50 rounded-md p-2 transition-colors hover:bg-dark-bg/70",onDragOver:e=>{e.preventDefault(),e.currentTarget.classList.add("bg-accent-primary/10")},onDragLeave:e=>{e.preventDefault(),e.currentTarget.classList.remove("bg-accent-primary/10")},onDrop:n=>{n.preventDefault(),n.currentTarget.classList.remove("bg-accent-primary/10");const r=JSON.parse(n.dataTransfer.getData("application/json"));!r||r.sectionId===e&&r.subsectionName===t||be.getState().moveLineItem(r.sectionId,r.subsectionName,r.itemId,e,t)},children:[!C&&n.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[n.jsx("svg",{className:"w-3 h-3 text-gray-600 flex-shrink-0 cursor-grab",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),m?n.jsxs("div",{className:"flex items-center gap-1",onClick:e=>e.stopPropagation(),onMouseDown:e=>e.stopPropagation(),draggable:!1,children:[n.jsx("input",{ref:b,type:"text",value:g,onChange:e=>y(e.target.value),onKeyDown:e=>{"Enter"===e.key&&x(),"Escape"===e.key&&w()},className:"input-sm text-xs py-0.5 w-32","aria-label":"Subsection name",draggable:!1}),n.jsx("button",{onClick:x,className:"p-0.5 text-green-400 hover:text-green-300","aria-label":"Save",children:n.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),n.jsx("button",{onClick:w,className:"p-0.5 text-gray-400 hover:text-gray-300","aria-label":"Cancel",children:n.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):n.jsx("h4",{className:"text-xs font-medium text-gray-400 cursor-text hover:text-gray-300",onClick:e=>{e.stopPropagation(),y(v),h(!0)},onMouseDown:e=>e.stopPropagation(),draggable:!1,title:"Click to rename",children:v}),n.jsxs("span",{className:"text-[10px] text-gray-600",children:[u.length," items"]})]}),u.length>0&&n.jsxs("div",{className:"space-y-1 mb-1",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 px-2 py-0.5 text-[10px] text-gray-500 border-b border-dark-border",children:[n.jsx("div",{className:"flex-1 min-w-[180px]",children:"Item"}),n.jsx("div",{className:"w-16 text-left",children:"Qty"}),n.jsx("div",{className:"w-16 text-left",children:"Days"}),n.jsx("div",{className:"w-24 text-left hidden lg:block",children:"Cost"}),n.jsx("div",{className:"w-24 text-left",children:"Charge"}),n.jsx("div",{className:"w-24 text-right",children:"Total"}),n.jsx("div",{className:"w-14 text-right hidden lg:block",children:"Margin"}),n.jsx("div",{className:"w-6"})]}),u.map(r=>n.jsx(ut,{item:r,sectionId:e,subsectionName:t},r.id))]}),f?n.jsxs("div",{className:"bg-dark-card rounded-lg p-2 space-y-2",children:[S.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-2",children:"Quick Add"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:S.slice(0,8).map(e=>n.jsxs("button",{onClick:()=>j(e),className:"text-xs px-2.5 py-1.5 bg-dark-bg hover:bg-white/10 rounded-md transition-colors text-gray-400 hover:text-gray-200 border border-dark-border hover:border-gray-600",children:["+ ",e.name]},e.name))})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>j(),className:"text-xs px-3 py-1.5 bg-accent-primary/20 hover:bg-accent-primary/30 text-accent-primary rounded transition-colors",children:"+ Custom Item"}),n.jsx("button",{onClick:()=>p(!1),className:"text-xs px-3 py-1.5 text-gray-500 hover:text-gray-300",children:"Cancel"})]})]}):n.jsxs("button",{onClick:()=>p(!0),className:"w-full py-1.5 text-xs text-gray-500 hover:text-gray-300 hover:bg-white/5 rounded transition-colors flex items-center justify-center gap-1",style:{borderColor:r},children:[n.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Item"]})]})}const ft=d.memo(function({sectionId:e,index:t,totalSections:r}){const{quote:a,toggleSection:o,moveSection:l,updateSectionName:i,moveSubsection:s,rates:c}=be(),u=a.sections[e],f=T[e],[p,m]=d.useState(!1),[h,g]=d.useState(""),[y,b]=d.useState(!1),[v,x]=d.useState(""),[w,k]=d.useState(null),[S,j]=d.useState(null),C=d.useRef(null),N=a.sectionNames?.[e]||f?.name||"";if(d.useEffect(()=>{y&&C.current&&(C.current.focus(),C.current.select())},[y]),!u||!f)return null;const E=st(u.subsections),D=B(a.region),L=q("MALAYSIA"===a.region?E.totalCharge:R(E.totalCharge,D,a.currency,c),a.currency),A=[...f.subsections,...u.customSubsections||[]],_=u.subsectionOrder||A,P=Object.values(u.subsections).reduce((e,t)=>e+t.length,0),z=()=>{k(null),j(null)},I=()=>{if(h.trim()){const{addCustomSubsection:t}=be.getState();t(e,h.trim()),g(""),m(!1)}},O=()=>{i(e,v),b(!1)},F=()=>{b(!1),x("")};return n.jsxs("div",{className:"card overflow-hidden",style:{borderLeftColor:f.color,borderLeftWidth:"3px"},role:"region","aria-labelledby":`section-${e}-title`,children:[n.jsxs("button",{className:"section-header -m-4 mb-0 w-full",onClick:()=>o(e),"aria-expanded":u.isExpanded,"aria-controls":`section-${e}-content`,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:f.color},"aria-hidden":"true"}),y?n.jsxs("div",{className:"flex items-center gap-2",onClick:e=>e.stopPropagation(),children:[n.jsx("input",{ref:C,type:"text",value:v,onChange:e=>x(e.target.value),onKeyDown:e=>{"Enter"===e.key&&O(),"Escape"===e.key&&F()},className:"input-sm text-sm font-semibold py-0.5","aria-label":"Section name"}),n.jsx("button",{onClick:O,className:"p-1 text-green-400 hover:text-green-300","aria-label":"Save name",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),n.jsx("button",{onClick:F,className:"p-1 text-gray-400 hover:text-gray-300","aria-label":"Cancel",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):n.jsx("h3",{id:`section-${e}-title`,className:"font-semibold text-gray-200 cursor-pointer hover:text-white",onClick:e=>{e.stopPropagation(),x(N),b(!0)},title:"Click to rename",children:N}),n.jsxs("span",{className:"text-xs text-gray-500 bg-dark-card px-2 py-0.5 rounded flex-shrink-0",children:[P," items"]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-1",onClick:e=>e.stopPropagation(),children:[n.jsx("button",{onClick:t=>{t.stopPropagation(),l(e,"up")},disabled:0===t,className:"p-1 rounded transition-colors "+(0===t?"text-gray-600 cursor-not-allowed":"text-gray-400 hover:text-white hover:bg-white/10"),"aria-label":"Move section up",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),n.jsx("button",{onClick:t=>{t.stopPropagation(),l(e,"down")},disabled:t===r-1,className:"p-1 rounded transition-colors "+(t===r-1?"text-gray-600 cursor-not-allowed":"text-gray-400 hover:text-white hover:bg-white/10"),"aria-label":"Move section down",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),n.jsx("span",{className:"text-sm font-medium text-gray-300",children:L}),n.jsx("svg",{className:"w-5 h-5 text-gray-400 transition-transform duration-200 "+(u.isExpanded?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),u.isExpanded&&n.jsxs("div",{id:`section-${e}-content`,className:"mt-3 space-y-2",children:[_.map((t,r)=>n.jsx("div",{draggable:!0,onDragStart:e=>((e,t)=>{k(t),e.dataTransfer.setData("subsection",t),e.dataTransfer.effectAllowed="move"})(e,t),onDragOver:e=>((e,t)=>{e.preventDefault(),w&&w!==t&&j(t)})(e,t),onDrop:n=>((t,n)=>{if(t.preventDefault(),w&&w!==n){const t=[..._],r=t.indexOf(w),a=t.indexOf(n);if(-1!==r&&-1!==a){t.splice(r,1),t.splice(a,0,w);const{reorderSubsections:n}=be.getState();n(e,t)}}k(null),j(null)})(n,t),onDragEnd:z,className:`transition-all duration-150 ${w===t?"opacity-50 scale-[0.98]":""} ${S===t?"ring-2 ring-accent-primary/50 rounded-lg":""}`,children:n.jsx(dt,{sectionId:e,subsectionName:t,color:f.color,isDragging:w===t})},t)),p?n.jsxs("div",{className:"flex items-center gap-2 p-2 bg-dark-bg rounded-lg",children:[n.jsx("label",{htmlFor:`new-subsection-${e}`,className:"sr-only",children:"New subsection name"}),n.jsx("input",{id:`new-subsection-${e}`,type:"text",value:h,onChange:e=>g(e.target.value),placeholder:"Subsection name...",className:"input-sm flex-1",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&I(),"Escape"===e.key&&(m(!1),g(""))},"aria-label":"New subsection name"}),n.jsx("button",{onClick:I,className:"btn-primary text-xs py-1 px-2","aria-label":"Add subsection",children:"Add"}),n.jsx("button",{onClick:()=>{m(!1),g("")},className:"btn-ghost text-xs py-1 px-2","aria-label":"Cancel adding subsection",children:"Cancel"})]}):n.jsxs("button",{onClick:()=>m(!0),className:"w-full py-2 text-sm text-gray-500 hover:text-gray-300 hover:bg-white/5 rounded-lg transition-colors flex items-center justify-center gap-1","aria-label":"Add new subsection",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Subsection"]})]})]})});function pt({onGoToSettings:e}){const t=be(e=>e.quote.sectionOrder||A);return n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 h-[calc(100vh-60px)]",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[n.jsx(He,{}),n.jsx(at,{onGoToSettings:e})]}),n.jsx(ot,{}),n.jsx("div",{className:"space-y-2",children:t.map((e,r)=>n.jsx(ft,{sectionId:e,index:r,totalSections:t.length},e))})]})}function mt(e,t=1){return`rgba(${parseInt(e.slice(1,3),16)}, ${parseInt(e.slice(3,5),16)}, ${parseInt(e.slice(5,7),16)}, ${t})`}function ht({quote:e,currency:t}){const c=rt.getState().settings,{company:u,bankDetails:d,quoteDefaults:f,taxInfo:p,pdfOptions:m}=c,{client:h,project:g,sections:y,fees:b}=e,v=ct(y,b||{}),x={primary:m?.primaryColor||"#143642",accent:m?.accentColor||"#0F8B8D",line:m?.lineColor||m?.primaryColor||"#143642",text:m?.textColor||"#374151",muted:m?.mutedColor||"#6B7280",background:m?.backgroundColor||"#FFFFFF"},w=mt(x.line,.15),k=mt(x.primary,.03),S=mt(x.primary,.08),j=m?.baseFontSize||10,C=m?.fontFamily||"Helvetica",N=o.create({page:{backgroundColor:x.background,fontFamily:C,fontSize:j,color:x.text,paddingTop:30,paddingBottom:50,paddingHorizontal:35},headerBanner:{backgroundColor:x.primary,flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingVertical:14,paddingHorizontal:16,marginBottom:16,borderRadius:4},quotationTitle:{fontSize:14,fontFamily:`${C}-Bold`,color:"#FFFFFF",letterSpacing:2},headerDetails:{flexDirection:"row",alignItems:"center",gap:20},headerItem:{alignItems:"flex-end"},headerItemVenue:{alignItems:"flex-end",maxWidth:140},headerLabel:{fontSize:7,color:"#FFFFFF",opacity:.8,textTransform:"uppercase",marginBottom:2,textAlign:"right"},headerValue:{fontSize:9,fontFamily:`${C}-Bold`,color:"#FFFFFF",textAlign:"right"},twoColumn:{flexDirection:"row",marginBottom:16,gap:16},columnHalf:{flex:1,padding:12,backgroundColor:k,borderRadius:4},columnLabel:{fontSize:8,fontFamily:`${C}-Bold`,color:x.accent,textTransform:"uppercase",letterSpacing:.5,marginBottom:8},columnTitle:{fontSize:11,fontFamily:`${C}-Bold`,color:x.primary,marginBottom:4},columnText:{fontSize:9,color:x.text,lineHeight:1.5,marginBottom:1},descriptionRow:{flexDirection:"row",marginBottom:16,gap:16},descriptionBox:{flex:1,padding:12,borderWidth:1,borderTopColor:x.line,borderBottomColor:x.line,borderLeftColor:x.line,borderRightColor:x.line,borderRadius:4},descriptionLabel:{fontSize:8,fontFamily:`${C}-Bold`,color:x.primary,textTransform:"uppercase",marginBottom:6},descriptionText:{fontSize:9,color:x.text,lineHeight:1.5},sectionHeader:{backgroundColor:x.primary,paddingVertical:6,paddingHorizontal:10,marginTop:12,marginBottom:6,borderRadius:3},sectionHeaderText:{fontSize:9,fontFamily:`${C}-Bold`,color:"#FFFFFF",textTransform:"uppercase",letterSpacing:.5},tableHeader:{flexDirection:"row",backgroundColor:S,paddingVertical:5,paddingLeft:10,paddingRight:8,borderBottomWidth:1,borderBottomColor:x.line},tableHeaderCell:{fontSize:7,fontFamily:`${C}-Bold`,color:x.primary,textTransform:"uppercase"},tableRow:{flexDirection:"row",paddingVertical:4,paddingLeft:10,paddingRight:8,borderBottomWidth:.5,borderBottomColor:"#E5E7EB"},tableCell:{fontSize:8,color:x.text},tableCellRight:{fontSize:8,color:x.text,textAlign:"right"},colName:{width:"42%"},colQty:{width:"10%",textAlign:"center"},colDays:{width:"10%",textAlign:"center"},colRate:{width:"18%",textAlign:"right"},colTotal:{width:"20%",textAlign:"right"},subsectionHeader:{backgroundColor:w,paddingVertical:4,paddingHorizontal:8,marginTop:6,borderLeftWidth:2,borderLeftColor:x.line,borderTopWidth:0,borderBottomWidth:0,borderRightWidth:0},subsectionText:{fontSize:8,fontFamily:`${C}-Bold`,color:x.primary},bottomRow:{flexDirection:"row",marginTop:20,gap:12},termsColumn:{flex:1},termsBox:{padding:10,backgroundColor:k,borderRadius:4,marginBottom:8},termsLabel:{fontSize:8,fontFamily:`${C}-Bold`,color:x.primary,marginBottom:4},termsText:{fontSize:7,color:x.muted,lineHeight:1.5},totalsColumn:{width:180},totalsBox:{borderRadius:4,padding:12,borderWidth:1,borderTopColor:x.line,borderBottomColor:x.line,borderLeftColor:x.line,borderRightColor:x.line},totalsRow:{flexDirection:"row",justifyContent:"space-between",marginBottom:3},totalsLabel:{fontSize:8,color:x.muted},totalsValue:{fontSize:8,color:x.text},totalsFinalRow:{flexDirection:"row",justifyContent:"space-between",borderTopWidth:1,borderTopColor:x.line,paddingTop:8,marginTop:8},totalsFinalLabel:{fontSize:11,fontFamily:`${C}-Bold`,color:x.primary},totalsFinalValue:{fontSize:12,fontFamily:`${C}-Bold`,color:x.primary},footer:{position:"absolute",bottom:18,left:35,right:35,borderTopWidth:.5,borderTopColor:"#E5E7EB",paddingTop:8,flexDirection:"row",justifyContent:"space-between"},footerText:{fontSize:7,color:x.muted},footerBold:{fontSize:7,fontFamily:`${C}-Bold`,color:x.primary},logo:{width:100,maxHeight:40,objectFit:"contain",marginBottom:6}}),E=e=>{if(!e)return"-";const t=new Date(e),n=t.getDate(),r=t.toLocaleDateString("en-GB",{month:"short"}),a=t.getFullYear();return`${n}${(e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}})(n)} ${r} ${a}`},D=new Date(e.createdAt||new Date),L=new Date(D);L.setDate(D.getDate()+(e.validityDays||f?.validityDays||30));const _=(e.sectionOrder||A).filter(e=>{const t=y?.[e];return!!t?.subsections&&Object.values(t.subsections).some(e=>e?.length>0)});return n.jsx(r,{children:n.jsxs(a,{size:"A4",style:N.page,children:[n.jsxs(l,{style:N.headerBanner,children:[n.jsx(i,{style:N.quotationTitle,children:"QUOTATION"}),n.jsxs(l,{style:N.headerDetails,children:[n.jsxs(l,{style:N.headerItem,children:[n.jsx(i,{style:N.headerLabel,children:"Quote No."}),n.jsx(i,{style:N.headerValue,children:e.quoteNumber})]}),n.jsxs(l,{style:N.headerItem,children:[n.jsx(i,{style:N.headerLabel,children:"Date"}),n.jsx(i,{style:N.headerValue,children:E(D)})]}),n.jsxs(l,{style:N.headerItem,children:[n.jsx(i,{style:N.headerLabel,children:"Valid Until"}),n.jsx(i,{style:N.headerValue,children:E(L)})]}),g?.venue&&n.jsxs(l,{style:N.headerItemVenue,children:[n.jsx(i,{style:N.headerLabel,children:"Venue"}),n.jsx(i,{style:N.headerValue,children:g.venue})]})]})]}),n.jsxs(l,{style:N.twoColumn,children:[n.jsxs(l,{style:N.columnHalf,children:[n.jsx(i,{style:N.columnLabel,children:"From"}),m?.showLogo&&u.logo&&n.jsx(s,{src:u.logo,style:N.logo}),n.jsx(i,{style:N.columnTitle,children:u.name}),m?.showCompanyAddress&&u.address&&n.jsx(i,{style:N.columnText,children:u.address}),u.city&&n.jsxs(i,{style:N.columnText,children:[u.city,", ",u.country]}),m?.showCompanyPhone&&u.phone&&n.jsx(i,{style:N.columnText,children:u.phone}),m?.showCompanyEmail&&u.email&&n.jsx(i,{style:N.columnText,children:u.email})]}),n.jsxs(l,{style:N.columnHalf,children:[n.jsx(i,{style:N.columnLabel,children:"To"}),n.jsx(i,{style:N.columnTitle,children:h?.company||"-"}),h?.contact&&n.jsx(i,{style:N.columnText,children:h.contact}),h?.email&&n.jsx(i,{style:N.columnText,children:h.email}),h?.phone&&n.jsx(i,{style:N.columnText,children:h.phone})]})]}),n.jsxs(l,{style:N.descriptionRow,children:[n.jsxs(l,{style:N.descriptionBox,children:[n.jsx(i,{style:N.descriptionLabel,children:"Project"}),n.jsx(i,{style:N.columnTitle,children:g?.title||"-"}),g?.type&&n.jsxs(i,{style:N.descriptionText,children:["Type: ",(e=>{if(!e)return null;const t=(c.projectTypes||[]).find(t=>t.id===e);return t?.label||e.replace(/_/g," ")})(g.type)]}),n.jsxs(i,{style:N.descriptionText,children:["Dates: ",(()=>{if(!g?.startDate)return"-";const e=E(g.startDate);return g?.endDate&&g.endDate!==g.startDate?`${e} - ${E(g.endDate)}`:e})()]}),g?.description&&n.jsx(i,{style:[N.descriptionText,{marginTop:4}],children:g.description})]}),n.jsxs(l,{style:N.descriptionBox,children:[n.jsx(i,{style:N.descriptionLabel,children:"Services Included"}),n.jsx(i,{style:N.descriptionText,children:_.map(t=>{const n=y[t];return e.sectionNames?.[t]||n.name||T[t]?.name}).join("  ")})]})]}),_.map(r=>{const a=y[r],o=e.sectionNames?.[r]||a.name||T[r]?.name;return n.jsxs(l,{wrap:!1,children:[n.jsx(l,{style:N.sectionHeader,children:n.jsx(i,{style:N.sectionHeaderText,children:o})}),n.jsxs(l,{style:N.tableHeader,children:[n.jsx(i,{style:[N.tableHeaderCell,N.colName],children:"Description"}),n.jsx(i,{style:[N.tableHeaderCell,N.colQty,{textAlign:"center"}],children:"Qty"}),n.jsx(i,{style:[N.tableHeaderCell,N.colDays,{textAlign:"center"}],children:"Days"}),n.jsx(i,{style:[N.tableHeaderCell,N.colRate,{textAlign:"right"}],children:"Rate"}),n.jsx(i,{style:[N.tableHeaderCell,N.colTotal,{textAlign:"right"}],children:"Total"})]}),Object.entries(a.subsections||{}).map(([e,r])=>{if(!r?.length)return null;const o=a.subsectionNames?.[e]||e;return n.jsxs(l,{children:[n.jsx(l,{style:N.subsectionHeader,children:n.jsx(i,{style:N.subsectionText,children:o})}),r.map((e,r)=>{const a=(e.charge||0)*(e.quantity||1)*(e.days||1);return n.jsxs(l,{style:N.tableRow,children:[n.jsx(i,{style:[N.tableCell,N.colName],children:e.name}),n.jsx(i,{style:[N.tableCell,N.colQty],children:e.quantity||1}),n.jsx(i,{style:[N.tableCell,N.colDays],children:e.days||1}),n.jsx(i,{style:[N.tableCellRight,N.colRate],children:q(e.charge||0,t)}),n.jsx(i,{style:[N.tableCellRight,N.colTotal],children:q(a,t)})]},e.id||r)})]},e)})]},r)}),n.jsxs(l,{style:N.bottomRow,children:[n.jsxs(l,{style:N.termsColumn,children:[f?.paymentTerms&&n.jsxs(l,{style:N.termsBox,children:[n.jsx(i,{style:N.termsLabel,children:"Payment Terms"}),n.jsx(i,{style:N.termsText,children:f.paymentTerms})]}),f?.termsAndConditions&&n.jsxs(l,{style:N.termsBox,children:[n.jsx(i,{style:N.termsLabel,children:"Terms & Conditions"}),n.jsx(i,{style:N.termsText,children:f.termsAndConditions})]}),m?.showBankDetails&&d?.bankName&&n.jsxs(l,{style:N.termsBox,children:[n.jsx(i,{style:N.termsLabel,children:"Bank Details"}),n.jsxs(i,{style:N.termsText,children:[d.bankName," | ",d.accountName," | ",d.accountNumber,d.swiftCode&&` | SWIFT: ${d.swiftCode}`]})]})]}),n.jsx(l,{style:N.totalsColumn,children:n.jsxs(l,{style:N.totalsBox,children:[(b?.managementFee>0||b?.commissionFee>0||b?.discount>0)&&n.jsxs(n.Fragment,{children:[n.jsxs(l,{style:N.totalsRow,children:[n.jsx(i,{style:N.totalsLabel,children:"Subtotal"}),n.jsx(i,{style:N.totalsValue,children:q(v.baseCharge,t)})]}),b?.managementFee>0&&n.jsxs(l,{style:N.totalsRow,children:[n.jsxs(i,{style:N.totalsLabel,children:["Management (",b.managementFee,"%)"]}),n.jsx(i,{style:N.totalsValue,children:q(v.managementAmount,t)})]}),b?.commissionFee>0&&n.jsxs(l,{style:N.totalsRow,children:[n.jsxs(i,{style:N.totalsLabel,children:["Commission (",b.commissionFee,"%)"]}),n.jsx(i,{style:N.totalsValue,children:q(v.commissionAmount,t)})]}),b?.discount>0&&n.jsxs(l,{style:N.totalsRow,children:[n.jsxs(i,{style:N.totalsLabel,children:["Discount (",b.discount,"%)"]}),n.jsxs(i,{style:N.totalsValue,children:["-",q(v.discountAmount,t)]})]})]}),n.jsxs(l,{style:N.totalsFinalRow,children:[n.jsx(i,{style:N.totalsFinalLabel,children:"TOTAL"}),n.jsx(i,{style:N.totalsFinalValue,children:q(v.totalCharge,t)})]})]})})]}),n.jsxs(l,{style:N.footer,fixed:!0,children:[n.jsxs(i,{style:N.footerText,children:[u.name," ",u.website&&`| ${u.website}`]}),n.jsx(i,{style:N.footerBold,children:e.quoteNumber})]})]})})}function gt(){const{quote:e}=be(),t=qe(),[r,a]=d.useState(!1),[o,l]=d.useState(!1),i=ct(e.sections,e.fees),s=t=>q(t||0,e.currency),u=(i.totalCharge||0)-(i.totalCost||0),f=i.totalCharge>0?u/i.totalCharge*100:0;return n.jsxs("div",{className:"space-y-6 text-gray-100 p-2",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:async()=>{l(!0);try{const t=await c(n.jsx(ht,{quote:e,currency:e.currency})).toBlob(),r=URL.createObjectURL(t);window.open(r,"_blank"),setTimeout(()=>URL.revokeObjectURL(r),5e3)}catch(r){t.error("Failed to generate preview")}finally{l(!1)}},disabled:o,className:"flex-1 btn-secondary py-3",children:o?n.jsxs("span",{className:"flex items-center justify-center gap-2",children:[n.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):n.jsxs("span",{className:"flex items-center justify-center gap-2",children:[n.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Preview"]})}),n.jsx("button",{onClick:async()=>{a(!0);try{const r=await c(n.jsx(ht,{quote:e,currency:e.currency})).toBlob(),a=e.client?.company||"Client",o=e.project?.title||"Project",l=`${a} - ${o} - ${e.quoteDate||(new Date).toISOString().split("T")[0]} - Quote.pdf`,i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=l,s.click(),URL.revokeObjectURL(i),t.success("PDF downloaded successfully")}catch(r){t.error("Failed to generate PDF")}finally{a(!1)}},disabled:r,className:"flex-1 btn-primary py-3 shadow-lg shadow-accent-primary/20",children:r?n.jsxs("span",{className:"flex items-center justify-center gap-2",children:[n.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):n.jsxs("span",{className:"flex items-center justify-center gap-2",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download"]})})]}),n.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Customize PDF colors in Settings  Quote Templates"}),n.jsxs("div",{className:"bg-dark-card border border-dark-border rounded-xl p-5 shadow-lg",children:[n.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4 border-b border-gray-700 pb-2",children:"Financial Summary"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Total Cost"}),n.jsx("p",{className:"text-lg font-mono text-gray-300",children:s(i.totalCost)})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Total Charge"}),n.jsx("p",{className:"text-xl font-bold font-mono text-white",children:s(i.totalCharge)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Est. Profit"}),n.jsx("p",{className:"text-lg font-mono font-bold "+(u>=0?"text-emerald-400":"text-red-400"),children:s(u)})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Gross Margin"}),n.jsxs("p",{className:"text-lg font-mono font-bold "+(f>=30?"text-emerald-400":"text-amber-400"),children:[f.toFixed(1),"%"]})]})]}),n.jsxs("div",{className:"space-y-2 text-sm border-t border-gray-700 pt-4",children:[e.fees.managementFee>0&&n.jsxs("div",{className:"flex justify-between text-gray-400",children:[n.jsxs("span",{children:["Management Fee (",e.fees.managementFee,"%)"]}),n.jsx("span",{children:s(i.managementAmount)})]}),e.fees.commissionFee>0&&n.jsxs("div",{className:"flex justify-between text-gray-400",children:[n.jsxs("span",{children:["Commission (",e.fees.commissionFee,"%)"]}),n.jsx("span",{children:s(i.commissionAmount)})]}),e.fees.discount>0&&n.jsxs("div",{className:"flex justify-between text-red-400",children:[n.jsxs("span",{children:["Discount (",e.fees.discount,"%)"]}),n.jsxs("span",{children:["-",s(i.discountAmount)]})]})]})]}),n.jsxs("div",{className:"bg-dark-card border border-dark-border rounded-xl p-4 shadow-lg",children:[n.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-3 border-b border-gray-700 pb-2",children:"Section Breakdown"}),n.jsx("div",{className:"space-y-3",children:Object.values(e.sections).map(e=>{const t=Object.values(e.subsections).flat().reduce((e,t)=>e+t.cost*t.quantity*t.days,0),r=Object.values(e.subsections).flat().reduce((e,t)=>e+t.charge*t.quantity*t.days,0);return r>0||t>0?n.jsxs("div",{className:"flex items-center justify-between text-sm group",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color}}),n.jsx("span",{className:"text-gray-300",children:e.name})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-gray-200",children:s(r)}),n.jsxs("p",{className:"text-[10px] text-gray-500 opacity-0 group-hover:opacity-100 transition-opacity",children:["Margin: ",r>0?Math.round((r-t)/r*100):0,"%"]})]})]},e.id):null})})]})]})}function yt(){const{quote:e}=be(),{settings:t}=rt(),[r,a]=d.useState(!1),[o,l]=d.useState(!0),[i,s]=d.useState(!1),[c,u]=d.useState(null),{client:f,project:p,sections:m,fees:h}=e,g=ct(m,h||{}),y=!!t.aiSettings?.anthropicKey,b=t.users?.find(t=>t.id===e.preparedBy),v=b?.name?.split(" ")[0]||"Team",x=f.contact?.split(" ")[0]||"there",w=p.startDate?p.endDate&&p.endDate!==p.startDate?`${p.startDate} to ${p.endDate}`:p.startDate:"TBC",k=()=>{const e=[];return Object.values(m||{}).forEach(t=>{if(t?.subsections){Object.values(t.subsections).some(e=>Array.isArray(e)&&e.length>0)&&t.name&&e.push(t.name.toLowerCase())}}),0===e.length?"all the kit and crew":1===e.length?e[0]:2===e.length?`${e[0]} and ${e[1]}`:`${e.slice(0,-1).join(", ")}, and ${e[e.length-1]}`},S=c||(()=>{const t=q(g.totalCharge,e.currency);return{subject:`Quote for ${p.title||"Project"}${"TBC"!==w?` | ${w}`:""}`,body:`Hi ${x},\n\nI've put together the quote for ${p.title||"the project"}${p.venue?` at ${p.venue}`:""}.\n\nAttached is our proposal covering ${k()}. Total comes to ${t}. Quote's valid for ${e.validityDays||30} days.\n\nHappy to jump on a call if you'd like to talk through any of it. Let me know if you have any questions.\n\nBest,\n${v}`}})(),{subject:j,body:C}=S;return n.jsxs("div",{className:"card mt-4",children:[n.jsxs("button",{onClick:()=>l(!o),className:"w-full flex items-center justify-between text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx("svg",{className:"w-4 h-4 text-accent-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Quote Email"]}),n.jsx("svg",{className:"w-4 h-4 transition-transform "+(o?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),o&&n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("label",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"Subject"}),n.jsx("button",{onClick:()=>(async e=>{await navigator.clipboard.writeText(e),a(!0),setTimeout(()=>a(!1),2e3)})(j),className:"text-[10px] text-gray-500 hover:text-accent-primary transition-colors",children:"Copy"})]}),n.jsx("div",{className:"bg-slate-800/50 rounded px-2 py-1.5 text-xs text-gray-300 font-mono",children:j})]}),n.jsxs("div",{children:[n.jsx("div",{className:"flex items-center justify-between mb-1",children:n.jsx("label",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"Body"})}),n.jsx("div",{className:"bg-slate-800/50 rounded px-2 py-2 text-xs text-gray-300 whitespace-pre-wrap leading-relaxed max-h-48 overflow-y-auto",children:C})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:async()=>{if(y){s(!0);try{const n=q(g.totalCharge,e.currency),r=`Generate a client email to accompany a production services quote from Tell Productions Sdn Bhd.\n\n## Input Data\n\nCLIENT: ${f.company||"Client"}\nCONTACT: ${x}\nPROJECT: ${p.title||"Project"}\nTYPE: ${p.type||"Production"}\nVENUE: ${p.venue||"TBC"}\nDATES: ${w}\nQUOTE REFERENCE: ${e.quoteNumber}\nTOTAL: ${n}\nCURRENCY: ${e.currency}\nVALIDITY: ${e.validityDays||30} days\nSERVICES: ${k()}\nSENDER: ${v}\n\n## Writing Style\n\nWrite in Tom's voice: professional but casual, direct, efficient. Never stuffy.\n\nTone rules:\n- Use contractions naturally (I'm, we're, it's, we've)\n- Short paragraphs, 1-3 sentences each\n- No waffle or filler\n- Warm but not overly friendly\n- Confident without being pushy\n\n## Email Structure\n\nSubject line: Quote for [Project Title] | [Dates]\n\nBody:\n1. Opening (1 sentence) - Greeting and brief context\n2. The quote (2-3 sentences) - Reference attached quote, mention total and what it covers, note validity\n3. Next steps (1-2 sentences) - Clear call to action, offer to discuss\n4. Sign off: "Best, ${v}"\n\n## Rules\n\nAVOID:\n- Bullet points in the email\n- "Please find attached" (say "I've attached" or "Attached is")\n- "I hope this email finds you well"\n- "Don't hesitate to contact me" (say "Let me know if you have any questions")\n- Long paragraphs\n- Excessive thank-yous\n- Marketing language\n\n## Output Format\n\nReturn ONLY a JSON object:\n{"subject": "the email subject line", "body": "the email body"}\n\nKeep it under 120 words. No bullet points.`,a=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":t.aiSettings.anthropicKey,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:"claude-sonnet-4-20250514",max_tokens:500,messages:[{role:"user",content:r}]})});if(!a.ok)throw new Error("API request failed");const o=await a.json(),l=(o.content[0]?.text||"").match(/\{[\s\S]*\}/);if(l){const e=JSON.parse(l[0]);u(e)}}catch(n){}finally{s(!1)}}},disabled:i||!y,title:y?"":"Add Anthropic API key in Settings",className:`flex-1 py-2 rounded text-xs font-medium transition-all flex items-center justify-center gap-2 ${y?"bg-purple-500/20 text-purple-400 border border-purple-500/30 hover:bg-purple-500/30":"bg-gray-700/50 text-gray-500 border border-gray-600/30 cursor-not-allowed"} disabled:opacity-50`,children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-3 h-3 border-2 border-purple-400 border-t-transparent rounded-full animate-spin"}),"Generating..."]}):n.jsxs(n.Fragment,{children:[n.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),c?"Regenerate":"Generate"]})}),n.jsx("button",{onClick:async()=>{const e=`Subject: ${j}\n\n${C}`;await navigator.clipboard.writeText(e),a(!0),setTimeout(()=>a(!1),2e3)},className:"flex-1 py-2 rounded text-xs font-medium transition-all flex items-center justify-center gap-2 "+(r?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-accent-primary/20 text-accent-primary border border-accent-primary/30 hover:bg-accent-primary/30"),children:r?n.jsxs(n.Fragment,{children:[n.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied!"]}):n.jsxs(n.Fragment,{children:[n.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy"]})})]})]})]})}function bt(){return n.jsx("div",{className:"w-[320px] min-w-[320px] border-l border-dark-border bg-dark-bg overflow-y-auto h-[calc(100vh-60px)] sticky top-[60px]",children:n.jsxs("div",{className:"p-4",children:[n.jsx(gt,{}),n.jsx(yt,{})]})})}function vt(){const{login:e,error:t,clearError:r,isLoading:a,rateLimited:o,lockoutTimeRemaining:l,getRemainingAttempts:i,isSupabaseAuth:s}=Fe(),[c,u]=d.useState(""),[f,p]=d.useState(""),[m,h]=d.useState(0),g=s();d.useEffect(()=>{if(o&&l>0){h(l);const e=setInterval(()=>{h(t=>t<=1?(clearInterval(e),window.location.reload(),0):t-1)},1e3);return()=>clearInterval(e)}},[o,l]);const y=i(),b=y<=2&&y>0;return n.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center p-4",children:n.jsxs("div",{className:"w-full max-w-md",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("img",{src:"/tell-logo.svg",alt:"Tell Productions Logo",className:"h-10 mx-auto mb-4",role:"img"}),n.jsx("h1",{className:"text-xl font-bold text-white mb-2",children:"Internal Quote Tool"}),n.jsx("p",{className:"text-gray-500 text-sm",children:"Secure Access"})]}),n.jsxs("div",{className:"bg-dark-card border border-dark-border rounded-xl p-6 shadow-2xl",children:[n.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),g){if(!c||!f)return;await e(c,f)}else{if(!f)return;await e(f)}},className:"space-y-5",noValidate:!0,children:[g&&n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"label",children:"Email Address"}),n.jsx("input",{id:"email",name:"email",type:"email",value:c,onChange:e=>{u(e.target.value),t&&r()},placeholder:"your.email@tellproductions.com",className:"input",autoFocus:!0,autoComplete:"email",disabled:o,required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"password",className:"label",children:g?"Password":"Access Password"}),n.jsx("input",{id:"password",name:"password",type:"password",value:f,onChange:e=>{p(e.target.value),t&&r()},placeholder:g?"Enter your password":"Enter access password",className:g?"input":"input text-center text-lg tracking-widest",autoFocus:!g,autoComplete:"current-password",disabled:o,"aria-invalid":t?"true":"false","aria-describedby":t?"password-error":void 0,required:!0})]}),b&&!o&&n.jsxs("div",{className:"flex items-center gap-2 text-yellow-400 text-sm bg-yellow-500/10 border border-yellow-500/20 rounded-lg px-3 py-2",children:[n.jsx("svg",{className:"w-4 h-4 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),n.jsxs("span",{children:[y," attempt",1!==y?"s":""," remaining"]})]}),o&&m>0&&n.jsxs("div",{className:"flex items-center gap-2 text-red-400 text-sm bg-red-500/10 border border-red-500/20 rounded-lg px-3 py-2",children:[n.jsx("svg",{className:"w-4 h-4 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold",children:"Account temporarily locked"}),n.jsxs("div",{className:"text-xs",children:["Unlock in ",(v=m,`${Math.floor(v/60)}:${(v%60).toString().padStart(2,"0")}`)]})]})]}),t&&!o&&n.jsxs("div",{id:"password-error",role:"alert",className:"flex items-center gap-2 text-red-400 text-sm bg-red-500/10 border border-red-500/20 rounded-lg px-3 py-2",children:[n.jsx("svg",{className:"w-4 h-4 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),n.jsx("span",{children:t})]}),n.jsx("button",{type:"submit",disabled:a||o||g&&!c||!f,className:"btn-primary w-full py-3 text-base disabled:opacity-50 disabled:cursor-not-allowed","aria-busy":a,children:a?n.jsxs("span",{className:"flex items-center justify-center gap-2",children:[n.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n.jsx("span",{children:"Signing in..."}),n.jsx("span",{className:"sr-only",children:"Please wait"})]}):o?"Account Locked":"Sign In"}),g&&n.jsx("div",{className:"text-center",children:n.jsx("button",{type:"button",onClick:()=>{alert("Password reset feature coming soon. Contact admin for assistance.")},className:"text-sm text-brand-teal hover:text-brand-teal-light transition-colors",children:"Forgot password?"})})]}),n.jsx("div",{className:"mt-6 pt-6 border-t border-dark-border",children:n.jsxs("div",{className:"flex items-start gap-2 text-xs text-gray-500",children:[n.jsx("svg",{className:"w-4 h-4 mt-0.5 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-gray-400 mb-1",children:"Security Features"}),n.jsxs("ul",{className:"space-y-0.5",children:[n.jsx("li",{children:" Session expires after 24 hours"}),n.jsx("li",{children:" 5 login attempts before lockout"}),n.jsx("li",{children:" 15-minute lockout period"}),g&&n.jsx("li",{children:" Encrypted authentication tokens"})]})]})]})})]}),n.jsx("p",{className:"text-center text-gray-600 text-xs mt-6",children:"Authorized personnel only  All activity is logged"})]})});var v}function xt({size:e="md",text:t="Loading..."}){return n.jsxs("div",{className:"flex flex-col items-center justify-center p-8",role:"status","aria-live":"polite",children:[n.jsxs("svg",{className:`${{sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12",xl:"w-16 h-16"}[e]} animate-spin text-accent-primary`,fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t&&n.jsx("p",{className:"mt-3 text-sm text-gray-400",children:t}),n.jsx("span",{className:"sr-only",children:t})]})}const wt="tell_opportunities",kt={GCC:["Saudi Arabia","UAE","Qatar","Kuwait","Bahrain","Oman"],"Central Asia":["Kazakhstan","Uzbekistan","Turkmenistan","Tajikistan","Kyrgyzstan","Afghanistan"],SEA:["Malaysia","Singapore","Indonesia","Thailand","Vietnam","Philippines","Myanmar","Cambodia","Laos","Brunei"]},St=[...kt.GCC,...kt["Central Asia"],...kt.SEA],jt=e=>kt.GCC.includes(e)?"GCC":kt["Central Asia"].includes(e)?"Central Asia":kt.SEA.includes(e)?"SEA":"Other";function Ct(){try{const e=localStorage.getItem(wt);return e?JSON.parse(e):[]}catch(e){return[]}}function Nt(e){try{localStorage.setItem(wt,JSON.stringify(e))}catch(t){}}function Et(){return`${Date.now()}-${Math.random().toString(36).substring(2,11)}`}const Dt=u(L((e,t)=>({opportunities:Ct(),loading:!1,initialize:async()=>{if(Q()){e({loading:!0});try{const{data:t,error:n}=await $.from("opportunities").select("*").order("created_at",{ascending:!1});if(n)throw n;const r=(t||[]).map(e=>({id:e.id,title:e.title,clientId:e.client_id,client:e.client||{},region:e.region,country:e.country,status:e.status||"active",value:e.value,currency:e.currency||"USD",probability:e.probability||50,source:e.source||"",competitors:e.competitors||[],contacts:e.contacts||[],accountOwnerId:e.account_owner_id||null,brief:e.brief||"",notes:e.notes||"",nextAction:e.next_action||"",nextActionDate:e.next_action_date,expectedCloseDate:e.expected_close_date,convertedToQuoteId:e.converted_to_quote_id,createdAt:e.created_at,updatedAt:e.updated_at}));Nt(r),e({opportunities:r,loading:!1})}catch(t){e({loading:!1})}}else e({loading:!1})},addOpportunity:async t=>{const n={id:Et(),title:t.title||"",clientId:t.clientId||null,client:t.client||{},region:t.region||jt(t.country),country:t.country||"",status:t.status||"active",value:t.value||0,currency:t.currency||"USD",probability:t.probability||50,source:t.source||"",competitors:t.competitors||[],contacts:t.contacts||[],accountOwnerId:t.accountOwnerId||null,brief:t.brief||"",notes:t.notes||"",nextAction:t.nextAction||"",nextActionDate:t.nextActionDate||null,expectedCloseDate:t.expectedCloseDate||null,convertedToQuoteId:null,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};if(Q())try{const{data:e,error:t}=await $.from("opportunities").insert({title:n.title,client_id:n.clientId,client:n.client,region:n.region,country:n.country,status:n.status,value:n.value,currency:n.currency,probability:n.probability,source:n.source,competitors:n.competitors,contacts:n.contacts,account_owner_id:n.accountOwnerId,brief:n.brief,notes:n.notes,next_action:n.nextAction,next_action_date:n.nextActionDate,expected_close_date:n.expectedCloseDate}).select().single();if(t)throw t;n.id=e.id}catch(r){}return e(e=>{const t=[n,...e.opportunities];return Nt(t),{opportunities:t}}),n},updateOpportunity:async(t,n)=>{if(n.country&&!n.region&&(n.region=jt(n.country)),e(e=>{const r=e.opportunities.map(e=>e.id===t?{...e,...n,updatedAt:(new Date).toISOString()}:e);return Nt(r),{opportunities:r}}),Q())try{const e={};void 0!==n.title&&(e.title=n.title),void 0!==n.clientId&&(e.client_id=n.clientId),void 0!==n.client&&(e.client=n.client),void 0!==n.region&&(e.region=n.region),void 0!==n.country&&(e.country=n.country),void 0!==n.status&&(e.status=n.status),void 0!==n.value&&(e.value=n.value),void 0!==n.currency&&(e.currency=n.currency),void 0!==n.probability&&(e.probability=n.probability),void 0!==n.source&&(e.source=n.source),void 0!==n.competitors&&(e.competitors=n.competitors),void 0!==n.contacts&&(e.contacts=n.contacts),void 0!==n.accountOwnerId&&(e.account_owner_id=n.accountOwnerId),void 0!==n.brief&&(e.brief=n.brief),void 0!==n.notes&&(e.notes=n.notes),void 0!==n.nextAction&&(e.next_action=n.nextAction),void 0!==n.nextActionDate&&(e.next_action_date=n.nextActionDate),void 0!==n.expectedCloseDate&&(e.expected_close_date=n.expectedCloseDate),void 0!==n.convertedToQuoteId&&(e.converted_to_quote_id=n.convertedToQuoteId),Object.keys(e).length>0&&await $.from("opportunities").update(e).eq("id",t)}catch(r){}},deleteOpportunity:async t=>{if(e(e=>{const n=e.opportunities.filter(e=>e.id!==t);return Nt(n),{opportunities:n}}),Q())try{await $.from("opportunities").delete().eq("id",t)}catch(n){}},getOpportunity:e=>t().opportunities.find(t=>t.id===e),getClientOpportunities:e=>t().opportunities.filter(t=>t.clientId===e),getOpportunitiesByCountry:e=>t().opportunities.filter(t=>t.country===e),getOpportunitiesByRegion:e=>t().opportunities.filter(t=>t.region===e),getOpportunitiesGroupedByCountry:()=>{const{opportunities:e}=t(),n={};return St.forEach(e=>{n[e]=[]}),n.Other=[],e.forEach(e=>{const t=e.country||"Other";n[t]?n[t].push(e):n.Other.push(e)}),n},updateStatus:async(e,n)=>{await t().updateOpportunity(e,{status:n})},addContact:(e,n)=>{const r=t().getOpportunity(e);if(!r)return;const a={id:Et(),name:n.name||"",role:n.role||"",email:n.email||"",phone:n.phone||"",isPrimary:n.isPrimary||!1};let o=[...r.contacts||[]];a.isPrimary&&(o=o.map(e=>({...e,isPrimary:!1}))),o.push(a),t().updateOpportunity(e,{contacts:o})},updateContact:(e,n,r)=>{const a=t().getOpportunity(e);if(!a)return;let o=[...a.contacts||[]];r.isPrimary&&(o=o.map(e=>({...e,isPrimary:!1}))),o=o.map(e=>e.id===n?{...e,...r}:e),t().updateOpportunity(e,{contacts:o})},deleteContact:(e,n)=>{const r=t().getOpportunity(e);if(!r)return;const a=(r.contacts||[]).filter(e=>e.id!==n);t().updateOpportunity(e,{contacts:a})},getPipelineStats:()=>{const{opportunities:e}=t(),n=e.filter(e=>"active"===e.status),r=n.reduce((e,t)=>e+(t.value||0),0),a=n.reduce((e,t)=>{const n=(t.probability||0)/100;return e+(t.value||0)*n},0),o={};n.forEach(e=>{const t=e.country||"Other";o[t]||(o[t]={count:0,value:0}),o[t].count++,o[t].value+=e.value||0});const l={};return n.forEach(e=>{const t=e.region||"Other";l[t]||(l[t]={count:0,value:0}),l[t].count++,l[t].value+=e.value||0}),{totalCount:n.length,totalValue:r,weightedValue:a,byCountry:o,byRegion:l,wonCount:e.filter(e=>"won"===e.status).length,lostCount:e.filter(e=>"lost"===e.status).length}},getUpcomingActions:()=>{const{opportunities:e}=t(),n=new Date,r=new Date(n.getTime()+6048e5);return e.filter(e=>{if("active"!==e.status||!e.nextActionDate)return!1;const t=new Date(e.nextActionDate);return t>=n&&t<=r}).sort((e,t)=>new Date(e.nextActionDate)-new Date(t.nextActionDate))}})));const Lt=d.lazy(()=>D(()=>import("./ClientsPage-Bxl0VwyR.js"),__vite__mapDeps([0,1,2,3,4,5]))),Tt=d.lazy(()=>D(()=>import("./ClientDetailPage-D_fLlZJt.js"),__vite__mapDeps([6,1,2,3,4,5]))),At=d.lazy(()=>D(()=>import("./OpportunitiesPage-BcgiAsE1.js"),__vite__mapDeps([7,1,2,3,8,5]))),_t=d.lazy(()=>D(()=>import("./OpportunityDetailPage--vjrMhPr.js"),__vite__mapDeps([9,1,2,3,5]))),Pt=d.lazy(()=>D(()=>import("./RateCardPage-B5tWCivS.js"),__vite__mapDeps([10,1,2,3,5]))),zt=d.lazy(()=>D(()=>import("./DashboardPage-BsYd2v7v.js"),__vite__mapDeps([11,1,2,3,5]))),It=d.lazy(()=>D(()=>import("./QuotesPage-B-heRWCB.js"),__vite__mapDeps([12,1,2,3,5]))),Ot=d.lazy(()=>D(()=>import("./SettingsPage-BNSoYx-q.js"),__vite__mapDeps([13,1,2,3,5]))),Ft=d.lazy(()=>D(()=>import("./FSPage-CKi6ilQp.js"),__vite__mapDeps([14,1,2,3,8,5])));function Mt(){const{isAuthenticated:e}=Fe(),t=be(e=>e.initialize),r=ue(e=>e.initialize),a=ne(e=>e.initialize),o=rt(e=>e.initialize),l=Dt(e=>e.initialize),i=be(e=>e.resetQuote),s=be(e=>e.loadQuoteData),[c,u]=d.useState("dashboard"),[f,p]=d.useState(null),[m,h]=d.useState(null),[g,y]=d.useState(!1),b=be(e=>e.quote),{confirmNavigateAway:v,markAsSaved:x}=function(e,t){const n=d.useRef(null),r=d.useCallback(()=>{if(!e)return!1;if(!n.current)return!1;const r={...t},a={...n.current};return delete r.updatedAt,delete a.updatedAt,JSON.stringify(r)!==JSON.stringify(a)},[t,e]),a=d.useCallback(()=>{e&&t&&(n.current={...t})},[t,e]),o=d.useCallback(e=>{r()?window.confirm("You have unsaved changes. Are you sure you want to leave?")&&(n.current=null,e()):e()},[r]);return d.useEffect(()=>{const e=e=>{if(r())return e.preventDefault(),e.returnValue="",""};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[r]),{hasUnsavedChanges:r,confirmNavigateAway:o,markAsSaved:a}}("editor"===c,b),w=d.useCallback(e=>{p(e),u("client-detail")},[]),k=d.useCallback((e=null)=>{if(i(),e){const t=ue.getState().getClient(e);t&&be.getState().setClientDetails({company:t.company,contact:t.contact,email:t.email,phone:t.phone})}u("editor")},[i]),S=d.useCallback(e=>{e&&e.sections&&s(e),u("editor")},[s]),j=d.useCallback(()=>{v(()=>u("clients"))},[v]),C=d.useCallback(()=>{v(()=>u("rate-card"))},[v]),N=d.useCallback(()=>{v(()=>u("dashboard"))},[v]),E=d.useCallback(()=>{v(()=>u("settings"))},[v]),D=d.useCallback(()=>{v(()=>u("quotes"))},[v]),L=d.useCallback(()=>{v(()=>u("fs"))},[v]),T=d.useCallback(()=>{v(()=>u("opportunities"))},[v]),A=d.useCallback(e=>{h(e),u("opportunity-detail")},[]),_=d.useCallback(e=>{i(),e.client&&be.getState().setClientDetails({company:e.client.company}),e.project&&be.getState().setProject(e.project),u("editor")},[i]),P=d.useCallback(()=>{y(e=>!e)},[]);if(d.useEffect(()=>{"editor"===c&&b.quoteNumber&&x()},[c,b.quoteNumber,x]),d.useEffect(()=>{e&&(t(),r(),a(),o(),l())},[e,t,r,a,o,l]),!e)return n.jsx(vt,{});return n.jsxs("div",{className:"min-h-screen bg-dark-bg flex flex-col",children:[n.jsx(Ve,{view:c,onGoToClients:j,onGoToRateCard:C,onGoToDashboard:N,onGoToQuotes:D,onGoToSettings:E,onGoToFS:L,onGoToOpportunities:T,selectedClientId:f}),(()=>{switch(c){case"clients":return n.jsx(d.Suspense,{fallback:n.jsx(xt,{text:"Loading clients..."}),children:n.jsx("main",{id:"main-content",tabIndex:"-1",children:n.jsx(Lt,{onSelectClient:w})})});case"client-detail":return n.jsx(d.Suspense,{fallback:n.jsx(xt,{text:"Loading client details..."}),children:n.jsx("main",{id:"main-content",tabIndex:"-1",children:n.jsx(Tt,{clientId:f,onBackToDashboard:N,onEditQuote:S,onNewQuote:k,onSelectOpportunity:A})})});case"opportunities":return n.jsx(d.Suspense,{fallback:n.jsx(xt,{text:"Loading opportunities..."}),children:n.jsx("main",{id:"main-content",tabIndex:"-1",children:n.jsx(At,{onSelectOpportunity:A})})});case"opportunity-detail":return n.jsx(d.Suspense,{fallback:n.jsx(xt,{text:"Loading opportunity..."}),children:n.jsx("main",{id:"main-content",tabIndex:"-1",children:n.jsx(_t,{opportunityId:m,onBack:T,onConvertToQuote:_})})});case"rate-card":return n.jsx(d.Suspense,{fallback:n.jsx(xt,{text:"Loading rate card..."}),children:n.jsx("main",{id:"main-content",tabIndex:"-1",children:n.jsx(Pt,{})})});case"dashboard":return n.jsx(d.Suspense,{fallback:n.jsx(xt,{text:"Loading dashboard..."}),children:n.jsx("main",{id:"main-content",tabIndex:"-1",children:n.jsx(zt,{onViewQuote:S,onNewQuote:k,onGoToOpportunities:T})})});case"quotes":return n.jsx(d.Suspense,{fallback:n.jsx(xt,{text:"Loading quotes..."}),children:n.jsx("main",{id:"main-content",tabIndex:"-1",children:n.jsx(It,{onEditQuote:S,onNewQuote:k})})});case"settings":return n.jsx(d.Suspense,{fallback:n.jsx(xt,{text:"Loading settings..."}),children:n.jsx("main",{id:"main-content",tabIndex:"-1",children:n.jsx(Ot,{})})});case"fs":return n.jsx(d.Suspense,{fallback:n.jsx(xt,{text:"Loading..."}),children:n.jsx("main",{id:"main-content",tabIndex:"-1",children:n.jsx(Ft,{onExit:N})})});default:return n.jsxs("main",{id:"main-content",className:"flex-1 flex flex-col lg:flex-row max-w-[1920px] mx-auto w-full",tabIndex:"-1",children:[n.jsx("button",{onClick:P,className:"lg:hidden fixed bottom-4 right-4 z-50 btn-primary rounded-full p-4 shadow-xl","aria-label":g?"Show editor":"Show preview",children:g?n.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}):n.jsxs("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),n.jsx("div",{className:(g?"hidden lg:flex":"flex")+" flex-1",children:n.jsx(pt,{onGoToSettings:E})}),n.jsx("div",{className:(g?"flex":"hidden lg:flex")+" w-full lg:w-[320px] lg:min-w-[320px]",children:n.jsx(bt,{})})]})}})()]})}class Rt extends f.Component{constructor(e){super(e),t(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()}),this.state={hasError:!1,error:null,errorInfo:null,copied:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?n.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center p-4",children:n.jsxs("div",{className:"max-w-2xl w-full bg-dark-card border border-red-500/30 rounded-xl p-8 shadow-2xl",children:[n.jsx("div",{className:"flex items-center justify-center mb-6",children:n.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/20 flex items-center justify-center",children:n.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-100 text-center mb-2",children:"Something went wrong"}),n.jsx("p",{className:"text-gray-400 text-center mb-6",children:"The application encountered an unexpected error. Your work has been auto-saved."}),n.jsxs("details",{className:"mb-6 bg-dark-bg rounded-lg border border-dark-border",children:[n.jsx("summary",{className:"px-4 py-3 cursor-pointer text-sm text-gray-400 hover:text-gray-300 select-none",children:"Show error details"}),n.jsx("div",{className:"px-4 pb-4 pt-2",children:n.jsxs("div",{className:"font-mono text-xs text-red-400 bg-red-500/5 p-4 rounded border border-red-500/20 overflow-auto max-h-64",children:[this.state.error&&this.state.error.toString(),n.jsx("br",{}),n.jsx("br",{}),this.state.errorInfo&&this.state.errorInfo.componentStack]})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n.jsxs("button",{onClick:this.handleReset,className:"flex-1 btn-primary py-3 flex items-center justify-center gap-2",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reload Application"]}),n.jsxs("button",{onClick:()=>{const e=`Error: ${this.state.error}\n\nStack: ${this.state.errorInfo?.componentStack}`;navigator.clipboard.writeText(e),this.setState({copied:!0}),setTimeout(()=>this.setState({copied:!1}),2e3)},className:"flex-1 btn-ghost py-3 flex items-center justify-center gap-2 "+(this.state.copied?"text-green-400":""),children:[this.state.copied?n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),this.state.copied?"Copied!":"Copy Error Details"]})]}),n.jsx("p",{className:"text-xs text-gray-600 text-center mt-6",children:"If this problem persists, please contact support with the error details."})]})}):this.props.children}}N.createRoot(document.getElementById("root")).render(n.jsx(d.StrictMode,{children:n.jsx(Rt,{children:n.jsx(Be,{children:n.jsx(Mt,{})})})}));export{St as A,ht as C,kt as R,be as a,rt as b,ct as c,R as d,Dt as e,q as f,jt as g,ne as h,qe as i,ue as u};
