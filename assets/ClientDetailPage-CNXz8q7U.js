import{j as e}from"./pdf-vendor-CqWdlgKa.js";import{r as t}from"./zustand-vendor-BohoUguQ.js";import{A as r,c as a,g as n,u as s,a as i,b as o,h as l,d as c,f as d}from"./index-CY4pCm6P.js";import{v as u,s as m}from"./validation-DQPS0e0-.js";import"./react-vendor-DRPWudcR.js";import"./supabase-vendor-DWEVVlJw.js";const h=6048e5,x=Symbol.for("constructDateFrom");function p(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&x in e?e[x](t):e instanceof Date?new e.constructor(t):new Date(t)}function g(e,t){return p(t||e,e)}let f={};function b(){return f}function v(e,t){const r=b(),a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,n=g(e,t?.in),s=n.getDay(),i=(s<a?7:0)+s-a;return n.setDate(n.getDate()-i),n.setHours(0,0,0,0),n}function y(e,t){return v(e,{...t,weekStartsOn:1})}function j(e,t){const r=g(e,t?.in),a=r.getFullYear(),n=p(r,0);n.setFullYear(a+1,0,4),n.setHours(0,0,0,0);const s=y(n),i=p(r,0);i.setFullYear(a,0,4),i.setHours(0,0,0,0);const o=y(i);return r.getTime()>=s.getTime()?a+1:r.getTime()>=o.getTime()?a:a-1}function w(e){const t=g(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function N(e,t){const r=g(e,t?.in);return r.setHours(0,0,0,0),r}function k(e,t,r){const[a,n]=function(e,...t){const r=p.bind(null,t.find(e=>"object"==typeof e));return t.map(r)}(0,e,t),s=N(a),i=N(n),o=+s-w(s),l=+i-w(i);return Math.round((o-l)/864e5)}function M(e){return!(!((t=e)instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t))&&"number"!=typeof e||isNaN(+g(e)));var t}const C={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function S(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const D={date:S({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:S({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:S({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},L={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function P(e){return(t,r)=>{let a;if("formatting"===(r?.context?String(r.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,n=r?.width?String(r.width):t;a=e.formattingValues[n]||e.formattingValues[t]}else{const t=e.defaultWidth,n=r?.width?String(r.width):e.defaultWidth;a=e.values[n]||e.values[t]}return a[e.argumentCallback?e.argumentCallback(t):t]}}function W(e){return(t,r={})=>{const a=r.width,n=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],s=t.match(n);if(!s)return null;const i=s[0],o=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r;return}(o,e=>e.test(i)):function(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r;return}(o,e=>e.test(i));let c;c=e.valueCallback?e.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;return{value:c,rest:t.slice(i.length)}}}var A;const z={code:"en-US",formatDistance:(e,t,r)=>{let a;const n=C[e];return a="string"==typeof n?n:1===t?n.one:n.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a},formatLong:D,formatRelative:(e,t,r,a)=>L[e],localize:{ordinalNumber:(e,t)=>{const r=Number(e),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:P({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:P({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:P({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:P({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:P({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(A={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const r=e.match(A.matchPattern);if(!r)return null;const a=r[0],n=e.match(A.parsePattern);if(!n)return null;let s=A.valueCallback?A.valueCallback(n[0]):n[0];return s=t.valueCallback?t.valueCallback(s):s,{value:s,rest:e.slice(a.length)}}),era:W({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:W({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:W({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:W({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:W({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function T(e,t){const r=g(e,t?.in),a=k(r,function(e,t){const r=g(e,t?.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}(r));return a+1}function I(e,t){const r=g(e,t?.in),a=+y(r)-+function(e,t){const r=j(e,t),a=p(e,0);return a.setFullYear(r,0,4),a.setHours(0,0,0,0),y(a)}(r);return Math.round(a/h)+1}function q(e,t){const r=g(e,t?.in),a=r.getFullYear(),n=b(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=p(t?.in||e,0);i.setFullYear(a+1,0,s),i.setHours(0,0,0,0);const o=v(i,t),l=p(t?.in||e,0);l.setFullYear(a,0,s),l.setHours(0,0,0,0);const c=v(l,t);return+r>=+o?a+1:+r>=+c?a:a-1}function H(e,t){const r=g(e,t?.in),a=+v(r,t)-+function(e,t){const r=b(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,n=q(e,t),s=p(t?.in||e,0);return s.setFullYear(n,0,a),s.setHours(0,0,0,0),v(s,t)}(r,t);return Math.round(a/h)+1}function E(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const U={y(e,t){const r=e.getFullYear(),a=r>0?r:1-r;return E("yy"===t?a%100:a,t.length)},M(e,t){const r=e.getMonth();return"M"===t?String(r+1):E(r+1,2)},d:(e,t)=>E(e.getDate(),t.length),a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:(e,t)=>E(e.getHours()%12||12,t.length),H:(e,t)=>E(e.getHours(),t.length),m:(e,t)=>E(e.getMinutes(),t.length),s:(e,t)=>E(e.getSeconds(),t.length),S(e,t){const r=t.length,a=e.getMilliseconds();return E(Math.trunc(a*Math.pow(10,r-3)),t.length)}},B="midnight",F="noon",O="morning",Y="afternoon",Q="evening",$="night",V={G:function(e,t,r){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});default:return r.era(a,{width:"wide"})}},y:function(e,t,r){if("yo"===t){const t=e.getFullYear(),a=t>0?t:1-t;return r.ordinalNumber(a,{unit:"year"})}return U.y(e,t)},Y:function(e,t,r,a){const n=q(e,a),s=n>0?n:1-n;if("YY"===t){return E(s%100,2)}return"Yo"===t?r.ordinalNumber(s,{unit:"year"}):E(s,t.length)},R:function(e,t){return E(j(e),t.length)},u:function(e,t){return E(e.getFullYear(),t.length)},Q:function(e,t,r){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return E(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,r){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return E(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,r){const a=e.getMonth();switch(t){case"M":case"MM":return U.M(e,t);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,r){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return E(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,r,a){const n=H(e,a);return"wo"===t?r.ordinalNumber(n,{unit:"week"}):E(n,t.length)},I:function(e,t,r){const a=I(e);return"Io"===t?r.ordinalNumber(a,{unit:"week"}):E(a,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getDate(),{unit:"date"}):U.d(e,t)},D:function(e,t,r){const a=T(e);return"Do"===t?r.ordinalNumber(a,{unit:"dayOfYear"}):E(a,t.length)},E:function(e,t,r){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,r,a){const n=e.getDay(),s=(n-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return E(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},c:function(e,t,r,a){const n=e.getDay(),s=(n-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return E(s,t.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(n,{width:"narrow",context:"standalone"});case"cccccc":return r.day(n,{width:"short",context:"standalone"});default:return r.day(n,{width:"wide",context:"standalone"})}},i:function(e,t,r){const a=e.getDay(),n=0===a?7:a;switch(t){case"i":return String(n);case"ii":return E(n,t.length);case"io":return r.ordinalNumber(n,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const a=e.getHours();let n;switch(n=12===a?F:0===a?B:a/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,r){const a=e.getHours();let n;switch(n=a>=17?Q:a>=12?Y:a>=4?O:$,t){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),r.ordinalNumber(t,{unit:"hour"})}return U.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getHours(),{unit:"hour"}):U.H(e,t)},K:function(e,t,r){const a=e.getHours()%12;return"Ko"===t?r.ordinalNumber(a,{unit:"hour"}):E(a,t.length)},k:function(e,t,r){let a=e.getHours();return 0===a&&(a=24),"ko"===t?r.ordinalNumber(a,{unit:"hour"}):E(a,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):U.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getSeconds(),{unit:"second"}):U.s(e,t)},S:function(e,t){return U.S(e,t)},X:function(e,t,r){const a=e.getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return R(a);case"XXXX":case"XX":return X(a);default:return X(a,":")}},x:function(e,t,r){const a=e.getTimezoneOffset();switch(t){case"x":return R(a);case"xxxx":case"xx":return X(a);default:return X(a,":")}},O:function(e,t,r){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+G(a,":");default:return"GMT"+X(a,":")}},z:function(e,t,r){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+G(a,":");default:return"GMT"+X(a,":")}},t:function(e,t,r){return E(Math.trunc(+e/1e3),t.length)},T:function(e,t,r){return E(+e,t.length)}};function G(e,t=""){const r=e>0?"-":"+",a=Math.abs(e),n=Math.trunc(a/60),s=a%60;return 0===s?r+String(n):r+String(n)+t+E(s,2)}function R(e,t){if(e%60==0){return(e>0?"-":"+")+E(Math.abs(e)/60,2)}return X(e,t)}function X(e,t=""){const r=e>0?"-":"+",a=Math.abs(e);return r+E(Math.trunc(a/60),2)+t+E(a%60,2)}const _=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},J=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},K={p:J,P:(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],a=r[1],n=r[2];if(!n)return _(e,t);let s;switch(a){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",_(a,t)).replace("{{time}}",J(n,t))}},Z=/^D+$/,ee=/^Y+$/,te=["D","DD","YY","YYYY"];const re=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ae=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ne=/^'([^]*?)'?$/,se=/''/g,ie=/[a-zA-Z]/;function oe(e,t,r){const a=b(),n=a.locale??z,s=a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,i=a.weekStartsOn??a.locale?.options?.weekStartsOn??0,o=g(e,r?.in);if(!M(o))throw new RangeError("Invalid time value");let l=t.match(ae).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,K[t])(e,n.formatLong)}return e}).join("").match(re).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:le(e)};if(V[t])return{isToken:!0,value:e};if(t.match(ie))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});n.localize.preprocessor&&(l=n.localize.preprocessor(o,l));const c={firstWeekContainsDate:s,weekStartsOn:i,locale:n};return l.map(r=>{if(!r.isToken)return r.value;const a=r.value;(function(e){return ee.test(e)}(a)||function(e){return Z.test(e)}(a))&&function(e,t,r){const a=function(e,t,r){const a="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,r);if(te.includes(e))throw new RangeError(a)}(a,t,String(e));return(0,V[a[0]])(o,a,n.localize,c)}).join("")}function le(e){const t=e.match(ne);return t?t[1].replace(se,"'"):e}const ce={phone:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z",mail:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z",users:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z","file-text":"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z","check-square":"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4",send:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8",trophy:"M5 3h14M5 3a2 2 0 00-2 2v1c0 2.5 2 4 2 4s0 1.5-2 4v1a2 2 0 002 2h14a2 2 0 002-2v-1c-2-2.5-2-4-2-4s2-1.5 2-4V5a2 2 0 00-2-2M5 3h14M12 17v4m-4 0h8","x-circle":"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z",clock:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z","more-horizontal":"M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"};function de({type:t,className:a=""}){const n=r[t]||r.other,s=ce[n.icon]||ce["more-horizontal"];return e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${n.bgColor} ${a}`,children:e.jsx("svg",{className:`w-4 h-4 ${n.color}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s})})})}function ue(e){const t=new Date(e),r=new Date,a=Math.floor((r-t)/864e5);return 0===a?`Today at ${oe(t,"h:mm a")}`:1===a?`Yesterday at ${oe(t,"h:mm a")}`:a<7?oe(t,"EEEE")+` at ${oe(t,"h:mm a")}`:oe(t,"MMM d, yyyy")}function me({activities:a,onEdit:n,onDelete:s,onCompleteFollowUp:i,showClient:o=!1,emptyMessage:l="No activities yet",maxItems:c=50}){const[d,u]=t.useState(null);if(!a||0===a.length)return e.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-dark-border/50 rounded-xl bg-dark-bg/30",children:[e.jsx("svg",{className:"w-10 h-10 mx-auto mb-3 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-gray-500 text-sm",children:l})]});const m=a.slice(0,c);return e.jsxs("div",{className:"space-y-1",children:[m.map((t,a)=>{const n=r[t.type]||r.other,o=d===t.id,l=t.followUpDate&&!t.followUpCompleted&&new Date(t.followUpDate)<new Date;return e.jsxs("div",{className:"relative pl-10 pb-4 "+(a!==m.length-1?"border-l-2 border-dark-border ml-4":"ml-4"),children:[e.jsx("div",{className:"absolute left-0 -translate-x-1/2 top-0",children:e.jsx(de,{type:t.type})}),e.jsxs("div",{className:"card hover:border-white/10 transition-colors cursor-pointer "+(l?"border-red-500/30 bg-red-500/5":""),onClick:()=>u(o?null:t.id),children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded ${n.bgColor} ${n.color}`,children:n.label}),e.jsx("span",{className:"text-xs text-gray-500",children:ue(t.activityDate)}),t.followUpDate&&!t.followUpCompleted&&e.jsxs("span",{className:"text-xs px-2 py-0.5 rounded "+(l?"bg-red-500/20 text-red-400":"bg-orange-500/20 text-orange-400"),children:["Follow-up: ",oe(new Date(t.followUpDate),"MMM d")]}),t.followUpCompleted&&e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-green-500/20 text-green-400",children:"Completed"})]}),e.jsx("h4",{className:"text-sm font-medium text-gray-200 mt-1",children:t.title}),t.description&&!o&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-1",children:t.description})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[t.followUpDate&&!t.followUpCompleted&&i&&e.jsx("button",{onClick:e=>{e.stopPropagation(),i(t.id)},className:"p-1.5 text-gray-500 hover:text-green-400 hover:bg-green-400/10 rounded transition-colors",title:"Mark follow-up complete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),s&&e.jsx("button",{onClick:e=>{e.stopPropagation(),window.confirm("Delete this activity?")&&s(t.id)},className:"p-1.5 text-gray-500 hover:text-red-400 hover:bg-red-400/10 rounded transition-colors",title:"Delete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),o&&t.description&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-dark-border",children:[e.jsx("p",{className:"text-sm text-gray-400 whitespace-pre-wrap",children:t.description}),t.loggedByName&&e.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:["Logged by ",t.loggedByName]})]})]})]},t.id)}),a.length>c&&e.jsx("div",{className:"text-center pt-2",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Showing ",c," of ",a.length," activities"]})})]})}function he({isOpen:s,onClose:i,clientId:o,contactId:l=null,opportunityId:c=null,quoteId:d=null,contacts:u=[]}){const{addActivity:m}=a(),{user:h}=n(),[x,p]=t.useState({type:"note",title:"",description:"",contactId:l||"",activityDate:(new Date).toISOString().slice(0,16),hasFollowUp:!1,followUpDate:""}),[g,f]=t.useState(!1);if(t.useEffect(()=>{s&&p({type:"note",title:"",description:"",contactId:l||"",activityDate:(new Date).toISOString().slice(0,16),hasFollowUp:!1,followUpDate:""})},[s,l]),t.useEffect(()=>{const e=e=>{"Escape"===e.key&&s&&i()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[s,i]),!s)return null;return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/75 backdrop-blur-md modal-backdrop p-4",children:e.jsxs("div",{className:"bg-dark-card border border-dark-border rounded-xl p-6 w-full max-w-lg shadow-2xl modal-content relative max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:i,className:"absolute top-4 right-4 p-1 text-gray-500 hover:text-white rounded-lg hover:bg-white/10 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-xl font-bold text-gray-100 mb-1",children:"Log Activity"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Record an interaction or note"}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),x.title.trim()){f(!0);try{await m({clientId:o,contactId:x.contactId||null,opportunityId:c,quoteId:d,type:x.type,title:x.title.trim(),description:x.description.trim()||null,activityDate:new Date(x.activityDate).toISOString(),followUpDate:x.hasFollowUp&&x.followUpDate?new Date(x.followUpDate).toISOString():null,loggedBy:h?.profile?.id,loggedByName:h?.profile?.name||h?.email}),i()}catch(t){}finally{f(!1)}}},className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Activity Type"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:["call","email","meeting","note","task"].map(t=>{const a=r[t];return e.jsx("button",{type:"button",onClick:()=>p({...x,type:t}),className:"p-3 rounded-lg border transition-all text-center "+(x.type===t?`${a.bgColor} ${a.color} border-current`:"border-dark-border text-gray-400 hover:border-gray-600"),children:e.jsx("span",{className:"text-xs font-medium",children:a.label})},t)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label label-required",children:"Title"}),e.jsx("input",{type:"text",required:!0,value:x.title,onChange:e=>p({...x,title:e.target.value}),className:"input w-full",placeholder:`${r[x.type].label} with client...`})]}),u.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Related Contact"}),e.jsxs("select",{value:x.contactId,onChange:e=>p({...x,contactId:e.target.value}),className:"input w-full",children:[e.jsx("option",{value:"",children:"-- General (no specific contact) --"}),u.map(t=>e.jsxs("option",{value:t.id,children:[t.name," ",t.role?`(${t.role})`:""]},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Date & Time"}),e.jsx("input",{type:"datetime-local",value:x.activityDate,onChange:e=>p({...x,activityDate:e.target.value}),className:"input w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Notes / Details"}),e.jsx("textarea",{value:x.description,onChange:e=>p({...x,description:e.target.value}),className:"input w-full min-h-[100px] resize-none",placeholder:(e=>{switch(e){case"call":return"e.g. Discussed project timeline...";case"email":return"e.g. Sent proposal follow-up...";case"meeting":return"e.g. Kick-off meeting at their office...";case"note":return"e.g. Important context about this client...";case"task":return"e.g. Prepare revised quote...";case"follow_up":return"e.g. Check in on proposal status...";default:return"Add details..."}})(x.type)})]}),e.jsxs("div",{className:"border-t border-dark-border pt-4",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x.hasFollowUp,onChange:e=>p({...x,hasFollowUp:e.target.checked}),className:"w-4 h-4 rounded border-gray-600 bg-dark-bg text-accent-primary focus:ring-accent-primary"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Set a follow-up reminder"})]}),x.hasFollowUp&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"label",children:"Follow-up Date"}),e.jsx("input",{type:"datetime-local",value:x.followUpDate,onChange:e=>p({...x,followUpDate:e.target.value}),className:"input w-full",min:(new Date).toISOString().slice(0,16)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"You'll see this in your follow-up list"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:i,className:"btn-ghost px-4 py-2",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g||!x.title.trim(),className:"btn-primary px-4 py-2",children:g?"Saving...":"Log Activity"})]})]})]})})}const xe={draft:"bg-amber-400/20 text-amber-400",sent:"bg-blue-400/20 text-blue-400",under_review:"bg-yellow-400/20 text-yellow-400",approved:"bg-emerald-500/20 text-emerald-500",won:"bg-green-500/20 text-green-500",rejected:"bg-red-500/20 text-red-500",expired:"bg-gray-600/20 text-gray-500",dead:"bg-red-500/20 text-red-500"};function pe({clientId:r,onBackToDashboard:n,onEditQuote:h,onNewQuote:x,onSelectOpportunity:p}){const{getClient:g,getClientQuotes:f,deleteQuote:b,updateQuoteStatus:v,deleteClient:y,updateClient:j,addContact:w,updateContact:N,deleteContact:k}=s(),{loadQuoteData:M}=i(),{settings:C}=o(),{getClientOpportunities:S,deleteOpportunity:D}=l(),{getClientActivities:L,deleteActivity:P,completeFollowUp:W}=a(),A=C.users||[],z=g(r),T=f(r),I=S(r),q=L(r),[H,E]=t.useState("overview"),[U,B]=t.useState(!1),[F,O]=t.useState({}),[Y,Q]=t.useState(!1),[$,V]=t.useState(null),[G,R]=t.useState({}),[X,_]=t.useState({}),[J,K]=t.useState(!1),[Z,ee]=t.useState({open:!1,quoteId:null,newStatus:null}),[te,re]=t.useState(""),[ae,ne]=t.useState("");if(t.useEffect(()=>{const e=e=>{"Escape"===e.key&&(Y?Q(!1):U&&B(!1))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[Y,U]),!z)return e.jsx("div",{className:"h-[calc(100vh-60px)] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-400",children:"Client not found"}),e.jsx("button",{onClick:n,className:"btn-ghost mt-4",children:"Back to Dashboard"})]})});const se=(e=null)=>{e?(V(e.id),R({...e})):(V(null),R({name:"",role:"",email:"",phone:"",linkedIn:"",notes:"",isPrimary:!1,accountHolderId:""})),Q(!0)};return e.jsxs("div",{className:"h-[calc(100vh-60px)] overflow-y-auto p-6 relative",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1",children:[U?e.jsxs("form",{onSubmit:e=>{e.preventDefault(),j(z.id,F),B(!1)},className:"flex gap-2 items-center flex-wrap",children:[e.jsx("input",{className:"input py-1 px-2 text-xl font-bold w-full md:w-auto",value:F.company,onChange:e=>O({...F,company:e.target.value})}),e.jsxs("select",{value:F.region,onChange:e=>O({...F,region:e.target.value}),className:"input py-1 px-2 text-sm w-32",children:[e.jsx("option",{value:"MALAYSIA",children:"Malaysia"}),e.jsx("option",{value:"SEA",children:"SEA"}),e.jsx("option",{value:"GULF",children:"Gulf"}),e.jsx("option",{value:"CENTRAL_ASIA",children:"Central Asia"})]}),e.jsxs("div",{className:"flex gap-1 ml-auto md:ml-0",children:[e.jsx("button",{type:"submit",className:"btn-primary py-1 px-3 text-xs",children:"Save"}),e.jsx("button",{type:"button",onClick:()=>B(!1),className:"btn-ghost py-1 px-3 text-xs",children:"Cancel"})]})]}):e.jsxs("div",{className:"flex items-center gap-3 group",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-100",children:z.company}),e.jsx("button",{onClick:()=>{O({company:z.company,website:z.website,location:z.location,region:z.region||"MALAYSIA",notes:z.notes,paymentTerms:z.paymentTerms||"net30",preferredCurrency:z.preferredCurrency||"USD",industry:z.industry||""}),B(!0)},className:"opacity-0 group-hover:opacity-100 p-1 text-gray-500 hover:text-white transition-opacity",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mt-1",children:[z.location&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsxs("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),z.location]}),z.website&&e.jsxs("a",{href:z.website.startsWith("http")?z.website:`https://${z.website}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 hover:text-accent-primary transition-colors",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),z.website.replace(/^https?:\/\//,"")]}),e.jsxs("span",{children:[T.length," Projects"]})]})]}),e.jsxs("button",{onClick:()=>x(r),className:"btn-primary text-sm flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Quote"]}),e.jsx("button",{onClick:()=>{window.confirm(`Delete ${z.company} and all its data? This cannot be undone.`)&&(y(z.id),n())},className:"p-2 text-gray-500 hover:text-red-400 hover:bg-red-400/10 rounded-lg transition-colors",title:"Delete Client",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),(z.industry||z.paymentTerms||z.preferredCurrency)&&e.jsxs("div",{className:"mb-8 grid grid-cols-2 md:grid-cols-4 gap-4",children:[z.industry&&e.jsxs("div",{className:"card bg-dark-bg/50",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Industry"}),e.jsx("p",{className:"text-sm text-gray-200",children:z.industry})]}),z.paymentTerms&&e.jsxs("div",{className:"card bg-dark-bg/50",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Payment Terms"}),e.jsx("p",{className:"text-sm text-gray-200",children:"immediate"===z.paymentTerms?"Immediate":"net7"===z.paymentTerms?"Net 7":"net14"===z.paymentTerms?"Net 14":"net30"===z.paymentTerms?"Net 30":"net45"===z.paymentTerms?"Net 45":"net60"===z.paymentTerms?"Net 60":"net90"===z.paymentTerms?"Net 90":z.paymentTerms})]}),z.preferredCurrency&&e.jsxs("div",{className:"card bg-dark-bg/50",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Preferred Currency"}),e.jsx("p",{className:"text-sm text-gray-200",children:z.preferredCurrency})]}),e.jsxs("div",{className:"card bg-dark-bg/50",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Region"}),e.jsx("p",{className:"text-sm text-gray-200",children:"MALAYSIA"===z.region?"Malaysia":"SEA"===z.region?"South East Asia":"GULF"===z.region?"Gulf":"CENTRAL_ASIA"===z.region?"Central Asia":z.region||"Not set"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-400 mb-3 uppercase tracking-wider",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:(z.tags||[]).map((t,r)=>e.jsxs("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-accent-primary/10 text-accent-primary border border-accent-primary/20 flex items-center gap-1",children:[t,e.jsx("button",{onClick:()=>{const e=z.tags.filter((e,t)=>t!==r);j(z.id,{tags:e})},className:"hover:text-white",children:"×"})]},r))}),e.jsx("div",{className:"flex gap-2 max-w-xs",children:e.jsx("input",{type:"text",placeholder:"Add tag...",className:"input-sm flex-1 bg-dark-card border-none",onKeyDown:e=>{if("Enter"===e.key&&e.target.value.trim()){const t=e.target.value.trim(),r=z.tags||[];r.includes(t)||j(z.id,{tags:[...r,t]}),e.target.value=""}}})})]}),e.jsx("div",{className:"border-b border-dark-border mb-6",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsx("button",{onClick:()=>E("overview"),className:"pb-3 text-sm font-medium transition-colors border-b-2 "+("overview"===H?"border-accent-primary text-white":"border-transparent text-gray-500 hover:text-gray-300"),children:"Quotes & Projects"}),e.jsxs("button",{onClick:()=>E("opportunities"),className:"pb-3 text-sm font-medium transition-colors border-b-2 "+("opportunities"===H?"border-accent-primary text-white":"border-transparent text-gray-500 hover:text-gray-300"),children:["Opportunities (",I.length,")"]}),e.jsxs("button",{onClick:()=>E("contacts"),className:"pb-3 text-sm font-medium transition-colors border-b-2 "+("contacts"===H?"border-accent-primary text-white":"border-transparent text-gray-500 hover:text-gray-300"),children:["Contacts (",z.contacts?.length||(z.contact?1:0),")"]}),e.jsxs("button",{onClick:()=>E("activities"),className:"pb-3 text-sm font-medium transition-colors border-b-2 "+("activities"===H?"border-accent-primary text-white":"border-transparent text-gray-500 hover:text-gray-300"),children:["Activities (",q.length,")"]})]})}),"overview"===H&&e.jsx("div",{className:"space-y-3",children:0===T.length?e.jsx("div",{className:"text-center py-12 border-2 border-dashed border-dark-border rounded-xl",children:e.jsx("p",{className:"text-gray-500",children:"No quotes yet for this client."})}):T.map(t=>{const r=c(t.sections||{},t.fees||{});return e.jsx("div",{onClick:()=>(e=>{M(e),h()})(t),className:"card hover:border-accent-primary/50 transition-colors cursor-pointer group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("span",{className:"font-mono font-medium text-accent-primary",children:t.quoteNumber}),e.jsxs("select",{value:t.status||"draft",onChange:e=>((e,t,r)=>{r.stopPropagation(),"rejected"===t||"expired"===t||"dead"===t?ee({open:!0,quoteId:e,newStatus:t}):v(e,t)})(t.id,e.target.value,e),onClick:e=>e.stopPropagation(),className:`text-xs px-2 py-0.5 rounded-full border-0 cursor-pointer ${xe[t.status||"draft"]}`,children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"under_review",children:"Under Review"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"won",children:"Won"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"expired",children:"Expired"}),e.jsx("option",{value:"dead",children:"Dead"})]}),t.project?.startDate&&e.jsx("span",{className:"text-xs text-gray-500 bg-white/5 px-2 py-0.5 rounded",children:new Date(t.project.startDate).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.jsx("span",{children:z.contacts?.find(e=>e.id===t.client?.contactId)?.name||t.client?.contact||"Unknown Contact"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:t.project?.title||"Untitled Project"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-gray-200",children:d(r.totalCharge,t.currency||"USD")}),e.jsx("div",{className:"flex items-center gap-2 mt-2 opacity-0 group-hover:opacity-100 transition-opacity justify-end",children:e.jsx("button",{onClick:e=>((e,t)=>{t.stopPropagation(),confirm("Are you sure you want to delete this quote?")&&b(e)})(t.id,e),className:"p-1 text-gray-500 hover:text-red-400 transition-colors",title:"Delete quote",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]})]})},t.id)})}),"opportunities"===H&&e.jsxs("div",{className:"space-y-4",children:[I.length>0&&e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"card bg-gradient-to-br from-cyan-900/20 to-cyan-950/10 border-cyan-800/20 text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-cyan-400",children:I.filter(e=>"active"===e.status).length})]}),e.jsxs("div",{className:"card bg-gradient-to-br from-emerald-900/20 to-emerald-950/10 border-emerald-800/20 text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"Pipeline"}),e.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:d(I.filter(e=>"active"===e.status).reduce((e,t)=>e+(t.value||0),0),"USD",0)})]}),e.jsxs("div",{className:"card bg-gradient-to-br from-amber-900/20 to-amber-950/10 border-amber-800/20 text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"Weighted"}),e.jsx("p",{className:"text-2xl font-bold text-amber-400",children:d(I.filter(e=>"active"===e.status).reduce((e,t)=>e+(t.value||0)*((t.probability||0)/100),0),"USD",0)})]})]}),0===I.length?e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-dark-border rounded-xl",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No opportunities for this client yet"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Create opportunities from the Opportunities page"})]}):I.map(t=>e.jsx("div",{onClick:()=>p&&p(t.id),className:"card hover:border-accent-primary/50 transition-colors cursor-pointer group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("span",{className:"font-medium text-gray-200",children:t.title||"Untitled Opportunity"}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${(e=>{switch(e){case"won":return"text-green-400 bg-green-500/10 border-green-500/20";case"lost":return"text-red-400 bg-red-500/10 border-red-500/20";default:return"text-blue-400 bg-blue-500/10 border-blue-500/20"}})(t.status)}`,children:t.status}),t.probability>0&&e.jsxs("span",{className:"text-xs text-amber-400",children:[t.probability,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[t.country&&e.jsx("span",{children:t.country}),t.nextAction&&e.jsxs("span",{className:"text-cyan-400",children:["→ ",t.nextAction]})]})]}),e.jsxs("div",{className:"text-right flex items-center gap-4",children:[e.jsx("p",{className:"text-lg font-bold text-gray-200",children:d(t.value||0,t.currency||"USD",0)}),e.jsx("button",{onClick:e=>{e.stopPropagation(),window.confirm("Delete this opportunity?")&&D(t.id)},className:"p-1 text-gray-500 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete opportunity",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},t.id))]}),"contacts"===H&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-200",children:"Key People"}),e.jsx("button",{onClick:()=>se(),className:"btn-secondary text-xs",children:"+ Add Contact"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[z.contacts?.map(t=>{const a=T.filter(e=>e.client?.contactId===t.id),n=a.filter(e=>"won"===e.status),s=n.length,i=s+a.filter(e=>"dead"===e.status||"rejected"===e.status).length,o=i>0?Math.round(s/i*100):null,l=n.reduce((e,t)=>e+(c(t.sections||{},t.fees||{}).totalCharge||0),0);return e.jsxs("div",{className:"card group relative",children:[e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>se(t),className:"p-1 text-gray-400 hover:text-white",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),e.jsx("button",{onClick:()=>{return e=t.id,void(confirm("Delete this contact?")&&k(r,e));var e},className:"p-1 text-gray-400 hover:text-red-400",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold "+(t.isPrimary?"bg-accent-primary text-white":"bg-gray-700 text-gray-300"),children:t.name.charAt(0)}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-gray-200",children:[t.name,t.isPrimary&&e.jsx("span",{className:"ml-2 text-[10px] bg-accent-primary/20 text-accent-primary px-1.5 py-0.5 rounded",children:"PRIMARY"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:t.role||"No Role"}),t.accountHolderId&&e.jsxs("p",{className:"text-xs text-accent-primary/80 flex items-center gap-1 mt-0.5",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),A.find(e=>e.id===t.accountHolderId)?.name||"Unknown"]})]})]}),a.length>0&&e.jsxs("div",{className:"mb-3 bg-white/5 rounded-lg p-2",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-bold text-white",children:a.length}),e.jsx("p",{className:"text-[10px] text-gray-500 uppercase",children:"Quotes"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-bold text-green-400",children:s}),e.jsx("p",{className:"text-[10px] text-gray-500 uppercase",children:"Won"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-bold "+(null!==o?o>=50?"text-green-400":"text-amber-400":"text-gray-500"),children:null!==o?`${o}%`:"-"}),e.jsx("p",{className:"text-[10px] text-gray-500 uppercase",children:"Win Rate"})]})]}),l>0&&e.jsxs("div",{className:"text-center pt-2 border-t border-white/10",children:[e.jsx("p",{className:"text-lg font-bold text-accent-primary",children:d(l,"USD")}),e.jsx("p",{className:"text-[10px] text-gray-500 uppercase",children:"Lifetime Value"})]})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-400",children:[t.email&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),e.jsx("a",{href:`mailto:${t.email}`,className:"hover:text-white transition-colors",children:t.email})]}),t.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),e.jsx("span",{children:t.phone})]}),t.linkedIn&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-[#0A66C2]",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})}),e.jsx("a",{href:t.linkedIn.startsWith("http")?t.linkedIn:`https://${t.linkedIn}`,target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#0A66C2] transition-colors",children:t.linkedIn.replace(/^https?:\/\/(www\.)?/,"")})]}),t.notes&&e.jsx("div",{className:"mt-2 pt-2 border-t border-white/5",children:e.jsx("p",{className:"text-xs text-gray-500 italic",children:t.notes})})]})]},t.id)}),0===z.contacts?.length&&z.contact&&e.jsxs("div",{className:"card border-dashed border-gray-700 opacity-70",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center text-sm font-bold text-gray-300",children:z.contact.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-200",children:z.contact}),e.jsx("p",{className:"text-sm text-gray-500",children:"Legacy Contact"})]})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-400",children:[z.email&&e.jsx("p",{children:z.email}),z.phone&&e.jsx("p",{children:z.phone})]}),e.jsx("p",{className:"text-xs text-amber-500 mt-2",children:"Migrate this to a proper contact by editing."})]})]})]}),"activities"===H&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-200",children:"Activity History"}),e.jsxs("button",{onClick:()=>K(!0),className:"btn-primary text-sm flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Log Activity"]})]}),e.jsx(me,{activities:q,onDelete:P,onCompleteFollowUp:W,emptyMessage:"No activities logged yet. Start tracking your interactions with this client."})]}),Y&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/75 backdrop-blur-md modal-backdrop",children:e.jsxs("div",{className:"bg-dark-card border border-dark-border rounded-xl p-6 w-full max-w-md shadow-2xl modal-content relative",children:[e.jsx("button",{onClick:()=>{Q(!1),_({})},className:"absolute top-4 right-4 p-1 text-gray-500 hover:text-white rounded-lg hover:bg-white/10 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-xl font-bold text-gray-100 mb-1",children:$?"Edit Contact":"Add New Contact"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Add contact details for this client."}),e.jsxs("form",{onSubmit:e=>{e.preventDefault();const{isValid:t,errors:a}=u(G,{name:{required:!0,label:"Name",minLength:2}});if(!t)return void _(a);const n={...G,name:m(G.name),role:m(G.role)};$?N(r,$,n):w(r,n),Q(!1),_({})},className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"label label-required",children:"Name"}),e.jsx("input",{type:"text",required:!0,value:G.name,onChange:e=>{R({...G,name:e.target.value}),X.name&&_({...X,name:null})},className:"input "+(X.name?"border-red-500 focus:ring-red-500":""),placeholder:"Full name"}),X.name&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:X.name})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"label",children:"Role / Title"}),e.jsx("input",{type:"text",value:G.role,onChange:e=>R({...G,role:e.target.value}),className:"input",placeholder:"e.g. Marketing Director"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Email"}),e.jsx("input",{type:"email",value:G.email,onChange:e=>{R({...G,email:e.target.value}),X.email&&_({...X,email:null})},className:"input "+(X.email?"border-red-500 focus:ring-red-500":""),placeholder:"email@company.com"}),X.email&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:X.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Phone"}),e.jsx("input",{type:"text",value:G.phone,onChange:e=>{R({...G,phone:e.target.value}),X.phone&&_({...X,phone:null})},className:"input "+(X.phone?"border-red-500 focus:ring-red-500":""),placeholder:"+65 9123 4567"}),X.phone&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:X.phone})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-[#0A66C2]",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})}),"LinkedIn Profile"]}),e.jsx("input",{type:"text",value:G.linkedIn||"",onChange:e=>R({...G,linkedIn:e.target.value}),className:"input",placeholder:"linkedin.com/in/username"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Account Holder"}),e.jsxs("select",{value:G.accountHolderId||"",onChange:e=>R({...G,accountHolderId:e.target.value}),className:"input",children:[e.jsx("option",{value:"",children:"-- Unassigned --"}),A.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx("p",{className:"form-helper",children:"Assign a team member responsible for this contact"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Notes"}),e.jsx("textarea",{value:G.notes||"",onChange:e=>R({...G,notes:e.target.value}),className:"input min-h-[80px] resize-none",placeholder:"Internal notes about this contact..."}),e.jsx("p",{className:"form-helper",children:"Internal notes only - not shown on quotes"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-dark-bg/50 rounded-lg border border-dark-border",children:[e.jsx("input",{type:"checkbox",id:"isPrimary",checked:G.isPrimary,onChange:e=>R({...G,isPrimary:e.target.checked}),className:"w-4 h-4 rounded border-gray-600 bg-dark-bg text-accent-primary focus:ring-accent-primary focus:ring-offset-0"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"isPrimary",className:"text-sm font-medium text-gray-200 cursor-pointer",children:"Set as Primary Contact"}),e.jsx("p",{className:"text-xs text-gray-500",children:"This contact will be the default for new quotes"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-800/50",children:[e.jsx("button",{type:"button",onClick:()=>{Q(!1),_({})},className:"btn-ghost",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary",children:$?"Save Changes":"Add Contact"})]})]})]})}),Z.open&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/75 backdrop-blur-md modal-backdrop p-4",children:e.jsxs("div",{className:"bg-dark-card border border-dark-border rounded-xl p-6 w-full max-w-md shadow-2xl",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-100 mb-2",children:"rejected"===Z.newStatus?"Quote Rejected":"expired"===Z.newStatus?"Quote Expired":"Quote Lost"}),e.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Help us track why this opportunity didn't close"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label label-required",children:"Reason"}),e.jsxs("select",{value:te,onChange:e=>re(e.target.value),className:"input",required:!0,children:[e.jsx("option",{value:"",children:"Select reason..."}),e.jsx("option",{value:"price",children:"Price too high"}),e.jsx("option",{value:"timing",children:"Wrong timing"}),e.jsx("option",{value:"lost_to_competitor",children:"Lost to competitor"}),e.jsx("option",{value:"no_budget",children:"No budget"}),e.jsx("option",{value:"requirements_mismatch",children:"Requirements didn't match"}),e.jsx("option",{value:"client_unresponsive",children:"Client unresponsive"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Additional Notes"}),e.jsx("textarea",{value:ae,onChange:e=>ne(e.target.value),placeholder:"Any additional context...",rows:3,className:"input resize-none"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-dark-border",children:[e.jsx("button",{onClick:()=>{ee({open:!1,quoteId:null,newStatus:null}),re(""),ne("")},className:"btn-ghost",children:"Cancel"}),e.jsx("button",{onClick:()=>{Z.quoteId&&Z.newStatus&&v(Z.quoteId,Z.newStatus,"",te,ae),ee({open:!1,quoteId:null,newStatus:null}),re(""),ne("")},disabled:!te,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:"Update Status"})]})]})}),e.jsx(he,{isOpen:J,onClose:()=>K(!1),clientId:r,contacts:z.contacts||[]})]})}export{pe as default};
