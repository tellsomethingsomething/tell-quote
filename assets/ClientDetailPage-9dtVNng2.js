import{j as e}from"./pdf-vendor-CqWdlgKa.js";import{r as t}from"./zustand-vendor-BohoUguQ.js";import{u as s,a as r,b as a,g as n,c as i,d as o,f as l}from"./index-qIMeUE46.js";import{u as c,C as d}from"./contactStore-DEZO6BUG.js";import{A as x}from"./ActivityTimeline-Bm7xZSh3.js";import{L as m}from"./LogActivityModal-BZwTrHA2.js";import{C as p,a as u}from"./ContactForm-hqbNHC-k.js";import"./react-vendor-DRPWudcR.js";import"./supabase-vendor-DWEVVlJw.js";function h({clientId:s,contacts:r=[],onContactSelect:a,compact:n=!1,showAddButton:i=!0}){const{addContact:o,updateContact:l,deleteContact:x}=c(),[m,h]=t.useState(!1),[g,j]=t.useState(null),[v,b]=t.useState(!1),[y,N]=t.useState("all"),[f,w]=t.useState(""),k=t.useMemo(()=>{let e=r;if("all"!==y&&(e="primary"===y?e.filter(e=>e.isPrimary):e.filter(e=>e.role===y)),f.trim()){const t=f.toLowerCase();e=e.filter(e=>(e.firstName?.toLowerCase()||"").includes(t)||(e.lastName?.toLowerCase()||"").includes(t)||(e.email?.toLowerCase()||"").includes(t)||(e.jobTitle?.toLowerCase()||"").includes(t))}return e},[r,y,f]),C=e=>{j(e),h(!0)},L=async e=>{await x(e)};return n?e.jsx("div",{className:"space-y-1",children:0===r.length?e.jsx("p",{className:"text-sm text-gray-500 py-2",children:"No contacts"}):r.map(t=>e.jsx(p,{contact:t,compact:!0,onSelect:a},t.id))}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-xs",children:[e.jsx("input",{type:"text",value:f,onChange:e=>w(e.target.value),placeholder:"Search contacts...",className:"input w-full pl-9"}),e.jsx("svg",{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),e.jsxs("select",{value:y,onChange:e=>N(e.target.value),className:"input",children:[e.jsx("option",{value:"all",children:"All Contacts"}),e.jsx("option",{value:"primary",children:"Primary Only"}),d.map(t=>e.jsx("option",{value:t.id,children:t.label},t.id))]})]}),i&&!m&&e.jsxs("button",{onClick:()=>h(!0),className:"btn btn-primary flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Contact"]})]}),m&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-200 mb-4",children:g?"Edit Contact":"Add New Contact"}),e.jsx(u,{contact:g,clientId:s,onSave:async e=>{b(!0);try{g?await l(g.id,e):await o(e),h(!1),j(null)}catch(t){}finally{b(!1)}},onCancel:()=>{h(!1),j(null)},isLoading:v})]}),0===k.length?e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-dark-border/50 rounded-xl bg-dark-bg/30",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),f||"all"!==y?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"No contacts match your filters"}),e.jsx("button",{onClick:()=>{w(""),N("all")},className:"text-brand-teal text-sm mt-2 hover:underline",children:"Clear filters"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"No contacts yet"}),i&&e.jsx("button",{onClick:()=>h(!0),className:"text-brand-teal text-sm mt-2 hover:underline",children:"Add your first contact"})]})]}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:k.map(t=>e.jsx(p,{contact:t,onEdit:C,onDelete:L,onSelect:a},t.id))}),r.length>0&&e.jsx("p",{className:"text-xs text-gray-600 text-right",children:k.length===r.length?`${r.length} contact${1===r.length?"":"s"}`:`${k.length} of ${r.length} contacts`})]})}const g={draft:"bg-amber-400/20 text-amber-400",sent:"bg-blue-400/20 text-blue-400",under_review:"bg-yellow-400/20 text-yellow-400",approved:"bg-emerald-500/20 text-emerald-500",won:"bg-green-500/20 text-green-500",rejected:"bg-red-500/20 text-red-500",expired:"bg-gray-600/20 text-gray-500",dead:"bg-red-500/20 text-red-500"};function j({clientId:d,onBackToDashboard:p,onEditQuote:u,onNewQuote:j,onSelectOpportunity:v}){const{getClient:b,getClientQuotes:y,deleteQuote:N,updateQuoteStatus:f,deleteClient:w,updateClient:k}=s(),{loadQuoteData:C}=r(),{settings:L}=a(),{getClientOpportunities:S,deleteOpportunity:A}=n(),{getClientActivities:M,deleteActivity:D,completeTask:T}=i(),{getClientContacts:I,initialize:W}=c();L.users;const E=b(d),B=y(d),q=S(d),z=M(d),P=I(d);t.useEffect(()=>{W()},[W]);const[H,U]=t.useState("overview"),[Q,_]=t.useState(!1),[O,R]=t.useState({}),[$,F]=t.useState(!1),[V,G]=t.useState({open:!1,quoteId:null,newStatus:null}),[Y,K]=t.useState(""),[X,J]=t.useState("");if(t.useEffect(()=>{const e=e=>{"Escape"===e.key&&Q&&_(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[Q]),!E)return e.jsx("div",{className:"h-[calc(100vh-60px)] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-400",children:"Client not found"}),e.jsx("button",{onClick:p,className:"btn-ghost mt-4",children:"Back to Dashboard"})]})});return e.jsxs("div",{className:"h-[calc(100vh-60px)] overflow-y-auto p-6 relative",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1",children:[Q?e.jsxs("form",{onSubmit:e=>{e.preventDefault(),k(E.id,O),_(!1)},className:"flex gap-2 items-center flex-wrap",children:[e.jsx("input",{className:"input py-1 px-2 text-xl font-bold w-full md:w-auto",value:O.company,onChange:e=>R({...O,company:e.target.value})}),e.jsxs("select",{value:O.region,onChange:e=>R({...O,region:e.target.value}),className:"input py-1 px-2 text-sm w-32",children:[e.jsx("option",{value:"MALAYSIA",children:"Malaysia"}),e.jsx("option",{value:"SEA",children:"SEA"}),e.jsx("option",{value:"GULF",children:"Gulf"}),e.jsx("option",{value:"CENTRAL_ASIA",children:"Central Asia"})]}),e.jsxs("div",{className:"flex gap-1 ml-auto md:ml-0",children:[e.jsx("button",{type:"submit",className:"btn-primary py-1 px-3 text-xs",children:"Save"}),e.jsx("button",{type:"button",onClick:()=>_(!1),className:"btn-ghost py-1 px-3 text-xs",children:"Cancel"})]})]}):e.jsxs("div",{className:"flex items-center gap-3 group",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-100",children:E.company}),e.jsx("button",{onClick:()=>{R({company:E.company,website:E.website,location:E.location,region:E.region||"MALAYSIA",notes:E.notes,paymentTerms:E.paymentTerms||"net30",preferredCurrency:E.preferredCurrency||"USD",industry:E.industry||""}),_(!0)},className:"opacity-0 group-hover:opacity-100 p-1 text-gray-500 hover:text-white transition-opacity",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mt-1",children:[E.location&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsxs("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),E.location]}),E.website&&e.jsxs("a",{href:E.website.startsWith("http")?E.website:`https://${E.website}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 hover:text-accent-primary transition-colors",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),E.website.replace(/^https?:\/\//,"")]}),e.jsxs("span",{children:[B.length," Projects"]})]})]}),e.jsxs("button",{onClick:()=>j(d),className:"btn-primary text-sm flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Quote"]}),e.jsx("button",{onClick:()=>{window.confirm(`Delete ${E.company} and all its data? This cannot be undone.`)&&(w(E.id),p())},className:"p-2 text-gray-500 hover:text-red-400 hover:bg-red-400/10 rounded-lg transition-colors",title:"Delete Client",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),(E.industry||E.paymentTerms||E.preferredCurrency)&&e.jsxs("div",{className:"mb-8 grid grid-cols-2 md:grid-cols-4 gap-4",children:[E.industry&&e.jsxs("div",{className:"card bg-dark-bg/50",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Industry"}),e.jsx("p",{className:"text-sm text-gray-200",children:E.industry})]}),E.paymentTerms&&e.jsxs("div",{className:"card bg-dark-bg/50",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Payment Terms"}),e.jsx("p",{className:"text-sm text-gray-200",children:"immediate"===E.paymentTerms?"Immediate":"net7"===E.paymentTerms?"Net 7":"net14"===E.paymentTerms?"Net 14":"net30"===E.paymentTerms?"Net 30":"net45"===E.paymentTerms?"Net 45":"net60"===E.paymentTerms?"Net 60":"net90"===E.paymentTerms?"Net 90":E.paymentTerms})]}),E.preferredCurrency&&e.jsxs("div",{className:"card bg-dark-bg/50",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Preferred Currency"}),e.jsx("p",{className:"text-sm text-gray-200",children:E.preferredCurrency})]}),e.jsxs("div",{className:"card bg-dark-bg/50",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Region"}),e.jsx("p",{className:"text-sm text-gray-200",children:"MALAYSIA"===E.region?"Malaysia":"SEA"===E.region?"South East Asia":"GULF"===E.region?"Gulf":"CENTRAL_ASIA"===E.region?"Central Asia":E.region||"Not set"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-400 mb-3 uppercase tracking-wider",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:(E.tags||[]).map((t,s)=>e.jsxs("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-accent-primary/10 text-accent-primary border border-accent-primary/20 flex items-center gap-1",children:[t,e.jsx("button",{onClick:()=>{const e=E.tags.filter((e,t)=>t!==s);k(E.id,{tags:e})},className:"hover:text-white",children:"×"})]},s))}),e.jsx("div",{className:"flex gap-2 max-w-xs",children:e.jsx("input",{type:"text",placeholder:"Add tag...",className:"input-sm flex-1 bg-dark-card border-none",onKeyDown:e=>{if("Enter"===e.key&&e.target.value.trim()){const t=e.target.value.trim(),s=E.tags||[];s.includes(t)||k(E.id,{tags:[...s,t]}),e.target.value=""}}})})]}),e.jsx("div",{className:"border-b border-dark-border mb-6",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsx("button",{onClick:()=>U("overview"),className:"pb-3 text-sm font-medium transition-colors border-b-2 "+("overview"===H?"border-accent-primary text-white":"border-transparent text-gray-500 hover:text-gray-300"),children:"Quotes & Projects"}),e.jsxs("button",{onClick:()=>U("opportunities"),className:"pb-3 text-sm font-medium transition-colors border-b-2 "+("opportunities"===H?"border-accent-primary text-white":"border-transparent text-gray-500 hover:text-gray-300"),children:["Opportunities (",q.length,")"]}),e.jsxs("button",{onClick:()=>U("contacts"),className:"pb-3 text-sm font-medium transition-colors border-b-2 "+("contacts"===H?"border-accent-primary text-white":"border-transparent text-gray-500 hover:text-gray-300"),children:["Contacts (",P.length,")"]}),e.jsxs("button",{onClick:()=>U("activities"),className:"pb-3 text-sm font-medium transition-colors border-b-2 "+("activities"===H?"border-accent-primary text-white":"border-transparent text-gray-500 hover:text-gray-300"),children:["Activities (",z.length,")"]})]})}),"overview"===H&&e.jsx("div",{className:"space-y-3",children:0===B.length?e.jsx("div",{className:"text-center py-12 border-2 border-dashed border-dark-border rounded-xl",children:e.jsx("p",{className:"text-gray-500",children:"No quotes yet for this client."})}):B.map(t=>{const s=o(t.sections||{},t.fees||{});return e.jsx("div",{onClick:()=>(e=>{C(e),u()})(t),className:"card hover:border-accent-primary/50 transition-colors cursor-pointer group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("span",{className:"font-mono font-medium text-accent-primary",children:t.quoteNumber}),e.jsxs("select",{value:t.status||"draft",onChange:e=>((e,t,s)=>{s.stopPropagation(),"rejected"===t||"expired"===t||"dead"===t?G({open:!0,quoteId:e,newStatus:t}):f(e,t)})(t.id,e.target.value,e),onClick:e=>e.stopPropagation(),className:`text-xs px-2 py-0.5 rounded-full border-0 cursor-pointer ${g[t.status||"draft"]}`,children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"under_review",children:"Under Review"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"won",children:"Won"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"expired",children:"Expired"}),e.jsx("option",{value:"dead",children:"Dead"})]}),t.project?.startDate&&e.jsx("span",{className:"text-xs text-gray-500 bg-white/5 px-2 py-0.5 rounded",children:new Date(t.project.startDate).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.jsx("span",{children:E.contacts?.find(e=>e.id===t.client?.contactId)?.name||t.client?.contact||"Unknown Contact"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:t.project?.title||"Untitled Project"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-gray-200",children:l(s.totalCharge,t.currency||"USD")}),e.jsx("div",{className:"flex items-center gap-2 mt-2 opacity-0 group-hover:opacity-100 transition-opacity justify-end",children:e.jsx("button",{onClick:e=>((e,t)=>{t.stopPropagation(),confirm("Are you sure you want to delete this quote?")&&N(e)})(t.id,e),className:"p-1 text-gray-500 hover:text-red-400 transition-colors",title:"Delete quote",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]})]})},t.id)})}),"opportunities"===H&&e.jsxs("div",{className:"space-y-4",children:[q.length>0&&e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"card bg-gradient-to-br from-cyan-900/20 to-cyan-950/10 border-cyan-800/20 text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-cyan-400",children:q.filter(e=>"active"===e.status).length})]}),e.jsxs("div",{className:"card bg-gradient-to-br from-emerald-900/20 to-emerald-950/10 border-emerald-800/20 text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"Pipeline"}),e.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:l(q.filter(e=>"active"===e.status).reduce((e,t)=>e+(t.value||0),0),"USD",0)})]}),e.jsxs("div",{className:"card bg-gradient-to-br from-amber-900/20 to-amber-950/10 border-amber-800/20 text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"Weighted"}),e.jsx("p",{className:"text-2xl font-bold text-amber-400",children:l(q.filter(e=>"active"===e.status).reduce((e,t)=>e+(t.value||0)*((t.probability||0)/100),0),"USD",0)})]})]}),0===q.length?e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-dark-border rounded-xl",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No opportunities for this client yet"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Create opportunities from the Opportunities page"})]}):q.map(t=>e.jsx("div",{onClick:()=>v&&v(t.id),className:"card hover:border-accent-primary/50 transition-colors cursor-pointer group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("span",{className:"font-medium text-gray-200",children:t.title||"Untitled Opportunity"}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${(e=>{switch(e){case"won":return"text-green-400 bg-green-500/10 border-green-500/20";case"lost":return"text-red-400 bg-red-500/10 border-red-500/20";default:return"text-blue-400 bg-blue-500/10 border-blue-500/20"}})(t.status)}`,children:t.status}),t.probability>0&&e.jsxs("span",{className:"text-xs text-amber-400",children:[t.probability,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[t.country&&e.jsx("span",{children:t.country}),t.nextAction&&e.jsxs("span",{className:"text-cyan-400",children:["→ ",t.nextAction]})]})]}),e.jsxs("div",{className:"text-right flex items-center gap-4",children:[e.jsx("p",{className:"text-lg font-bold text-gray-200",children:l(t.value||0,t.currency||"USD",0)}),e.jsx("button",{onClick:e=>{e.stopPropagation(),window.confirm("Delete this opportunity?")&&A(t.id)},className:"p-1 text-gray-500 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete opportunity",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},t.id))]}),"contacts"===H&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-4",children:"Key People"}),e.jsx(h,{clientId:d,contacts:P})]}),"activities"===H&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-200",children:"Activity History"}),e.jsxs("button",{onClick:()=>F(!0),className:"btn-primary text-sm flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Log Activity"]})]}),e.jsx(x,{activities:z,onDelete:D,onCompleteTask:T,emptyMessage:"No activities logged yet. Start tracking your interactions with this client."})]}),V.open&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/75 backdrop-blur-md modal-backdrop p-4",children:e.jsxs("div",{className:"bg-[#1a1f2e] border border-dark-border rounded-xl p-6 w-full max-w-md shadow-2xl",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-100 mb-2",children:"rejected"===V.newStatus?"Quote Rejected":"expired"===V.newStatus?"Quote Expired":"Quote Lost"}),e.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Help us track why this opportunity didn't close"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label label-required",children:"Reason"}),e.jsxs("select",{value:Y,onChange:e=>K(e.target.value),className:"input",required:!0,children:[e.jsx("option",{value:"",children:"Select reason..."}),e.jsx("option",{value:"price",children:"Price too high"}),e.jsx("option",{value:"timing",children:"Wrong timing"}),e.jsx("option",{value:"lost_to_competitor",children:"Lost to competitor"}),e.jsx("option",{value:"no_budget",children:"No budget"}),e.jsx("option",{value:"requirements_mismatch",children:"Requirements didn't match"}),e.jsx("option",{value:"client_unresponsive",children:"Client unresponsive"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Additional Notes"}),e.jsx("textarea",{value:X,onChange:e=>J(e.target.value),placeholder:"Any additional context...",rows:3,className:"input resize-none"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-dark-border",children:[e.jsx("button",{onClick:()=>{G({open:!1,quoteId:null,newStatus:null}),K(""),J("")},className:"btn-ghost",children:"Cancel"}),e.jsx("button",{onClick:()=>{V.quoteId&&V.newStatus&&f(V.quoteId,V.newStatus,"",Y,X),G({open:!1,quoteId:null,newStatus:null}),K(""),J("")},disabled:!Y,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:"Update Status"})]})]})}),e.jsx(m,{isOpen:$,onClose:()=>F(!1),clientId:d,contacts:P})]})}export{j as default};
